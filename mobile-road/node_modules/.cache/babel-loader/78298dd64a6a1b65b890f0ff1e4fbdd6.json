{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';// React\nimport bridge from'@vkontakte/vk-bridge';// VK Brige\nimport{Button,Group,Alert,Avatar,Separator,Header,SimpleCell,Div,View,ScreenSpinner,ModalRoot,ModalCard,ModalPage,ModalPageHeader,Input,FormLayout,FormStatus,Slider}from'@vkontakte/vkui';import'@vkontakte/vkui/dist/vkui.css';import'../../style.css';// Импортируем панели\nimport NewTicket from'./panels/new_tiket';import Questions from'./panels/questions';import Tiket from'../../components/tiket';import OtherProfile from'../../components/other_profile';import Icon24Dismiss from'@vkontakte/icons/dist/24/dismiss';import Icon28FavoriteOutline from'@vkontakte/icons/dist/28/favorite_outline';import Icon56FireOutline from'@vkontakte/icons/dist/56/fire_outline';import Icon28CoinsOutline from'@vkontakte/icons/dist/28/coins_outline';import Icon28BillheadOutline from'@vkontakte/icons/dist/28/billhead_outline';import Icon28FireOutline from'@vkontakte/icons/dist/28/fire_outline';var queryString=require('query-string');// const platformname = (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));\n// const parsedHash = queryString.parse(window.location.search.replace('?', ''));\nvar hash=queryString.parse(window.location.hash);var Main=/*#__PURE__*/function(_React$Component){_inherits(Main,_React$Component);var _super=_createSuper(Main);function Main(props){var _this;_classCallCheck(this,Main);_this=_super.call(this,props);_this.state={api_url:\"https://xelene.ru/road/php/index.php?\",activePanel:'questions',activeModal:null,modalHistory:[],popout:_this.props.popout,ticket_id:null,history:['questions'],active_other_profile:0,other_profile:null,ban_reason:\"\",comment:'',transfer:{'avatar':'','comment':''},AgeUser:0};_this.changeData=_this.props.this.changeData;_this.playAudio=_this.props.this.playAudio;_this.ReloadProfile=_this.props.reloadProfile;// this.copy = this.props.this.copy;\n// this.recordHistory = (panel) => {\n//   this.setState({history: [...this.state.history, panel]})\n// }\n_this.setPopout=function(value){_this.setState({popout:value});};_this.goTiket=function(id){_this.setPopout(/*#__PURE__*/React.createElement(ScreenSpinner,null));_this.setState({ticket_id:id});_this.goPanel('ticket');_this.setPopout(null);};_this.onChange=function(event){var name=event.currentTarget.name;var value=event.currentTarget.value;_this.setState(_defineProperty({},name,value));};_this.goOtherProfile=function(id){_this.setState({active_other_profile:id});_this.goPanel(\"other_profile\");};_this.modalBack=function(){_this.setActiveModal(_this.state.modalHistory[_this.state.modalHistory.length-2]);};_this.goBack=function(){var history=_this.state.history;if(history.length===1){bridge.send(\"VKWebAppClose\",{\"status\":\"success\"});}else if(history.length>1){history.pop();_this.setState({activePanel:history[history.length-1]});if(history[history.length-1]==='ticket'){_this.changeData('need_epic',false);}else{_this.changeData('need_epic',true);}}};_this.goPanel=function(panel){_this.setState({history:[].concat(_toConsumableArray(_this.state.history),[panel]),activePanel:panel});if(panel==='ticket'){_this.changeData('need_epic',false);}else{_this.changeData('need_epic',true);}};_this.setActiveModal=function(activeModal){activeModal=activeModal||null;var modalHistory=_this.state.modalHistory?_toConsumableArray(_this.state.modalHistory):[];if(activeModal===null){modalHistory=[];}else if(modalHistory.indexOf(activeModal)!==-1){modalHistory=modalHistory.splice(0,modalHistory.indexOf(activeModal)+1);}else{modalHistory.push(activeModal);}_this.setState({activeModal:activeModal,modalHistory:modalHistory});};_this.showAlert=function(title,text){_this.setState({popout:/*#__PURE__*/React.createElement(Alert,{actions:[{title:'Закрыть',autoclose:true,mode:'cancel'}],onClose:function onClose(){return _this.setPopout(null);}},/*#__PURE__*/React.createElement(\"h2\",null,title),/*#__PURE__*/React.createElement(\"p\",null,text))});};_this.showErrorAlert=function(){var error=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;_this.setPopout(/*#__PURE__*/React.createElement(Alert,{actions:[{title:'Отмена',autoclose:true,mode:'cancel'}],onClose:function onClose(){return _this.setPopout(null);}},/*#__PURE__*/React.createElement(\"h2\",null,\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430\"),error?/*#__PURE__*/React.createElement(\"p\",null,error):/*#__PURE__*/React.createElement(\"p\",null,\"\\u0427\\u0442\\u043E-\\u0442\\u043E \\u043F\\u043E\\u0448\\u043B\\u043E \\u043D\\u0435 \\u0442\\u0430\\u043A, \\u043F\\u043E\\u043F\\u0440\\u043E\\u0431\\u0443\\u0439\\u0442\\u0435 \\u0441\\u043D\\u043E\\u0432\\u0430!\")));};return _this;}_createClass(Main,[{key:\"ChangeAge\",value:function ChangeAge(age){var _this2=this;this.setState({popout:/*#__PURE__*/React.createElement(ScreenSpinner,null)});fetch(this.state.api_url+\"method=account.setAge&age=\"+age+\"&\"+window.location.search.replace('?','')).then(function(res){return res.json();}).then(function(data){if(data.result){_this2.setState({popout:null});// setTimeout(() => {\n//   this.playAudio()\n// }, 5000)\n}}).catch(function(err){_this2.showErrorAlert();});}},{key:\"userBan\",value:function userBan(user_id,text){var _this3=this;this.setPopout(/*#__PURE__*/React.createElement(ScreenSpinner,null));fetch(this.state.api_url+\"method=account.ban&agent_id=\"+user_id+\"&banned=true&reason=\"+text+\"&\"+window.location.search.replace('?','')).then(function(res){return res.json();}).then(function(data){if(data.result){_this3.setActiveModal(null);_this3.showAlert('Успех','Пользователь забанен');_this3.setPopout(null);}else{_this3.showErrorAlert(data.error.message);}}).catch(function(err){_this3.showErrorAlert(err);});}},{key:\"getRandomTiket\",value:function getRandomTiket(){var _this4=this;fetch(this.state.api_url+\"method=ticket.getRandom&\"+window.location.search.replace('?','')).then(function(res){return res.json();}).then(function(data){if(data.result){_this4.goTiket(data.response.id);}else{_this4.showErrorAlert(data.error.message);}}).catch(function(err){_this4.showErrorAlert(err);});}},{key:\"componentDidMount\",value:function componentDidMount(){if(hash.ticket_id!==undefined){this.goTiket(hash.ticket_id);bridge.send(\"VKWebAppSetLocation\",{\"location\":\"\"});}if(hash.agent_id!==undefined){this.goOtherProfile(hash.agent_id);bridge.send(\"VKWebAppSetLocation\",{\"location\":\"\"});//   if(window.history.pushState) {\n//     window.history.pushState('', '/', window.location.pathname + window.location.search)\n// } else {\n//     window.location.hash = '';\n// }\n}}},{key:\"render\",value:function render(){var _this5=this;var modal=/*#__PURE__*/React.createElement(ModalRoot,{activeModal:this.state.activeModal},/*#__PURE__*/React.createElement(ModalPage,{id:\"start\",onClose:this.modalBack,dynamicContentHeight:true,header:/*#__PURE__*/React.createElement(ModalPageHeader,null,\"\\u0414\\u043E\\u0431\\u0440\\u043E \\u043F\\u043E\\u0436\\u0430\\u043B\\u043E\\u0432\\u0430\\u0442\\u044C \\u0432 \\u0438\\u0433\\u0440\\u0443\")},/*#__PURE__*/React.createElement(Div,{style:{marginTop:0}},/*#__PURE__*/React.createElement(\"img\",{className:\"AvaModalPage\",src:this.props.account.id!==undefined?this.props.account.avatar.url:null,size:70,alt:\"\\u0442\\u0432\\u043E\\u044F \\u0430\\u0432\\u0430\"}),/*#__PURE__*/React.createElement(Header,{subtitle:\"\\u041F\\u043E\\u043C\\u043D\\u0438\\u0442\\u0435, \\u043E\\u0442\\u0432\\u0435\\u0447\\u0430\\u0442\\u044C \\u043D\\u0443\\u0436\\u043D\\u043E \\u0432\\u0434\\u0443\\u043C\\u0447\\u0438\\u0432\\u043E.\"},\"\\u0412\\u0430\\u043C \\u043F\\u0440\\u0438\\u0441\\u0432\\u043E\\u0435\\u043D \\u043D\\u043E\\u043C\\u0435\\u0440 #\",this.props.account.id!==undefined?this.props.account.id:\"undefined\"),/*#__PURE__*/React.createElement(Separator,null),/*#__PURE__*/React.createElement(FormLayout,null,/*#__PURE__*/React.createElement(FormStatus,{header:\"\\u0412\\u043D\\u0438\\u043C\\u0430\\u043D\\u0438\\u0435! \\u0412\\u0430\\u0436\\u043D\\u0430\\u044F \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F\",mode:\"error\"},\"\\u0421\\u0435\\u0440\\u0432\\u0438\\u0441 \\u043D\\u0435 \\u0438\\u043C\\u0435\\u0435\\u0442 \\u043E\\u0442\\u043D\\u043E\\u0448\\u0435\\u043D\\u0438\\u044F \\u043A \\u0410\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u0438 \\u0412\\u043A\\u043E\\u043D\\u0442\\u0430\\u043A\\u0442\\u0435, \\u0430 \\u0442\\u0430\\u043A \\u0436\\u0435 \\u0438\\u0445 \\u0440\\u0430\\u0437\\u0440\\u0430\\u0431\\u043E\\u0442\\u043A\\u0430\\u043C.\"),/*#__PURE__*/React.createElement(Slider,{min:10,max:100,step:1,value:this.state.AgeUser,onChange:function onChange(e){_this5.setState({AgeUser:e});},top:\"\\u0423\\u043A\\u0430\\u0436\\u0438\\u0442\\u0435 \\u0441\\u0432\\u043E\\u0439 \\u0432\\u043E\\u0437\\u0440\\u0430\\u0441\\u0442: \".concat(this.state.AgeUser)})),/*#__PURE__*/React.createElement(Group,null,/*#__PURE__*/React.createElement(SimpleCell,{disabled:true,multiline:true,before:/*#__PURE__*/React.createElement(Icon28CoinsOutline,null)},\"\\u0417\\u0430\\u0440\\u0430\\u0431\\u0430\\u0442\\u044B\\u0432\\u0430\\u0439 \\u043C\\u043E\\u043D\\u0435\\u0442\\u044B\"),/*#__PURE__*/React.createElement(SimpleCell,{disabled:true,multiline:true,before:/*#__PURE__*/React.createElement(Icon28BillheadOutline,null)},\"\\u041E\\u0442\\u0432\\u0435\\u0447\\u0430\\u0439 \\u043D\\u0430 \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441\\u044B\"),/*#__PURE__*/React.createElement(SimpleCell,{disabled:true,multiline:true,before:/*#__PURE__*/React.createElement(Icon28FavoriteOutline,null)},\"\\u0423\\u0447\\u0430\\u0441\\u0442\\u0432\\u0443\\u0439 \\u0432 \\u0440\\u0435\\u0439\\u0442\\u0438\\u043D\\u0433\\u0435\"),/*#__PURE__*/React.createElement(SimpleCell,{disabled:true,multiline:true,before:/*#__PURE__*/React.createElement(Icon28FireOutline,null)},\"\\u041F\\u043E\\u043B\\u0443\\u0447\\u0430\\u0439 \\u043E\\u0442\\u043C\\u0435\\u0442\\u043A\\u0443 \\u043E\\u0433\\u043D\\u044F\")),/*#__PURE__*/React.createElement(Div,null,/*#__PURE__*/React.createElement(Button,{mode:\"secondary\",size:\"xl\",stretched:true,onClick:function onClick(){_this5.playAudio();_this5.ChangeAge(_this5.state.AgeUser);_this5.setActiveModal(null);setTimeout(function(){_this5.ReloadProfile();},2000);}},\"\\u0412\\u043F\\u0435\\u0440\\u0451\\u0434!\")))),/*#__PURE__*/React.createElement(ModalCard,{id:'prom',onClose:function onClose(){return _this5.setActiveModal(null);},icon:/*#__PURE__*/React.createElement(Icon56FireOutline,{style:{color:\"var(--dynamic_red)\"},width:72,height:72}),caption:\"\\u041F\\u0440\\u043E\\u043C\\u0435\\u0442\\u0435\\u0439 \\u2014 \\u043E\\u0441\\u043E\\u0431\\u0435\\u043D\\u043D\\u044B\\u0439 \\u0437\\u043D\\u0430\\u0447\\u043E\\u043A, \\u0432\\u044B\\u0434\\u0430\\u0432\\u0430\\u0435\\u043C\\u044B\\u0439 \\u0430\\u0433\\u0435\\u043D\\u0442\\u0430\\u043C \\u0437\\u0430 \\u0445\\u043E\\u0440\\u043E\\u0448\\u0435\\u0435 \\u043A\\u0430\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u043E\\u0442\\u0432\\u0435\\u0442\\u043E\\u0432.\",actions:[{title:'Класс!',mode:'secondary',action:function action(){_this5.setActiveModal(null);}}]}),/*#__PURE__*/React.createElement(ModalCard,{id:\"ban_user\",onClose:function onClose(){return _this5.setActiveModal(null);},icon:/*#__PURE__*/React.createElement(Avatar,{src:this.state.other_profile?this.state.other_profile['avatar']['url']:null,size:72}),header:\"\\u0417\\u0430\\u0431\\u0430\\u043D\\u0438\\u0442\\u044C \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\",actions:[{title:'Забанить! 🤬',mode:'secondary',action:function action(){_this5.userBan(_this5.state.other_profile?_this5.state.other_profile['id']:0,_this5.state.ban_reason);console.log(_this5.state.other_profile['id']);}}]},/*#__PURE__*/React.createElement(Input,{disabled:true,value:this.state.other_profile?this.state.other_profile['id']<0?-this.state.other_profile['id']:this.state.other_profile['id']:null}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Input,{maxLength:\"100\",name:\"ban_reason\",onChange:function onChange(e){return _this5.onChange(e);},placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u043F\\u0440\\u0438\\u0447\\u0438\\u043D\\u0443 \\u0431\\u0430\\u043D\\u0430\",value:this.state.ban_reason})),/*#__PURE__*/React.createElement(ModalCard,{id:\"transfer\",onClose:function onClose(){return _this5.setActiveModal(null);},icon:/*#__PURE__*/React.createElement(Avatar,{src:this.state.transfer.avatar,size:72}),header:\"\\u041F\\u0435\\u0440\\u0435\\u0432\\u043E\\u0434 \\u043C\\u043E\\u043D\\u0435\\u0442\\u043E\\u043A\",caption:this.state.transfer.comment,actions:[{title:'Закрыть',mode:'secondary',action:function action(){_this5.setActiveModal(null);}}]}),/*#__PURE__*/React.createElement(ModalPage,{id:\"comment\",onClose:this.modalBack,header:/*#__PURE__*/React.createElement(ModalPageHeader,{right:/*#__PURE__*/React.createElement(Header,{onClick:this.modalBack},/*#__PURE__*/React.createElement(Icon24Dismiss,null))},\"\\u041A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0439\")},/*#__PURE__*/React.createElement(Div,null,/*#__PURE__*/React.createElement(\"div\",{style:{whiteSpace:\"pre-wrap\"}},this.state.comment))));return/*#__PURE__*/React.createElement(View,{id:this.props.id,activePanel:this.state.activePanel,modal:modal,popout:this.state.popout,onSwipeBack:this.goBack},/*#__PURE__*/React.createElement(Questions,{id:\"questions\",this:this,account:this.props.account}),/*#__PURE__*/React.createElement(NewTicket,{id:\"new_ticket\",this:this,account:this.props.account}),/*#__PURE__*/React.createElement(Tiket,{id:\"ticket\",this:this,ticket_id:this.state.ticket_id,account:this.props.account}),/*#__PURE__*/React.createElement(OtherProfile,{id:\"other_profile\",this:this,agent_id:this.state.active_other_profile,account:this.props.account}));}}]);return Main;}(React.Component);export{Main as default};","map":{"version":3,"sources":["C:/Users/rshub/Desktop/Road-to-Jedi/mobile-road/src/panels/questions/main.js"],"names":["React","bridge","Button","Group","Alert","Avatar","Separator","Header","SimpleCell","Div","View","ScreenSpinner","ModalRoot","ModalCard","ModalPage","ModalPageHeader","Input","FormLayout","FormStatus","Slider","NewTicket","Questions","Tiket","OtherProfile","Icon24Dismiss","Icon28FavoriteOutline","Icon56FireOutline","Icon28CoinsOutline","Icon28BillheadOutline","Icon28FireOutline","queryString","require","hash","parse","window","location","Main","props","state","api_url","activePanel","activeModal","modalHistory","popout","ticket_id","history","active_other_profile","other_profile","ban_reason","comment","transfer","AgeUser","changeData","this","playAudio","ReloadProfile","reloadProfile","setPopout","value","setState","goTiket","id","goPanel","onChange","event","name","currentTarget","goOtherProfile","modalBack","setActiveModal","length","goBack","send","pop","panel","indexOf","splice","push","showAlert","title","text","autoclose","mode","showErrorAlert","error","age","fetch","search","replace","then","res","json","data","result","catch","err","user_id","message","response","undefined","agent_id","modal","marginTop","account","avatar","url","e","ChangeAge","setTimeout","color","action","userBan","console","log","whiteSpace","Component"],"mappings":"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","sourcesContent":["import React from 'react'; // React\r\nimport bridge from '@vkontakte/vk-bridge'; // VK Brige\r\n\r\n\r\nimport { \r\n  Button,\r\n  Group,\r\n  Alert,\r\n  Avatar,\r\n  Separator,\r\n  Header,\r\n  SimpleCell,\r\n  Div,\r\n  View,\r\n  ScreenSpinner,\r\n  ModalRoot,\r\n  ModalCard,\r\n  ModalPage,\r\n  ModalPageHeader,\r\n  Input,\r\n  FormLayout,\r\n  FormStatus,\r\n  Slider,\r\n  } from '@vkontakte/vkui';\r\n\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport '../../style.css'\r\n// Импортируем панели\r\nimport NewTicket from './panels/new_tiket'\r\nimport Questions from './panels/questions'\r\nimport Tiket from '../../components/tiket';\r\nimport OtherProfile from '../../components/other_profile'\r\n\r\nimport Icon24Dismiss from '@vkontakte/icons/dist/24/dismiss';\r\nimport Icon28FavoriteOutline from '@vkontakte/icons/dist/28/favorite_outline';\r\nimport Icon56FireOutline from '@vkontakte/icons/dist/56/fire_outline';\r\nimport Icon28CoinsOutline from '@vkontakte/icons/dist/28/coins_outline';\r\nimport Icon28BillheadOutline from '@vkontakte/icons/dist/28/billhead_outline';\r\nimport Icon28FireOutline from '@vkontakte/icons/dist/28/fire_outline';\r\n\r\nconst queryString = require('query-string');\r\n// const platformname = (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));\r\n// const parsedHash = queryString.parse(window.location.search.replace('?', ''));\r\nconst hash = queryString.parse(window.location.hash);\r\n\r\nexport default class Main extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            api_url: \"https://xelene.ru/road/php/index.php?\",\r\n            activePanel: 'questions',\r\n            activeModal: null,\r\n            modalHistory: [],\r\n            popout: this.props.popout,\r\n            ticket_id: null,\r\n            history: ['questions'],\r\n            active_other_profile: 0,\r\n            other_profile: null,\r\n            ban_reason: \"\",\r\n            comment: '',\r\n            transfer: {\r\n              'avatar': '',\r\n              'comment': ''\r\n            },\r\n            AgeUser: 0,\r\n\r\n        \r\n\r\n        }\r\n        this.changeData = this.props.this.changeData;\r\n        this.playAudio = this.props.this.playAudio;\r\n        this.ReloadProfile = this.props.reloadProfile;\r\n        // this.copy = this.props.this.copy;\r\n        // this.recordHistory = (panel) => {\r\n        //   this.setState({history: [...this.state.history, panel]})\r\n        // }\r\n        this.setPopout = (value) => {\r\n          this.setState({popout: value})\r\n        }\r\n        \r\n        this.goTiket = (id) => {\r\n          this.setPopout(<ScreenSpinner/>)\r\n          this.setState({ticket_id: id})\r\n          this.goPanel('ticket');\r\n          this.setPopout(null);\r\n        }\r\n        this.onChange = (event) => {\r\n          var name = event.currentTarget.name;\r\n          var value = event.currentTarget.value;\r\n          this.setState({ [name]: value });\r\n      }\r\n        this.goOtherProfile = (id) => {\r\n          this.setState({active_other_profile: id})\r\n          this.goPanel(\"other_profile\")\r\n        }\r\n        this.modalBack = () => {\r\n            this.setActiveModal(this.state.modalHistory[this.state.modalHistory.length - 2]);\r\n        };\r\n        this.goBack = () => {\r\n          const history = this.state.history;\r\n          if(history.length === 1) {\r\n              bridge.send(\"VKWebAppClose\", {\"status\": \"success\"});\r\n          } else if (history.length > 1) {\r\n              history.pop()\r\n              this.setState({activePanel: history[history.length - 1]})\r\n              if(history[history.length - 1] === 'ticket'){\r\n                this.changeData('need_epic', false)\r\n              } else{\r\n                this.changeData('need_epic', true)\r\n              }\r\n          }\r\n      }\r\n        this.goPanel = (panel) => {\r\n          this.setState({history: [...this.state.history, panel], activePanel: panel})\r\n          if(panel === 'ticket'){\r\n            this.changeData('need_epic', false)\r\n          } else{\r\n            this.changeData('need_epic', true)\r\n          }\r\n        }\r\n        this.setActiveModal = (activeModal) => {\r\n            activeModal = activeModal || null;\r\n            let modalHistory = this.state.modalHistory ? [...this.state.modalHistory] : [];\r\n        \r\n            if (activeModal === null) {\r\n              modalHistory = [];\r\n            } else if (modalHistory.indexOf(activeModal) !== -1) {\r\n              modalHistory = modalHistory.splice(0, modalHistory.indexOf(activeModal) + 1);\r\n            } else {\r\n              modalHistory.push(activeModal);\r\n            }\r\n        \r\n            this.setState({\r\n              activeModal: activeModal,\r\n              modalHistory: modalHistory\r\n            });\r\n          };\r\n          this.showAlert = (title, text) => {\r\n            this.setState({\r\n              popout: \r\n                <Alert\r\n                  actions={[{\r\n                    title: 'Закрыть',\r\n                    autoclose: true,\r\n                    mode: 'cancel'\r\n                  }]}\r\n                  onClose={() => this.setPopout(null)}\r\n                >\r\n                  <h2>{title}</h2>\r\n                  <p>{text}</p>\r\n              </Alert>\r\n            })\r\n          }\r\n          this.showErrorAlert = (error=null) => {\r\n            this.setPopout(\r\n              <Alert\r\n                  actions={[{\r\n                  title: 'Отмена',\r\n                  autoclose: true,\r\n                  mode: 'cancel'\r\n                  }]}\r\n                  onClose={() => this.setPopout(null)}\r\n              >\r\n                <h2>Ошибка</h2>\r\n                {error ? <p>{error}</p> : <p>Что-то пошло не так, попробуйте снова!</p>}\r\n              </Alert>\r\n          )\r\n        }\r\n    }\r\n    ChangeAge(age) {\r\n      this.setState({popout: <ScreenSpinner/>})\r\n      fetch(this.state.api_url + \"method=account.setAge&age=\" + age + \"&\" + window.location.search.replace('?', ''))\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        if(data.result) {\r\n          this.setState({popout: null})\r\n          // setTimeout(() => {\r\n          //   this.playAudio()\r\n          // }, 5000)\r\n          \r\n        }\r\n      })\r\n      .catch(err => {\r\n        this.showErrorAlert()\r\n      })\r\n    }\r\n    userBan(user_id, text) {\r\n      this.setPopout(<ScreenSpinner/>)\r\n      fetch(this.state.api_url + \"method=account.ban&agent_id=\" + user_id + \"&banned=true&reason=\" + text + \"&\" + window.location.search.replace('?', ''))\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        if(data.result) {\r\n          this.setActiveModal(null);\r\n          this.showAlert('Успех', 'Пользователь забанен');\r\n          this.setPopout(null);\r\n        }else {\r\n          this.showErrorAlert(data.error.message)\r\n        }\r\n      })\r\n      .catch(err => {\r\n        this.showErrorAlert(err)\r\n      })\r\n    }\r\n    getRandomTiket() {\r\n      fetch(this.state.api_url + \"method=ticket.getRandom&\" + window.location.search.replace('?', ''))\r\n        .then(res => res.json())\r\n        .then(data => {\r\n          if(data.result) {\r\n            this.goTiket(data.response.id)\r\n          } else {\r\n            this.showErrorAlert(data.error.message)\r\n          }\r\n        })\r\n        .catch(err => {\r\n          this.showErrorAlert(err)\r\n\r\n        })\r\n    }\r\n    componentDidMount(){\r\n        if(hash.ticket_id !== undefined){\r\n          this.goTiket(hash.ticket_id)\r\n          bridge.send(\"VKWebAppSetLocation\", {\"location\": \"\"});\r\n        }\r\n        if(hash.agent_id !== undefined) {\r\n          this.goOtherProfile(hash.agent_id);\r\n          bridge.send(\"VKWebAppSetLocation\", {\"location\": \"\"});\r\n        //   if(window.history.pushState) {\r\n        //     window.history.pushState('', '/', window.location.pathname + window.location.search)\r\n        // } else {\r\n        //     window.location.hash = '';\r\n        // }\r\n        }\r\n      \r\n    }\r\n    render() {\r\n        const modal = (\r\n            <ModalRoot\r\n            activeModal={this.state.activeModal}\r\n            ><ModalPage\r\n            id=\"start\"\r\n            onClose={this.modalBack}\r\n            dynamicContentHeight\r\n            header={\r\n              <ModalPageHeader>\r\n                Добро пожаловать в игру\r\n              </ModalPageHeader>\r\n            }>\r\n              <Div style={{marginTop: 0}}>\r\n                <img className=\"AvaModalPage\" \r\n                src={this.props.account.id !== undefined ? this.props.account.avatar.url : null} \r\n                size={70}\r\n                alt='твоя ава' />\r\n                  <Header\r\n                  subtitle='Помните, отвечать нужно вдумчиво.'>Вам присвоен номер #{this.props.account.id !== undefined ? this.props.account.id : \"undefined\"}</Header>\r\n                <Separator />\r\n                <FormLayout>\r\n                  <FormStatus header=\"Внимание! Важная информация\" mode=\"error\">\r\n                    Сервис не имеет отношения к Администрации Вконтакте, а так же их разработкам.\r\n                  </FormStatus>\r\n                    <Slider\r\n                      min={10}\r\n                      max={100}\r\n                      step={1}\r\n                      value={this.state.AgeUser}\r\n                      onChange={e => {\r\n                        this.setState({AgeUser: e});\r\n                      }}\r\n                      top={`Укажите свой возраст: ${this.state.AgeUser}`}\r\n                    />\r\n                  </FormLayout>\r\n                  <Group>\r\n                    <SimpleCell disabled multiline\r\n                    before={<Icon28CoinsOutline />}>\r\n                      Зарабатывай монеты\r\n                    </SimpleCell>\r\n                    <SimpleCell disabled multiline\r\n                    before={<Icon28BillheadOutline />}>\r\n                      Отвечай на вопросы\r\n                    </SimpleCell>\r\n                    <SimpleCell disabled multiline\r\n                    before={<Icon28FavoriteOutline />}>\r\n                      Участвуй в рейтинге\r\n                    </SimpleCell>\r\n                    <SimpleCell disabled multiline\r\n                    before={<Icon28FireOutline />}>\r\n                      Получай отметку огня\r\n                    </SimpleCell>\r\n                  </Group>\r\n                  \r\n                  <Div>\r\n                    <Button \r\n                    mode=\"secondary\" \r\n                    size='xl'\r\n                    stretched\r\n                    onClick={() => {\r\n                      this.playAudio()\r\n                      \r\n                      this.ChangeAge(this.state.AgeUser);\r\n                      this.setActiveModal(null);\r\n                      setTimeout(() => {\r\n                        this.ReloadProfile();\r\n                      },2000);\r\n                    }}>Вперёд!</Button>\r\n                  </Div>\r\n                </Div>\r\n            </ModalPage>\r\n              <ModalCard\r\n                id={'prom'}\r\n                onClose={() => this.setActiveModal(null)}\r\n                icon={<Icon56FireOutline style={{color: \"var(--dynamic_red)\"}} width={72} height={72} />}\r\n                caption=\"Прометей — особенный значок, выдаваемый агентам за хорошее качество ответов.\"\r\n                actions={[{\r\n                  title: 'Класс!',\r\n                  mode: 'secondary',\r\n                  action: () => {\r\n                    this.setActiveModal(null);\r\n                  }\r\n                }\r\n                ]}\r\n              />\r\n              <ModalCard\r\n                id='ban_user'\r\n                onClose={() => this.setActiveModal(null)}\r\n                icon={<Avatar src={this.state.other_profile ? this.state.other_profile['avatar']['url'] : null} size={72} />}\r\n                header=\"Забанить пользователя\"\r\n                actions={[{\r\n                  title: 'Забанить! 🤬',\r\n                  mode: 'secondary',\r\n                  action: () => {\r\n                    this.userBan(this.state.other_profile ? this.state.other_profile['id'] : 0, this.state.ban_reason);\r\n                    console.log(this.state.other_profile['id'])\r\n                  }\r\n                }]}\r\n              >\r\n                <Input disabled value={this.state.other_profile ? (this.state.other_profile['id'] < 0) ? -this.state.other_profile['id'] : this.state.other_profile['id'] : null}/>\r\n                <br/>\r\n                <Input maxLength=\"100\" name=\"ban_reason\" onChange={(e) => this.onChange(e)} placeholder=\"Введите причину бана\" value={this.state.ban_reason} />\r\n                \r\n              </ModalCard>\r\n              \r\n              <ModalCard\r\n                id='transfer'\r\n                onClose={() => this.setActiveModal(null)}\r\n                icon={<Avatar src={this.state.transfer.avatar} size={72} />}\r\n                header='Перевод монеток'\r\n                caption={this.state.transfer.comment}\r\n                actions={[{\r\n                  title: 'Закрыть',\r\n                  mode: 'secondary',\r\n                  action: () => {\r\n                    this.setActiveModal(null);\r\n                  }\r\n                }]}\r\n              >\r\n              </ModalCard>\r\n              <ModalPage\r\n                id=\"comment\"\r\n                onClose={this.modalBack}\r\n                header={\r\n                  <ModalPageHeader\r\n                  right={<Header onClick={this.modalBack}><Icon24Dismiss /></Header>}\r\n                  >\r\n                    Комментарий\r\n                  </ModalPageHeader>\r\n                }\r\n                >\r\n                  <Div>\r\n                    <div style={{whiteSpace: \"pre-wrap\"}}>{this.state.comment}</div>\r\n                  </Div>\r\n                </ModalPage>\r\n            </ModalRoot>\r\n        )\r\n        return(\r\n            <View \r\n            id={this.props.id}\r\n            activePanel={this.state.activePanel}\r\n            modal={modal}\r\n            popout={this.state.popout}\r\n            onSwipeBack={this.goBack}\r\n            >\r\n              <Questions id='questions' this={this} account={this.props.account} />\r\n              <NewTicket id='new_ticket' this={this} account={this.props.account} /> \r\n              <Tiket id=\"ticket\" this={this} ticket_id={this.state.ticket_id} account={this.props.account} />\r\n              <OtherProfile id=\"other_profile\" this={this} agent_id={this.state.active_other_profile} account={this.props.account}/>\r\n            </View>   \r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}