{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\src\\\\panels\\\\questions\\\\panels\\\\questions.js\";\nimport React from 'react';\nimport { Panel, PanelHeader, PanelHeaderButton, Avatar, Button, Placeholder, Separator, PullToRefresh, PanelSpinner, Cell, Div, Banner, Footer } from '@vkontakte/vkui';\nimport Icon56InboxOutline from '@vkontakte/icons/dist/56/inbox_outline';\nimport Icon28CubeBoxOutline from '@vkontakte/icons/dist/28/cube_box_outline';\nimport BannerAvatarPC from '../../../images/question_banner_pc.jpg';\nimport BannerAvatarMobile from '../../../images/question_banner_mobile.png';\nconst platformname = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\nexport default class Questions extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      api_url: \"https://xelene.ru/road/php/index.php?\",\n      fething: false,\n      tiket_all: null,\n      tiket_all_helper: null,\n      offset: 0,\n      ShowBanner: true\n    };\n    var propsbi = this.props.this;\n    this.setPopout = propsbi.setPopout;\n    this.showErrorAlert = propsbi.showErrorAlert;\n    this.setActiveModal = propsbi.setActiveModal;\n    this.Prepare_questions = this.Prepare_questions.bind(this);\n  }\n\n  Prepare_questions(need_offset = false) {\n    this.setState({\n      fetching: true\n    });\n    let url = need_offset ? \"method=tickets.get&count=20&unanswered=1&offset=\" + this.state.offset : \"method=tickets.get&count=20&unanswered=1\";\n\n    if (!need_offset) {\n      this.setState({\n        offset: 20\n      });\n    }\n\n    fetch(this.state.api_url + url + \"&\" + window.location.search.replace('?', '')).then(res => res.json()).then(data => {\n      if (data.result) {\n        this.setState({\n          tiket_all: []\n        });\n\n        if (this.state.tiket_all) {\n          var sliyan = data.response ? this.state.tiket_all.concat(data.response) : this.state.tiket_all;\n        }\n\n        this.setState({\n          tiket_all: sliyan,\n          tiket_all_helper: data.response\n        });\n\n        if (need_offset) {\n          this.setState({\n            offset: this.state.offset + 20\n          });\n        }\n\n        setTimeout(() => {\n          this.setState({\n            fetching: false\n          });\n        }, 500);\n      } else {\n        this.showErrorAlert(data.error.message);\n      }\n    }).catch(err => {\n      this.showErrorAlert(err);\n    });\n  }\n\n  componentDidMount() {\n    setTimeout(() => {\n      this.Prepare_questions();\n    });\n    setTimeout(() => {\n      if (this.props.account.is_first_start) {\n        // this.props.this.playAudio()\n        this.setActiveModal('start');\n      }\n\n      this.setPopout(null);\n    }, 1000); //4000\n  }\n\n  render() {\n    var props = this.props.this; // Для более удобного использования.\n\n    return /*#__PURE__*/React.createElement(Panel, {\n      id: this.props.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(PanelHeader, {\n      left: /*#__PURE__*/React.createElement(PanelHeaderButton, {\n        onClick: () => this.props.this.getRandomTiket(),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(Icon28CubeBoxOutline, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 91\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }\n    }, \"\\u0412\\u043E\\u043F\\u0440\\u043E\\u0441\\u044B\"), this.state.ShowBanner && this.props.account.is_first_start ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Banner, {\n      mode: \"image\",\n      size: \"m\",\n      onDismiss: () => {\n        this.setState({\n          ShowBanner: false\n        });\n      },\n      header: \"\\u0421 \\u0447\\u0435\\u0433\\u043E \\u043D\\u0430\\u0447\\u0430\\u0442\\u044C?\",\n      subheader: \"\\u0421 \\u043F\\u0440\\u043E\\u0447\\u0442\\u0435\\u043D\\u0438\\u044F \\u0441\\u0442\\u0430\\u0442\\u044C\\u0438\",\n      background: /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          backgroundColor: '#5b9be6',\n          backgroundImage: platformname ? 'url(' + BannerAvatarMobile + \")\" : 'url(' + BannerAvatarPC + \")\",\n          backgroundPosition: 'right bottom',\n          backgroundSize: '100%',\n          backgroundRepeat: 'no-repeat'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 17\n        }\n      }),\n      asideMode: \"dismiss\",\n      actions: /*#__PURE__*/React.createElement(Button, {\n        mode: \"overlay_primary\",\n        href: \"https://vk.com/@jedi_road-checking-responses\",\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        size: \"l\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 30\n        }\n      }, \"\\u0427\\u0438\\u0442\\u0430\\u0442\\u044C\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 81\n      }\n    }), /*#__PURE__*/React.createElement(Separator, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 19\n      }\n    })) : null, this.props.account.special ? /*#__PURE__*/React.createElement(Div, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 47\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: () => props.goPanel('new_ticket'),\n      size: \"xl\",\n      mode: \"outline\",\n      stretched: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 21\n      }\n    }, \"\\u041D\\u043E\\u0432\\u044B\\u0439 \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441\")) : null, /*#__PURE__*/React.createElement(PullToRefresh, {\n      onRefresh: this.Prepare_questions,\n      isFetching: this.state.fetching,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }\n    }, this.state.tiket_all ? this.state.tiket_all.length > 0 ? this.state.tiket_all.map((result, i) => /*#__PURE__*/React.createElement(React.Fragment, {\n      key: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Cell // onClick={() => props.goTiket(result['id'])}\n    , {\n      onClick: () => props.goO,\n      description: result['status'] === 0 ? \"На рассмотрении\" : result['status'] === 1 ? \"Есть ответ\" : \"Закрыт\",\n      asideContent: /*#__PURE__*/React.createElement(Avatar, {\n        src: result['author']['id'] === 526444378 ? \"https://cdn3.iconfinder.com/data/icons/avatars-15/64/_Ninja-2-512.png\" : result['author']['photo_200'],\n        size: 56,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 43\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 25\n      }\n    }, result['title']), /*#__PURE__*/React.createElement(Separator, {\n      style: {\n        width: \"90%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 25\n      }\n    }))) : null : null, this.state.tiket_all_helper ? this.state.tiket_all_helper.length === 20 ? /*#__PURE__*/React.createElement(Div, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      size: \"xl\",\n      level: \"secondary\",\n      onClick: () => this.Prepare_questions(true),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 25\n      }\n    }, \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0435\\u0449\\u0451\")) : this.state.tiket_all ? this.state.tiket_all.length === 0 ? null : /*#__PURE__*/React.createElement(Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 62\n      }\n    }, this.state.tiket_all.length, \" \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441(\\u0430) \\u0432\\u0441\\u0435\\u0433\\u043E\") : null : null, this.state.tiket_all ? this.state.tiket_all.length === 0 ? /*#__PURE__*/React.createElement(Placeholder, {\n      icon: /*#__PURE__*/React.createElement(Icon56InboxOutline, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 23\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 17\n      }\n    }, \"\\u0423\\u043F\\u0441, \\u043A\\u0430\\u0436\\u0435\\u0442\\u0441\\u044F \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441\\u044B \\u0437\\u0430\\u043A\\u043E\\u043D\\u0447\\u0438\\u043B\\u0438\\u0441\\u044C\") : null : /*#__PURE__*/React.createElement(PanelSpinner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 26\n      }\n    })));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/rshub/Desktop/Road-to-Jedi/mobile-road/src/panels/questions/panels/questions.js"],"names":["React","Panel","PanelHeader","PanelHeaderButton","Avatar","Button","Placeholder","Separator","PullToRefresh","PanelSpinner","Cell","Div","Banner","Footer","Icon56InboxOutline","Icon28CubeBoxOutline","BannerAvatarPC","BannerAvatarMobile","platformname","test","navigator","userAgent","Questions","Component","constructor","props","state","api_url","fething","tiket_all","tiket_all_helper","offset","ShowBanner","propsbi","this","setPopout","showErrorAlert","setActiveModal","Prepare_questions","bind","need_offset","setState","fetching","url","fetch","window","location","search","replace","then","res","json","data","result","sliyan","response","concat","setTimeout","error","message","catch","err","componentDidMount","account","is_first_start","render","id","getRandomTiket","backgroundColor","backgroundImage","backgroundPosition","backgroundSize","backgroundRepeat","special","goPanel","length","map","i","goO","width"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport { \n    Panel,\n    PanelHeader,\n    PanelHeaderButton,\n    Avatar,\n    Button,\n    Placeholder,\n    Separator,\n    PullToRefresh,\n    PanelSpinner,\n    Cell,\n    Div,\n    Banner,\n    Footer\n    \n    } from '@vkontakte/vkui';\n\nimport Icon56InboxOutline from '@vkontakte/icons/dist/56/inbox_outline';\nimport Icon28CubeBoxOutline from '@vkontakte/icons/dist/28/cube_box_outline';\n\nimport BannerAvatarPC from '../../../images/question_banner_pc.jpg'\nimport BannerAvatarMobile from '../../../images/question_banner_mobile.png'\n\nconst platformname = (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));\n\n\nexport default class Questions extends React.Component {\n        constructor(props) {\n            super(props);\n            this.state = {\n                api_url: \"https://xelene.ru/road/php/index.php?\",\n                fething: false,\n                tiket_all: null,\n                tiket_all_helper: null,\n                offset: 0,\n                ShowBanner: true,\n\n            }\n            var propsbi = this.props.this;\n            this.setPopout = propsbi.setPopout;\n            this.showErrorAlert = propsbi.showErrorAlert;\n            this.setActiveModal = propsbi.setActiveModal;\n            this.Prepare_questions = this.Prepare_questions.bind(this);\n        }\n        Prepare_questions(need_offset=false){\n            this.setState({ fetching: true });\n            let url = need_offset ? \"method=tickets.get&count=20&unanswered=1&offset=\" + this.state.offset : \"method=tickets.get&count=20&unanswered=1\";\n            if(!need_offset){\n                this.setState({ offset: 20})\n            }\n            fetch(this.state.api_url + url + \"&\" + window.location.search.replace('?', ''))\n            .then(res => res.json())\n            .then(data => {\n              if(data.result) {\n                this.setState({tiket_all: []})\n                if(this.state.tiket_all){\n                    var sliyan = data.response ? this.state.tiket_all.concat(data.response) : this.state.tiket_all;\n                }\n                \n                this.setState({tiket_all: sliyan, tiket_all_helper: data.response})\n                if(need_offset){\n                    this.setState({ offset: this.state.offset + 20 })\n                }\n                setTimeout(() => {\n                  this.setState({ fetching: false });\n                }, 500);\n              }else{\n                this.showErrorAlert(data.error.message)\n            }\n            })\n            .catch(err => {\n              this.showErrorAlert(err)\n            })\n        }\n        componentDidMount() {\n            setTimeout(() => {\n                this.Prepare_questions()\n            })\n            \n            setTimeout(() => {\n                if(this.props.account.is_first_start){\n                    // this.props.this.playAudio()\n                    this.setActiveModal('start');\n                }\n                this.setPopout(null)\n            }, 1000) //4000\n        }\n\n        render() {\n            var props = this.props.this; // Для более удобного использования.\n            \n            return (\n                <Panel id={this.props.id}> \n                <PanelHeader\n                left={<PanelHeaderButton onClick={() => this.props.this.getRandomTiket()}><Icon28CubeBoxOutline/></PanelHeaderButton>}\n                >\n                Вопросы\n                </PanelHeader>\n\n                {this.state.ShowBanner && this.props.account.is_first_start ? <><Banner\n                mode=\"image\"\n                size=\"m\"\n                onDismiss={() => {\n                    this.setState({ShowBanner: false});\n                }}\n                header=\"С чего начать?\"\n                subheader='С прочтения статьи'\n                background={\n                <div\n                    style={{\n                    backgroundColor: '#5b9be6',\n                    backgroundImage: platformname ? 'url(' + BannerAvatarMobile + \")\" : 'url(' + BannerAvatarPC + \")\",\n                    backgroundPosition: 'right bottom',\n                    backgroundSize: '100%',\n\n                    backgroundRepeat: 'no-repeat',\n                    }}\n                />\n                }\n                    asideMode=\"dismiss\"\n                    actions={<Button mode=\"overlay_primary\" href=\"https://vk.com/@jedi_road-checking-responses\" target=\"_blank\" rel=\"noopener noreferrer\" size=\"l\">Читать</Button>}\n                /><Separator /></> : null}\n                {this.props.account.special ? <Div>\n                    <Button onClick={() => props.goPanel('new_ticket')}\n                    size=\"xl\" \n                    mode=\"outline\" \n                    stretched>Новый вопрос</Button>\n                </Div> : null}\n                <PullToRefresh onRefresh={this.Prepare_questions} isFetching={this.state.fetching}>\n                    {this.state.tiket_all ? this.state.tiket_all.length > 0 ? this.state.tiket_all.map((result, i) => \n                    <React.Fragment key={i}>\n                        <Cell\n                            // onClick={() => props.goTiket(result['id'])}\n                            onClick={() => props.goO}\n                            description={result['status'] === 0 ? \"На рассмотрении\" : result['status'] === 1 ? \"Есть ответ\" : \"Закрыт\" } \n                            asideContent={<Avatar src={result['author']['id'] === 526444378 ? \"https://cdn3.iconfinder.com/data/icons/avatars-15/64/_Ninja-2-512.png\" : result['author']['photo_200']} size={56}/>}\n                        >\n                        {result['title']}\n\n                        </Cell>\n                        <Separator style={{width: \"90%\"}} />\n                    </React.Fragment>\n                    ) : null : null}\n                \n                    {this.state.tiket_all_helper ? this.state.tiket_all_helper.length === 20 ? \n                    <Div>\n                        <Button size=\"xl\" level=\"secondary\" onClick={() => this.Prepare_questions(true)}>Загрузить ещё</Button>\n                    </Div>\n                : this.state.tiket_all ?\n                (this.state.tiket_all.length === 0) ? null : <Footer>{this.state.tiket_all.length} вопрос(а) всего</Footer>\n                 : null :\n                null}\n                {this.state.tiket_all ? this.state.tiket_all.length === 0 ? \n                <Placeholder \n                icon={<Icon56InboxOutline />}>\n                    Упс, кажется вопросы закончились\n                </Placeholder>\n                : null : <PanelSpinner />}\n            </PullToRefresh>\n            </Panel>\n            )\n            }\n        }\n  "]},"metadata":{},"sourceType":"module"}