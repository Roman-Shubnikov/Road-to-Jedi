{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\src\\\\panels\\\\topUsers\\\\panels\\\\top.js\";\nimport React from 'react';\nimport { Panel, PanelHeader, Avatar, Separator, PullToRefresh, SimpleCell } from '@vkontakte/vkui';\nimport Icon16Fire from '@vkontakte/icons/dist/16/fire';\nimport Icon16Verified from '@vkontakte/icons/dist/16/verified';\n\nclass Reader extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      api_url: \"https://xelene.ru/road/php/index.php?\",\n      fetching: false,\n      top_agents: null\n    };\n    var propsbi = this.props.this;\n    this.setPopout = propsbi.setPopout;\n    this.showErrorAlert = propsbi.showErrorAlert;\n    this.setActiveModal = propsbi.setActiveModal;\n  }\n\n  getTopUsers() {\n    fetch(this.state.api_url + \"method=users.getTop&\" + window.location.search.replace('?', '')).then(res => res.json()).then(data => {\n      if (data.result) {\n        this.setState({\n          top_agents: data.response\n        });\n        setTimeout(() => {\n          this.setState({\n            fetching: false\n          });\n        }, 500);\n      }\n    }).catch(err => {\n      this.showErrorAlert(err);\n    });\n  }\n\n  componentDidMount() {\n    this.getTopUsers();\n  }\n\n  render() {\n    var props = this.props.this; // для более удобного использования.\n\n    return /*#__PURE__*/React.createElement(Panel, {\n      id: this.props.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(PanelHeader, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }\n    }, \"\\u0422\\u043E\\u043F\"), /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(PullToRefresh, {\n      onRefresh: () => {\n        this.setState({\n          fetching: true\n        });\n        this.getTopUsers();\n      },\n      isFetching: this.state.fetching,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 19\n      }\n    }, this.state.top_agents ? this.state.top_agents.map((result, i) => result['banned'] ? null : /*#__PURE__*/React.createElement(React.Fragment, {\n      key: result.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(SimpleCell, {\n      onClick: () => props.goOtherProfile(result['id'], true),\n      description: /*#__PURE__*/React.createElement(\"div\", {\n        className: \"top_moderator_desc\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 25\n        }\n      }, result['good_answers'] + \" хороших ответов, \" + result['bad_answers'] + \" плохих ответов\"),\n      size: \"l\",\n      before: /*#__PURE__*/React.createElement(Avatar, {\n        src: result['avatar']['url'],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 31\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"top_moderator_name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 19\n      }\n    }, isFinite(result['nickname']) ? `Агент Поддержки #${result['nickname']}` : result['nickname'] ? result['nickname'] : `Агент Поддержки #${result['id']}`, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"top_moderator_name_icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 21\n      }\n    }, result['flash'] === true ? /*#__PURE__*/React.createElement(Icon16Fire, {\n      width: 12,\n      height: 12,\n      onClick: () => this.setActiveModal('prom'),\n      className: \"top_moderator_name_icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 51\n      }\n    }) : null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"top_moderator_name_icon_ver\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 21\n      }\n    }, result['verified'] === true ? /*#__PURE__*/React.createElement(Icon16Verified, {\n      className: \"top_moderator_name_icon_ver\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 54\n      }\n    }) : null), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"top_moderator_name_icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 21\n      }\n    }, result['donut'] === true ? /*#__PURE__*/React.createElement(Icon16StarCircleFillYellow, {\n      width: 12,\n      height: 12,\n      className: \"top_moderator_name_icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 51\n      }\n    }) : null))), /*#__PURE__*/React.createElement(Separator, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 18\n      }\n    }))) : null)));\n  }\n\n}\n\nexport default Reader;","map":{"version":3,"sources":["C:/Users/rshub/Desktop/Road-to-Jedi/mobile-road/src/panels/topUsers/panels/top.js"],"names":["React","Panel","PanelHeader","Avatar","Separator","PullToRefresh","SimpleCell","Icon16Fire","Icon16Verified","Reader","Component","constructor","props","state","api_url","fetching","top_agents","propsbi","this","setPopout","showErrorAlert","setActiveModal","getTopUsers","fetch","window","location","search","replace","then","res","json","data","result","setState","response","setTimeout","catch","err","componentDidMount","render","id","map","i","goOtherProfile","isFinite"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { \n  Panel,\n  PanelHeader,\n  Avatar,\n  Separator,\n  PullToRefresh,\n  SimpleCell,\n  } from '@vkontakte/vkui';\n\nimport Icon16Fire from '@vkontakte/icons/dist/16/fire';\nimport Icon16Verified from '@vkontakte/icons/dist/16/verified';\n\n    class Reader extends React.Component {\n        constructor(props) {\n            super(props);\n            this.state = {\n              api_url: \"https://xelene.ru/road/php/index.php?\",\n              fetching: false,\n              top_agents: null,\n            }\n            var propsbi = this.props.this;\n            this.setPopout = propsbi.setPopout;\n            this.showErrorAlert = propsbi.showErrorAlert;\n            this.setActiveModal = propsbi.setActiveModal;\n        }\n        getTopUsers(){\n          fetch(this.state.api_url + \"method=users.getTop&\" + window.location.search.replace('?', ''))\n          .then(res => res.json())\n          .then(data => {\n            if(data.result) {\n              this.setState({top_agents: data.response})\n              setTimeout(() => {\n                this.setState({fetching: false});\n              }, 500)\n            }\n          })\n          .catch(err => {\n            this.showErrorAlert(err)\n\n          })\n        }\n        componentDidMount(){\n          this.getTopUsers()\n        }\n        render() {\n            var props = this.props.this; // для более удобного использования.\n            return (\n                <Panel id={this.props.id}>\n                <PanelHeader>\n                Топ\n                </PanelHeader>              \n                <><PullToRefresh onRefresh={() => {this.setState({fetching: true});this.getTopUsers()}} isFetching={this.state.fetching}>\n                  {this.state.top_agents ? this.state.top_agents.map((result, i) => \n                    result['banned'] ? null :\n                    <React.Fragment key={result.id}>\n                    <SimpleCell\n                      onClick={() => props.goOtherProfile(result['id'], true)}\n                      description={\n                        <div className=\"top_moderator_desc\">\n                        {result['good_answers'] +  \" хороших ответов, \" + result['bad_answers'] + \" плохих ответов\"}\n                        </div>\n                      }\n                      size=\"l\"\n                      before={<Avatar src={result['avatar']['url']}/>}\n                    >\n                  <div className=\"top_moderator_name\">\n                  {isFinite(result['nickname']) ? `Агент Поддержки #${result['nickname']}` : result['nickname'] ? result['nickname'] : `Агент Поддержки #${result['id']}`}\n                    <div className=\"top_moderator_name_icon\">\n                      {result['flash'] === true ? <Icon16Fire width={12} height={12} onClick={() => this.setActiveModal('prom')} className=\"top_moderator_name_icon\"/> : null}\n                    </div>\n                    <div className=\"top_moderator_name_icon_ver\">\n                      {result['verified'] === true ? <Icon16Verified className=\"top_moderator_name_icon_ver\"/>  : null }\n                    </div>\n                    <div className=\"top_moderator_name_icon\">\n                      {result['donut'] === true ? <Icon16StarCircleFillYellow width={12} height={12} className=\"top_moderator_name_icon\"/> : null}\n                    </div>\n                  </div>\n                  </SimpleCell>\n                 <Separator/>\n                 </React.Fragment>\n                  ) : null}\n                </PullToRefresh></>\n            </Panel>\n            )\n            }\n        }\n  \nexport default Reader;"]},"metadata":{},"sourceType":"module"}