{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\src\\\\components\\\\tiket.js\";\nimport React from 'react';\nimport bridge from '@vkontakte/vk-bridge'; // VK Brige\n\nimport { Panel, PanelHeader, Button, FixedLayout, Div, ScreenSpinner, ActionSheet, ActionSheetItem, Textarea, PanelHeaderBack, Cell } from '@vkontakte/vkui';\nimport Icon24Up from '@vkontakte/icons/dist/24/up';\nimport Icon16ReplyOutline from '@vkontakte/icons/dist/16/reply_outline';\nimport Ninja from '../images/Ninja.webp';\nimport Message from './message';\nconst platformname = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\n\nconst queryString = require('query-string');\n\nconst parsedHash = queryString.parse(window.location.search.replace('?', ''));\nvar months = ['января', 'февраля', 'марта', 'апреля', 'мая', 'июня', 'июля', 'августа', 'сентября', 'ноября', 'декабря'];\n\nfunction fix_time(time) {\n  if (time < 10) {\n    return \"0\" + time;\n  } else {\n    return time;\n  }\n}\n\nfunction add_month(month) {\n  let number_month = new Date(month * 1e3).getMonth();\n  return months[number_month];\n}\n\nexport default class Ticket extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      api_url: \"https://xelene.ru/road/php/index.php?\",\n      tiket_info: [],\n      tiket_message: [],\n      tiket_send_message: '',\n      add_comment: false,\n      redaction: false\n    };\n    var propsbi = this.props.this;\n    this.setPopout = propsbi.setPopout;\n    this.showErrorAlert = propsbi.showErrorAlert;\n    this.setActiveModal = propsbi.setActiveModal;\n    this.goOtherProfile = propsbi.goOtherProfile;\n    this.sendRayt = this.sendRayt.bind(this);\n\n    this.onChange = event => {\n      var name = event.currentTarget.name;\n      var value = event.currentTarget.value;\n      this.setState({\n        [name]: value\n      });\n    };\n  }\n\n  Prepare_ticket() {\n    fetch(this.state.api_url + \"method=ticket.getById&ticket_id=\" + this.props.ticket_id + \"&\" + window.location.search.replace('?', '')).then(res => res.json()).then(data => {\n      if (data.result) {\n        this.setState({\n          tiket_info: data.response.info,\n          tiket_message: data.response.messages\n        });\n        this.setPopout(null);\n      } else {\n        this.showErrorAlert(data.error.message);\n      }\n    }).catch(err => {\n      this.showErrorAlert(err);\n    });\n  }\n\n  sendRayt(mark, message_id) {\n    let reyt = 1;\n\n    if (mark === true) {\n      reyt = 1;\n    } else {\n      reyt = 0;\n    }\n\n    if (reyt < 2) {\n      fetch(this.state.api_url + \"method=ticket.markMessage&message_id=\" + message_id + \"&mark=\" + reyt + \"&\" + window.location.search.replace('?', '')).then(res => res.json()).then(data => {\n        if (data.result) {\n          fetch(this.state.api_url + \"method=ticket.getMessages&ticket_id=\" + this.state.tiket_info['id'] + \"&\" + window.location.search.replace('?', '')).then(res => res.json()).then(data => {\n            if (data.result) {\n              this.setState({\n                tiket_message: data.response\n              });\n              this.setActiveModal(null);\n              this.setPopout(null);\n            } else {\n              this.showErrorAlert(data.error.message);\n            }\n          }).catch(err => {\n            this.showErrorAlert(err);\n          });\n        } else {\n          this.showErrorAlert(data.error.message);\n        }\n      }).catch(err => {\n        this.showErrorAlert(err);\n      });\n    }\n  }\n\n  sendClear(id) {\n    this.setPopout( /*#__PURE__*/React.createElement(ScreenSpinner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 24\n      }\n    }));\n    fetch(this.state.api_url + \"method=ticket.approveReply&message_id=\" + id + \"&\" + window.location.search.replace('?', '')).then(res => res.json()).then(data => {\n      if (data.result) {\n        this.setPopout(null);\n      } else {\n        this.showErrorAlert(data.error.message);\n      }\n    }).catch(err => {\n      this.showErrorAlert(err);\n    });\n  }\n\n  Admin(id, author_id, text, comment, avatar = null, mark = -1) {\n    this.props.this.setPopout( /*#__PURE__*/React.createElement(ActionSheet, {\n      onClose: () => this.setPopout(null),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 11\n      }\n    }, author_id > 0 ? /*#__PURE__*/React.createElement(ActionSheetItem, {\n      autoclose: true,\n      onClick: () => this.goOtherProfile(author_id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 13\n      }\n    }, \"\\u041F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\") : null, this.props.account.special && mark !== 0 && mark !== 1 && author_id > 0 ? /*#__PURE__*/React.createElement(ActionSheetItem, {\n      autoclose: true,\n      onClick: () => this.sendRayt(true, id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 13\n      }\n    }, \"\\u041E\\u0446\\u0435\\u043D\\u0438\\u0442\\u044C \\u043F\\u043E\\u043B\\u043E\\u0436\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\") : null, this.props.account.special && mark !== 0 && mark !== 1 && author_id > 0 ? /*#__PURE__*/React.createElement(ActionSheetItem, {\n      autoclose: true,\n      onClick: () => this.sendRayt(false, id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 13\n      }\n    }, \"\\u041E\\u0446\\u0435\\u043D\\u0438\\u0442\\u044C \\u043E\\u0442\\u0440\\u0438\\u0446\\u0430\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\") : null, this.props.account.special === true && author_id > 0 ? /*#__PURE__*/React.createElement(ActionSheetItem, {\n      autoclose: true,\n      onClick: () => this.sendClear(id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 13\n      }\n    }, \"\\u041E\\u0434\\u043E\\u0431\\u0440\\u0438\\u0442\\u044C\") : null, this.props.account.special === true && author_id < 0 ? /*#__PURE__*/React.createElement(ActionSheetItem, {\n      autoclose: true,\n      onClick: () => {\n        this.props.this.setState({\n          other_profile: {\n            'id': author_id,\n            'avatar': {\n              'url': avatar\n            }\n          }\n        });\n        this.setActiveModal('ban_user');\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 13\n      }\n    }, \"\\u0417\\u0430\\u0431\\u0430\\u043D\\u0438\\u0442\\u044C \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\") : null, this.props.account.special === true && author_id > 0 ? comment === null || comment === undefined ? /*#__PURE__*/React.createElement(ActionSheetItem, {\n      autoclose: true,\n      onClick: () => this.setState({\n        add_comment: true,\n        message_id_add: id\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 13\n      }\n    }, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0439\") : null : null, Number(author_id === this.props.account.id) ? /*#__PURE__*/React.createElement(ActionSheetItem, {\n      autoclose: true,\n      onClick: () => this.setState({\n        redaction: true,\n        message_id_redac: id,\n        tiket_send_message: text\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 12\n      }\n    }, \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\") : null, comment === null || comment === undefined ? null : /*#__PURE__*/React.createElement(ActionSheetItem, {\n      autoclose: true,\n      onClick: () => {\n        this.props.this.setState({\n          comment: comment\n        });\n        this.setActiveModal(\"comment\");\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 13\n      }\n    }, \"\\u041F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\\u0435\\u0442\\u044C \\u043A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0439\"), Number(author_id) === Number(this.props.account.id) || this.props.account.special === true ? /*#__PURE__*/React.createElement(ActionSheetItem, {\n      autoclose: true,\n      onClick: () => this.deleteMessage(id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 13\n      }\n    }, \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435\") : null, /*#__PURE__*/React.createElement(ActionSheetItem, {\n      autoclose: true,\n      mode: \"cancel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 14\n      }\n    }, \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\")));\n  }\n\n  copy(id) {\n    this.setPopout( /*#__PURE__*/React.createElement(ActionSheet, {\n      onClose: () => this.setState({\n        popout: null\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 11\n      }\n    }, Number(this.state.tiket_info['author']['id']) === Number(parsedHash.vk_user_id) ? this.state.tiket_info['status'] === 0 || this.state.tiket_info['status'] === 1 ? /*#__PURE__*/React.createElement(ActionSheetItem, {\n      autoclose: true,\n      onClick: () => this.deleteTicket(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 13\n      }\n    }, \"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C \\u0442\\u0438\\u043A\\u0435\\u0442\") : /*#__PURE__*/React.createElement(ActionSheetItem, {\n      autoclose: true,\n      onClick: () => this.openTicket(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 13\n      }\n    }, \"\\u041E\\u0442\\u043A\\u0440\\u044B\\u0442\\u044C \\u0442\\u0438\\u043A\\u0435\\u0442\") : this.props.account.special === true ? this.state.tiket_info['status'] === 0 || this.state.tiket_info['status'] === 1 ? /*#__PURE__*/React.createElement(ActionSheetItem, {\n      autoclose: true,\n      onClick: () => this.deleteTicket(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 13\n      }\n    }, \"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C \\u0442\\u0438\\u043A\\u0435\\u0442\") : /*#__PURE__*/React.createElement(ActionSheetItem, {\n      autoclose: true,\n      onClick: () => this.openTicket(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 13\n      }\n    }, \"\\u041E\\u0442\\u043A\\u0440\\u044B\\u0442\\u044C \\u0442\\u0438\\u043A\\u0435\\u0442\") : null, /*#__PURE__*/React.createElement(ActionSheetItem, {\n      autoclose: true,\n      onClick: () => bridge.send(\"VKWebAppCopyText\", {\n        text: \"https://vk.com/app7409818#ticket_id=\" + id\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 13\n      }\n    }, \"\\u0421\\u043A\\u043E\\u043F\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u0441\\u0441\\u044B\\u043B\\u043A\\u0443\"), /*#__PURE__*/React.createElement(ActionSheetItem, {\n      autoclose: true,\n      mode: \"cancel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 14\n      }\n    }, \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\")));\n  }\n\n  sendNewMessage() {\n    if (this.state.tiket_send_message.length >= 5) {\n      this.setPopout( /*#__PURE__*/React.createElement(ScreenSpinner, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 26\n        }\n      }));\n      var url = this.state.api_url + 'method=ticket.sendMessage&' + window.location.search.replace('?', '');\n      var method = 'POST';\n      var async = true;\n      var xhr = new XMLHttpRequest();\n      xhr.open(method, url, async);\n      xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n\n      xhr.onreadystatechange = () => {\n        if (xhr.status === 4) return;\n\n        if (xhr.status === 200) {\n          fetch(this.state.api_url + \"method=ticket.getMessages&ticket_id=\" + this.state.tiket_info['id'] + \"&\" + window.location.search.replace('?', '')).then(res => res.json()).then(data => {\n            if (data.result) {\n              this.setState({\n                tiket_message: data.response,\n                tiket_send_message: \" \",\n                add_comment: false,\n                redaction: false\n              });\n              this.setPopout(null);\n              this.setState({\n                tiket_send_message: \"\"\n              });\n            } else {\n              this.showErrorAlert(data.error.message);\n            }\n          }).catch(err => {\n            this.showErrorAlert(err);\n          });\n        }\n      };\n\n      xhr.send('ticket_id=' + this.state.tiket_info['id'] + '&text=' + this.state.tiket_send_message);\n\n      xhr.onerror = error => {\n        this.showErrorAlert(error);\n      };\n    } else {// this.showErrorAlert(\"Текст сообщения должен быть минимум из 5 символов.\")\n    }\n  }\n\n  deleteMessage(message_id) {\n    this.setPopout( /*#__PURE__*/React.createElement(ScreenSpinner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 24\n      }\n    }));\n    fetch(this.state.api_url + \"method=ticket.deleteMessage&message_id=\" + message_id + \"&\" + window.location.search.replace('?', '')).then(res => res.json()).then(data => {\n      if (data.result) {\n        fetch(this.state.api_url + \"method=ticket.getMessages&ticket_id=\" + this.state.tiket_info['id'] + \"&\" + window.location.search.replace('?', '')).then(res => res.json()).then(data => {\n          if (data.result) {\n            this.setState({\n              tiket_message: data.response\n            });\n            this.setPopout(null);\n          } else {\n            this.showErrorAlert(data.error.message);\n          }\n        }).catch(err => {\n          this.showErrorAlert(err);\n        });\n      } else {\n        this.showErrorAlert(data.error.message);\n      }\n    }).catch(err => {\n      this.showErrorAlert(err);\n    });\n  }\n\n  deleteTicket() {\n    this.setPopout( /*#__PURE__*/React.createElement(ScreenSpinner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 24\n      }\n    }));\n    fetch(this.state.api_url + \"method=ticket.close&ticket_id=\" + this.state.tiket_info['id'] + \"&\" + window.location.search.replace('?', '')).then(res => res.json()).then(data => {\n      if (data.result) {\n        fetch(this.state.api_url + \"method=ticket.getById&ticket_id=\" + this.state.tiket_info['id'] + \"&\" + window.location.search.replace('?', '')).then(res => res.json()).then(data => {\n          if (data.result) {\n            this.setState({\n              tiket_info: data.response.info\n            });\n            this.setPopout(null);\n          } else {\n            this.showErrorAlert(data.error.message);\n          }\n        }).catch(err => {\n          this.showErrorAlert(err);\n        });\n      } else {\n        this.showErrorAlert(data.error.message);\n      }\n    }).catch(err => {\n      this.showErrorAlert(err);\n    });\n  }\n\n  openTicket() {\n    this.setPopout( /*#__PURE__*/React.createElement(ScreenSpinner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 24\n      }\n    }));\n    fetch(this.state.api_url + \"method=ticket.open&ticket_id=\" + this.state.tiket_info['id'] + \"&\" + window.location.search.replace('?', '')).then(res => res.json()).then(data => {\n      if (data.result) {\n        fetch(this.state.api_url + \"method=ticket.getById&ticket_id=\" + this.state.tiket_info['id'] + \"&\" + window.location.search.replace('?', '')).then(res => res.json()).then(data => {\n          if (data.result) {\n            this.setState({\n              tiket_info: data.response.info\n            });\n            this.setPopout(null);\n          } else {\n            this.showErrorAlert(data.error.message);\n          }\n        }).catch(err => {\n          this.showErrorAlert(err);\n        });\n      } else {\n        this.showErrorAlert(data.error.message);\n      }\n    }).catch(err => {\n      this.showErrorAlert(err);\n    });\n  }\n\n  sendNewMessageRedact() {\n    this.setPopout( /*#__PURE__*/React.createElement(ScreenSpinner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 24\n      }\n    }));\n\n    if (this.state.tiket_send_message.length >= 5) {\n      var url = this.state.api_url + 'method=ticket.editMessage&' + window.location.search.replace('?', '');\n      var method = 'POST';\n      var async = true;\n      var xhr = new XMLHttpRequest();\n      xhr.open(method, url, async);\n      xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n\n      xhr.onreadystatechange = () => {\n        if (xhr.status === 4) return;\n\n        if (xhr.status === 200) {\n          fetch(this.state.api_url + \"method=ticket.getMessages&ticket_id=\" + this.state.tiket_info['id'] + \"&\" + window.location.search.replace('?', '')).then(res => res.json()).then(data => {\n            if (data.result) {\n              this.setState({\n                tiket_message: data.response,\n                tiket_send_message: \" \",\n                add_comment: false,\n                redaction: false\n              });\n              this.setPopout(null);\n              this.setState({\n                tiket_send_message: \"\"\n              });\n            } else {\n              this.showErrorAlert(data.error.message);\n            }\n          }).catch(err => {\n            console.log(err);\n          });\n        }\n      };\n\n      xhr.send('message_id=' + this.state.message_id_redac + '&text=' + this.state.tiket_send_message);\n\n      xhr.onerror = error => {\n        this.showErrorAlert(error);\n      };\n    } else {\n      this.showErrorAlert(\"Текст сообщения должен быть минимум из 5 символов.\");\n    }\n  }\n\n  sendNewMessageComment() {\n    this.setPopout( /*#__PURE__*/React.createElement(ScreenSpinner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 24\n      }\n    }));\n\n    if (this.state.tiket_send_message.length >= 5) {\n      var url = this.state.api_url + 'method=ticket.commentMessage&' + window.location.search.replace('?', '');\n      var method = 'POST';\n      var async = true;\n      var xhr = new XMLHttpRequest();\n      xhr.open(method, url, async);\n      xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n\n      xhr.onreadystatechange = () => {\n        if (xhr.status === 4) return;\n\n        if (xhr.status === 200) {\n          fetch(this.state.api_url + \"method=ticket.getMessages&ticket_id=\" + this.state.tiket_info['id'] + \"&\" + window.location.search.replace('?', '')).then(res => res.json()).then(data => {\n            if (data.result) {\n              this.setState({\n                tiket_message: data.response,\n                tiket_send_message: \"ю\",\n                add_comment: false,\n                redaction: false\n              });\n              this.setPopout(null);\n              this.setState({\n                tiket_send_message: \"\"\n              });\n            } else {\n              this.showErrorAlert(data.error.message);\n            }\n          }).catch(err => {\n            this.showErrorAlert(err);\n          });\n        }\n      };\n\n      xhr.send('message_id=' + this.state.message_id_add + '&text=' + this.state.tiket_send_message);\n\n      xhr.onerror = error => {\n        this.showErrorAlert(error);\n      };\n    } else {\n      this.showErrorAlert(\"Текст сообщения должен быть минимум из 5 символов.\");\n    }\n  }\n\n  componentDidMount() {\n    this.setPopout( /*#__PURE__*/React.createElement(ScreenSpinner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 22\n      }\n    }));\n    this.Prepare_ticket();\n  }\n\n  nofinc() {\n    return 1;\n  }\n\n  render() {\n    var props = this.props;\n    var thisOb = this;\n    return /*#__PURE__*/React.createElement(Panel, {\n      id: this.props.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(PanelHeader, {\n      left: /*#__PURE__*/React.createElement(PanelHeaderBack, {\n        onClick: () => this.props.this.goBack(),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 23\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 455,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      id: \"animation\",\n      onClick: () => this.copy(this.state.tiket_info['id']),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 458,\n        columnNumber: 17\n      }\n    }, \"\\u0412\\u043E\\u043F\\u0440\\u043E\\u0441 #\", this.state.tiket_info['id'])), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"title_tiket\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 461,\n        columnNumber: 13\n      }\n    }, new Date(this.state.tiket_info['time'] * 1e3).getDate(), \" \", add_month(this.state.tiket_info['time'])), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"title_tiket\",\n      style: {\n        marginTop: \"10px\",\n        width: \"95%\",\n        marginLeft: \"10px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 462,\n        columnNumber: 13\n      }\n    }, \"\\u041F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C \\u043E\\u0431\\u0440\\u0430\\u0442\\u0438\\u043B\\u0441\\u044F \\u0441 \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441\\u043E\\u043C  \\xAB\", this.state.tiket_info['title'], \"\\xBB\"), /*#__PURE__*/React.createElement(React.Fragment, null, this.state.tiket_message ? this.state.tiket_message.map(function (result, i) {\n      var is_mine_ticket = Number(thisOb.state.tiket_info.author['id']) === Number(parsedHash.vk_user_id) ? true : false;\n      var is_mine_message = Number(result['author']['id']) === Number(parsedHash.vk_user_id) ? true : false;\n      var avatar = result.author.is_moderator ? result['author']['avatar']['url'] : result.author.photo_200;\n      var time = fix_time(new Date(result.time * 1e3).getHours()) + \":\" + fix_time(new Date(result.time * 1e3).getMinutes());\n      var title_moder = isFinite(result['nickname']) ? `Агент Поддержки #${result['nickname']}` : result['nickname'] ? result['nickname'] : `Агент Поддержки #${result['author']['id']}`;\n      return Number(thisOb.state.tiket_info.author['id']) === Number(parsedHash.vk_user_id) ? /*#__PURE__*/React.createElement(Message, {\n        title: result.author.id === 526444378 ? \"Витёк\" : result.author.is_moderator ? title_moder : result.author.first_name + \" \" + result.author.last_name,\n        title_icon: result.moderator_comment !== undefined ? /*#__PURE__*/React.createElement(Icon16ReplyOutline, {\n          width: 10,\n          height: 10,\n          style: {\n            display: \"inline-block\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 475,\n            columnNumber: 86\n          }\n        }) : false,\n        is_mine: is_mine_message === is_mine_ticket,\n        avatar: avatar,\n        onClick: () => thisOb.Admin(result['id'], result['author'].first_name ? -result['author']['id'] : result['author']['id'], result['text'], result.moderator_comment !== undefined ? result['moderator_comment']['text'] : null, avatar, result['mark']),\n        key: i,\n        is_special: thisOb.props.account.special,\n        is_mark: result.mark,\n        time: time,\n        sendRayt_false: () => thisOb.sendRayt(false, result.id),\n        sendRayt_true: () => thisOb.sendRayt(true, result.id),\n        approved: result.approved ? true : false,\n        CanselApp: () => props.this.showAlert('Информация', 'Этот ответ оценен отрицательно'),\n        DoneApp: () => props.this.showAlert('Информация', 'Этот ответ оценен положительно'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 473,\n          columnNumber: 29\n        }\n      }, result.text) : /*#__PURE__*/React.createElement(Message, {\n        title: result.author.id === 526444378 ? \"Витёк\" : result.author.is_moderator ? title_moder : result.author.first_name + \" \" + result.author.last_name,\n        title_icon: result.moderator_comment !== undefined ? /*#__PURE__*/React.createElement(Icon16ReplyOutline, {\n          width: 10,\n          height: 10,\n          style: {\n            display: \"inline-block\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 495,\n            columnNumber: 86\n          }\n        }) : false,\n        is_mine: result.author.is_moderator,\n        avatar: result.author.id === 526444378 ? Ninja : avatar,\n        key: i,\n        time: time,\n        onClick: () => thisOb.Admin(result['id'], result['author'].first_name ? -result['author']['id'] : result['author']['id'], result['text'], result.moderator_comment !== undefined ? result['moderator_comment']['text'] : null, avatar, result['mark']),\n        is_special: thisOb.props.account.special,\n        is_mark: result.mark,\n        sendRayt_false: () => thisOb.sendRayt(false, result.id),\n        sendRayt_true: () => thisOb.sendRayt(true, result.id),\n        approved: result.approved ? true : false,\n        CanselApp: () => props.this.showAlert('Информация', 'Этот ответ оценен отрицательно'),\n        DoneApp: () => props.this.showAlert('Информация', 'Этот ответ оценен положительно'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 29\n        }\n      }, result.text);\n    }) : null, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginBottom: '2vh'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 25\n      }\n    })), this.state.tiket_info['status'] === 0 || this.state.redaction === true || this.state.add_comment === true ?\n    /*#__PURE__*/\n    //  <div id=\"other\" className=\"other\">\n    //     <div className=\"down_input_message\">\n    //         <textarea maxLength=\"2020\" name=\"tiket_send_message\" value={this.state.tiket_send_message} onChange={(e) => this.onChange(e)} placeholder={this.state.add_comment ? \"Комментарий... (Не менее 6 символов)\" : \"Ответ... (Не менее 6 символов)\"} className=\"textarea\"></textarea>\n    //     </div>\n    //     <div className=\"send_text\" onClick={() => {(this.state.tiket_send_message.length > 5) ? this.state.redaction !== true && this.state.add_comment !== true ? this.sendNewMessage() : this.state.redaction ? this.sendNewMessageRedact() : this.sendNewMessageComment() : this.nofinc()}}>\n    //         <Icon24Up style={{color: (this.state.tiket_send_message.length > 5) ? \"var(--dynamic_green)\" : \"var(--dynamic_orange)\"}} />\n    //     </div>\n    // </div>\n    React.createElement(Div, {\n      className: \"message_sending\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 524,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Textarea, {\n      maxLength: \"2020\",\n      value: this.state.tiket_send_message,\n      name: \"tiket_send_message\",\n      onChange: e => this.onChange(e),\n      placeholder: this.state.add_comment ? \"Комментарий... (Не менее 6 символов)\" : \"Ответ... (Не менее 6 символов)\",\n      style: {\n        width: platformname ? \"82%\" : \"85%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 525,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"send_text\",\n      onClick: () => {\n        this.state.tiket_send_message.length > 5 ? this.state.redaction !== true && this.state.add_comment !== true ? this.sendNewMessage() : this.state.redaction ? this.sendNewMessageRedact() : this.sendNewMessageComment() : this.nofinc();\n      },\n      style: {\n        background: this.state.tiket_send_message.length > 5 ? \"var(--button_send)\" : \"#98A0AD\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 532,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Icon24Up, {\n      width: 30,\n      height: 30,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 535,\n        columnNumber: 25\n      }\n    }))) : null, this.state.tiket_info['status'] === 1 ? Number(this.state.tiket_info['author']['id']) === Number(parsedHash.vk_user_id) ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 541,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(FixedLayout, {\n      vertical: \"bottom\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 542,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(Div, {\n      style: {\n        display: \"flex\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 543,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      size: \"l\",\n      style: {\n        marginRight: \"5%\"\n      },\n      stretched: true,\n      onClick: () => this.deleteTicket(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 544,\n        columnNumber: 27\n      }\n    }, \"\\u041F\\u0440\\u043E\\u0431\\u043B\\u0435\\u043C\\u0430 \\u0440\\u0435\\u0448\\u0435\\u043D\\u0430\"), /*#__PURE__*/React.createElement(Button, {\n      size: \"l\",\n      stretched: true,\n      mode: \"secondary\",\n      onClick: () => this.openTicket(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 545,\n        columnNumber: 27\n      }\n    }, \"\\u041F\\u0440\\u043E\\u0431\\u043B\\u0435\\u043C\\u0430 \\u043D\\u0435 \\u0440\\u0435\\u0448\\u0435\\u043D\\u0430\")))) : null : null, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 552,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 553,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 554,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n;","map":{"version":3,"sources":["C:/Users/rshub/Desktop/Road-to-Jedi/mobile-road/src/components/tiket.js"],"names":["React","bridge","Panel","PanelHeader","Button","FixedLayout","Div","ScreenSpinner","ActionSheet","ActionSheetItem","Textarea","PanelHeaderBack","Cell","Icon24Up","Icon16ReplyOutline","Ninja","Message","platformname","test","navigator","userAgent","queryString","require","parsedHash","parse","window","location","search","replace","months","fix_time","time","add_month","month","number_month","Date","getMonth","Ticket","Component","constructor","props","state","api_url","tiket_info","tiket_message","tiket_send_message","add_comment","redaction","propsbi","this","setPopout","showErrorAlert","setActiveModal","goOtherProfile","sendRayt","bind","onChange","event","name","currentTarget","value","setState","Prepare_ticket","fetch","ticket_id","then","res","json","data","result","response","info","messages","error","message","catch","err","mark","message_id","reyt","sendClear","id","Admin","author_id","text","comment","avatar","account","special","other_profile","undefined","message_id_add","Number","message_id_redac","deleteMessage","copy","popout","vk_user_id","deleteTicket","openTicket","send","sendNewMessage","length","url","method","async","xhr","XMLHttpRequest","open","setRequestHeader","onreadystatechange","status","onerror","sendNewMessageRedact","console","log","sendNewMessageComment","componentDidMount","nofinc","render","thisOb","goBack","getDate","marginTop","width","marginLeft","map","i","is_mine_ticket","author","is_mine_message","is_moderator","photo_200","getHours","getMinutes","title_moder","isFinite","first_name","last_name","moderator_comment","display","approved","showAlert","marginBottom","e","background","marginRight"],"mappings":"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","sourcesContent":["import React from 'react';\nimport bridge from '@vkontakte/vk-bridge'; // VK Brige\n\nimport { \n    Panel,\n    PanelHeader,\n    Button,\n    FixedLayout,\n    Div,\n    ScreenSpinner,\n    ActionSheet,\n    ActionSheetItem,\n    Textarea,\n    PanelHeaderBack,\n    Cell\n    } from '@vkontakte/vkui';\n\nimport Icon24Up from '@vkontakte/icons/dist/24/up';\nimport Icon16ReplyOutline from '@vkontakte/icons/dist/16/reply_outline';\nimport Ninja from '../images/Ninja.webp'\n\nimport Message from './message'\nconst platformname = (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));\nconst queryString = require('query-string');\nconst parsedHash = queryString.parse(window.location.search.replace('?', ''));\n\nvar months = [\n    'января',\n    'февраля',\n    'марта',\n    'апреля',\n    'мая',\n    'июня',\n    'июля',\n    'августа',\n    'сентября',\n    'ноября',\n    'декабря',\n];\n\nfunction fix_time(time) {\n    if(time < 10) {\n        return \"0\" + time\n    } else {\n        return time\n    }\n}\n\nfunction add_month(month) {\n    let number_month = new Date(month * 1e3).getMonth()\n    return months[number_month]\n}\n\nexport default class Ticket extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            api_url: \"https://xelene.ru/road/php/index.php?\",\n            tiket_info: [],\n            tiket_message: [],\n            tiket_send_message: '',\n            add_comment: false,\n            redaction: false,\n            \n\n\n        }\n        var propsbi = this.props.this;\n        this.setPopout = propsbi.setPopout;\n        this.showErrorAlert = propsbi.showErrorAlert;\n        this.setActiveModal = propsbi.setActiveModal;\n        this.goOtherProfile = propsbi.goOtherProfile;\n        this.sendRayt = this.sendRayt.bind(this);\n        this.onChange = (event) => {\n          var name = event.currentTarget.name;\n          var value = event.currentTarget.value;\n          this.setState({ [name]: value });\n        }\n\n    }\n    Prepare_ticket(){\n        fetch(this.state.api_url + \"method=ticket.getById&ticket_id=\" + this.props.ticket_id + \"&\" + window.location.search.replace('?', ''))\n        .then(res => res.json())\n        .then(data => {\n          if(data.result) {\n            this.setState({tiket_info: data.response.info,\n              tiket_message: data.response.messages });\n              this.setPopout(null);\n          } else {\n            this.showErrorAlert(data.error.message)\n          }\n        })\n        .catch(err => {\n          this.showErrorAlert(err)\n\n        })\n    }\n    sendRayt(mark, message_id) {\n        let reyt = 1;\n        if(mark === true) {\n          reyt = 1;\n        } else {\n          reyt = 0;\n        }\n        if(reyt < 2) {\n          fetch(this.state.api_url + \"method=ticket.markMessage&message_id=\" + message_id + \"&mark=\" + reyt + \"&\" + window.location.search.replace('?', ''))\n            .then(res => res.json())\n            .then(data => {\n              if(data.result) {\n          \n                fetch(this.state.api_url + \"method=ticket.getMessages&ticket_id=\" + this.state.tiket_info['id'] + \"&\" + window.location.search.replace('?', ''))\n                  .then(res => res.json())\n                  .then(data => {\n                    if(data.result) {\n                      this.setState({tiket_message: data.response})\n                      this.setActiveModal(null);\n                      this.setPopout(null);\n                    }else {\n                      this.showErrorAlert(data.error.message)\n                    }\n                    })\n                    .catch(err => {\n                      this.showErrorAlert(err)\n                    })\n              }else {\n                this.showErrorAlert(data.error.message)\n              }\n            })\n            .catch(err => {\n                this.showErrorAlert(err)\n            \n            })\n        }\n      }\n      sendClear(id) {\n        this.setPopout(<ScreenSpinner/>)\n        fetch(this.state.api_url + \"method=ticket.approveReply&message_id=\" + id + \"&\" + window.location.search.replace('?', ''))\n          .then(res => res.json())\n          .then(data => {\n            if(data.result) {\n              this.setPopout(null)\n            } else {\n              this.showErrorAlert(data.error.message)\n            }\n          })\n          .catch(err => {\n            this.showErrorAlert(err)\n    \n          })\n      }\n      Admin(id, author_id, text, comment,avatar=null, mark = -1){\n        this.props.this.setPopout(\n          <ActionSheet onClose={() => this.setPopout(null)}>\n             {author_id > 0 ?\n            <ActionSheetItem autoclose onClick={() => this.goOtherProfile(author_id)}>\n              Профиль\n            </ActionSheetItem>\n            : null}\n           { this.props.account.special && mark !== 0 && mark !== 1 && author_id > 0 ? \n            <ActionSheetItem autoclose onClick={() => this.sendRayt(true, id)}>\n              Оценить положительно\n            </ActionSheetItem> \n            : null}\n            { this.props.account.special && mark !== 0 && mark !== 1 && author_id > 0 ? \n            <ActionSheetItem autoclose onClick={() => this.sendRayt(false, id)}>\n              Оценить отрицательно\n            </ActionSheetItem> \n            : null }\n            { this.props.account.special === true && author_id > 0 ? \n            <ActionSheetItem autoclose onClick={() => this.sendClear(id)}>\n              Одобрить\n            </ActionSheetItem> \n            : null }\n            { (this.props.account.special === true && author_id < 0) ? \n            <ActionSheetItem autoclose onClick={() => {this.props.this.setState({other_profile:{'id':author_id,'avatar': {'url': avatar}}});this.setActiveModal('ban_user');}}>\n              Забанить пользователя\n            </ActionSheetItem> \n            : null }\n            { this.props.account.special === true && author_id > 0 ? \n            comment === null || comment === undefined? \n            <ActionSheetItem autoclose onClick={() => this.setState({add_comment: true, message_id_add: id})}>\n            Добавить комментарий\n            </ActionSheetItem> \n            : null\n            : null }\n            {Number(author_id === this.props.account.id) ? \n           <ActionSheetItem autoclose onClick={() => this.setState({redaction: true, message_id_redac: id, tiket_send_message: text})}>\n           Редактировать\n           </ActionSheetItem>\n           : null}\n        {comment === null || comment === undefined ? null : \n            <ActionSheetItem autoclose onClick={() => {this.props.this.setState({comment: comment}); this.setActiveModal(\"comment\")}}>\n            Просмотреть комментарий\n          </ActionSheetItem>\n            }\n            {Number(author_id) === Number(this.props.account.id) || this.props.account.special === true ? \n            <ActionSheetItem autoclose onClick={() => this.deleteMessage(id)}>\n              Удалить сообщение\n            </ActionSheetItem>\n            : null}\n            {<ActionSheetItem autoclose mode=\"cancel\">Отменить</ActionSheetItem>}\n          </ActionSheet>\n        )\n      }\n      copy(id) {\n        this.setPopout(\n          <ActionSheet onClose={() => this.setState({ popout: null })}>\n            {Number(this.state.tiket_info['author']['id']) === Number(parsedHash.vk_user_id) ? \n            this.state.tiket_info['status'] === 0 ||  this.state.tiket_info['status'] === 1 ?\n            <ActionSheetItem autoclose onClick={() => this.deleteTicket()}>\n            Закрыть тикет\n            </ActionSheetItem>\n            : \n            <ActionSheetItem autoclose onClick={() => this.openTicket()}>\n            Открыть тикет\n            </ActionSheetItem>\n            : \n            this.props.account.special === true ?\n            this.state.tiket_info['status'] === 0 ||  this.state.tiket_info['status'] === 1 ?\n            <ActionSheetItem autoclose onClick={() => this.deleteTicket()}>\n            Закрыть тикет\n            </ActionSheetItem>\n            : \n            <ActionSheetItem autoclose onClick={() => this.openTicket()}>\n            Открыть тикет\n            </ActionSheetItem>\n            : null\n          }\n            <ActionSheetItem autoclose onClick={() => bridge.send(\"VKWebAppCopyText\", {text: \"https://vk.com/app7409818#ticket_id=\" + id})}>\n              Скопировать ссылку\n            </ActionSheetItem>\n            {<ActionSheetItem autoclose mode=\"cancel\">Отменить</ActionSheetItem>}\n          </ActionSheet>)\n      }\n      sendNewMessage() {\n        if(this.state.tiket_send_message.length >= 5) {\n          this.setPopout(<ScreenSpinner/>)\n          var url = this.state.api_url + 'method=ticket.sendMessage&' + window.location.search.replace('?', '');\n          var method = 'POST';\n          var async = true;\n      \n          var xhr = new XMLHttpRequest();\n          xhr.open( method, url, async );\n          xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n      \n          xhr.onreadystatechange = () => {\n            if(xhr.status === 4) return;\n            if ( xhr.status === 200 ) {\n              fetch(this.state.api_url + \"method=ticket.getMessages&ticket_id=\" + this.state.tiket_info['id'] + \"&\" + window.location.search.replace('?', ''))\n              .then(res => res.json())\n              .then(data => {\n                if(data.result) {\n                  this.setState({tiket_message: data.response, tiket_send_message: \" \",add_comment: false, redaction: false})\n                  this.setPopout(null)\n                  this.setState({tiket_send_message: \"\"})\n                }else {\n                  this.showErrorAlert(data.error.message)\n                }\n              })\n              .catch(err => {\n                this.showErrorAlert(err)\n  \n              })\n            }\n          }\n          \n          xhr.send( 'ticket_id=' + this.state.tiket_info['id'] + '&text=' + this.state.tiket_send_message);\n      \n          xhr.onerror = ( error ) => {\n            this.showErrorAlert(error)\n          }\n        } else {\n            // this.showErrorAlert(\"Текст сообщения должен быть минимум из 5 символов.\")\n        }\n      }\n      deleteMessage(message_id) {\n        this.setPopout(<ScreenSpinner/>)\n          fetch(this.state.api_url + \"method=ticket.deleteMessage&message_id=\" + message_id + \"&\" + window.location.search.replace('?', ''))\n            .then(res => res.json())\n            .then(data => {\n              if(data.result) {\n                fetch(this.state.api_url + \"method=ticket.getMessages&ticket_id=\" + this.state.tiket_info['id'] + \"&\" + window.location.search.replace('?', ''))\n                  .then(res => res.json())\n                  .then(data => {\n                    if(data.result) {\n                      this.setState({tiket_message: data.response})\n                      this.setPopout(null)\n                    }else {\n                      this.showErrorAlert(data.error.message)\n                    }\n                  })\n                  .catch(err => {\n                    this.showErrorAlert(err)\n          \n                  })\n              }else {\n                this.showErrorAlert(data.error.message)\n              }\n            })\n            .catch(err => {\n                this.showErrorAlert(err)\n  \n            })\n      }\n      deleteTicket() {\n        this.setPopout(<ScreenSpinner/>)\n        fetch(this.state.api_url + \"method=ticket.close&ticket_id=\" + this.state.tiket_info['id'] + \"&\" + window.location.search.replace('?', ''))\n          .then(res => res.json())\n          .then(data => {\n            if(data.result) {\n              fetch(this.state.api_url + \"method=ticket.getById&ticket_id=\" + this.state.tiket_info['id'] + \"&\" + window.location.search.replace('?', ''))\n              .then(res => res.json())\n               .then(data => {\n              if(data.result) {\n                this.setState({tiket_info: data.response.info})\n                this.setPopout(null)\n              }else {\n                this.showErrorAlert(data.error.message)\n              }\n              })\n              .catch(err => {\n                this.showErrorAlert(err)\n      \n              })\n            }else {\n              this.showErrorAlert(data.error.message)\n            }\n          })\n          .catch(err => {\n            this.showErrorAlert(err)\n  \n          })\n      }\n      openTicket() {\n        this.setPopout(<ScreenSpinner/>)\n        fetch(this.state.api_url + \"method=ticket.open&ticket_id=\" + this.state.tiket_info['id'] + \"&\" + window.location.search.replace('?', ''))\n          .then(res => res.json())\n          .then(data => {\n            if(data.result) {\n              fetch(this.state.api_url + \"method=ticket.getById&ticket_id=\" + this.state.tiket_info['id'] + \"&\" + window.location.search.replace('?', ''))\n              .then(res => res.json())\n               .then(data => {\n              if(data.result) {\n                this.setState({tiket_info: data.response.info})\n                this.setPopout(null)\n              }else {\n                this.showErrorAlert(data.error.message)\n              }\n            })\n          .catch(err => {\n            this.showErrorAlert(err)\n  \n          })\n            }else {\n              this.showErrorAlert(data.error.message)\n            }\n          })\n          .catch(err => {\n            this.showErrorAlert(err)\n  \n          })\n      }\n      sendNewMessageRedact() {\n        this.setPopout(<ScreenSpinner/>)\n        if(this.state.tiket_send_message.length >= 5) {\n          var url = this.state.api_url + 'method=ticket.editMessage&' + window.location.search.replace('?', '');\n          var method = 'POST';\n          var async = true;\n      \n          var xhr = new XMLHttpRequest();\n          xhr.open( method, url, async );\n          xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n      \n          xhr.onreadystatechange = () => {\n            if(xhr.status === 4) return;\n            if ( xhr.status === 200 ) {\n              fetch(this.state.api_url + \"method=ticket.getMessages&ticket_id=\" + this.state.tiket_info['id'] + \"&\" + window.location.search.replace('?', ''))\n              .then(res => res.json())\n              .then(data => {\n                if(data.result) {\n                  this.setState({tiket_message: data.response, tiket_send_message: \" \", add_comment: false, redaction: false})\n                  this.setPopout(null)\n                  this.setState({tiket_send_message: \"\"})\n                }else {\n                  this.showErrorAlert(data.error.message)\n                }\n              })\n              .catch(err => {\n                console.log(err)\n              })\n            }\n          }\n          \n          xhr.send('message_id=' + this.state.message_id_redac + '&text=' + this.state.tiket_send_message);\n      \n          xhr.onerror = ( error ) => {\n            this.showErrorAlert(error)\n          }\n        } else {\n            this.showErrorAlert(\"Текст сообщения должен быть минимум из 5 символов.\")\n        }\n      }\n      sendNewMessageComment() {\n        this.setPopout(<ScreenSpinner/>)\n        if(this.state.tiket_send_message.length >= 5) {\n          var url = this.state.api_url + 'method=ticket.commentMessage&' + window.location.search.replace('?', '');\n          var method = 'POST';\n          var async = true;\n      \n          var xhr = new XMLHttpRequest();\n          xhr.open( method, url, async );\n          xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n      \n          xhr.onreadystatechange = () => {\n            if(xhr.status === 4) return;\n            if ( xhr.status === 200 ) {\n              fetch(this.state.api_url + \"method=ticket.getMessages&ticket_id=\" + this.state.tiket_info['id'] + \"&\" + window.location.search.replace('?', ''))\n              .then(res => res.json())\n              .then(data => {\n                if(data.result) {\n                  this.setState({tiket_message: data.response, tiket_send_message: \"ю\",add_comment: false, redaction: false})\n                  this.setPopout(null)\n                  this.setState({tiket_send_message: \"\"})\n                }else{\n                  this.showErrorAlert(data.error.message)\n                }\n              })\n              .catch(err => {\n                this.showErrorAlert(err)\n  \n              })\n            }\n          }\n          xhr.send('message_id=' + this.state.message_id_add + '&text=' + this.state.tiket_send_message);\n      \n          xhr.onerror = ( error ) => {\n            this.showErrorAlert(error)\n          }\n        } else {\n          this.showErrorAlert(\"Текст сообщения должен быть минимум из 5 символов.\")\n        }\n      }\n    componentDidMount(){\n      this.setPopout(<ScreenSpinner/>)\n      this.Prepare_ticket()\n    }\n    nofinc(){\n      return 1\n    }\n    render(){\n        var props = this.props;\n        var thisOb = this;\n        return(\n        <Panel id={this.props.id}>\n            <PanelHeader \n                left={<PanelHeaderBack onClick={() => this.props.this.goBack()} />}\n            >\n                <span id=\"animation\" onClick={() => this.copy(this.state.tiket_info['id'])}>Вопрос #{this.state.tiket_info['id']}</span>\n            </PanelHeader>\n            {/* MESSAGES */}\n            <div className=\"title_tiket\">{new Date(this.state.tiket_info['time'] * 1e3).getDate()} {add_month(this.state.tiket_info['time'])}</div>\n            <div className=\"title_tiket\" style={{marginTop: \"10px\", width: \"95%\", marginLeft: \"10px\"}}>Пользователь обратился с вопросом  «{this.state.tiket_info['title']}»</div>\n                    <>{this.state.tiket_message ? this.state.tiket_message.map(function(result, i) {\n                        var is_mine_ticket = Number(thisOb.state.tiket_info.author['id']) === Number(parsedHash.vk_user_id) ? true : false\n\n\n                        var is_mine_message = Number(result['author']['id']) === Number(parsedHash.vk_user_id) ? true : false\n                        var avatar = result.author.is_moderator ? result['author']['avatar']['url'] : result.author.photo_200\n                        var time = fix_time(new Date(result.time * 1e3).getHours()) + \":\" + fix_time(new Date(result.time * 1e3).getMinutes())\n                        var title_moder = isFinite(result['nickname']) ? `Агент Поддержки #${result['nickname']}` : result['nickname'] ? result['nickname'] : `Агент Поддержки #${result['author']['id']}`;\n                        return (\n                            Number(thisOb.state.tiket_info.author['id']) === Number(parsedHash.vk_user_id) ?\n                            <Message \n                                title={result.author.id === 526444378 ? \"Витёк\" : result.author.is_moderator ? title_moder : result.author.first_name + \" \" + result.author.last_name} \n                                title_icon={result.moderator_comment !== undefined ? <Icon16ReplyOutline width={10} height={10} style={{display: \"inline-block\"}}/> : false}\n                                is_mine={is_mine_message === is_mine_ticket}\n                                avatar={avatar}\n                                onClick={() => thisOb.Admin(result['id'], result['author'].first_name ? -result['author']['id'] : result['author']['id'] , result['text'], result.moderator_comment !== undefined ? result['moderator_comment']['text'] : null,avatar, result['mark'])}\n                                key={i}\n                                is_special={thisOb.props.account.special}\n                                is_mark={result.mark}\n                                time={time}\n                                sendRayt_false={() => thisOb.sendRayt(false, result.id)}\n                                sendRayt_true={() => thisOb.sendRayt(true, result.id)}\n                                approved={result.approved ? true : false}\n                                CanselApp={() => props.this.showAlert('Информация', 'Этот ответ оценен отрицательно')}\n                                DoneApp={() => props.this.showAlert('Информация', 'Этот ответ оценен положительно')}\n                            >\n                                {result.text}\n                            </Message>\n                            \n                            :\n                            <Message \n                                title={result.author.id === 526444378 ? \"Витёк\" : result.author.is_moderator ? title_moder : result.author.first_name + \" \" + result.author.last_name} \n                                title_icon={result.moderator_comment !== undefined ? <Icon16ReplyOutline width={10} height={10} style={{display: \"inline-block\"}}/> : false}\n                                is_mine={result.author.is_moderator}\n                                avatar={result.author.id === 526444378 ? Ninja : avatar}\n                                key={i}\n                                time={time}\n                                onClick={() => thisOb.Admin(result['id'], result['author'].first_name ? -result['author']['id'] : result['author']['id'], result['text'], result.moderator_comment !== undefined ? result['moderator_comment']['text'] : null,avatar, result['mark'])}\n                                is_special={thisOb.props.account.special}\n                                is_mark={result.mark}\n                                sendRayt_false={() => thisOb.sendRayt(false, result.id)}\n                                sendRayt_true={() => thisOb.sendRayt(true, result.id)}\n                                approved={result.approved ? true : false}\n                                CanselApp={() => props.this.showAlert('Информация', 'Этот ответ оценен отрицательно')}\n                                DoneApp={() => props.this.showAlert('Информация', 'Этот ответ оценен положительно')}\n                            >\n                                {result.text}\n                            </Message>\n                        )}) : null}\n                        <div style={{marginBottom: '2vh'}}></div>\n                      </>\n            {/* INPUT */}\n            {this.state.tiket_info['status'] === 0 || (this.state.redaction === true || this.state.add_comment === true) ? \n                //  <div id=\"other\" className=\"other\">\n                //     <div className=\"down_input_message\">\n                //         <textarea maxLength=\"2020\" name=\"tiket_send_message\" value={this.state.tiket_send_message} onChange={(e) => this.onChange(e)} placeholder={this.state.add_comment ? \"Комментарий... (Не менее 6 символов)\" : \"Ответ... (Не менее 6 символов)\"} className=\"textarea\"></textarea>\n                //     </div>\n                //     <div className=\"send_text\" onClick={() => {(this.state.tiket_send_message.length > 5) ? this.state.redaction !== true && this.state.add_comment !== true ? this.sendNewMessage() : this.state.redaction ? this.sendNewMessageRedact() : this.sendNewMessageComment() : this.nofinc()}}>\n                //         <Icon24Up style={{color: (this.state.tiket_send_message.length > 5) ? \"var(--dynamic_green)\" : \"var(--dynamic_orange)\"}} />\n                //     </div>\n                // </div>\n                <Div className=\"message_sending\">\n                    <Textarea \n                    maxLength=\"2020\" \n                    value={this.state.tiket_send_message}\n                    name=\"tiket_send_message\"\n                    onChange={(e) => this.onChange(e)} \n                    placeholder={this.state.add_comment ? \"Комментарий... (Не менее 6 символов)\" : \"Ответ... (Не менее 6 символов)\"}\n                    style={{width: platformname ? \"82%\" : \"85%\"}}></Textarea>\n                    <div className=\"send_text\" \n                    onClick={() => {(this.state.tiket_send_message.length > 5) ? this.state.redaction !== true && this.state.add_comment !== true ? this.sendNewMessage() : this.state.redaction ? this.sendNewMessageRedact() : this.sendNewMessageComment() : this.nofinc()}}\n                    style={{background: (this.state.tiket_send_message.length > 5) ? \"var(--button_send)\" : \"#98A0AD\"}} >\n                        <Icon24Up width={30} height={30} />\n                    </div>\n                </Div>\n                 : null}\n            {this.state.tiket_info['status'] === 1 ? \n                Number(this.state.tiket_info['author']['id']) === Number(parsedHash.vk_user_id) ?\n                    <div>\n                      <FixedLayout vertical=\"bottom\">\n                        <Div style={{display: \"flex\"}}>\n                          <Button size=\"l\" style={{marginRight: \"5%\"}} stretched onClick={() => this.deleteTicket()}>Проблема решена</Button>\n                          <Button size=\"l\" stretched mode=\"secondary\" onClick={() => this.openTicket()}>Проблема не решена</Button>\n                        </Div>\n                      </FixedLayout>\n                        \n                    </div>\n                : null\n            : null}\n                <br/>\n                <br/>\n                <br/>\n            </Panel>\n        )\n    }\n};\n"]},"metadata":{},"sourceType":"module"}