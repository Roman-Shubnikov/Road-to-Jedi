{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{Panel,PanelHeader,Avatar,Separator,PullToRefresh,SimpleCell}from'@vkontakte/vkui';import Icon16Fire from'@vkontakte/icons/dist/16/fire';import Icon16Verified from'@vkontakte/icons/dist/16/verified';import Icon16StarCircleFillYellow from'@vkontakte/icons/dist/16/star_circle_fill_yellow';var Reader=/*#__PURE__*/function(_React$Component){_inherits(Reader,_React$Component);var _super=_createSuper(Reader);function Reader(props){var _this;_classCallCheck(this,Reader);_this=_super.call(this,props);_this.state={api_url:\"https://xelene.ru/road/php/index.php?\",fetching:false,top_agents:null};var propsbi=_this.props.this;_this.setPopout=propsbi.setPopout;_this.showErrorAlert=propsbi.showErrorAlert;_this.setActiveModal=propsbi.setActiveModal;return _this;}_createClass(Reader,[{key:\"getTopUsers\",value:function getTopUsers(){var _this2=this;fetch(this.state.api_url+\"method=users.getTop&\"+window.location.search.replace('?','')).then(function(res){return res.json();}).then(function(data){if(data.result){_this2.setState({top_agents:data.response});setTimeout(function(){_this2.setState({fetching:false});},500);}}).catch(function(err){_this2.showErrorAlert(err);});}},{key:\"componentDidMount\",value:function componentDidMount(){this.getTopUsers();}},{key:\"render\",value:function render(){var _this3=this;var props=this.props.this;// для более удобного использования.\nreturn/*#__PURE__*/React.createElement(Panel,{id:this.props.id},/*#__PURE__*/React.createElement(PanelHeader,null,\"\\u0422\\u043E\\u043F\"),/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(PullToRefresh,{onRefresh:function onRefresh(){_this3.setState({fetching:true});_this3.getTopUsers();},isFetching:this.state.fetching},this.state.top_agents?this.state.top_agents.map(function(result,i){return result['banned']?null:/*#__PURE__*/React.createElement(React.Fragment,{key:result.id},/*#__PURE__*/React.createElement(SimpleCell,{onClick:function onClick(){return props.goOtherProfile(result['id'],true);},description:/*#__PURE__*/React.createElement(\"div\",{className:\"top_moderator_desc\"},result['good_answers']+\" хороших ответов, \"+result['bad_answers']+\" плохих ответов\"),size:\"l\",before:/*#__PURE__*/React.createElement(Avatar,{src:result['avatar']['url']})},/*#__PURE__*/React.createElement(\"div\",{className:\"top_moderator_name\"},isFinite(result['nickname'])?\"\\u0410\\u0433\\u0435\\u043D\\u0442 \\u041F\\u043E\\u0434\\u0434\\u0435\\u0440\\u0436\\u043A\\u0438 #\".concat(result['nickname']):result['nickname']?result['nickname']:\"\\u0410\\u0433\\u0435\\u043D\\u0442 \\u041F\\u043E\\u0434\\u0434\\u0435\\u0440\\u0436\\u043A\\u0438 #\".concat(result['id']),/*#__PURE__*/React.createElement(\"div\",{className:\"top_moderator_name_icon\"},result['flash']===true?/*#__PURE__*/React.createElement(Icon16Fire,{width:12,height:12,onClick:function onClick(){return _this3.setActiveModal('prom');},className:\"top_moderator_name_icon\"}):null),/*#__PURE__*/React.createElement(\"div\",{className:\"top_moderator_name_icon\"},result['donut']===true?/*#__PURE__*/React.createElement(Icon16StarCircleFillYellow,{width:12,height:12,className:\"top_moderator_name_icon\",onClick:function onClick(){return _this3.setActiveModal('donut');}}):null),/*#__PURE__*/React.createElement(\"div\",{className:\"top_moderator_name_icon_ver\"},result['verified']===true?/*#__PURE__*/React.createElement(Icon16Verified,{className:\"top_moderator_name_icon_ver\"}):null))),/*#__PURE__*/React.createElement(Separator,null));}):null)));}}]);return Reader;}(React.Component);export default Reader;","map":{"version":3,"sources":["C:/Users/rshub/Desktop/Road-to-Jedi/mobile-road/src/panels/topUsers/panels/top.js"],"names":["React","Panel","PanelHeader","Avatar","Separator","PullToRefresh","SimpleCell","Icon16Fire","Icon16Verified","Icon16StarCircleFillYellow","Reader","props","state","api_url","fetching","top_agents","propsbi","this","setPopout","showErrorAlert","setActiveModal","fetch","window","location","search","replace","then","res","json","data","result","setState","response","setTimeout","catch","err","getTopUsers","id","map","i","goOtherProfile","isFinite","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { \n  Panel,\n  PanelHeader,\n  Avatar,\n  Separator,\n  PullToRefresh,\n  SimpleCell,\n  } from '@vkontakte/vkui';\n\nimport Icon16Fire from '@vkontakte/icons/dist/16/fire';\nimport Icon16Verified from '@vkontakte/icons/dist/16/verified';\nimport Icon16StarCircleFillYellow from '@vkontakte/icons/dist/16/star_circle_fill_yellow';\n\n    class Reader extends React.Component {\n        constructor(props) {\n            super(props);\n            this.state = {\n              api_url: \"https://xelene.ru/road/php/index.php?\",\n              fetching: false,\n              top_agents: null,\n            }\n            var propsbi = this.props.this;\n            this.setPopout = propsbi.setPopout;\n            this.showErrorAlert = propsbi.showErrorAlert;\n            this.setActiveModal = propsbi.setActiveModal;\n        }\n        getTopUsers(){\n          fetch(this.state.api_url + \"method=users.getTop&\" + window.location.search.replace('?', ''))\n          .then(res => res.json())\n          .then(data => {\n            if(data.result) {\n              this.setState({top_agents: data.response})\n              setTimeout(() => {\n                this.setState({fetching: false});\n              }, 500)\n            }\n          })\n          .catch(err => {\n            this.showErrorAlert(err)\n\n          })\n        }\n        componentDidMount(){\n          this.getTopUsers()\n        }\n        render() {\n            var props = this.props.this; // для более удобного использования.\n            return (\n                <Panel id={this.props.id}>\n                <PanelHeader>\n                Топ\n                </PanelHeader>              \n                <><PullToRefresh onRefresh={() => {this.setState({fetching: true});this.getTopUsers()}} isFetching={this.state.fetching}>\n                  {this.state.top_agents ? this.state.top_agents.map((result, i) => \n                    result['banned'] ? null :\n                    <React.Fragment key={result.id}>\n                    <SimpleCell\n                      onClick={() => props.goOtherProfile(result['id'], true)}\n                      description={\n                        <div className=\"top_moderator_desc\">\n                        {result['good_answers'] +  \" хороших ответов, \" + result['bad_answers'] + \" плохих ответов\"}\n                        </div>\n                      }\n                      size=\"l\"\n                      before={<Avatar src={result['avatar']['url']}/>}\n                    >\n                  <div className=\"top_moderator_name\">\n                  {isFinite(result['nickname']) ? `Агент Поддержки #${result['nickname']}` : result['nickname'] ? result['nickname'] : `Агент Поддержки #${result['id']}`}\n                    <div className=\"top_moderator_name_icon\">\n                      {result['flash'] === true ? <Icon16Fire width={12} height={12} onClick={() => this.setActiveModal('prom')} className=\"top_moderator_name_icon\"/> : null}\n                    </div>\n                    <div className=\"top_moderator_name_icon\">\n                      {result['donut'] === true ? <Icon16StarCircleFillYellow width={12} height={12} className=\"top_moderator_name_icon\" onClick={() => this.setActiveModal('donut')} /> : null}\n                    </div>\n                    <div className=\"top_moderator_name_icon_ver\">\n                      {result['verified'] === true ? <Icon16Verified className=\"top_moderator_name_icon_ver\"/>  : null }\n                    </div>\n                  </div>\n                  </SimpleCell>\n                 <Separator/>\n                 </React.Fragment>\n                  ) : null}\n                </PullToRefresh></>\n            </Panel>\n            )\n            }\n        }\n  \nexport default Reader;"]},"metadata":{},"sourceType":"module"}