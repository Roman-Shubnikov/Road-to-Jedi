{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';// React\nimport bridge from'@vkontakte/vk-bridge';// VK Brige\nimport music from'./music/Soloriver.mp3';import{Alert,Avatar,ScreenSpinner,Snackbar,Tabbar,TabbarItem,Epic,ConfigProvider}from'@vkontakte/vkui';import'@vkontakte/vkui/dist/vkui.css';import'./style.css';// Импортируем панели\nimport Questions from'./panels/questions/main';import Top from'./panels/topUsers/main';import Notification from'./panels/notify/main';import Profile from'./panels/Profile/main';import Start from'./panels/Start/main';import Banned from'./panels/Banned/main';import LoadingScreen from'./panels/Loading/main';import Unsupport from'./panels/Unsupport/main';import Disconnect from'./panels/Disconnect/main';import Icon28Profile from'@vkontakte/icons/dist/28/profile';import Icon16CheckCircle from'@vkontakte/icons/dist/16/check_circle';import Icon28ArticleOutline from'@vkontakte/icons/dist/28/article_outline';import Icon28FavoriteOutline from'@vkontakte/icons/dist/28/favorite_outline';// const queryString = require('query-string');\nvar platformname=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);// const parsedHash = queryString.parse(window.location.search.replace('?', ''));\n// const hash = queryString.parse(window.location.hash);\nvar blueBackground={backgroundColor:'var(--accent)'};function isEmpty(obj){for(var key in obj){// если тело цикла начнет выполняться - значит в объекте есть свойства\nreturn false;}return true;}var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);var _super=_createSuper(App);function App(props){var _this;_classCallCheck(this,App);_this=_super.call(this,props);_this.showErrorAlert=function(){var error=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var action=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;_this.setPopout(/*#__PURE__*/React.createElement(Alert,{actions:[{title:'Отмена',autoclose:true,mode:'cancel',action:action}],onClose:function onClose(){return _this.setPopout(null);}},/*#__PURE__*/React.createElement(\"h2\",null,\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430\"),error?/*#__PURE__*/React.createElement(\"p\",null,error):/*#__PURE__*/React.createElement(\"p\",null,\"\\u0427\\u0442\\u043E-\\u0442\\u043E \\u043F\\u043E\\u0448\\u043B\\u043E \\u043D\\u0435 \\u0442\\u0430\\u043A, \\u043F\\u043E\\u043F\\u0440\\u043E\\u0431\\u0443\\u0439\\u0442\\u0435 \\u0441\\u043D\\u043E\\u0432\\u0430!\")));};_this.state={account:[],activeStory:'loading',scheme:\"bright_light\",default_scheme:\"bright_light\",api_url:\"https://xelene.ru/road/php/index.php?\",popout:/*#__PURE__*/React.createElement(ScreenSpinner,null),snackbar:null,switchKeys:false,need_epic:true,first_start:false,LoadWebView:false,BanReason:null};_this.componentDidMount=_this.componentDidMount.bind(_assertThisInitialized(_this));_this.changeData=function(name,value){_this.setState(_defineProperty({},name,value));};_this.LoadProfile=function(){fetch(_this.state.api_url+\"method=account.get&\"+window.location.search.replace('?','')).then(function(res){return res.json();}).then(function(data){if(data.result){_this.setState({account:data.response,popout:null,switchKeys:data.response.noti});if(_this.state.activeStory==='disconnect'){_this.setState({activeStory:'questions',LoadWebView:true});}if(!isEmpty(_this.state.account)){if(Number(_this.state.account.scheme)===0){_this.setState({scheme:_this.state.default_scheme});if(_this.state.default_scheme==='bright_light'){if(platformname){bridge.send(\"VKWebAppSetViewSettings\",{\"status_bar_style\":\"dark\",\"action_bar_color\":\"#FFFFFF\",'navigation_bar_color':\"#FFFFFF\"});}}if(_this.state.default_scheme==='space_gray'){if(platformname){bridge.send(\"VKWebAppSetViewSettings\",{\"status_bar_style\":\"light\",\"action_bar_color\":\"#19191A\",'navigation_bar_color':\"#19191A\"});}}}if(Number(_this.state.account.scheme)===1){_this.setState({scheme:'bright_light'});if(platformname){bridge.send(\"VKWebAppSetViewSettings\",{\"status_bar_style\":\"dark\",\"action_bar_color\":\"#FFFFFF\",'navigation_bar_color':\"#FFFFFF\"});}}if(Number(_this.state.account.scheme)===2){_this.setState({scheme:'space_gray'});if(platformname){bridge.send(\"VKWebAppSetViewSettings\",{\"status_bar_style\":\"light\",\"action_bar_color\":\"#19191A\",'navigation_bar_color':\"#19191A\"});}}}else{_this.setState({scheme:data.scheme});if(data.scheme==='space_gray'){if(platformname){bridge.send(\"VKWebAppSetViewSettings\",{\"status_bar_style\":\"light\",\"action_bar_color\":\"#19191A\",'navigation_bar_color':\"#19191A\"});}}else{if(platformname){bridge.send(\"VKWebAppSetViewSettings\",{\"status_bar_style\":\"dark\",\"action_bar_color\":\"#FFFFFF\",'navigation_bar_color':\"#FFFFFF\"});}}}}}).catch(function(err){_this.showErrorAlert('Ошибка запроса. Пожалуйста, попробуйте позже',function(){_this.props.this.changeData('activeStory','disconnect');});});};_this.setPopout=function(value){_this.setState({popout:value});};_this.playAudio=function(){if(!_this.audio.paused){_this.audio.pause();}else{_this.audio.volume=0.1;_this.audio.currentTime=0;var audioPromise=_this.audio.play();if(audioPromise!==undefined){audioPromise.then(function(_){// autoplay started\n}).catch(function(err){// catch dom exception\nconsole.info(err);});}}_this.setState({paused:_this.audio.paused});};return _this;}_createClass(App,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;// if(/Mac|Macintosh|iPhone|iPad|iPod/i.test(navigator.userAgent)){\n//   this.setState({activeStory: 'unsupport', LoadWebView: true});\n//   return\n// }\nthis.setState({snackbar:null,switchKeys:false,need_epic:true,first_start:false,BanReason:null});this.audio=new Audio(music);this.audio.load();this.audio.loop=true;bridge.subscribe(function(_ref){var _ref$detail=_ref.detail,type=_ref$detail.type,data=_ref$detail.data;// if(type === 'VKWebAppAllowMessagesFromGroupResult') {\n//   fetch(this.state.api_url + \"method=notifications.swift&swift=on&\" + window.location.search.replace('?', ''))\n//     .then(res => res.json())\n//     .then(data => {\n//       if(data) {\n//         this.setState({switchKeys: true})\n//       }\n//     })\n//     .catch(err => {\n//       this.showErrorAlert()\n//     })\n// }\n// if(type === 'VKWebAppAllowMessagesFromGroupFailed') {\n//   fetch(this.state.api_url + \"method=notifications.swift&swift=off&\" + window.location.search.replace('?', ''))\n//     .then(res => res.json())\n//     .then(data => {\n//       if(data) {\n//         this.setState({switchKeys: false})\n//       }\n//     })\n//     .catch(err => {\n//       this.showErrorAlert()\n//     })\n// }\nif(type==='VKWebAppViewHide'){console.log('closing...');}if(type==='VKWebAppViewRestore'){_this2.componentDidMount();}if(type==='VKWebAppUpdateConfig'){// console.log(data)\n_this2.setState({default_scheme:data.scheme});if(!isEmpty(_this2.state.account)){if(Number(_this2.state.account.scheme)===0){_this2.setState({scheme:data.scheme});}if(Number(_this2.state.account.scheme)===1){_this2.setState({scheme:'bright_light'});if(platformname){bridge.send(\"VKWebAppSetViewSettings\",{\"status_bar_style\":\"dark\",\"action_bar_color\":\"#FFFFFF\",'navigation_bar_color':\"#FFFFFF\"});}}if(Number(_this2.state.account.scheme)===2){_this2.setState({scheme:'space_gray'});if(platformname){bridge.send(\"VKWebAppSetViewSettings\",{\"status_bar_style\":\"light\",\"action_bar_color\":\"#19191A\",'navigation_bar_color':\"#19191A\"});}}}else{_this2.setState({scheme:data.scheme});if(data.scheme==='space_gray'){if(platformname){bridge.send(\"VKWebAppSetViewSettings\",{\"status_bar_style\":\"light\",\"action_bar_color\":\"#19191A\",'navigation_bar_color':\"#19191A\"});}}else{if(platformname){bridge.send(\"VKWebAppSetViewSettings\",{\"status_bar_style\":\"dark\",\"action_bar_color\":\"#FFFFFF\",'navigation_bar_color':\"#FFFFFF\"});}}}}});fetch(this.state.api_url+\"method=account.get&\"+window.location.search.replace('?','')).then(function(res){return res.json();}).then(function(data){if(data.result){_this2.setState({account:data.response,popout:null,switchKeys:data.response.noti,first_start:data.response.is_first_start});if(Number(_this2.state.account.scheme)===1){_this2.setState({scheme:'bright_light'});if(platformname){bridge.send(\"VKWebAppSetViewSettings\",{\"status_bar_style\":\"dark\",\"action_bar_color\":\"#FFFFFF\",'navigation_bar_color':\"#FFFFFF\"});}}if(Number(_this2.state.account.scheme)===2){_this2.setState({scheme:'space_gray'});if(platformname){bridge.send(\"VKWebAppSetViewSettings\",{\"status_bar_style\":\"light\",\"action_bar_color\":\"#19191A\",'navigation_bar_color':\"#19191A\"});}}if(_this2.state.account.is_first_start){_this2.setState({activeStory:'start',LoadWebView:true});}else{if(_this2.state.activeStory==='loading'||_this2.state.activeStory==='disconnect'){_this2.setState({activeStory:'questions',LoadWebView:true});}}}else{if(data.error.error_code!==5){_this2.setPopout(/*#__PURE__*/React.createElement(Alert,{actions:[{title:'Повторить',autoclose:true,action:function action(){return _this2.componentDidMount();}}],onClose:function onClose(){_this2.setPopout(null);_this2.componentDidMount();}},/*#__PURE__*/React.createElement(\"h2\",null,\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430\"),/*#__PURE__*/React.createElement(\"p\",null,data.error.message)));}else{_this2.setState({BanReason:data.error.error_obj.reason,activeStory:'banned',LoadWebView:true});}}}).catch(function(err){_this2.showErrorAlert('Ошибка запроса. Пожалуйста, попробуйте позже',function(){_this2.setState({activeStory:'disconnect'});});});}},{key:\"showAlert\",value:function showAlert(title,text){this.setState({popout:/*#__PURE__*/React.createElement(Alert,{actions:[{title:'Закрыть',autoclose:true,style:'cancel'}],onClose:this.setPopout(null)},/*#__PURE__*/React.createElement(\"h2\",null,title),/*#__PURE__*/React.createElement(\"p\",null,text))});}},{key:\"deleteStats\",value:function deleteStats(){var _this3=this;this.setState({popout:/*#__PURE__*/React.createElement(ScreenSpinner,null)});fetch(this.state.api_url+\"method=delete.stats&\"+window.location.search.replace('?','')).then(function(res){return res.json();}).then(function(data){if(data.response){_this3.setState({snackbar:/*#__PURE__*/React.createElement(Snackbar,{layout:\"vertical\",onClose:function onClose(){return _this3.setState({snackbar:null});},before:/*#__PURE__*/React.createElement(Avatar,{size:24,style:blueBackground},/*#__PURE__*/React.createElement(Icon16CheckCircle,{fill:\"#fff\",width:14,height:14}))},\"\\u0421\\u0442\\u0430\\u0442\\u0438\\u0441\\u0442\\u0438\\u043A\\u0430 \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044F \\u0441\\u0431\\u0440\\u043E\\u0448\\u0435\\u043D\\u0430\"),popout:null});_this3.LoadProfile();window.history.back();}else{_this3.showAlert('Ошибка',data.error_text);}}).catch(function(err){_this3.showErrorAlert();});}},{key:\"render\",value:function render(){var _this4=this;return/*#__PURE__*/React.createElement(React.Fragment,null,!this.state.LoadWebView?/*#__PURE__*/React.createElement(\"div\",{style:{width:'100vw',height:'100vh',backgroundColor:'var(--background_page_my)',zIndex:20,position:'absolute',textAlign:'center'}},/*#__PURE__*/React.createElement(\"h1\",{style:{margin:'50vh 0'}},\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\")):null,/*#__PURE__*/React.createElement(\"webview\",{onLoad:function onLoad(){_this4.setState({LoadWebView:true});document.body.style.overflow=\"auto\";}},/*#__PURE__*/React.createElement(ConfigProvider,{scheme:this.state.scheme},/*#__PURE__*/React.createElement(Epic,{activeStory:this.state.activeStory,tabbar:this.state.need_epic&&/*#__PURE__*/React.createElement(Tabbar,null,/*#__PURE__*/React.createElement(TabbarItem,{onClick:function onClick(e){_this4.setState({activeStory:e.currentTarget.dataset.story});},selected:this.state.activeStory==='questions',\"data-story\":\"questions\",text:\"\\u0412\\u043E\\u043F\\u0440\\u043E\\u0441\\u044B\"},/*#__PURE__*/React.createElement(Icon28ArticleOutline,null)),/*#__PURE__*/React.createElement(TabbarItem,{onClick:function onClick(e){_this4.setState({activeStory:e.currentTarget.dataset.story});},selected:this.state.activeStory==='top',\"data-story\":\"top\",text:\"\\u0422\\u043E\\u043F\"},/*#__PURE__*/React.createElement(Icon28FavoriteOutline,null)),/*#__PURE__*/React.createElement(TabbarItem,{onClick:function onClick(e){_this4.setState({activeStory:e.currentTarget.dataset.story});},selected:this.state.activeStory==='profile',\"data-story\":\"profile\",text:\"\\u041F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\"},/*#__PURE__*/React.createElement(Icon28Profile,null)))},/*#__PURE__*/React.createElement(Questions,{id:\"questions\",this:this,scheme:this.state.scheme,reloadProfile:this.LoadProfile,account:this.state.account,first_start:this.state.first_start,popout:this.state.popout}),/*#__PURE__*/React.createElement(Top,{id:\"top\",this:this,scheme:this.state.scheme,account:this.state.account,popout:this.state.popout}),/*#__PURE__*/React.createElement(Notification,{id:\"notif\",this:this,scheme:this.state.scheme,reloadProfile:this.LoadProfile,account:this.state.account,popout:this.state.popout}),/*#__PURE__*/React.createElement(Profile,{id:\"profile\",this:this,reloadProfile:this.LoadProfile,scheme:this.state.scheme,default_scheme:this.state.default_scheme,account:this.state.account,popout:this.state.popout}),/*#__PURE__*/React.createElement(Start,{id:\"start\",this:this,reloadProfile:this.LoadProfile,scheme:this.state.scheme,account:this.state.account,popout:this.state.popout}),/*#__PURE__*/React.createElement(Banned,{id:\"banned\",this:this,reloadProfile:this.LoadProfile,scheme:this.state.scheme,account:this.state.account,reason:this.state.BanReason,popout:this.state.popout}),/*#__PURE__*/React.createElement(Unsupport,{id:\"unsupport\",this:this,reloadProfile:this.LoadProfile}),/*#__PURE__*/React.createElement(Disconnect,{id:\"disconnect\",this:this,compdid:this.componentDidMount,popout:this.state.popout,reloadProfile:this.LoadProfile}),/*#__PURE__*/React.createElement(LoadingScreen,{id:\"load\",this:this})))));}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["C:/Users/rshub/Desktop/Road-to-Jedi/mobile-road/src/App.js"],"names":["React","bridge","music","Alert","Avatar","ScreenSpinner","Snackbar","Tabbar","TabbarItem","Epic","ConfigProvider","Questions","Top","Notification","Profile","Start","Banned","LoadingScreen","Unsupport","Disconnect","Icon28Profile","Icon16CheckCircle","Icon28ArticleOutline","Icon28FavoriteOutline","platformname","test","navigator","userAgent","blueBackground","backgroundColor","isEmpty","obj","key","App","props","showErrorAlert","error","action","setPopout","title","autoclose","mode","state","account","activeStory","scheme","default_scheme","api_url","popout","snackbar","switchKeys","need_epic","first_start","LoadWebView","BanReason","componentDidMount","bind","changeData","name","value","setState","LoadProfile","fetch","window","location","search","replace","then","res","json","data","result","response","noti","Number","send","catch","err","this","playAudio","audio","paused","pause","volume","currentTime","audioPromise","play","undefined","_","console","info","Audio","load","loop","subscribe","detail","type","log","is_first_start","error_code","message","error_obj","reason","text","style","history","back","showAlert","error_text","width","height","zIndex","position","textAlign","margin","document","body","overflow","e","currentTarget","dataset","story","Component"],"mappings":"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","sourcesContent":["import React from 'react'; // React\nimport bridge from '@vkontakte/vk-bridge'; // VK Brige\n\nimport music from './music/Soloriver.mp3';\n\nimport { \n  Alert,\n  Avatar,\n  ScreenSpinner,\n  Snackbar,\n  Tabbar,\n  TabbarItem,\n  Epic,\n  ConfigProvider,\n  } from '@vkontakte/vkui';\n\nimport '@vkontakte/vkui/dist/vkui.css';\nimport './style.css'\n// Импортируем панели\nimport Questions      from './panels/questions/main';\nimport Top            from './panels/topUsers/main';\nimport Notification   from './panels/notify/main';\nimport Profile        from './panels/Profile/main';\nimport Start          from './panels/Start/main';\nimport Banned         from './panels/Banned/main';\nimport LoadingScreen  from './panels/Loading/main';\nimport Unsupport      from './panels/Unsupport/main';\nimport Disconnect     from './panels/Disconnect/main';\n\n\nimport Icon28Profile          from '@vkontakte/icons/dist/28/profile';\nimport Icon16CheckCircle      from '@vkontakte/icons/dist/16/check_circle';\nimport Icon28ArticleOutline   from '@vkontakte/icons/dist/28/article_outline';\nimport Icon28FavoriteOutline  from '@vkontakte/icons/dist/28/favorite_outline';\n\n\n// const queryString = require('query-string');\nconst platformname = (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));\n// const parsedHash = queryString.parse(window.location.search.replace('?', ''));\n// const hash = queryString.parse(window.location.hash);\n\nconst blueBackground = {\n  backgroundColor: 'var(--accent)'\n};\nfunction isEmpty(obj) {\n  for (let key in obj) {\n    // если тело цикла начнет выполняться - значит в объекте есть свойства\n    return false;\n  }\n  return true;\n}\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            account:[],\n            activeStory: 'loading',\n            scheme: \"bright_light\",\n            default_scheme: \"bright_light\",\n            api_url: \"https://xelene.ru/road/php/index.php?\",\n            popout: <ScreenSpinner/>,\n            snackbar: null,\n            switchKeys: false,\n            need_epic: true,\n            first_start: false,\n            LoadWebView: false,\n            BanReason: null,\n\n        };\n        this.componentDidMount = this.componentDidMount.bind(this);\n        this.changeData = (name,value) => {\n          this.setState({ [name]: value });\n        }\n        this.LoadProfile = () => {\n          fetch(this.state.api_url + \"method=account.get&\" + window.location.search.replace('?', ''))\n          .then(res => res.json())\n          .then(data => {\n          if(data.result) {\n              this.setState({account: data.response,popout: null, switchKeys: data.response.noti})\n              if(this.state.activeStory === 'disconnect'){\n                this.setState({activeStory: 'questions', LoadWebView: true})\n              }\n              if(!isEmpty(this.state.account)){\n                if(Number(this.state.account.scheme) === 0){\n                  this.setState({scheme: this.state.default_scheme})\n                  if(this.state.default_scheme === 'bright_light'){\n                    if(platformname){\n                      bridge.send(\"VKWebAppSetViewSettings\", {\"status_bar_style\": \"dark\", \"action_bar_color\": \"#FFFFFF\",'navigation_bar_color': \"#FFFFFF\"});\n                    }\n                  }\n                  if(this.state.default_scheme === 'space_gray'){\n                    if(platformname){\n                      bridge.send(\"VKWebAppSetViewSettings\", {\"status_bar_style\": \"light\", \"action_bar_color\": \"#19191A\",'navigation_bar_color': \"#19191A\"});\n                    }\n                  }\n                }\n                if(Number(this.state.account.scheme) === 1){\n                  this.setState({scheme: 'bright_light'})\n                  if(platformname){\n                    bridge.send(\"VKWebAppSetViewSettings\", {\"status_bar_style\": \"dark\", \"action_bar_color\": \"#FFFFFF\",'navigation_bar_color': \"#FFFFFF\"});\n                  }\n                  \n                }\n                if(Number(this.state.account.scheme) === 2){\n                  this.setState({scheme: 'space_gray'})\n                  if(platformname){\n                    bridge.send(\"VKWebAppSetViewSettings\", {\"status_bar_style\": \"light\", \"action_bar_color\": \"#19191A\",'navigation_bar_color': \"#19191A\"});\n                  }\n                }\n              }else{\n                this.setState({scheme: data.scheme})\n                if(data.scheme === 'space_gray'){\n                  if(platformname){\n                    bridge.send(\"VKWebAppSetViewSettings\", {\"status_bar_style\": \"light\", \"action_bar_color\": \"#19191A\",'navigation_bar_color': \"#19191A\"});\n                  }\n                }else{\n                  if(platformname){\n                    bridge.send(\"VKWebAppSetViewSettings\", {\"status_bar_style\": \"dark\", \"action_bar_color\": \"#FFFFFF\",'navigation_bar_color': \"#FFFFFF\"});\n                  }\n                }\n                }\n            }})\n          .catch(err => {\n            this.showErrorAlert('Ошибка запроса. Пожалуйста, попробуйте позже',() => {this.props.this.changeData('activeStory', 'disconnect')})\n    \n          })\n        }\n        this.setPopout = (value) => {\n          this.setState({popout: value})\n        }\n          this.playAudio = () => {\n            if(!this.audio.paused){\n              this.audio.pause()\n            } else {\n              this.audio.volume = 0.1;\n              this.audio.currentTime = 0;\n              const audioPromise = this.audio.play()\n              if (audioPromise !== undefined) {\n              audioPromise\n                .then(_ => {\n                // autoplay started\n                \n                })\n                .catch(err => {\n                // catch dom exception\n                console.info(err)\n                })\n              }\n            }\n            this.setState({paused: this.audio.paused})\n          }\n    }\n    componentDidMount() {\n      // if(/Mac|Macintosh|iPhone|iPad|iPod/i.test(navigator.userAgent)){\n      //   this.setState({activeStory: 'unsupport', LoadWebView: true});\n      //   return\n      // }\n      this.setState({\n          snackbar: null,\n          switchKeys: false,\n          need_epic: true,\n          first_start: false,\n          BanReason: null,\n      })\n      this.audio = new Audio(music)\n      this.audio.load()\n      this.audio.loop = true;\n      bridge.subscribe(({ detail: { type, data }}) => { \n        // if(type === 'VKWebAppAllowMessagesFromGroupResult') {\n        //   fetch(this.state.api_url + \"method=notifications.swift&swift=on&\" + window.location.search.replace('?', ''))\n        //     .then(res => res.json())\n        //     .then(data => {\n        //       if(data) {\n        //         this.setState({switchKeys: true})\n        //       }\n        //     })\n        //     .catch(err => {\n        //       this.showErrorAlert()\n        //     })\n        // }\n        // if(type === 'VKWebAppAllowMessagesFromGroupFailed') {\n        //   fetch(this.state.api_url + \"method=notifications.swift&swift=off&\" + window.location.search.replace('?', ''))\n        //     .then(res => res.json())\n        //     .then(data => {\n        //       if(data) {\n        //         this.setState({switchKeys: false})\n        //       }\n        //     })\n        //     .catch(err => {\n        //       this.showErrorAlert()\n        //     })\n        // }\n        if(type === 'VKWebAppViewHide') {\n          console.log('closing...')\n        }\n        if(type === 'VKWebAppViewRestore') {\n          this.componentDidMount()\n        }\n\t\t\t  if (type === 'VKWebAppUpdateConfig') {\n          // console.log(data)\n          this.setState({default_scheme: data.scheme});\n          if(!isEmpty(this.state.account)){\n            if(Number(this.state.account.scheme) === 0){\n              this.setState({scheme: data.scheme})\n            }\n            if(Number(this.state.account.scheme) === 1){\n              this.setState({scheme: 'bright_light'})\n              if(platformname){\n                bridge.send(\"VKWebAppSetViewSettings\", {\"status_bar_style\": \"dark\", \"action_bar_color\": \"#FFFFFF\",'navigation_bar_color': \"#FFFFFF\"});\n              }\n            }\n            if(Number(this.state.account.scheme) === 2){\n              this.setState({scheme: 'space_gray'})\n              if(platformname){\n                bridge.send(\"VKWebAppSetViewSettings\", {\"status_bar_style\": \"light\", \"action_bar_color\": \"#19191A\",'navigation_bar_color': \"#19191A\"});\n              }\n            }\n          }else{\n            this.setState({scheme: data.scheme})\n            if(data.scheme === 'space_gray'){\n              if(platformname){\n                bridge.send(\"VKWebAppSetViewSettings\", {\"status_bar_style\": \"light\", \"action_bar_color\": \"#19191A\",'navigation_bar_color': \"#19191A\"});\n              }\n            }else{\n              if(platformname){\n                bridge.send(\"VKWebAppSetViewSettings\", {\"status_bar_style\": \"dark\", \"action_bar_color\": \"#FFFFFF\",'navigation_bar_color': \"#FFFFFF\"});\n              }\n            }\n            }\n          }\n        })\n        fetch(this.state.api_url + \"method=account.get&\" + window.location.search.replace('?', ''))\n        .then(res => res.json())\n        .then(data => {\n          if(data.result) {\n            this.setState({account: data.response, popout: null, switchKeys: data.response.noti, first_start: data.response.is_first_start})\n              if(Number(this.state.account.scheme) === 1){\n                this.setState({scheme: 'bright_light'})\n                if(platformname){\n                  bridge.send(\"VKWebAppSetViewSettings\", {\"status_bar_style\": \"dark\", \"action_bar_color\": \"#FFFFFF\", 'navigation_bar_color': \"#FFFFFF\"});\n                }\n              }\n              if(Number(this.state.account.scheme) === 2){\n                this.setState({scheme: 'space_gray'})\n                if(platformname){\n                  bridge.send(\"VKWebAppSetViewSettings\", {\"status_bar_style\": \"light\", \"action_bar_color\": \"#19191A\",'navigation_bar_color': \"#19191A\"});\n                }\n              }\n            if(this.state.account.is_first_start){\n              this.setState({activeStory: 'start', LoadWebView: true});\n            }else{\n              if(this.state.activeStory === 'loading' || this.state.activeStory === 'disconnect'){\n                this.setState({activeStory: 'questions', LoadWebView: true})\n              }\n            }\n          } else {\n            if(data.error.error_code !== 5){\n                this.setPopout(\n                  <Alert\n                    actions={[{\n                      title: 'Повторить',\n                      autoclose: true,\n                      action: () => this.componentDidMount()\n                    }]}\n                    onClose={() => {this.setPopout(null);this.componentDidMount()}}\n                  >\n                    <h2>Ошибка</h2>\n                    <p>{data.error.message}</p>\n                        </Alert>)\n            }else{\n              this.setState({BanReason: data.error.error_obj.reason, activeStory: 'banned', LoadWebView: true})\n            }\n          }\n        })\n        .catch(err => {\n          this.showErrorAlert('Ошибка запроса. Пожалуйста, попробуйте позже',() => { this.setState({activeStory: 'disconnect'}) })\n        })\n    }\n\n    showAlert(title, text) {\n      this.setState({\n        popout: \n          <Alert\n            actions={[{\n              title: 'Закрыть',\n              autoclose: true,\n              style: 'cancel'\n            }]}\n            onClose={this.setPopout(null)}\n          >\n            <h2>{title}</h2>\n            <p>{text}</p>\n        </Alert>\n      })\n    }\n\n\n    deleteStats() {\n      this.setState({popout: <ScreenSpinner/>})\n      fetch(this.state.api_url + \"method=delete.stats&\" + window.location.search.replace('?', ''))\n      .then(res => res.json())\n      .then(data => {\n        if(data.response) {\n          this.setState({snackbar: \n            <Snackbar\n              layout=\"vertical\"\n              onClose={() => this.setState({ snackbar: null })}\n              before={<Avatar size={24} style={blueBackground}><Icon16CheckCircle fill=\"#fff\" width={14} height={14} /></Avatar>}\n            >\n              Статистика профиля сброшена\n            </Snackbar>, popout: null\n          })\n          this.LoadProfile()\n          window.history.back()\n        } else {\n          this.showAlert('Ошибка', data.error_text);\n        }\n      })\n      .catch(err => {\n        this.showErrorAlert()\n      })\n    }\n    showErrorAlert = (error=null, action=null) => {\n      this.setPopout(\n        <Alert\n            actions={[{\n            title: 'Отмена',\n            autoclose: true,\n            mode: 'cancel',\n            action: action,\n            }]}\n            onClose={() => this.setPopout(null)}\n        >\n          <h2>Ошибка</h2>\n          {error ? <p>{error}</p> : <p>Что-то пошло не так, попробуйте снова!</p>}\n        </Alert>\n    )\n  }\n\n    \n    render() {\n        return(\n        <>{!this.state.LoadWebView ? <div style={{width: '100vw', height: '100vh', backgroundColor: 'var(--background_page_my)', zIndex: 20, position: 'absolute', textAlign:'center'}}>\n            <h1 style={{margin: '50vh 0'}}>Загрузка...</h1>\n            </div> : null}\n          <webview \n          onLoad={() => {this.setState({LoadWebView: true});document.body.style.overflow = \"auto\"}}\n          >\n              <ConfigProvider scheme={this.state.scheme}> \n              <Epic activeStory={this.state.activeStory}\n              tabbar={\n                  this.state.need_epic &&\n                  <Tabbar>\n                    <TabbarItem\n                      onClick={(e) => {this.setState({activeStory: e.currentTarget.dataset.story})}} \n                      selected={this.state.activeStory === 'questions'}\n                      data-story=\"questions\"\n                      text='Вопросы'\n                    ><Icon28ArticleOutline/></TabbarItem>\n                    <TabbarItem\n                      onClick={(e) => {this.setState({activeStory: e.currentTarget.dataset.story})}} \n                      selected={this.state.activeStory === 'top'}\n                      data-story=\"top\"\n                      text='Топ'\n                    ><Icon28FavoriteOutline /></TabbarItem>\n                    <TabbarItem\n                      onClick={(e) => {this.setState({activeStory: e.currentTarget.dataset.story})}} \n                      selected={this.state.activeStory === 'profile'}\n                      data-story=\"profile\"\n                      text='Профиль'\n                    ><Icon28Profile /></TabbarItem>\n                  </Tabbar>\n                }>\n                <Questions \n                id='questions'\n                this={this}\n                scheme={this.state.scheme}\n                reloadProfile={this.LoadProfile}\n                account={this.state.account}\n                first_start={this.state.first_start}\n                popout={this.state.popout} />\n\n                <Top \n                id='top'\n                this={this}\n                scheme={this.state.scheme}\n                account={this.state.account}\n                popout={this.state.popout} />\n\n                <Notification \n                id=\"notif\"\n                this={this}\n                scheme={this.state.scheme}\n                reloadProfile={this.LoadProfile}\n                account={this.state.account}\n                popout={this.state.popout}\n                />\n\n                <Profile \n                id=\"profile\"\n                this={this}\n                reloadProfile={this.LoadProfile}\n                scheme={this.state.scheme}\n                default_scheme={this.state.default_scheme}\n                account={this.state.account}\n                popout={this.state.popout} />\n                \n                <Start \n                id=\"start\"\n                this={this}\n                reloadProfile={this.LoadProfile}\n                scheme={this.state.scheme}\n                account={this.state.account}\n                popout={this.state.popout} />\n\n                <Banned \n                id=\"banned\"\n                this={this}\n                reloadProfile={this.LoadProfile}\n                scheme={this.state.scheme}\n                account={this.state.account}\n                reason={this.state.BanReason}\n                popout={this.state.popout} />\n                <Unsupport \n                id=\"unsupport\"\n                this={this}\n                reloadProfile={this.LoadProfile} />\n\n                <Disconnect\n                id=\"disconnect\"\n                this={this}\n                compdid={this.componentDidMount}\n                popout={this.state.popout}\n                reloadProfile={this.LoadProfile} />\n                <LoadingScreen \n                id=\"load\"\n                this={this} />\n              </Epic>\n            </ConfigProvider>\n          </webview></>\n            \n        );\n    }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}