{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\src\\\\panels\\\\tiket.js\";\nimport React from 'react';\nimport Panel from '@vkontakte/vkui/dist/components/Panel/Panel';\nimport PanelHeader from '@vkontakte/vkui/dist/components/PanelHeader/PanelHeader';\nimport PanelHeaderButton from '@vkontakte/vkui/dist/components/PanelHeaderButton/PanelHeaderButton';\nimport Icon24Up from '@vkontakte/icons/dist/24/up';\nimport Icon24BrowserBack from '@vkontakte/icons/dist/24/browser_back';\nimport Icon16ReplyOutline from '@vkontakte/icons/dist/16/reply_outline';\nimport Message from '../components/message';\nimport { Button } from '@vkontakte/vkui';\n\nconst queryString = require('query-string');\n\nconst parsedHash = queryString.parse(window.location.search.replace('?', ''));\nvar months = ['января', 'февраля', 'марта', 'апреля', 'мая', 'июня', 'июля', 'августа', 'сентября', 'ноября', 'декабря'];\n\nfunction fix_time(time) {\n  if (time < 10) {\n    return \"0\" + time;\n  } else {\n    return time;\n  }\n}\n\nfunction add_month(month) {\n  let number_month = new Date(month * 1e3).getMonth();\n  return months[number_month];\n}\n\nconst Ticket = props => /*#__PURE__*/React.createElement(Panel, {\n  id: props.id,\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 9\n  }\n}, /*#__PURE__*/React.createElement(PanelHeader, {\n  left: /*#__PURE__*/React.createElement(PanelHeaderButton, {\n    onClick: () => window.history.back(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(Icon24BrowserBack, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 80\n    }\n  })),\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 13\n  }\n}, /*#__PURE__*/React.createElement(\"span\", {\n  id: \"animation\",\n  onClick: () => props.this.copy(props.this.state.tiket_info['id']),\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 17\n  }\n}, \"\\u0412\\u043E\\u043F\\u0440\\u043E\\u0441 #\", props.this.state.tiket_info['id'])), /*#__PURE__*/React.createElement(\"div\", {\n  className: \"title_tiket\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 13\n  }\n}, new Date(props.this.state.tiket_info['time'] * 1e3).getDate(), \" \", add_month(props.this.state.tiket_info['time'])), /*#__PURE__*/React.createElement(\"div\", {\n  className: \"title_tiket\",\n  style: {\n    marginTop: \"10px\",\n    width: \"95%\",\n    marginLeft: \"10px\"\n  },\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 13\n  }\n}, \"\\u041F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C \\u043E\\u0431\\u0440\\u0430\\u0442\\u0438\\u043B\\u0441\\u044F \\u0441 \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441\\u043E\\u043C  \\xAB\", props.this.state.tiket_info['title'], \"\\xBB\"), props.this.state.tiket_message.map(function (result, i) {\n  var is_mine_ticket = Number(props.this.state.tiket_info.author['id']) === Number(parsedHash.vk_user_id) ? true : false;\n  var is_mine_message = Number(result['author']['id']) === Number(parsedHash.vk_user_id) ? true : false;\n  var avatar = result.author.is_moderator ? \"https://api.xelene.me/\" + result['author']['avatar']['url'] : result.author.photo_200;\n  var time = fix_time(new Date(result.time * 1e3).getHours()) + \":\" + fix_time(new Date(result.time * 1e3).getMinutes());\n  var title_moder = isFinite(result['nickname']) ? `Агент Поддержки #${result['nickname']}` : result['nickname'] ? result['nickname'] : `Агент Поддержки #${result['author']['id']}`;\n  return Number(props.this.state.tiket_info.author['id']) === Number(parsedHash.vk_user_id) ? /*#__PURE__*/React.createElement(Message, {\n    title: result.author.id === 526444378 ? \"Витёк\" : result.author.is_moderator ? title_moder : result.author.first_name + \" \" + result.author.last_name,\n    title_icon: result.moderator_comment != undefined ? /*#__PURE__*/React.createElement(Icon16ReplyOutline, {\n      width: 10,\n      height: 10,\n      style: {\n        display: \"inline-block\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 85\n      }\n    }) : false,\n    is_mine: is_mine_message === is_mine_ticket,\n    avatar: avatar,\n    onClick: () => props.this.Admin(result['id'], result['author']['id'], result['text'], result.moderator_comment != undefined ? result['moderator_comment']['text'] : null, result['mark']),\n    key: i,\n    is_special: props.this.state.is_special_moder,\n    is_mark: result.mark,\n    time: time,\n    sendRayt_false: () => props.this.sendRayt(false, result.id),\n    sendRayt_true: () => props.this.sendRayt(true, result.id),\n    approved: result.approved ? true : false,\n    CanselApp: () => props.this.showAlert('Информация', 'Этот ответ оценен отрицательно'),\n    DoneApp: () => props.this.showAlert('Информация', 'Этот ответ оценен положительно'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 29\n    }\n  }, result.text) : /*#__PURE__*/React.createElement(Message, {\n    title: result.author.id === 526444378 ? \"Витёк\" : result.author.is_moderator ? title_moder : result.author.first_name + \" \" + result.author.last_name,\n    title_icon: result.moderator_comment != undefined ? /*#__PURE__*/React.createElement(Icon16ReplyOutline, {\n      width: 10,\n      height: 10,\n      style: {\n        display: \"inline-block\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 85\n      }\n    }) : false,\n    is_mine: result.author.is_moderator,\n    avatar: result.author.id === 526444378 ? \"https://cdn3.iconfinder.com/data/icons/avatars-15/64/_Ninja-2-512.png\" : avatar,\n    key: i,\n    time: time,\n    onClick: () => props.this.Admin(result['id'], result['author']['id'], result['text'], result.moderator_comment != undefined ? result['moderator_comment']['text'] : null, result['mark']),\n    is_special: props.this.state.is_special_moder,\n    is_mark: result.mark,\n    sendRayt_false: () => props.this.sendRayt(false, result.id),\n    sendRayt_true: () => props.this.sendRayt(true, result.id),\n    approved: result.approved ? true : false,\n    CanselApp: () => props.this.showAlert('Информация', 'Этот ответ оценен отрицательно'),\n    DoneApp: () => props.this.showAlert('Информация', 'Этот ответ оценен положительно'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 29\n    }\n  }, result.text);\n}), props.this.state.tiket_info['status'] === 0 || props.this.state.redaction === true || props.this.state.add_comment === true ? /*#__PURE__*/React.createElement(\"div\", {\n  id: \"other\",\n  className: \"other\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 103,\n    columnNumber: 17\n  }\n}, /*#__PURE__*/React.createElement(\"div\", {\n  className: \"down_input_message\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 21\n  }\n}, /*#__PURE__*/React.createElement(\"textarea\", {\n  maxLength: \"2020\",\n  name: \"tiket_send_message\",\n  value: props.this.state.tiket_send_message,\n  onChange: e => props.this.onChange(e),\n  placeholder: props.this.state.add_comment ? \"Комментарий...\" : \"Ответ...\",\n  className: \"textarea\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 25\n  }\n})), /*#__PURE__*/React.createElement(\"div\", {\n  className: \"send_text\",\n  onClick: () => props.this.state.redaction !== true && props.this.state.add_comment !== true ? props.this.sendNewMessage() : props.this.state.redaction ? props.this.sendNewMessageRedact() : props.this.sendNewMessageComment(),\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 107,\n    columnNumber: 21\n  }\n}, /*#__PURE__*/React.createElement(Icon24Up, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 25\n  }\n}))) : null, props.this.state.tiket_info['status'] === 1 ? Number(props.this.state.tiket_info['author']['id']) === Number(parsedHash.vk_user_id) ? /*#__PURE__*/React.createElement(\"div\", {\n  className: \"others\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 21\n  }\n}, /*#__PURE__*/React.createElement(Button, {\n  size: \"l\",\n  style: {\n    marginRight: 8,\n    width: \"95%\"\n  },\n  onClick: () => props.this.deleteTicket(),\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 25\n  }\n}, \"\\u041F\\u0440\\u043E\\u0431\\u043B\\u0435\\u043C\\u0430 \\u0440\\u0435\\u0448\\u0435\\u043D\\u0430\"), /*#__PURE__*/React.createElement(\"br\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 149\n  }\n}), /*#__PURE__*/React.createElement(\"div\", {\n  style: {\n    height: \"5px\"\n  },\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 25\n  }\n}), /*#__PURE__*/React.createElement(Button, {\n  size: \"l\",\n  style: {\n    marginRight: 8,\n    width: \"95%\"\n  },\n  level: \"secondary\",\n  onClick: () => props.this.openTicket(),\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 116,\n    columnNumber: 25\n  }\n}, \"\\u041F\\u0440\\u043E\\u0431\\u043B\\u0435\\u043C\\u0430 \\u043D\\u0435 \\u0440\\u0435\\u0448\\u0435\\u043D\\u0430\")) : null : null, /*#__PURE__*/React.createElement(\"br\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 120,\n    columnNumber: 17\n  }\n}), /*#__PURE__*/React.createElement(\"br\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 121,\n    columnNumber: 17\n  }\n}), /*#__PURE__*/React.createElement(\"br\", {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 122,\n    columnNumber: 17\n  }\n}));\n\nexport default Ticket;","map":{"version":3,"sources":["C:/Users/rshub/Desktop/Road-to-Jedi/mobile-road/src/panels/tiket.js"],"names":["React","Panel","PanelHeader","PanelHeaderButton","Icon24Up","Icon24BrowserBack","Icon16ReplyOutline","Message","Button","queryString","require","parsedHash","parse","window","location","search","replace","months","fix_time","time","add_month","month","number_month","Date","getMonth","Ticket","props","id","history","back","this","copy","state","tiket_info","getDate","marginTop","width","marginLeft","tiket_message","map","result","i","is_mine_ticket","Number","author","vk_user_id","is_mine_message","avatar","is_moderator","photo_200","getHours","getMinutes","title_moder","isFinite","first_name","last_name","moderator_comment","undefined","display","Admin","is_special_moder","mark","sendRayt","approved","showAlert","text","redaction","add_comment","tiket_send_message","e","onChange","sendNewMessage","sendNewMessageRedact","sendNewMessageComment","marginRight","deleteTicket","height","openTicket"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport Panel from '@vkontakte/vkui/dist/components/Panel/Panel';\nimport PanelHeader from '@vkontakte/vkui/dist/components/PanelHeader/PanelHeader';\nimport PanelHeaderButton from '@vkontakte/vkui/dist/components/PanelHeaderButton/PanelHeaderButton';\n\nimport Icon24Up from '@vkontakte/icons/dist/24/up';\nimport Icon24BrowserBack from '@vkontakte/icons/dist/24/browser_back';\nimport Icon16ReplyOutline from '@vkontakte/icons/dist/16/reply_outline';\n\nimport Message from '../components/message'\n\nimport { Button } from '@vkontakte/vkui';\nconst queryString = require('query-string');\nconst parsedHash = queryString.parse(window.location.search.replace('?', ''));\n\nvar months = [\n    'января',\n    'февраля',\n    'марта',\n    'апреля',\n    'мая',\n    'июня',\n    'июля',\n    'августа',\n    'сентября',\n    'ноября',\n    'декабря',\n];\n\nfunction fix_time(time) {\n    if(time < 10) {\n        return \"0\" + time\n    } else {\n        return time\n    }\n}\n\nfunction add_month(month) {\n    let number_month = new Date(month * 1e3).getMonth()\n    return months[number_month]\n}\n\nconst Ticket = props => (\n        <Panel id={props.id}>\n            <PanelHeader \n                left={<PanelHeaderButton onClick={() => window.history.back()}><Icon24BrowserBack/></PanelHeaderButton>}\n            >\n                <span id=\"animation\" onClick={() => props.this.copy(props.this.state.tiket_info['id'])}>Вопрос #{props.this.state.tiket_info['id']}</span>\n            </PanelHeader>\n            {/* MESSAGES */}\n            <div className=\"title_tiket\">{new Date(props.this.state.tiket_info['time'] * 1e3).getDate()} {add_month(props.this.state.tiket_info['time'])}</div>\n            <div className=\"title_tiket\" style={{marginTop: \"10px\", width: \"95%\", marginLeft: \"10px\"}}>Пользователь обратился с вопросом  «{props.this.state.tiket_info['title']}»</div>\n                    {props.this.state.tiket_message.map(function(result, i) {\n                        var is_mine_ticket = Number(props.this.state.tiket_info.author['id']) === Number(parsedHash.vk_user_id) ? true : false\n                        var is_mine_message = Number(result['author']['id']) === Number(parsedHash.vk_user_id) ? true : false\n                        var avatar = result.author.is_moderator ? \"https://api.xelene.me/\" + result['author']['avatar']['url'] : result.author.photo_200\n                        var time = fix_time(new Date(result.time * 1e3).getHours()) + \":\" + fix_time(new Date(result.time * 1e3).getMinutes())\n                        var title_moder = isFinite(result['nickname']) ? `Агент Поддержки #${result['nickname']}` : result['nickname'] ? result['nickname'] : `Агент Поддержки #${result['author']['id']}`;\n                        return (\n                            Number(props.this.state.tiket_info.author['id']) === Number(parsedHash.vk_user_id) ?\n                            <Message \n                                title={result.author.id === 526444378 ? \"Витёк\" : result.author.is_moderator ? title_moder : result.author.first_name + \" \" + result.author.last_name} \n                                title_icon={result.moderator_comment != undefined ? <Icon16ReplyOutline width={10} height={10} style={{display: \"inline-block\"}}/> : false}\n                                is_mine={is_mine_message === is_mine_ticket}\n                                avatar={avatar}\n                                onClick={() => props.this.Admin(result['id'], result['author']['id'], result['text'], result.moderator_comment != undefined ? result['moderator_comment']['text'] : null, result['mark'])}\n                                key={i}\n                                is_special={props.this.state.is_special_moder}\n                                is_mark={result.mark}\n                                time={time}\n                                sendRayt_false={() => props.this.sendRayt(false, result.id)}\n                                sendRayt_true={() => props.this.sendRayt(true, result.id)}\n                                approved={result.approved ? true : false}\n                                CanselApp={() => props.this.showAlert('Информация', 'Этот ответ оценен отрицательно')}\n                                DoneApp={() => props.this.showAlert('Информация', 'Этот ответ оценен положительно')}\n                            >\n                                {result.text}\n                            </Message>\n                            \n                            :\n                            <Message \n                                title={result.author.id === 526444378 ? \"Витёк\" : result.author.is_moderator ? title_moder : result.author.first_name + \" \" + result.author.last_name} \n                                title_icon={result.moderator_comment != undefined ? <Icon16ReplyOutline width={10} height={10} style={{display: \"inline-block\"}}/> : false}\n                                is_mine={result.author.is_moderator}\n                                avatar={result.author.id === 526444378 ? \"https://cdn3.iconfinder.com/data/icons/avatars-15/64/_Ninja-2-512.png\" : avatar}\n                                key={i}\n                                time={time}\n                                onClick={() => props.this.Admin(result['id'], result['author']['id'], result['text'], result.moderator_comment != undefined ? result['moderator_comment']['text'] : null, result['mark'])}\n                                is_special={props.this.state.is_special_moder}\n                                is_mark={result.mark}\n                                sendRayt_false={() => props.this.sendRayt(false, result.id)}\n                                sendRayt_true={() => props.this.sendRayt(true, result.id)}\n                                approved={result.approved ? true : false}\n                                CanselApp={() => props.this.showAlert('Информация', 'Этот ответ оценен отрицательно')}\n                                DoneApp={() => props.this.showAlert('Информация', 'Этот ответ оценен положительно')}\n                            >\n                                {result.text}\n                            </Message>\n                        )})}\n            {/* INPUT */}\n            {props.this.state.tiket_info['status'] === 0 || (props.this.state.redaction === true || props.this.state.add_comment === true) ? \n                <div id=\"other\" className=\"other\">\n                    <div className=\"down_input_message\">\n                        <textarea maxLength=\"2020\" name=\"tiket_send_message\" value={props.this.state.tiket_send_message} onChange={(e) => props.this.onChange(e)} placeholder={props.this.state.add_comment ? \"Комментарий...\" : \"Ответ...\"} className=\"textarea\"></textarea>\n                    </div>\n                    <div className=\"send_text\" onClick={() => props.this.state.redaction !== true && props.this.state.add_comment !== true ? props.this.sendNewMessage() : props.this.state.redaction ? props.this.sendNewMessageRedact() : props.this.sendNewMessageComment()}>\n                        <Icon24Up/>\n                    </div>\n                </div> : null}\n            {props.this.state.tiket_info['status'] === 1 ? \n                Number(props.this.state.tiket_info['author']['id']) === Number(parsedHash.vk_user_id) ?\n                    <div className=\"others\">\n                        <Button size=\"l\" style={{ marginRight: 8, width: \"95%\" }} onClick={() => props.this.deleteTicket()}>Проблема решена</Button><br/>\n                        <div style={{height: \"5px\"}}></div>\n                        <Button size=\"l\" style={{ marginRight: 8, width: \"95%\" }} level=\"secondary\" onClick={() => props.this.openTicket()}>Проблема не решена</Button>\n                    </div>\n                : null\n            : null}\n                <br/>\n                <br/>\n                <br/>\n            </Panel>\n);\n\nexport default Ticket;"]},"metadata":{},"sourceType":"module"}