{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\src\\\\panels\\\\Disconnect\\\\main.js\";\nimport React from 'react'; // React\n\nimport bridge from '@vkontakte/vk-bridge'; // VK Brige\n\nimport { Alert, View, ScreenSpinner } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport '../../style.css'; // Импортируем панели\n\nimport Startov from './panels/home';\nvar ignore_back = false;\nexport default class Disconnect extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activePanel: 'load',\n      api_url: \"https://xelene.ru/road/php/index.php?\",\n      history: ['start']\n    };\n    this.changeData = this.props.this.changeData;\n    this.compdid = this.props.compdid;\n    this.ReloadProfile = this.props.reloadProfile;\n\n    this.handlePopstate = e => {\n      e.preventDefault();\n      this.goBack();\n    };\n\n    this.onChange = event => {\n      var name = event.currentTarget.name;\n      var value = event.currentTarget.value;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.modalBack = () => {\n      this.setActiveModal(this.state.modalHistory[this.state.modalHistory.length - 2]);\n    };\n\n    this.goBack = () => {\n      if (!ignore_back) {\n        ignore_back = true;\n        const history = this.state.history;\n\n        if (history.length === 1) {\n          bridge.send(\"VKWebAppClose\", {\n            \"status\": \"success\"\n          });\n        } else if (history.length > 1) {\n          history.pop();\n\n          if (this.state.activePanel === 'load') {\n            bridge.send('VKWebAppDisableSwipeBack');\n          }\n\n          this.setState({\n            activePanel: history[history.length - 1]\n          }); // if(history[history.length - 1] === 'ticket'){\n          //   this.changeData('need_epic', false)\n          // } else{\n          //   this.changeData('need_epic', true)\n          // }\n\n          this.setPopout( /*#__PURE__*/React.createElement(ScreenSpinner, {\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 59,\n              columnNumber: 32\n            }\n          }));\n          setTimeout(() => {\n            this.setPopout(null);\n          }, 500);\n        }\n\n        setTimeout(() => {\n          ignore_back = false;\n        }, 500);\n      } else {\n        const history = this.state.history;\n        window.history.pushState({\n          panel: history[history.length - 1]\n        }, history[history.length - 1]);\n      }\n    };\n\n    this.goPanel = panel => {\n      let history = this.state.history.slice();\n      history.push(panel);\n      window.history.pushState({\n        panel: panel\n      }, panel);\n      this.setState({\n        history: history,\n        activePanel: panel\n      }); // if(panel === 'ticket'){\n      //   this.changeData('need_epic', false)\n      // } else{\n      //   this.changeData('need_epic', true)\n      // }\n    };\n\n    this.showAlert = (title, text) => {\n      this.setState({\n        popout: /*#__PURE__*/React.createElement(Alert, {\n          actions: [{\n            title: 'Закрыть',\n            autoclose: true,\n            mode: 'cancel'\n          }],\n          onClose: () => this.setPopout(null),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"h2\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 19\n          }\n        }, title), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 19\n          }\n        }, text))\n      });\n    };\n\n    this.showErrorAlert = (error = null, action = null) => {\n      this.setPopout( /*#__PURE__*/React.createElement(Alert, {\n        actions: [{\n          title: 'Отмена',\n          autoclose: true,\n          mode: 'cancel',\n          action: action\n        }],\n        onClose: () => this.setPopout(null),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 17\n        }\n      }, \"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430\"), error ? /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 26\n        }\n      }, error) : /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 43\n        }\n      }, \"\\u0427\\u0442\\u043E-\\u0442\\u043E \\u043F\\u043E\\u0448\\u043B\\u043E \\u043D\\u0435 \\u0442\\u0430\\u043A, \\u043F\\u043E\\u043F\\u0440\\u043E\\u0431\\u0443\\u0439\\u0442\\u0435 \\u0441\\u043D\\u043E\\u0432\\u0430!\")));\n    };\n  }\n\n  componentDidMount() {\n    window.addEventListener('popstate', this.handlePopstate);\n    this.changeData('need_epic', false);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('popstate', this.handlePopstate);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(View, {\n      id: this.props.id,\n      activePanel: this.state.activePanel,\n      popout: this.props.popout,\n      onSwipeBack: this.goBack,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Startov, {\n      id: \"load\",\n      account: this.props.account,\n      this: this,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 15\n      }\n    }));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/rshub/Desktop/Road-to-Jedi/mobile-road/src/panels/Disconnect/main.js"],"names":["React","bridge","Alert","View","ScreenSpinner","Startov","ignore_back","Disconnect","Component","constructor","props","state","activePanel","api_url","history","changeData","this","compdid","ReloadProfile","reloadProfile","handlePopstate","e","preventDefault","goBack","onChange","event","name","currentTarget","value","setState","modalBack","setActiveModal","modalHistory","length","send","pop","setPopout","setTimeout","window","pushState","panel","goPanel","slice","push","showAlert","title","text","popout","autoclose","mode","showErrorAlert","error","action","componentDidMount","addEventListener","componentWillUnmount","removeEventListener","render","id","account"],"mappings":"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","sourcesContent":["import React from 'react'; // React\r\nimport bridge from '@vkontakte/vk-bridge'; // VK Brige\r\n\r\nimport { \r\n  Alert,\r\n  View,\r\n  ScreenSpinner,\r\n  } from '@vkontakte/vkui';\r\n\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport '../../style.css'\r\n// Импортируем панели\r\nimport Startov from './panels/home';\r\n\r\nvar ignore_back = false;\r\n\r\nexport default class Disconnect extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n          activePanel: 'load',\r\n          api_url: \"https://xelene.ru/road/php/index.php?\",\r\n          history: ['start'],\r\n        \r\n\r\n        }\r\n        this.changeData = this.props.this.changeData;\r\n        this.compdid = this.props.compdid;\r\n        this.ReloadProfile = this.props.reloadProfile;\r\n        this.handlePopstate = (e) => {\r\n          e.preventDefault();\r\n          this.goBack()\r\n        }\r\n        this.onChange = (event) => {\r\n          var name = event.currentTarget.name;\r\n          var value = event.currentTarget.value;\r\n          this.setState({ [name]: value });\r\n      }\r\n        this.modalBack = () => {\r\n            this.setActiveModal(this.state.modalHistory[this.state.modalHistory.length - 2]);\r\n        };\r\n        this.goBack = () => {\r\n          if(!ignore_back){\r\n            ignore_back = true;\r\n            const history = this.state.history;\r\n            if(history.length === 1) {\r\n                bridge.send(\"VKWebAppClose\", {\"status\": \"success\"});\r\n            } else if (history.length > 1) {\r\n                history.pop()\r\n                if(this.state.activePanel === 'load') {\r\n                  bridge.send('VKWebAppDisableSwipeBack');\r\n                }\r\n                this.setState({activePanel: history[history.length - 1]})\r\n                // if(history[history.length - 1] === 'ticket'){\r\n                //   this.changeData('need_epic', false)\r\n                // } else{\r\n                //   this.changeData('need_epic', true)\r\n                // }\r\n                this.setPopout(<ScreenSpinner />)\r\n                setTimeout(() => {\r\n                  this.setPopout(null)\r\n                }, 500)\r\n            }\r\n            setTimeout(() => {ignore_back = false;}, 500)\r\n            \r\n          }else{\r\n            const history = this.state.history;\r\n            window.history.pushState( { panel: history[history.length - 1] }, history[history.length - 1] );\r\n          }\r\n      }\r\n        this.goPanel = (panel) => {\r\n          let history = this.state.history.slice();\r\n          history.push(panel)\r\n          window.history.pushState( { panel: panel }, panel );\r\n          this.setState({history: history, activePanel: panel})\r\n          // if(panel === 'ticket'){\r\n          //   this.changeData('need_epic', false)\r\n          // } else{\r\n          //   this.changeData('need_epic', true)\r\n          // }\r\n        }\r\n          this.showAlert = (title, text) => {\r\n            this.setState({\r\n              popout: \r\n                <Alert\r\n                  actions={[{\r\n                    title: 'Закрыть',\r\n                    autoclose: true,\r\n                    mode: 'cancel'\r\n                  }]}\r\n                  onClose={() => this.setPopout(null)}\r\n                >\r\n                  <h2>{title}</h2>\r\n                  <p>{text}</p>\r\n              </Alert>\r\n            })\r\n          }\r\n          this.showErrorAlert = (error=null, action=null) => {\r\n            this.setPopout(\r\n              <Alert\r\n                  actions={[{\r\n                  title: 'Отмена',\r\n                  autoclose: true,\r\n                  mode: 'cancel',\r\n                  action: action,\r\n                  }]}\r\n                  onClose={() => this.setPopout(null)}\r\n              >\r\n                <h2>Ошибка</h2>\r\n                {error ? <p>{error}</p> : <p>Что-то пошло не так, попробуйте снова!</p>}\r\n              </Alert>\r\n          )\r\n        }\r\n    }\r\n    componentDidMount(){\r\n      window.addEventListener('popstate', this.handlePopstate); \r\n      this.changeData('need_epic', false)\r\n    }\r\n    componentWillUnmount(){\r\n      window.removeEventListener('popstate', this.handlePopstate)\r\n    }\r\n    render() {\r\n        return(\r\n            <View \r\n            id={this.props.id}\r\n            activePanel={this.state.activePanel}\r\n            popout={this.props.popout}\r\n            onSwipeBack={this.goBack}\r\n            >\r\n              <Startov id='load' account={this.props.account} this={this} />\r\n              {/* <Startov2 id='start2' account={this.props.account} this={this} /> */}\r\n            </View>   \r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}