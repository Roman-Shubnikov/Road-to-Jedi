{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{Panel,PanelHeader,Button,Placeholder,Separator,PullToRefresh,Cell,Div,PanelHeaderBack,Tabs,TabsItem,Search}from'@vkontakte/vkui';import Icon56InboxOutline from'@vkontakte/icons/dist/56/inbox_outline';import Icon28WarningTriangleOutline from'@vkontakte/icons/dist/28/warning_triangle_outline';function fix_time(time){if(time<10){return\"0\"+time;}else{return time;}}var months=['янв','фев','мар','апр','мая','июн','июл','авг','сен','окт','ноя','дек'];var myQuestions=/*#__PURE__*/function(_React$Component){_inherits(myQuestions,_React$Component);var _super=_createSuper(myQuestions);function myQuestions(props){var _this;_classCallCheck(this,myQuestions);_this=_super.call(this,props);_this.state={api_url:\"https://xelene.ru/road/php/index.php?\",myQuestions:[],fetching:false,activeTab:'positive',search:'',limiter:5};_this.myQuestions=function(){fetch(_this.state.api_url+\"method=tickets.getByModeratorAnswers&\"+window.location.search.replace('?','')).then(function(res){return res.json();}).then(function(data){if(data.result){_this.setState({myQuestions:data.response});setTimeout(function(){_this.setState({fetching:false});},500);}}).catch(function(err){_this.props.this.showErrorAlert();});};return _this;}_createClass(myQuestions,[{key:\"getFiltresQuestions\",value:function getFiltresQuestions(questions){if(this.state.activeTab==='positive'){return questions.filter(function(_ref){var mark=_ref.mark;return mark===1;});}else{return questions.filter(function(_ref2){var mark=_ref2.mark;return mark===0;});}}},{key:\"getFilterSearch\",value:function getFilterSearch(questions){var search=this.state.search.toLowerCase();return questions.filter(function(_ref3){var text=_ref3.text;return text.toLowerCase().indexOf(search)>-1;});}},{key:\"limiter\",value:function limiter(questions){return questions.slice(0,this.state.limiter);}},{key:\"componentDidMount\",value:function componentDidMount(){this.myQuestions();}},{key:\"render\",value:function render(){var _this2=this;var props=this.props.this;// для более удобного использования.\nvar questions=this.getFiltresQuestions(this.state.myQuestions);var searched=this.getFilterSearch(questions);var limiter_search=this.limiter(searched);return/*#__PURE__*/React.createElement(Panel,{id:this.props.id},/*#__PURE__*/React.createElement(PanelHeader,{separator:false,left:/*#__PURE__*/React.createElement(PanelHeaderBack,{onClick:function onClick(){return _this2.props.this.goBack();}})},\"\\u041C\\u043E\\u0438 \\u043E\\u0442\\u0432\\u0435\\u0442\\u044B\"),/*#__PURE__*/React.createElement(Search,{value:this.state.search,onChange:function onChange(e){_this2.setState({search:e.target.value});}}),/*#__PURE__*/React.createElement(Tabs,null,/*#__PURE__*/React.createElement(TabsItem,{onClick:function onClick(){return _this2.setState({activeTab:'positive'});},selected:this.state.activeTab==='positive'},\"\\u041F\\u043E\\u043B\\u043E\\u0436\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u044B\\u0435\"),/*#__PURE__*/React.createElement(TabsItem,{onClick:function onClick(){return _this2.setState({activeTab:'negative'});},selected:this.state.activeTab==='negative'},\"\\u041E\\u0442\\u0440\\u0438\\u0446\\u0430\\u0442\\u0435\\u043B\\u044C\\u043D\\u044B\\u0435\")),/*#__PURE__*/React.createElement(PullToRefresh,{onRefresh:function onRefresh(){_this2.setState({fetching:true});_this2.myQuestions();},isFetching:this.state.fetching},questions.length>0?searched.length>0?/*#__PURE__*/React.createElement(React.Fragment,null,limiter_search.map(function(result,i){return/*#__PURE__*/React.createElement(React.Fragment,{key:result.id},/*#__PURE__*/React.createElement(Cell,{key:i,onClick:function onClick(){return props.goTiket(result['ticket_id']);},description:new Date(result['time']*1e3).getDate()+\" \"+months[new Date(result['time']*1e3).getMonth()]+\" \"+new Date(result['time']*1e3).getFullYear()+\" в \"+fix_time(new Date(result['time']*1e3).getHours())+\":\"+fix_time(new Date(result['time']*1e3).getMinutes()),size:\"l\"// before={<Avatar src={result['author']['id'] === 526444378 ? \"https://cdn3.iconfinder.com/data/icons/avatars-15/64/_Ninja-2-512.png\" : result['author']['photo_200']} />}\n},result['text']),/*#__PURE__*/React.createElement(Separator,{style:{width:\"90%\"}}));}),limiter_search<searched?/*#__PURE__*/React.createElement(Div,null,/*#__PURE__*/React.createElement(Button,{mode:\"secondary\",size:\"xl\",stretched:true,onClick:function onClick(){return _this2.setState({limiter:_this2.state.limiter+2});}},\"\\u041F\\u043E\\u043A\\u0430\\u0437\\u0430\\u0442\\u044C \\u0435\\u0449\\u0451 10 \\u043E\\u0442\\u0432\\u0435\\u0442\\u043E\\u0432\")):null):/*#__PURE__*/React.createElement(Placeholder,{icon:/*#__PURE__*/React.createElement(Icon28WarningTriangleOutline,{width:56,height:56})},\"\\u041F\\u043E \\u0432\\u0430\\u0448\\u0435\\u043C\\u0443 \\u0437\\u0430\\u043F\\u0440\\u043E\\u0441\\u0443 \\u043D\\u0438\\u0447\\u0435\\u0433\\u043E \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E.\"):/*#__PURE__*/React.createElement(Placeholder,{icon:/*#__PURE__*/React.createElement(Icon56InboxOutline,null)},\"\\u0423\\u043F\\u0441, \\u043A\\u0430\\u0436\\u0435\\u0442\\u0441\\u044F \\u0437\\u0434\\u0435\\u0441\\u044C \\u043D\\u0435\\u0442 \\u0432\\u0430\\u0448\\u0438\\u0445 \\u043E\\u0442\\u0432\\u0435\\u0442\\u043E\\u0432.\")));}}]);return myQuestions;}(React.Component);export{myQuestions as default};","map":{"version":3,"sources":["C:/Users/rshub/Desktop/Road-to-Jedi/mobile-road/src/panels/Profile/panels/AllQuestions.js"],"names":["React","Panel","PanelHeader","Button","Placeholder","Separator","PullToRefresh","Cell","Div","PanelHeaderBack","Tabs","TabsItem","Search","Icon56InboxOutline","Icon28WarningTriangleOutline","fix_time","time","months","myQuestions","props","state","api_url","fetching","activeTab","search","limiter","fetch","window","location","replace","then","res","json","data","result","setState","response","setTimeout","catch","err","this","showErrorAlert","questions","filter","mark","toLowerCase","text","indexOf","slice","getFiltresQuestions","searched","getFilterSearch","limiter_search","id","goBack","e","target","value","length","map","i","goTiket","Date","getDate","getMonth","getFullYear","getHours","getMinutes","width","Component"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport { \n    Panel,\n    PanelHeader,\n    Button,\n    Placeholder,\n    Separator,\n    PullToRefresh,\n    Cell,\n    Div,\n    PanelHeaderBack,\n    Tabs,\n    TabsItem,\n    Search,\n    } from '@vkontakte/vkui';\n\nimport Icon56InboxOutline from '@vkontakte/icons/dist/56/inbox_outline';\nimport Icon28WarningTriangleOutline from '@vkontakte/icons/dist/28/warning_triangle_outline';\nfunction fix_time(time) {\n    if(time < 10) {\n        return \"0\" + time\n    } else {\n        return time\n    }\n  }\n\n  var months = [\n    'янв',\n    'фев',\n    'мар',\n    'апр',\n    'мая',\n    'июн',\n    'июл',\n    'авг',\n    'сен',\n    'окт',\n    'ноя',\n    'дек',\n];\n\nexport default class myQuestions extends React.Component {\n        constructor(props) {\n            super(props);\n            this.state = {\n                api_url: \"https://xelene.ru/road/php/index.php?\",\n                myQuestions:[],\n                fetching: false,\n                activeTab: 'positive',\n                search: '',\n                limiter: 5\n            }\n            this.myQuestions = () => {\n                fetch(this.state.api_url + \"method=tickets.getByModeratorAnswers&\" + window.location.search.replace('?', ''))\n                  .then(res => res.json())\n                  .then(data => {\n                    if(data.result) {\n                      this.setState({myQuestions: data.response})\n                      setTimeout(() => {\n                          this.setState({fetching: false});\n                    }, 500)\n                      \n                    }\n                  })\n                  .catch(err => {\n                    this.props.this.showErrorAlert()\n          \n                  })\n              }\n        }\n        getFiltresQuestions(questions){\n            if(this.state.activeTab === 'positive'){\n                return questions.filter(({mark}) => mark === 1);\n            }else{\n                return questions.filter(({mark}) => mark === 0);\n            }\n        }\n        getFilterSearch(questions) {\n            const search = this.state.search.toLowerCase();\n            return questions.filter(({text}) => text.toLowerCase().indexOf(search) > -1);\n        }\n\n        limiter(questions){\n            return questions.slice(0, this.state.limiter)\n        }\n        componentDidMount(){\n            this.myQuestions()\n        }\n\n        render() {\n            var props = this.props.this; // для более удобного использования.\n            var questions = this.getFiltresQuestions(this.state.myQuestions);\n            var searched = this.getFilterSearch(questions);\n            var limiter_search = this.limiter(searched);\n            return (\n                <Panel id={this.props.id}>\n            <PanelHeader separator={false}\n                left={<PanelHeaderBack onClick={() => this.props.this.goBack()} />}\n            >\n                Мои ответы\n                </PanelHeader>\n                <Search value={this.state.search}\n                    onChange={(e) => {\n                        this.setState({search: e.target.value})\n                    }} />\n                <Tabs>\n                <TabsItem\n                    onClick={() => this.setState({ activeTab: 'positive' })}\n                    selected={this.state.activeTab === 'positive'}\n                >\n                    Положительные\n                </TabsItem>\n                <TabsItem\n                    onClick={() => this.setState({ activeTab: 'negative' })}\n                    selected={this.state.activeTab === 'negative'}\n                >\n                    Отрицательные\n                </TabsItem>\n                </Tabs>\n                <PullToRefresh onRefresh={() => {this.setState({fetching: true});this.myQuestions()}} isFetching={this.state.fetching}>\n                    {questions.length > 0 ?\n                    searched.length > 0 ?\n                    <>\n                    {limiter_search.map((result, i) => \n                    <React.Fragment key={result.id}> \n                    <Cell\n                        key={i}\n                        onClick={() => props.goTiket(result['ticket_id'])}\n                        description={new Date(result['time'] * 1e3).getDate() + \" \" + months[new Date(result['time'] * 1e3).getMonth()] + \" \" + new Date(result['time'] * 1e3).getFullYear() + \" в \" \n                        + fix_time(new Date(result['time'] * 1e3).getHours()) + \":\" + fix_time(new Date(result['time'] * 1e3).getMinutes())}\n                        size=\"l\"\n                        // before={<Avatar src={result['author']['id'] === 526444378 ? \"https://cdn3.iconfinder.com/data/icons/avatars-15/64/_Ninja-2-512.png\" : result['author']['photo_200']} />}\n                    >\n                        {result['text']}\n                    </Cell>\n                    <Separator style={{width: \"90%\"}} />\n                    </React.Fragment>\n                    )}\n                    {(limiter_search < searched) ? \n                    <Div>\n                        <Button \n                        mode='secondary' \n                        size='xl' \n                        stretched\n                        onClick={() => this.setState({limiter: this.state.limiter + 2})}\n                        >Показать ещё 10 ответов</Button>\n                    </Div> : null}\n                    </> :\n                    <Placeholder \n                    icon={<Icon28WarningTriangleOutline width={56} height={56} />}>\n                        По вашему запросу ничего не найдено.\n                    </Placeholder> :\n                    <Placeholder \n                    icon={<Icon56InboxOutline />}>\n                        Упс, кажется здесь нет ваших ответов.\n                    </Placeholder>\n                    }\n                </PullToRefresh>\n            </Panel>\n            )\n            }\n        }\n  "]},"metadata":{},"sourceType":"module"}