{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{Panel,PanelHeader,Group,Input,Avatar,Button,Header,Div,Snackbar,PanelHeaderBack,Separator}from'@vkontakte/vkui';import Icon24Repeat from'@vkontakte/icons/dist/24/repeat';import Icon28MoneyCircleOutline from'@vkontakte/icons/dist/28/money_circle_outline';import Icon28MoneyHistoryBackwardOutline from'@vkontakte/icons/dist/28/money_history_backward_outline';import Icon16CheckCircle from'@vkontakte/icons/dist/16/check_circle';import Icon20CancelCircleFillRed from'@vkontakte/icons/dist/20/cancel_circle_fill_red';var avatars=[\"1.png\",\"2.png\",\"3.png\",\"4.png\",\"5.png\",\"6.png\",\"7.png\",\"8.png\",\"9.png\",\"10.png\",\"11.png\",\"12.png\",\"13.png\",\"14.png\",\"15.png\",\"16.png\",\"17.png\",\"18.png\",\"19.png\",\"20.png\",\"21.png\"// \"22.png\",\n// \"23.png\",\n// \"24.png\",\n// \"25.png\",\n// \"26.png\",\n];var blueBackground={backgroundColor:'var(--accent)'};var Market=/*#__PURE__*/function(_React$Component){_inherits(Market,_React$Component);var _super=_createSuper(Market);function Market(props){var _this;_classCallCheck(this,Market);_this=_super.call(this,props);_this.state={changed_id:'',api_url:\"https://xelene.ru/road/php/index.php?\",last_selected:null};var propsbi=_this.props.this;_this.setPopout=propsbi.setPopout;_this.showErrorAlert=propsbi.showErrorAlert;_this.showAlert=propsbi.showAlert;_this.setActiveModal=propsbi.setActiveModal;_this.onChange=function(event){var name=event.currentTarget.name;var value=event.currentTarget.value;_this.setState(_defineProperty({},name,value));};return _this;}_createClass(Market,[{key:\"images\",value:function images(){var _this2=this;var number=Object.keys(avatars).length;var object=[];for(var i=0;i<number;i++){object.push(/*#__PURE__*/React.createElement(\"img\",{id:i,onClick:function onClick(e){return _this2.selectImage(e);},style:i===0?{marginLeft:\"20px\"}:null,className:\"changes_avatars\",key:i,src:\"https://xelene.ru/road/php/images/avatars/\"+avatars[i],alt:'ava'}));}return object;}},{key:\"selectImage\",value:function selectImage(e){var number=e.currentTarget.id;if(this.state.last_selected!==null){var last_image=document.getElementById(this.state.last_selected);last_image.className=\"changes_avatars\";}var image=document.getElementById(number);image.className=\"changes_avatars select_avatar\";this.setState({last_selected:Number(number)});}},{key:\"changeAvatar\",value:function changeAvatar(last_selected){var _this3=this;fetch(this.state.api_url+\"method=shop.changeAvatar&avatar_id=\"+last_selected+\"&\"+window.location.search.replace('?','')).then(function(data){return data.json();}).then(function(data){var last_image=document.getElementById(_this3.state.last_selected);last_image.className=\"changes_avatars\";_this3.setState({last_selected:null});if(data.result){_this3.props.this.setSnack(/*#__PURE__*/React.createElement(Snackbar,{layout:\"vertical\",onClose:function onClose(){return _this3.props.this.setSnack(null);},before:/*#__PURE__*/React.createElement(Avatar,{size:24,style:blueBackground},/*#__PURE__*/React.createElement(Icon16CheckCircle,{fill:\"#fff\",width:14,height:14}))},\"\\u0410\\u0432\\u0430\\u0442\\u0430\\u0440 \\u0443\\u0441\\u043F\\u0435\\u0448\\u043D\\u043E \\u0441\\u043C\\u0435\\u043D\\u0435\\u043D\"));setTimeout(function(){_this3.props.this.ReloadProfile();},4000);}else{_this3.props.this.setSnack(/*#__PURE__*/React.createElement(Snackbar,{layout:\"vertical\",onClose:function onClose(){return _this3.props.this.setSnack(null);},before:/*#__PURE__*/React.createElement(Icon20CancelCircleFillRed,{width:24,height:24})},data.error.message));}}).catch(function(err){_this3.showErrorAlert(err);});}},{key:\"ChangeId\",value:function ChangeId(){var _this4=this;if(this.state.changed_id){fetch(this.state.api_url+\"method=shop.changeId&change_id=\"+this.state.changed_id+\"&\"+window.location.search.replace('?','')).then(function(res){return res.json();}).then(function(data){if(data.result){_this4.props.this.setSnack(/*#__PURE__*/React.createElement(Snackbar,{layout:\"vertical\",onClose:function onClose(){return _this4.props.this.setSnack(null);},before:/*#__PURE__*/React.createElement(Avatar,{size:24,style:blueBackground},/*#__PURE__*/React.createElement(Icon16CheckCircle,{fill:\"#fff\",width:14,height:14}))},\"id \\u0410\\u0433\\u0435\\u043D\\u0442\\u0430 \\u0443\\u0441\\u043F\\u0435\\u0448\\u043D\\u043E \\u0441\\u043C\\u0435\\u043D\\u0435\\u043D\"));setTimeout(function(){_this4.props.this.ReloadProfile();},4000);}else{_this4.props.this.setSnack(/*#__PURE__*/React.createElement(Snackbar,{layout:\"vertical\",onClose:function onClose(){return _this4.props.this.setSnack(null);},before:/*#__PURE__*/React.createElement(Icon20CancelCircleFillRed,{width:24,height:24})},data.error.message));}}).catch(function(err){_this4.showErrorAlert(err);});}else{this.props.this.setSnack(/*#__PURE__*/React.createElement(Snackbar,{layout:\"vertical\",onClose:function onClose(){return _this4.props.this.setSnack(null);},before:/*#__PURE__*/React.createElement(Icon20CancelCircleFillRed,{width:24,height:24})},\"\\u0412\\u044B \\u043D\\u0435 \\u0443\\u043A\\u0430\\u0437\\u0430\\u043B\\u0438 \\u0436\\u0435\\u043B\\u0430\\u0435\\u043C\\u044B\\u0439 id\"));}}},{key:\"render\",value:function render(){var _this5=this;return/*#__PURE__*/React.createElement(Panel,{id:this.props.id},/*#__PURE__*/React.createElement(PanelHeader,{left:/*#__PURE__*/React.createElement(PanelHeaderBack,{onClick:function onClick(){return window.history.back();}})},\"\\u041C\\u0430\\u0433\\u0430\\u0437\\u0438\\u043D\"),/*#__PURE__*/React.createElement(Header,null,\"\\u0421\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\"),/*#__PURE__*/React.createElement(\"div\",{className:\"scrollImages\"},this.images()),/*#__PURE__*/React.createElement(Div,null,/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){_this5.changeAvatar(Number(_this5.state.last_selected)+1);},before:/*#__PURE__*/React.createElement(Icon28MoneyCircleOutline,{style:{marginRight:\"5px\"}}),size:\"xl\",mode:\"secondary\",disabled:this.state.last_selected!==null?false:true},\"\\u0421\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u0437\\u0430 300 \\u043C\\u043E\\u043D\\u0435\\u0442\\u043E\\u043A\")),/*#__PURE__*/React.createElement(Separator,null),/*#__PURE__*/React.createElement(Header,null,\"\\u0421\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u0441\\u0432\\u043E\\u0439 \\u043D\\u0438\\u043A\"),/*#__PURE__*/React.createElement(Div,null,/*#__PURE__*/React.createElement(Input,{placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0436\\u0435\\u043B\\u0430\\u0435\\u043C\\u044B\\u0439 \\u043D\\u0438\\u043A (\\u043C\\u0430\\u043A\\u0441. 10 \\u0441\\u0438\\u043C\\u0432\\u043E\\u043B\\u043E\\u0432)\",onChange:function onChange(e){return _this5.onChange(e);},value:this.state.changed_id,maxLength:\"10\",name:\"changed_id\"}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){_this5.ChangeId(_this5.state.changed_id);},before:/*#__PURE__*/React.createElement(Icon24Repeat,{width:28,height:28,style:{marginRight:\"5px\"}}),size:\"xl\",mode:\"secondary\",disabled:this.state.changed_id<=0?true:false},\"\\u0421\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u0437\\u0430 500 \\u043C\\u043E\\u043D\\u0435\\u0442\\u043E\\u043A\")),/*#__PURE__*/React.createElement(Separator,null),/*#__PURE__*/React.createElement(Header,null,\"\\u041E\\u043F\\u0446\\u0438\\u0438\"),/*#__PURE__*/React.createElement(Div,null,/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return _this5.setActiveModal('send');},before:/*#__PURE__*/React.createElement(Icon28MoneyHistoryBackwardOutline,{style:{marginRight:\"5px\"}}),size:\"xl\",mode:\"secondary\"},\"\\u041F\\u0435\\u0440\\u0435\\u0432\\u0435\\u0441\\u0442\\u0438\")),this.props.this.state.snackbar);}}]);return Market;}(React.Component);export{Market as default};","map":{"version":3,"sources":["C:/Users/rshub/Desktop/Road-to-Jedi/mobile-road/src/panels/Profile/panels/market.js"],"names":["React","Panel","PanelHeader","Group","Input","Avatar","Button","Header","Div","Snackbar","PanelHeaderBack","Separator","Icon24Repeat","Icon28MoneyCircleOutline","Icon28MoneyHistoryBackwardOutline","Icon16CheckCircle","Icon20CancelCircleFillRed","avatars","blueBackground","backgroundColor","Market","props","state","changed_id","api_url","last_selected","propsbi","this","setPopout","showErrorAlert","showAlert","setActiveModal","onChange","event","name","currentTarget","value","setState","number","Object","keys","length","object","i","push","e","selectImage","marginLeft","id","last_image","document","getElementById","className","image","Number","fetch","window","location","search","replace","then","data","json","result","setSnack","setTimeout","ReloadProfile","error","message","catch","err","res","history","back","images","changeAvatar","marginRight","ChangeId","snackbar","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { \n    Panel,\n    PanelHeader,\n    Group,\n    Input,\n    Avatar,\n    Button,\n    Header,\n    Div,\n    Snackbar,\n    PanelHeaderBack,\n    Separator\n    } from '@vkontakte/vkui';\n\nimport Icon24Repeat from '@vkontakte/icons/dist/24/repeat';\nimport Icon28MoneyCircleOutline from '@vkontakte/icons/dist/28/money_circle_outline';\n\nimport Icon28MoneyHistoryBackwardOutline from '@vkontakte/icons/dist/28/money_history_backward_outline';\nimport Icon16CheckCircle from '@vkontakte/icons/dist/16/check_circle';\nimport Icon20CancelCircleFillRed from '@vkontakte/icons/dist/20/cancel_circle_fill_red';\n\nvar avatars = [\n    \"1.png\",\n    \"2.png\",\n    \"3.png\",\n    \"4.png\",\n    \"5.png\",\n    \"6.png\",\n    \"7.png\",\n    \"8.png\",\n    \"9.png\",\n    \"10.png\",\n    \"11.png\",\n    \"12.png\",\n    \"13.png\",\n    \"14.png\",\n    \"15.png\",\n    \"16.png\",\n    \"17.png\",\n    \"18.png\",\n    \"19.png\",\n    \"20.png\",\n    \"21.png\",\n    // \"22.png\",\n    // \"23.png\",\n    // \"24.png\",\n    // \"25.png\",\n    // \"26.png\",\n\n]\n\nconst blueBackground = {\n    backgroundColor: 'var(--accent)'\n  };\nexport default class Market extends React.Component{\n    constructor(props){\n        super(props)\n        this.state = {\n            changed_id: '',\n            api_url: \"https://xelene.ru/road/php/index.php?\",\n            last_selected: null,\n\n        }\n        var propsbi = this.props.this;\n        this.setPopout = propsbi.setPopout;\n        this.showErrorAlert = propsbi.showErrorAlert;\n        this.showAlert = propsbi.showAlert;\n        this.setActiveModal = propsbi.setActiveModal;\n        this.onChange = (event) => {\n            var name = event.currentTarget.name;\n            var value = event.currentTarget.value;\n            this.setState({ [name]: value });\n        }\n    }\n    images() {\n      var number = Object.keys(avatars).length;\n      var object = []\n          for (let i = 0; i < number; i++ ) {\n              object.push(\n                  <img id={i}\n                  onClick={(e) => this.selectImage(e)} \n                  style={i === 0 ? {marginLeft: \"20px\"} : null} \n                  className=\"changes_avatars\" key={i} \n                  src={\"https://xelene.ru/road/php/images/avatars/\" + avatars[i]}\n                  alt={'ava'} />\n              )\n          }\n      \n      return(object)\n  }\n  selectImage(e) {\n    let number = e.currentTarget.id;\n    if(this.state.last_selected !== null){\n      let last_image = document.getElementById(this.state.last_selected)\n      last_image.className = \"changes_avatars\"\n    }\n    let image = document.getElementById(number);\n    \n    image.className = \"changes_avatars select_avatar\"\n    this.setState({last_selected: Number(number)});\n  }\n    changeAvatar(last_selected) {\n        fetch(this.state.api_url + \"method=shop.changeAvatar&avatar_id=\" + last_selected + \"&\" + window.location.search.replace('?', ''))\n        .then(data => data.json())\n        .then(data => {\n          let last_image = document.getElementById(this.state.last_selected)\n          last_image.className = \"changes_avatars\"\n          this.setState({last_selected: null})\n              if(data.result){\n                  this.props.this.setSnack( \n                    <Snackbar\n                      layout=\"vertical\"\n                      onClose={() => this.props.this.setSnack(null)}\n                      before={<Avatar size={24} style={blueBackground}><Icon16CheckCircle fill=\"#fff\" width={14} height={14} /></Avatar>}\n                    >\n                      Аватар успешно сменен\n                    </Snackbar>\n                  )\n\n                  setTimeout(() => {\n                    this.props.this.ReloadProfile();\n                  }, 4000)\n                }else{\n                  this.props.this.setSnack(\n                    <Snackbar\n                    layout=\"vertical\"\n                    onClose={() => this.props.this.setSnack(null)}\n                    before={<Icon20CancelCircleFillRed width={24} height={24} />}\n                  >\n                    {data.error.message}\n                  </Snackbar>);\n                }\n            })\n            .catch(err => {\n                this.showErrorAlert(err)\n        })\n        \n    }\n    ChangeId() {\n        if(this.state.changed_id){ \n          fetch(this.state.api_url + \"method=shop.changeId&change_id=\" + this.state.changed_id + \"&\" + window.location.search.replace('?', ''))\n          .then(res => res.json())\n          .then(data => {\n            if(data.result) {\n                this.props.this.setSnack(\n                <Snackbar\n                  layout=\"vertical\"\n                  onClose={() => this.props.this.setSnack(null)}\n                  before={<Avatar size={24} style={blueBackground}><Icon16CheckCircle fill=\"#fff\" width={14} height={14} /></Avatar>}\n                >\n                  id Агента успешно сменен\n                </Snackbar>\n              )\n              setTimeout(() => {\n                this.props.this.ReloadProfile();\n              }, 4000)\n            } else {\n              this.props.this.setSnack(\n                <Snackbar\n                layout=\"vertical\"\n                onClose={() => this.props.this.setSnack(null)}\n                before={<Icon20CancelCircleFillRed width={24} height={24} />}\n              >\n                {data.error.message}\n              </Snackbar>);\n            }\n          })\n          .catch(err => {\n            this.showErrorAlert(err)\n          })\n        } else {\n          this.props.this.setSnack(\n            <Snackbar\n            layout=\"vertical\"\n            onClose={() => this.props.this.setSnack(null)}\n            before={<Icon20CancelCircleFillRed width={24} height={24} />}\n          >\n            Вы не указали желаемый id\n          </Snackbar>);\n        }\n      }\n\n    render() {\n        return(\n            <Panel id={this.props.id}>\n                <PanelHeader \n                    left={\n                        <PanelHeaderBack onClick={() => window.history.back()} /> \n                }>\n                    Магазин\n                </PanelHeader>\n                <Header>Сменить аватар</Header>\n                <div className=\"scrollImages\">\n                    {this.images()}\n                </div>\n                <Div>\n                    <Button onClick={() => {this.changeAvatar(Number(this.state.last_selected) + 1)}} \n                    before={<Icon28MoneyCircleOutline \n                    style={{marginRight: \"5px\"}}/>} \n                    size=\"xl\" \n                    mode=\"secondary\"\n                    disabled={(this.state.last_selected !== null) ? false : true}>Сменить за 300 монеток</Button>\n                </Div>\n                <Separator />\n                <Header>Сменить свой ник</Header>\n                <Div>\n                    <Input placeholder=\"Введите желаемый ник (макс. 10 символов)\" onChange={(e) => this.onChange(e)} value={this.state.changed_id} maxLength=\"10\" name=\"changed_id\"/>\n                    <br/>\n                    <Button onClick={() => {this.ChangeId(this.state.changed_id)}} \n                    before={<Icon24Repeat width={28} height={28} style={{marginRight: \"5px\"}}/>}\n                    size=\"xl\" \n                    mode=\"secondary\"\n                    disabled={(this.state.changed_id <= 0) ? true : false}>Сменить за 500 монеток</Button>\n                </Div>\n                {/* <Group separator=\"hide\" header={<Header>Сброс статистики</Header>}>\n                    <Div>\n                        <Button onClick={() => props.this.deleteStats()} before={<Icon28GridSquareOutline style={{marginRight: \"5px\"}}/>} size=\"xl\" mode=\"secondary\">Сбросить за 150 монеток</Button>\n                    </Div>\n                </Group> */}\n                <Separator />\n                <Header>Опции</Header>\n                    <Div>\n                        <Button onClick={() => this.setActiveModal('send')} before={<Icon28MoneyHistoryBackwardOutline style={{marginRight: \"5px\"}}/>} size=\"xl\" mode=\"secondary\">Перевести</Button>\n                        {/* <br/>\n                        <Button onClick={() => props.this.goVitas()} before={<Icon28GlobeOutline style={{marginRight: \"5px\"}}/>} size=\"xl\" mode=\"secondary\">Обучать Витька</Button> */}\n                    </Div>\n                {this.props.this.state.snackbar}\n                {/* <Group separator=\"hide\" header={<Header>Обнулить статистику</Header>}>\n                    <Div>\n                        Мы обнулим вам встатистику, число всех ответов станет равным 0.\n                    </Div>\n                </Group>\n                <Div>\n                    <Button before={<Icon28MoneyCircleOutline style={{marginRight: \"5px\"}}/>} size=\"xl\" mode=\"secondary\">Купить за 350 монеток</Button>\n                </Div>\n                <Group separator=\"hide\" header={<Header>Сменить id Агента</Header>}>\n                    <Div>\n                        Установите себе другой id и будьте заметнее!\n                    </Div>\n                </Group>\n                <Div>\n                    <Button before={<Icon28MoneyCircleOutline style={{marginRight: \"5px\"}}/>} size=\"xl\" mode=\"secondary\">Купить за 700 монеток</Button>\n                </Div> */}\n            </Panel>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}