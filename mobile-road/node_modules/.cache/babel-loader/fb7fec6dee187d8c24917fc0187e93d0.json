{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\src\\\\panels\\\\questions\\\\panels\\\\new_tiket.js\";\nimport React from 'react';\nimport { Panel, PanelHeader, PanelHeaderButton, Button, Alert, ScreenSpinner, Input, FormLayout, Textarea } from '@vkontakte/vkui';\nimport Icon24BrowserBack from '@vkontakte/icons/dist/24/browser_back';\nexport default class NewTicket extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      api_url: \"https://xelene.ru/road/php/index.php?\",\n      title_new_tiket: '',\n      text_new_tiket: ''\n    };\n\n    this.onChange = event => {\n      var name = event.currentTarget.name;\n      var value = event.currentTarget.value;\n      this.setState({\n        [name]: value\n      });\n    };\n  }\n\n  getRandomInRange(min, max) {\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n  }\n\n  sendNewTiket() {\n    this.setState({\n      popout: /*#__PURE__*/React.createElement(ScreenSpinner, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 36,\n          columnNumber: 32\n        }\n      })\n    });\n\n    if (this.state.text_new_tiket.length > 5 || this.state.title_new_tiket.length > 5) {\n      fetch(this.state.api_url + \"method=ticket.add&\" + window.location.search.replace('?', ''), {\n        method: 'post',\n        headers: {\n          \"Content-type\": \"application/json; charset=UTF-8\"\n        },\n        // signal: controllertime.signal,\n        body: JSON.stringify({\n          'title': this.state.title_new_tiket,\n          'text': this.state.text_new_tiket,\n          'user': this.getRandomInRange(501, 624429367)\n        })\n      }).then(res => res.json()).then(data => {\n        if (data.result) {} else {\n          this.showErrorAlert(data.error.message);\n        }\n      }).catch(err => {\n        this.showErrorAlert('Ошибка запроса. Пожалуйста, попробуйте позже', () => {\n          this.changeData('activeStory', 'disconnect');\n        });\n      });\n    } else {}\n\n    var global = this;\n\n    if (this.state.text_new_tiket.length > 5 || this.state.title_new_tiket.length > 5) {\n      var url = this.state.api_url + 'method=ticket.add&' + window.location.search.replace('?', '');\n      var method = 'POST';\n      var async = true;\n      var xhr = new XMLHttpRequest();\n      xhr.open(method, url, async); //.then(response => response.json())\n\n      xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n\n      xhr.onreadystatechange = function () {\n        //Вызывает функцию при смене состояния.\n        if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {\n          if (xhr.responseText) {\n            let text = JSON.parse(xhr.responseText);\n            global.props.this.goTiket(text.response.ticket_id);\n            fetch(global.state.api_url + \"method=tickets.get&unanswered=1&\" + window.location.search.replace('?', '')).then(res => res.json()).then(data => {\n              if (data.result) {\n                global.setState({\n                  tiket_all: data.response,\n                  popout: null,\n                  title_new_tiket: \"\",\n                  text_new_tiket: \"\"\n                });\n              } else {\n                this.showErrorAlert(data.error.message);\n              }\n            }).catch(err => {\n              this.showErrorAlert();\n            });\n          }\n        }\n      };\n\n      xhr.send('title=' + this.state.title_new_tiket + '&text=' + this.state.text_new_tiket + '&user=' + this.getRandomInRange(501, 624429367));\n\n      xhr.onerror = error => {\n        this.showErrorAlert();\n        console.error(error);\n      };\n    } else {\n      this.setState({\n        popout: /*#__PURE__*/React.createElement(Alert, {\n          actions: [{\n            title: 'Отмена',\n            autoclose: true,\n            style: 'cancel'\n          }],\n          onClose: this.closePopout,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(\"h2\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 13\n          }\n        }, \"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430\"), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 13\n          }\n        }, \"\\u0417\\u0430\\u0433\\u043E\\u043B\\u043E\\u0432\\u043E\\u043A \\u0438\\u043B\\u0438 \\u0442\\u0435\\u043A\\u0441\\u0442 \\u043F\\u0440\\u043E\\u0431\\u043B\\u0435\\u043C\\u044B \\u0434\\u043E\\u043B\\u0436\\u0435\\u043D \\u0431\\u044B\\u0442\\u044C \\u0431\\u043E\\u043B\\u044C\\u0448\\u0435 5 \\u0441\\u0438\\u043C\\u0432\\u043E\\u043B\\u043E\\u0432.\"))\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Panel, {\n      id: this.props.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(PanelHeader, {\n      left: /*#__PURE__*/React.createElement(PanelHeaderButton, {\n        onClick: () => window.history.back(),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Icon24BrowserBack, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 21\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 17\n      }\n    }, \"\\u041D\\u043E\\u0432\\u044B\\u0439 \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441\"), /*#__PURE__*/React.createElement(FormLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      top: this.state.title_new_tiket === null ? \"Суть проблемы (0/30). Не менее 5 символов\" : \"Суть проблемы (\" + this.state.title_new_tiket.length + \"/80). Не менее 5 символов\",\n      maxLength: \"80\",\n      type: \"text\",\n      name: \"title_new_tiket\",\n      placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0441\\u0432\\u043E\\u0439 \\u0442\\u0435\\u043A\\u0441\\u0442...\",\n      value: this.state.title_new_tiket,\n      onChange: e => this.onChange(e),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Textarea, {\n      maxLength: \"2020\",\n      name: \"text_new_tiket\",\n      top: this.state.text_new_tiket === null ? \"Подробнее о проблеме (0/2020). Не менее 5 символов\" : \"Подробнее о проблеме (\" + this.state.text_new_tiket.length + \"/2020). Не менее 5 символов\",\n      onChange: e => this.onChange(e),\n      placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0441\\u0432\\u043E\\u0439 \\u0442\\u0435\\u043A\\u0441\\u0442...\",\n      value: this.state.text_new_tiket,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      size: \"xl\",\n      level: \"secondary\",\n      stretched: true,\n      disabled: !Boolean(this.state.text_new_tiket.length > 5) || !Boolean(this.state.title_new_tiket.length > 5),\n      onClick: () => {\n        this.sendNewTiket();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 21\n      }\n    }, \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\")));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/rshub/Desktop/Road-to-Jedi/mobile-road/src/panels/questions/panels/new_tiket.js"],"names":["React","Panel","PanelHeader","PanelHeaderButton","Button","Alert","ScreenSpinner","Input","FormLayout","Textarea","Icon24BrowserBack","NewTicket","Component","constructor","props","state","api_url","title_new_tiket","text_new_tiket","onChange","event","name","currentTarget","value","setState","getRandomInRange","min","max","Math","floor","random","sendNewTiket","popout","length","fetch","window","location","search","replace","method","headers","body","JSON","stringify","then","res","json","data","result","showErrorAlert","error","message","catch","err","changeData","global","url","async","xhr","XMLHttpRequest","open","setRequestHeader","onreadystatechange","readyState","DONE","status","responseText","text","parse","this","goTiket","response","ticket_id","tiket_all","send","onerror","console","title","autoclose","style","closePopout","render","id","history","back","e","Boolean"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport { \n    Panel,\n    PanelHeader,\n    PanelHeaderButton,\n    Button,\n    Alert,\n    ScreenSpinner,\n    Input,\n    FormLayout,\n    Textarea,\n    } from '@vkontakte/vkui';\n\n\nimport Icon24BrowserBack from '@vkontakte/icons/dist/24/browser_back';\n\nexport default class NewTicket extends React.Component {\n        constructor(props) {\n            super(props);\n            this.state = {\n                api_url: \"https://xelene.ru/road/php/index.php?\",\n                title_new_tiket: '',\n                text_new_tiket: '',\n            }\n            this.onChange = (event) => {\n                var name = event.currentTarget.name;\n                var value = event.currentTarget.value;\n                this.setState({ [name]: value });\n            }\n        }\n        getRandomInRange(min, max) {\n            return Math.floor(Math.random() * (max - min + 1)) + min;\n          }\n        sendNewTiket() {\n        this.setState({popout: <ScreenSpinner/>})\n        if(this.state.text_new_tiket.length > 5 || this.state.title_new_tiket.length > 5) {\n            fetch(this.state.api_url + \"method=ticket.add&\" + window.location.search.replace('?', ''), \n            {method: 'post',\n            headers: {\"Content-type\": \"application/json; charset=UTF-8\"},\n                // signal: controllertime.signal,\n            body: JSON.stringify({\n                'title': this.state.title_new_tiket,\n                'text': this.state.text_new_tiket,\n                'user': this.getRandomInRange(501, 624429367),\n            })\n            })\n            .then(res => res.json())\n            .then(data => {\n                if(data.result) {\n\n                }else{\n                this.showErrorAlert(data.error.message)\n            }\n            })\n            .catch(err => {\n                this.showErrorAlert('Ошибка запроса. Пожалуйста, попробуйте позже',() => {this.changeData('activeStory', 'disconnect')})\n            })\n        }else{\n            \n        }\n        var global = this;\n        if(this.state.text_new_tiket.length > 5 || this.state.title_new_tiket.length > 5) {\n            var url = this.state.api_url + 'method=ticket.add&' + window.location.search.replace('?', '');\n            var method = 'POST';\n            var async = true;\n        \n            var xhr = new XMLHttpRequest();\n            xhr.open( method, url, async );\n            //.then(response => response.json())\n            \n            xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n        \n            xhr.onreadystatechange = function() {//Вызывает функцию при смене состояния.\n            if(xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {\n                if(xhr.responseText) {\n                let text = (JSON.parse(xhr.responseText));\n                global.props.this.goTiket(text.response.ticket_id)\n                fetch(global.state.api_url + \"method=tickets.get&unanswered=1&\" + window.location.search.replace('?', ''))\n                .then(res => res.json())\n                .then(data => {\n                    if(data.result) {\n                        global.setState({tiket_all: data.response, popout: null, title_new_tiket: \"\", text_new_tiket: \"\"})\n                    }else{\n                        this.showErrorAlert(data.error.message)\n                    }\n                })\n                .catch(err => {\n                    this.showErrorAlert()\n\n                })\n                }\n            }\n        }\n            \n            xhr.send( 'title=' + this.state.title_new_tiket + '&text=' + this.state.text_new_tiket + '&user=' + this.getRandomInRange(501, 624429367) );\n            xhr.onerror = ( error ) => {\n            this.showErrorAlert()\n\n            console.error( error );\n            }\n        } else {\n            this.setState({\n            popout: \n            <Alert\n            actions={[{\n            title: 'Отмена',\n            autoclose: true,\n            style: 'cancel'\n            }]}\n            onClose={this.closePopout}\n        >\n            <h2>Ошибка</h2>\n            <p>Заголовок или текст проблемы должен быть больше 5 символов.</p>\n        </Alert>\n            })\n        }\n        }\n\n        render() {\n            return (\n                <Panel id={this.props.id}>\n                <PanelHeader \n                    left={\n                    <PanelHeaderButton onClick={() => window.history.back()}> \n                    <Icon24BrowserBack/>\n                    </PanelHeaderButton>\n                    }>\n                Новый вопрос\n                </PanelHeader>\n                <FormLayout>\n                    <Input \n                    top={this.state.title_new_tiket === null ? \"Суть проблемы (0/30). Не менее 5 символов\" : \"Суть проблемы (\" + this.state.title_new_tiket.length + \"/80). Не менее 5 символов\"}\n                    maxLength=\"80\" \n                    type=\"text\" \n                    name=\"title_new_tiket\" \n                    placeholder='Введите свой текст...'\n                    value={this.state.title_new_tiket} \n                    onChange={(e) => this.onChange(e)}/>\n\n                    <Textarea maxLength=\"2020\" \n                    name=\"text_new_tiket\" \n                    top={this.state.text_new_tiket === null ? \"Подробнее о проблеме (0/2020). Не менее 5 символов\" : \"Подробнее о проблеме (\" + this.state.text_new_tiket.length + \"/2020). Не менее 5 символов\"} \n                    onChange={(e) => this.onChange(e)}\n                    placeholder='Введите свой текст...'\n                    value={this.state.text_new_tiket}\n                    ></Textarea>\n                    <Button\n                    size=\"xl\" \n                    level=\"secondary\" \n                    stretched \n                    disabled={!Boolean(this.state.text_new_tiket.length > 5) || !Boolean(this.state.title_new_tiket.length > 5)}\n                    onClick={\n                        () => {\n                            this.sendNewTiket();\n                        }\n                    }>Отправить</Button>\n                </FormLayout>\n            </Panel>\n            )\n            }\n        }\n  "]},"metadata":{},"sourceType":"module"}