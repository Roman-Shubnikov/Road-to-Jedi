{"ast":null,"code":"import React from'react';import Panel from'@vkontakte/vkui/dist/components/Panel/Panel';import PanelHeader from'@vkontakte/vkui/dist/components/PanelHeader/PanelHeader';import PanelHeaderButton from'@vkontakte/vkui/dist/components/PanelHeaderButton/PanelHeaderButton';import Icon24Up from'@vkontakte/icons/dist/24/up';import Icon24BrowserBack from'@vkontakte/icons/dist/24/browser_back';import Icon16ReplyOutline from'@vkontakte/icons/dist/16/reply_outline';import Message from'../components/message';import{Button}from'@vkontakte/vkui';var queryString=require('query-string');var parsedHash=queryString.parse(window.location.search.replace('?',''));var months=['января','февраля','марта','апреля','мая','июня','июля','августа','сентября','ноября','декабря'];function fix_time(time){if(time<10){return\"0\"+time;}else{return time;}}function add_month(month){var number_month=new Date(month*1e3).getMonth();return months[number_month];}var Ticket=function Ticket(props){return/*#__PURE__*/React.createElement(Panel,{id:props.id},/*#__PURE__*/React.createElement(PanelHeader,{left:/*#__PURE__*/React.createElement(PanelHeaderButton,{onClick:function onClick(){return window.history.back();}},/*#__PURE__*/React.createElement(Icon24BrowserBack,null))},/*#__PURE__*/React.createElement(\"span\",{id:\"animation\",onClick:function onClick(){return props.this.copy(props.this.state.tiket_info['id']);}},\"\\u0412\\u043E\\u043F\\u0440\\u043E\\u0441 #\",props.this.state.tiket_info['id'])),/*#__PURE__*/React.createElement(\"div\",{className:\"title_tiket\"},new Date(props.this.state.tiket_info['time']*1e3).getDate(),\" \",add_month(props.this.state.tiket_info['time'])),/*#__PURE__*/React.createElement(\"div\",{className:\"title_tiket\",style:{marginTop:\"10px\",width:\"95%\",marginLeft:\"10px\"}},\"\\u041F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C \\u043E\\u0431\\u0440\\u0430\\u0442\\u0438\\u043B\\u0441\\u044F \\u0441 \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441\\u043E\\u043C  \\xAB\",props.this.state.tiket_info['title'],\"\\xBB\"),props.this.state.tiket_message.map(function(result,i){var is_mine_ticket=Number(props.this.state.tiket_info.author['id'])===Number(parsedHash.vk_user_id)?true:false;var is_mine_message=Number(result['author']['id'])===Number(parsedHash.vk_user_id)?true:false;var avatar=result.author.is_moderator?\"https://api.xelene.me/\"+result['author']['avatar']['url']:result.author.photo_200;var time=fix_time(new Date(result.time*1e3).getHours())+\":\"+fix_time(new Date(result.time*1e3).getMinutes());var title_moder=isFinite(result['nickname'])?\"\\u0410\\u0433\\u0435\\u043D\\u0442 \\u041F\\u043E\\u0434\\u0434\\u0435\\u0440\\u0436\\u043A\\u0438 #\".concat(result['nickname']):result['nickname']?result['nickname']:\"\\u0410\\u0433\\u0435\\u043D\\u0442 \\u041F\\u043E\\u0434\\u0434\\u0435\\u0440\\u0436\\u043A\\u0438 #\".concat(result['author']['id']);return Number(props.this.state.tiket_info.author['id'])===Number(parsedHash.vk_user_id)?/*#__PURE__*/React.createElement(Message,{title:result.author.id===526444378?\"Витёк\":result.author.is_moderator?title_moder:result.author.first_name+\" \"+result.author.last_name,title_icon:result.moderator_comment!=undefined?/*#__PURE__*/React.createElement(Icon16ReplyOutline,{width:10,height:10,style:{display:\"inline-block\"}}):false,is_mine:is_mine_message===is_mine_ticket,avatar:avatar,onClick:function onClick(){return props.this.Admin(result['id'],result['author']['id'],result['text'],result.moderator_comment!=undefined?result['moderator_comment']['text']:null,result['mark']);},key:i,is_special:props.this.state.is_special_moder,is_mark:result.mark,time:time,sendRayt_false:function sendRayt_false(){return props.this.sendRayt(false,result.id);},sendRayt_true:function sendRayt_true(){return props.this.sendRayt(true,result.id);},approved:result.approved?true:false,CanselApp:function CanselApp(){return props.this.showAlert('Информация','Этот ответ оценен отрицательно');},DoneApp:function DoneApp(){return props.this.showAlert('Информация','Этот ответ оценен положительно');}},result.text):/*#__PURE__*/React.createElement(Message,{title:result.author.id===526444378?\"Витёк\":result.author.is_moderator?title_moder:result.author.first_name+\" \"+result.author.last_name,title_icon:result.moderator_comment!=undefined?/*#__PURE__*/React.createElement(Icon16ReplyOutline,{width:10,height:10,style:{display:\"inline-block\"}}):false,is_mine:result.author.is_moderator,avatar:result.author.id===526444378?\"https://cdn3.iconfinder.com/data/icons/avatars-15/64/_Ninja-2-512.png\":avatar,key:i,time:time,onClick:function onClick(){return props.this.Admin(result['id'],result['author']['id'],result['text'],result.moderator_comment!=undefined?result['moderator_comment']['text']:null,result['mark']);},is_special:props.this.state.is_special_moder,is_mark:result.mark,sendRayt_false:function sendRayt_false(){return props.this.sendRayt(false,result.id);},sendRayt_true:function sendRayt_true(){return props.this.sendRayt(true,result.id);},approved:result.approved?true:false,CanselApp:function CanselApp(){return props.this.showAlert('Информация','Этот ответ оценен отрицательно');},DoneApp:function DoneApp(){return props.this.showAlert('Информация','Этот ответ оценен положительно');}},result.text);}),props.this.state.tiket_info['status']===0||props.this.state.redaction===true||props.this.state.add_comment===true?/*#__PURE__*/React.createElement(\"div\",{id:\"other\",className:\"other\"},/*#__PURE__*/React.createElement(\"div\",{className:\"down_input_message\"},/*#__PURE__*/React.createElement(\"textarea\",{maxLength:\"2020\",name:\"tiket_send_message\",value:props.this.state.tiket_send_message,onChange:function onChange(e){return props.this.onChange(e);},placeholder:props.this.state.add_comment?\"Комментарий...\":\"Ответ...\",className:\"textarea\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"send_text\",onClick:function onClick(){return props.this.state.redaction!==true&&props.this.state.add_comment!==true?props.this.sendNewMessage():props.this.state.redaction?props.this.sendNewMessageRedact():props.this.sendNewMessageComment();}},/*#__PURE__*/React.createElement(Icon24Up,null))):null,props.this.state.tiket_info['status']===1?Number(props.this.state.tiket_info['author']['id'])===Number(parsedHash.vk_user_id)?/*#__PURE__*/React.createElement(\"div\",{className:\"others\"},/*#__PURE__*/React.createElement(Button,{size:\"l\",style:{marginRight:8,width:\"95%\"},onClick:function onClick(){return props.this.deleteTicket();}},\"\\u041F\\u0440\\u043E\\u0431\\u043B\\u0435\\u043C\\u0430 \\u0440\\u0435\\u0448\\u0435\\u043D\\u0430\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{style:{height:\"5px\"}}),/*#__PURE__*/React.createElement(Button,{size:\"l\",style:{marginRight:8,width:\"95%\"},level:\"secondary\",onClick:function onClick(){return props.this.openTicket();}},\"\\u041F\\u0440\\u043E\\u0431\\u043B\\u0435\\u043C\\u0430 \\u043D\\u0435 \\u0440\\u0435\\u0448\\u0435\\u043D\\u0430\")):null:null,/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null));};export default Ticket;","map":{"version":3,"sources":["C:/Users/rshub/Desktop/Road-to-Jedi/mobile-road/src/panels/tiket.js"],"names":["React","Panel","PanelHeader","PanelHeaderButton","Icon24Up","Icon24BrowserBack","Icon16ReplyOutline","Message","Button","queryString","require","parsedHash","parse","window","location","search","replace","months","fix_time","time","add_month","month","number_month","Date","getMonth","Ticket","props","id","history","back","this","copy","state","tiket_info","getDate","marginTop","width","marginLeft","tiket_message","map","result","i","is_mine_ticket","Number","author","vk_user_id","is_mine_message","avatar","is_moderator","photo_200","getHours","getMinutes","title_moder","isFinite","first_name","last_name","moderator_comment","undefined","display","Admin","is_special_moder","mark","sendRayt","approved","showAlert","text","redaction","add_comment","tiket_send_message","e","onChange","sendNewMessage","sendNewMessageRedact","sendNewMessageComment","marginRight","deleteTicket","height","openTicket"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport Panel from '@vkontakte/vkui/dist/components/Panel/Panel';\nimport PanelHeader from '@vkontakte/vkui/dist/components/PanelHeader/PanelHeader';\nimport PanelHeaderButton from '@vkontakte/vkui/dist/components/PanelHeaderButton/PanelHeaderButton';\n\nimport Icon24Up from '@vkontakte/icons/dist/24/up';\nimport Icon24BrowserBack from '@vkontakte/icons/dist/24/browser_back';\nimport Icon16ReplyOutline from '@vkontakte/icons/dist/16/reply_outline';\n\nimport Message from '../components/message'\n\nimport { Button } from '@vkontakte/vkui';\nconst queryString = require('query-string');\nconst parsedHash = queryString.parse(window.location.search.replace('?', ''));\n\nvar months = [\n    'января',\n    'февраля',\n    'марта',\n    'апреля',\n    'мая',\n    'июня',\n    'июля',\n    'августа',\n    'сентября',\n    'ноября',\n    'декабря',\n];\n\nfunction fix_time(time) {\n    if(time < 10) {\n        return \"0\" + time\n    } else {\n        return time\n    }\n}\n\nfunction add_month(month) {\n    let number_month = new Date(month * 1e3).getMonth()\n    return months[number_month]\n}\n\nconst Ticket = props => (\n        <Panel id={props.id}>\n            <PanelHeader \n                left={<PanelHeaderButton onClick={() => window.history.back()}><Icon24BrowserBack/></PanelHeaderButton>}\n            >\n                <span id=\"animation\" onClick={() => props.this.copy(props.this.state.tiket_info['id'])}>Вопрос #{props.this.state.tiket_info['id']}</span>\n            </PanelHeader>\n            {/* MESSAGES */}\n            <div className=\"title_tiket\">{new Date(props.this.state.tiket_info['time'] * 1e3).getDate()} {add_month(props.this.state.tiket_info['time'])}</div>\n            <div className=\"title_tiket\" style={{marginTop: \"10px\", width: \"95%\", marginLeft: \"10px\"}}>Пользователь обратился с вопросом  «{props.this.state.tiket_info['title']}»</div>\n                    {props.this.state.tiket_message.map(function(result, i) {\n                        var is_mine_ticket = Number(props.this.state.tiket_info.author['id']) === Number(parsedHash.vk_user_id) ? true : false\n                        var is_mine_message = Number(result['author']['id']) === Number(parsedHash.vk_user_id) ? true : false\n                        var avatar = result.author.is_moderator ? \"https://api.xelene.me/\" + result['author']['avatar']['url'] : result.author.photo_200\n                        var time = fix_time(new Date(result.time * 1e3).getHours()) + \":\" + fix_time(new Date(result.time * 1e3).getMinutes())\n                        var title_moder = isFinite(result['nickname']) ? `Агент Поддержки #${result['nickname']}` : result['nickname'] ? result['nickname'] : `Агент Поддержки #${result['author']['id']}`;\n                        return (\n                            Number(props.this.state.tiket_info.author['id']) === Number(parsedHash.vk_user_id) ?\n                            <Message \n                                title={result.author.id === 526444378 ? \"Витёк\" : result.author.is_moderator ? title_moder : result.author.first_name + \" \" + result.author.last_name} \n                                title_icon={result.moderator_comment != undefined ? <Icon16ReplyOutline width={10} height={10} style={{display: \"inline-block\"}}/> : false}\n                                is_mine={is_mine_message === is_mine_ticket}\n                                avatar={avatar}\n                                onClick={() => props.this.Admin(result['id'], result['author']['id'], result['text'], result.moderator_comment != undefined ? result['moderator_comment']['text'] : null, result['mark'])}\n                                key={i}\n                                is_special={props.this.state.is_special_moder}\n                                is_mark={result.mark}\n                                time={time}\n                                sendRayt_false={() => props.this.sendRayt(false, result.id)}\n                                sendRayt_true={() => props.this.sendRayt(true, result.id)}\n                                approved={result.approved ? true : false}\n                                CanselApp={() => props.this.showAlert('Информация', 'Этот ответ оценен отрицательно')}\n                                DoneApp={() => props.this.showAlert('Информация', 'Этот ответ оценен положительно')}\n                            >\n                                {result.text}\n                            </Message>\n                            \n                            :\n                            <Message \n                                title={result.author.id === 526444378 ? \"Витёк\" : result.author.is_moderator ? title_moder : result.author.first_name + \" \" + result.author.last_name} \n                                title_icon={result.moderator_comment != undefined ? <Icon16ReplyOutline width={10} height={10} style={{display: \"inline-block\"}}/> : false}\n                                is_mine={result.author.is_moderator}\n                                avatar={result.author.id === 526444378 ? \"https://cdn3.iconfinder.com/data/icons/avatars-15/64/_Ninja-2-512.png\" : avatar}\n                                key={i}\n                                time={time}\n                                onClick={() => props.this.Admin(result['id'], result['author']['id'], result['text'], result.moderator_comment != undefined ? result['moderator_comment']['text'] : null, result['mark'])}\n                                is_special={props.this.state.is_special_moder}\n                                is_mark={result.mark}\n                                sendRayt_false={() => props.this.sendRayt(false, result.id)}\n                                sendRayt_true={() => props.this.sendRayt(true, result.id)}\n                                approved={result.approved ? true : false}\n                                CanselApp={() => props.this.showAlert('Информация', 'Этот ответ оценен отрицательно')}\n                                DoneApp={() => props.this.showAlert('Информация', 'Этот ответ оценен положительно')}\n                            >\n                                {result.text}\n                            </Message>\n                        )})}\n            {/* INPUT */}\n            {props.this.state.tiket_info['status'] === 0 || (props.this.state.redaction === true || props.this.state.add_comment === true) ? \n                <div id=\"other\" className=\"other\">\n                    <div className=\"down_input_message\">\n                        <textarea maxLength=\"2020\" name=\"tiket_send_message\" value={props.this.state.tiket_send_message} onChange={(e) => props.this.onChange(e)} placeholder={props.this.state.add_comment ? \"Комментарий...\" : \"Ответ...\"} className=\"textarea\"></textarea>\n                    </div>\n                    <div className=\"send_text\" onClick={() => props.this.state.redaction !== true && props.this.state.add_comment !== true ? props.this.sendNewMessage() : props.this.state.redaction ? props.this.sendNewMessageRedact() : props.this.sendNewMessageComment()}>\n                        <Icon24Up/>\n                    </div>\n                </div> : null}\n            {props.this.state.tiket_info['status'] === 1 ? \n                Number(props.this.state.tiket_info['author']['id']) === Number(parsedHash.vk_user_id) ?\n                    <div className=\"others\">\n                        <Button size=\"l\" style={{ marginRight: 8, width: \"95%\" }} onClick={() => props.this.deleteTicket()}>Проблема решена</Button><br/>\n                        <div style={{height: \"5px\"}}></div>\n                        <Button size=\"l\" style={{ marginRight: 8, width: \"95%\" }} level=\"secondary\" onClick={() => props.this.openTicket()}>Проблема не решена</Button>\n                    </div>\n                : null\n            : null}\n                <br/>\n                <br/>\n                <br/>\n            </Panel>\n);\n\nexport default Ticket;"]},"metadata":{},"sourceType":"module"}