{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{Panel,PanelHeader,Button,Placeholder,Separator,PullToRefresh,Cell,Div,PanelHeaderBack,Tabs,TabsItem,Search,HorizontalScroll}from'@vkontakte/vkui';import Icon56InboxOutline from'@vkontakte/icons/dist/56/inbox_outline';import Icon28WarningTriangleOutline from'@vkontakte/icons/dist/28/warning_triangle_outline';function fix_time(time){if(time<10){return\"0\"+time;}else{return time;}}var months=['янв','фев','мар','апр','мая','июн','июл','авг','сен','окт','ноя','дек'];var myQuestions=/*#__PURE__*/function(_React$Component){_inherits(myQuestions,_React$Component);var _super=_createSuper(myQuestions);function myQuestions(props){var _this;_classCallCheck(this,myQuestions);_this=_super.call(this,props);_this.state={api_url:\"https://xelene.ru/road/php/index.php?\",myQuestions:[],fetching:false,activeTab:'positive',search:'',limiter:20};return _this;}_createClass(myQuestions,[{key:\"getFiltresQuestions\",value:function getFiltresQuestions(questions){if(this.state.activeTab==='positive'){return questions.filter(function(_ref){var mark=_ref.mark;return mark===1;});}if(this.state.activeTab==='negative'){return questions.filter(function(_ref2){var mark=_ref2.mark;return mark===0;});}if(this.state.activeTab==='moderation'){return questions.filter(function(_ref3){var mark=_ref3.mark;return mark===-1;});}}},{key:\"getFilterSearch\",value:function getFilterSearch(questions){var search=this.state.search.toLowerCase();return questions.filter(function(_ref4){var text=_ref4.text;return text.toLowerCase().indexOf(search)>-1;});}},{key:\"limiter\",value:function limiter(questions){return questions.slice(0,this.state.limiter);}},{key:\"prepare_questions\",value:function prepare_questions(){var _this2=this;this.props.this.myQuestions();setTimeout(function(){_this2.setState({fetching:false});},500);}},{key:\"componentDidMount\",value:function componentDidMount(){// this.prepare_questions()\n}},{key:\"render\",value:function render(){var _this3=this;var props=this.props.this;// для более удобного использования.\nvar questions=this.getFiltresQuestions(this.props.myQuestions);var searched=this.getFilterSearch(questions);var limiter_search=this.limiter(searched);return/*#__PURE__*/React.createElement(Panel,{id:this.props.id},/*#__PURE__*/React.createElement(PanelHeader,{separator:false,left:/*#__PURE__*/React.createElement(PanelHeaderBack,{onClick:function onClick(){return window.history.back();}})},\"\\u041C\\u043E\\u0438 \\u043E\\u0442\\u0432\\u0435\\u0442\\u044B\"),/*#__PURE__*/React.createElement(Search,{value:this.state.search,onChange:function onChange(e){_this3.setState({search:e.target.value});}}),/*#__PURE__*/React.createElement(Tabs,null,/*#__PURE__*/React.createElement(HorizontalScroll,null,/*#__PURE__*/React.createElement(TabsItem,{onClick:function onClick(){return _this3.setState({activeTab:'positive'});},selected:this.state.activeTab==='positive'},\"\\u041F\\u043E\\u043B\\u043E\\u0436\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u044B\\u0435\"),/*#__PURE__*/React.createElement(TabsItem,{onClick:function onClick(){return _this3.setState({activeTab:'negative'});},selected:this.state.activeTab==='negative'},\"\\u041E\\u0442\\u0440\\u0438\\u0446\\u0430\\u0442\\u0435\\u043B\\u044C\\u043D\\u044B\\u0435\"),/*#__PURE__*/React.createElement(TabsItem,{onClick:function onClick(){return _this3.setState({activeTab:'moderation'});},selected:this.state.activeTab==='moderation'},\"\\u041D\\u0430 \\u043C\\u043E\\u0434\\u0435\\u0440\\u0430\\u0446\\u0438\\u0438\"))),/*#__PURE__*/React.createElement(PullToRefresh,{onRefresh:function onRefresh(){_this3.setState({fetching:true});_this3.prepare_questions();},isFetching:this.state.fetching},questions.length>0?searched.length>0?/*#__PURE__*/React.createElement(React.Fragment,null,limiter_search.map(function(result,i){return/*#__PURE__*/React.createElement(React.Fragment,{key:result.id},/*#__PURE__*/React.createElement(Cell,{key:i,className:\"pointer\",onClick:function onClick(){return props.goTiket(result['ticket_id']);},description:new Date(result['time']*1e3).getDate()+\" \"+months[new Date(result['time']*1e3).getMonth()]+\" \"+new Date(result['time']*1e3).getFullYear()+\" в \"+fix_time(new Date(result['time']*1e3).getHours())+\":\"+fix_time(new Date(result['time']*1e3).getMinutes()),size:\"l\"// before={<Avatar src={result['author']['id'] === 526444378 ? \"https://cdn3.iconfinder.com/data/icons/avatars-15/64/_Ninja-2-512.png\" : result['author']['photo_200']} />}\n},result['text']),/*#__PURE__*/React.createElement(Separator,null));}),limiter_search<searched?/*#__PURE__*/React.createElement(Div,null,/*#__PURE__*/React.createElement(Button,{mode:\"secondary\",size:\"xl\",stretched:true,onClick:function onClick(){return _this3.setState({limiter:_this3.state.limiter+10});}},\"\\u041F\\u043E\\u043A\\u0430\\u0437\\u0430\\u0442\\u044C \\u0435\\u0449\\u0451 10 \\u043E\\u0442\\u0432\\u0435\\u0442\\u043E\\u0432\")):null):/*#__PURE__*/React.createElement(Placeholder,{icon:/*#__PURE__*/React.createElement(Icon28WarningTriangleOutline,{width:56,height:56})},\"\\u041F\\u043E \\u0432\\u0430\\u0448\\u0435\\u043C\\u0443 \\u0437\\u0430\\u043F\\u0440\\u043E\\u0441\\u0443 \\u043D\\u0438\\u0447\\u0435\\u0433\\u043E \\u043D\\u0435 \\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E.\"):/*#__PURE__*/React.createElement(Placeholder,{icon:/*#__PURE__*/React.createElement(Icon56InboxOutline,null)},\"\\u0423\\u043F\\u0441, \\u043A\\u0430\\u0436\\u0435\\u0442\\u0441\\u044F, \\u0437\\u0434\\u0435\\u0441\\u044C \\u043D\\u0435\\u0442 \\u0432\\u0430\\u0448\\u0438\\u0445 \\u043E\\u0442\\u0432\\u0435\\u0442\\u043E\\u0432.\")));}}]);return myQuestions;}(React.Component);export{myQuestions as default};","map":{"version":3,"sources":["C:/Users/rshub/Desktop/Road-to-Jedi/mobile-road/src/panels/Profile/panels/AllQuestions.js"],"names":["React","Panel","PanelHeader","Button","Placeholder","Separator","PullToRefresh","Cell","Div","PanelHeaderBack","Tabs","TabsItem","Search","HorizontalScroll","Icon56InboxOutline","Icon28WarningTriangleOutline","fix_time","time","months","myQuestions","props","state","api_url","fetching","activeTab","search","limiter","questions","filter","mark","toLowerCase","text","indexOf","slice","this","setTimeout","setState","getFiltresQuestions","searched","getFilterSearch","limiter_search","id","window","history","back","e","target","value","prepare_questions","length","map","result","i","goTiket","Date","getDate","getMonth","getFullYear","getHours","getMinutes","Component"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport { \n    Panel,\n    PanelHeader,\n    Button,\n    Placeholder,\n    Separator,\n    PullToRefresh,\n    Cell,\n    Div,\n    PanelHeaderBack,\n    Tabs,\n    TabsItem,\n    Search,\n    HorizontalScroll,\n    } from '@vkontakte/vkui';\n\nimport Icon56InboxOutline from '@vkontakte/icons/dist/56/inbox_outline';\nimport Icon28WarningTriangleOutline from '@vkontakte/icons/dist/28/warning_triangle_outline';\nfunction fix_time(time) {\n    if(time < 10) {\n        return \"0\" + time\n    } else {\n        return time\n    }\n  }\n\n  var months = [\n    'янв',\n    'фев',\n    'мар',\n    'апр',\n    'мая',\n    'июн',\n    'июл',\n    'авг',\n    'сен',\n    'окт',\n    'ноя',\n    'дек',\n];\n\nexport default class myQuestions extends React.Component {\n        constructor(props) {\n            super(props);\n            this.state = {\n                api_url: \"https://xelene.ru/road/php/index.php?\",\n                myQuestions:[],\n                fetching: false,\n                activeTab: 'positive',\n                search: '',\n                limiter: 20\n            }\n            \n        }\n        getFiltresQuestions(questions){\n            if(this.state.activeTab === 'positive'){\n                return questions.filter(({mark}) => mark === 1);\n            }\n            if(this.state.activeTab === 'negative'){\n                return questions.filter(({mark}) => mark === 0);\n            }\n            if(this.state.activeTab === 'moderation'){\n                return questions.filter(({mark}) => mark === -1);\n            }\n        }\n        getFilterSearch(questions) {\n            const search = this.state.search.toLowerCase();\n            return questions.filter(({text}) => text.toLowerCase().indexOf(search) > -1);\n        }\n\n        limiter(questions){\n            return questions.slice(0, this.state.limiter)\n        }\n        prepare_questions(){\n            this.props.this.myQuestions()\n            setTimeout(() => {\n                this.setState({ fetching: false });\n              }, 500);\n        }\n        componentDidMount(){\n            // this.prepare_questions()\n        }\n\n        render() {\n            var props = this.props.this; // для более удобного использования.\n            var questions = this.getFiltresQuestions(this.props.myQuestions);\n            var searched = this.getFilterSearch(questions);\n            var limiter_search = this.limiter(searched);\n            return (\n                <Panel id={this.props.id}>\n            <PanelHeader separator={false}\n                left={<PanelHeaderBack onClick={() => window.history.back()} />}\n            >\n                Мои ответы\n                </PanelHeader>\n                <Search value={this.state.search}\n                    onChange={(e) => {\n                        this.setState({search: e.target.value})\n                    }} />\n                <Tabs>\n                <HorizontalScroll>\n                    <TabsItem\n                        onClick={() => this.setState({ activeTab: 'positive' })}\n                        selected={this.state.activeTab === 'positive'}\n                    >\n                        Положительные\n                    </TabsItem>\n                    <TabsItem\n                        onClick={() => this.setState({ activeTab: 'negative' })}\n                        selected={this.state.activeTab === 'negative'}\n                    >\n                        Отрицательные\n                    </TabsItem>\n                    <TabsItem\n                        onClick={() => this.setState({ activeTab: 'moderation' })}\n                        selected={this.state.activeTab === 'moderation'}\n                    >\n                        На модерации\n                    </TabsItem>\n                </HorizontalScroll>\n                </Tabs>\n                <PullToRefresh onRefresh={() => {this.setState({fetching: true});this.prepare_questions()}} isFetching={this.state.fetching}>\n                    {questions.length > 0 ?\n                    searched.length > 0 ?\n                    <>\n                    {limiter_search.map((result, i) => \n                    <React.Fragment key={result.id}> \n                    <Cell\n                        key={i}\n                        className='pointer'\n                        onClick={() => props.goTiket(result['ticket_id'])}\n                        description={new Date(result['time'] * 1e3).getDate() + \" \" + months[new Date(result['time'] * 1e3).getMonth()] + \" \" + new Date(result['time'] * 1e3).getFullYear() + \" в \" \n                        + fix_time(new Date(result['time'] * 1e3).getHours()) + \":\" + fix_time(new Date(result['time'] * 1e3).getMinutes())}\n                        size=\"l\"\n                        // before={<Avatar src={result['author']['id'] === 526444378 ? \"https://cdn3.iconfinder.com/data/icons/avatars-15/64/_Ninja-2-512.png\" : result['author']['photo_200']} />}\n                    >\n                        {result['text']}\n                    </Cell>\n                    <Separator />\n                    </React.Fragment>\n                    )}\n                    {(limiter_search < searched) ? \n                    <Div>\n                        <Button \n                        mode='secondary' \n                        size='xl' \n                        stretched\n                        onClick={() => this.setState({limiter: this.state.limiter + 10})}\n                        >Показать ещё 10 ответов</Button>\n                    </Div> : null}\n                    </> :\n                    <Placeholder \n                    icon={<Icon28WarningTriangleOutline width={56} height={56} />}>\n                        По вашему запросу ничего не найдено.\n                    </Placeholder> :\n                    <Placeholder \n                    icon={<Icon56InboxOutline />}>\n                        Упс, кажется, здесь нет ваших ответов.\n                    </Placeholder>\n                    }\n                </PullToRefresh>\n            </Panel>\n            )\n            }\n        }\n  "]},"metadata":{},"sourceType":"module"}