{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\src\\\\panels\\\\Start\\\\main.js\";\nimport React from 'react'; // React\n\nimport bridge from '@vkontakte/vk-bridge'; // VK Brige\n\nimport { Alert, Avatar, View } from '@vkontakte/vkui';\nimport '@vkontakte/vkui/dist/vkui.css';\nimport '../../style.css'; // Импортируем панели\n\nimport Startov from './panels/start'; // const queryString = require('query-string');\n// const platformname = (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));\n// const parsedHash = queryString.parse(window.location.search.replace('?', ''));\n// const hash = queryString.parse(window.location.hash);\n\nexport default class Start extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      api_url: \"https://xelene.ru/road/php/index.php?\",\n      activePanel: 'start',\n      popout: this.props.popout,\n      history: ['start']\n    };\n    this.changeData = this.props.this.changeData;\n    this.ReloadProfile = this.props.reloadProfile; // this.copy = this.props.this.copy;\n    // this.recordHistory = (panel) => {\n    //   this.setState({history: [...this.state.history, panel]})\n    // }\n\n    this.setPopout = value => {\n      this.setState({\n        popout: value\n      });\n    };\n\n    this.handlePopstate = e => {\n      e.preventDefault();\n      this.goBack();\n    };\n\n    this.onChange = event => {\n      var name = event.currentTarget.name;\n      var value = event.currentTarget.value;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.modalBack = () => {\n      this.setActiveModal(this.state.modalHistory[this.state.modalHistory.length - 2]);\n    };\n\n    this.goBack = () => {\n      const history = this.state.history;\n\n      if (history.length === 1) {\n        bridge.send(\"VKWebAppClose\", {\n          \"status\": \"success\"\n        });\n      } else if (history.length > 1) {\n        history.pop();\n        this.setState({\n          activePanel: history[history.length - 1]\n        });\n\n        if (history[history.length - 1] === 'ticket') {\n          this.changeData('need_epic', false);\n        } else {\n          this.changeData('need_epic', true);\n        }\n      }\n    };\n\n    this.goPanel = panel => {\n      let history = this.state.history.slice();\n      history.push(panel);\n      window.history.pushState({\n        panel: panel\n      }, panel);\n      this.setState({\n        history: history,\n        activePanel: panel\n      }); // if(panel === 'ticket'){\n      //   this.changeData('need_epic', false)\n      // } else{\n      //   this.changeData('need_epic', true)\n      // }\n    };\n\n    this.showAlert = (title, text) => {\n      this.setState({\n        popout: /*#__PURE__*/React.createElement(Alert, {\n          actions: [{\n            title: 'Закрыть',\n            autoclose: true,\n            mode: 'cancel'\n          }],\n          onClose: () => this.setPopout(null),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"h2\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 19\n          }\n        }, title), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 19\n          }\n        }, text))\n      });\n    };\n\n    this.showErrorAlert = (error = null) => {\n      this.setPopout( /*#__PURE__*/React.createElement(Alert, {\n        actions: [{\n          title: 'Отмена',\n          autoclose: true,\n          mode: 'cancel'\n        }],\n        onClose: () => this.setPopout(null),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 17\n        }\n      }, \"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430\"), error ? /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 26\n        }\n      }, error) : /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 43\n        }\n      }, \"\\u0427\\u0442\\u043E-\\u0442\\u043E \\u043F\\u043E\\u0448\\u043B\\u043E \\u043D\\u0435 \\u0442\\u0430\\u043A, \\u043F\\u043E\\u043F\\u0440\\u043E\\u0431\\u0443\\u0439\\u0442\\u0435 \\u0441\\u043D\\u043E\\u0432\\u0430!\")));\n    };\n  }\n\n  componentDidMount() {\n    window.addEventListener('popstate', this.handlePopstate);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('popstate', this.handlePopstate);\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(View, {\n      id: this.props.id,\n      activePanel: this.state.activePanel,\n      popout: this.state.popout,\n      onSwipeBack: this.goBack,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Startov, {\n      id: \"start\",\n      account: this.props.account,\n      this: this,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 15\n      }\n    }));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/rshub/Desktop/Road-to-Jedi/mobile-road/src/panels/Start/main.js"],"names":["React","bridge","Alert","Avatar","View","Startov","Start","Component","constructor","props","state","api_url","activePanel","popout","history","changeData","this","ReloadProfile","reloadProfile","setPopout","value","setState","handlePopstate","e","preventDefault","goBack","onChange","event","name","currentTarget","modalBack","setActiveModal","modalHistory","length","send","pop","goPanel","panel","slice","push","window","pushState","showAlert","title","text","autoclose","mode","showErrorAlert","error","componentDidMount","addEventListener","componentWillUnmount","removeEventListener","render","id","account"],"mappings":"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","sourcesContent":["import React from 'react'; // React\r\nimport bridge from '@vkontakte/vk-bridge'; // VK Brige\r\n\r\nimport { \r\n  Alert,\r\n  Avatar,\r\n  View,\r\n  } from '@vkontakte/vkui';\r\n\r\nimport '@vkontakte/vkui/dist/vkui.css';\r\nimport '../../style.css'\r\n// Импортируем панели\r\nimport Startov from './panels/start';\r\n// const queryString = require('query-string');\r\n// const platformname = (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));\r\n// const parsedHash = queryString.parse(window.location.search.replace('?', ''));\r\n// const hash = queryString.parse(window.location.hash);\r\n\r\nexport default class Start extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            api_url: \"https://xelene.ru/road/php/index.php?\",\r\n            activePanel: 'start',\r\n            popout: this.props.popout,\r\n            history: ['start'],\r\n        \r\n\r\n        }\r\n        this.changeData = this.props.this.changeData;\r\n        this.ReloadProfile = this.props.reloadProfile;\r\n        // this.copy = this.props.this.copy;\r\n        // this.recordHistory = (panel) => {\r\n        //   this.setState({history: [...this.state.history, panel]})\r\n        // }\r\n        this.setPopout = (value) => {\r\n          this.setState({popout: value})\r\n        }\r\n        this.handlePopstate = (e) => {\r\n          e.preventDefault();\r\n          this.goBack()\r\n        }\r\n        this.onChange = (event) => {\r\n          var name = event.currentTarget.name;\r\n          var value = event.currentTarget.value;\r\n          this.setState({ [name]: value });\r\n      }\r\n        this.modalBack = () => {\r\n            this.setActiveModal(this.state.modalHistory[this.state.modalHistory.length - 2]);\r\n        };\r\n        this.goBack = () => {\r\n          const history = this.state.history;\r\n          if(history.length === 1) {\r\n              bridge.send(\"VKWebAppClose\", {\"status\": \"success\"});\r\n          } else if (history.length > 1) {\r\n              history.pop()\r\n              this.setState({activePanel: history[history.length - 1]})\r\n              if(history[history.length - 1] === 'ticket'){\r\n                this.changeData('need_epic', false)\r\n              } else{\r\n                this.changeData('need_epic', true)\r\n              }\r\n          }\r\n      }\r\n        this.goPanel = (panel) => {\r\n          let history = this.state.history.slice();\r\n          history.push(panel)\r\n          window.history.pushState( { panel: panel }, panel );\r\n          this.setState({history: history, activePanel: panel})\r\n          // if(panel === 'ticket'){\r\n          //   this.changeData('need_epic', false)\r\n          // } else{\r\n          //   this.changeData('need_epic', true)\r\n          // }\r\n        }\r\n          this.showAlert = (title, text) => {\r\n            this.setState({\r\n              popout: \r\n                <Alert\r\n                  actions={[{\r\n                    title: 'Закрыть',\r\n                    autoclose: true,\r\n                    mode: 'cancel'\r\n                  }]}\r\n                  onClose={() => this.setPopout(null)}\r\n                >\r\n                  <h2>{title}</h2>\r\n                  <p>{text}</p>\r\n              </Alert>\r\n            })\r\n          }\r\n          this.showErrorAlert = (error=null) => {\r\n            this.setPopout(\r\n              <Alert\r\n                  actions={[{\r\n                  title: 'Отмена',\r\n                  autoclose: true,\r\n                  mode: 'cancel'\r\n                  }]}\r\n                  onClose={() => this.setPopout(null)}\r\n              >\r\n                <h2>Ошибка</h2>\r\n                {error ? <p>{error}</p> : <p>Что-то пошло не так, попробуйте снова!</p>}\r\n              </Alert>\r\n          )\r\n        }\r\n    }\r\n    componentDidMount(){\r\n      window.addEventListener('popstate', this.handlePopstate); \r\n    }\r\n    componentWillUnmount(){\r\n      window.removeEventListener('popstate', this.handlePopstate)\r\n    }\r\n    render() {\r\n        return(\r\n            <View \r\n            id={this.props.id}\r\n            activePanel={this.state.activePanel}\r\n            popout={this.state.popout}\r\n            onSwipeBack={this.goBack}\r\n            >\r\n              <Startov id='start' account={this.props.account} this={this} />\r\n            </View>   \r\n        )\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}