{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\src\\\\panels\\\\Profile\\\\panels\\\\verfy.js\";\nimport React from 'react';\nimport bridge from '@vkontakte/vk-bridge'; // VK Brige\n\nimport { Panel, PanelHeader, Group, Alert, Counter, SimpleCell, Snackbar, PanelHeaderBack, CellButton, Div, FormLayout, FormLayoutGroup, Input, Textarea, Checkbox, Button, PanelHeaderButton, FormStatus } from '@vkontakte/vkui';\nimport Icon28SmartphoneOutline from '@vkontakte/icons/dist/28/smartphone_outline';\nconst platformname = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\nexport default class Verfy extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      api_url: \"https://xelene.ru/road/php/index.php?\",\n      check1: false,\n      check2: false,\n      title: '',\n      description: '',\n      number: '',\n      numberstatus: true,\n      sign_number: ''\n    };\n    var propsbi = this.props.this;\n    this.setPopout = propsbi.setPopout;\n    this.showErrorAlert = propsbi.showErrorAlert;\n    this.showAlert = propsbi.showAlert;\n    this.setActiveModal = propsbi.setActiveModal;\n\n    this.onChange = event => {\n      var name = event.currentTarget.name;\n      var value = event.currentTarget.value;\n      this.setState({\n        [name]: value\n      });\n    };\n  }\n\n  handleForm() {\n    fetch(this.state.api_url + \"method=account.sendRequestVerf&title=\" + this.state.title + \"&description=\" + this.state.description + \"&phone_number=\" + this.state.number + \"&phone_sign=\" + this.state.sign_number + \"&cond1=\" + this.state.check1 + \"&cond2=\" + this.state.check2 + \"&\" + window.location.search.replace('?', '')).then(res => res.json()).then(data => {\n      if (data.result) {\n        console.log(data);\n      } else {\n        this.showErrorAlert(data.error.message);\n      }\n    }).catch(err => {\n      this.showErrorAlert(err);\n    });\n  }\n\n  componentDidMount() {\n    bridge.subscribe(({\n      detail: {\n        type,\n        data\n      }\n    }) => {\n      if (type === 'VKWebAppGetPhoneNumberResult') {\n        this.setState({\n          number: data.phone_number,\n          sign_number: data.sign\n        });\n      }\n\n      if (type === 'VKWebAppGetPhoneNumberFailed ') {\n        this.setState({\n          numberstatus: false\n        });\n      }\n    });\n  }\n\n  componentWillUnmount() {\n    bridge.unsubscribe();\n  }\n\n  render() {\n    var props = this.props.this;\n    return /*#__PURE__*/React.createElement(Panel, {\n      id: this.props.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(PanelHeader, {\n      left: /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(PanelHeaderBack, {\n        onClick: () => this.props.this.goBack(),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }\n      }), platformname ? null : /*#__PURE__*/React.createElement(PanelHeaderButton, {\n        onClick: () => this.Prepare_top(true),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 44\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }\n    }, \"\\u0412\\u0435\\u0440\\u0438\\u0444\\u0438\\u043A\\u0430\\u0446\\u0438\\u044F\"), /*#__PURE__*/React.createElement(FormLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }\n    }, this.state.numberstatus ? null : /*#__PURE__*/React.createElement(FormStatus, {\n      header: \"\\u041D\\u0435\\u043A\\u043E\\u0440\\u0440\\u0435\\u043A\\u0442\\u043D\\u043E\\u0435 \\u0437\\u0430\\u043F\\u043E\\u043B\\u043D\\u0435\\u043D\\u0438\\u0435 \\u0444\\u043E\\u0440\\u043C\\u044B\",\n      mode: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 53\n      }\n    }, \"\\u0412\\u044B \\u0434\\u043E\\u043B\\u0436\\u043D\\u044B \\u0443\\u043A\\u0430\\u0437\\u0430\\u0442\\u044C \\u043D\\u043E\\u043C\\u0435\\u0440 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u0430. \\u0415\\u0441\\u043B\\u0438 \\u044D\\u0442\\u043E\\u0433\\u043E \\u043D\\u0435 \\u0441\\u0434\\u0435\\u043B\\u0430\\u0442\\u044C, \\u0442\\u043E \\u043F\\u0440\\u043E\\u0439\\u0442\\u0438 \\u043F\\u0440\\u043E\\u0446\\u0435\\u0434\\u0443\\u0440\\u0443 \\u0432\\u0435\\u0440\\u0435\\u0444\\u0438\\u043A\\u0430\\u0446\\u0438\\u0438 \\u043D\\u0435 \\u043F\\u043E\\u043B\\u0443\\u0447\\u0438\\u0442\\u0441\\u044F\"), /*#__PURE__*/React.createElement(FormLayoutGroup, {\n      top: \"\\u041E\\u0431\\u0449\\u0430\\u044F \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      onChange: this.onChange,\n      name: \"title\",\n      placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0441\\u0432\\u043E\\u0439 \\u0442\\u0435\\u043A\\u0441\\u0442...\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(FormLayoutGroup, {\n      top: \"\\u041F\\u043E\\u0447\\u0435\\u043C\\u0443 \\u0432\\u044B \\u0440\\u0435\\u0448\\u0438\\u043B\\u0438 \\u0432\\u0435\\u0440\\u0438\\u0444\\u0438\\u0446\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Textarea, {\n      name: \"description\",\n      onChange: this.onChange,\n      placeholder: \"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0441\\u0432\\u043E\\u0439 \\u0442\\u0435\\u043A\\u0441\\u0442...\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(SimpleCell, {\n      description: \"\\u041D\\u0430\\u0436\\u043C\\u0438\\u0442\\u0435 \\u0447\\u0442\\u043E\\u0431\\u044B \\u0443\\u043A\\u0430\\u0437\\u0430\\u0442\\u044C \\u043D\\u043E\\u043C\\u0435\\u0440 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u0430\",\n      onClick: () => bridge.send(\"VKWebAppGetPhoneNumber\", {}),\n      before: /*#__PURE__*/React.createElement(Icon28SmartphoneOutline, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 27\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 19\n      }\n    }, \"\\u0412\\u0430\\u0448 \\u043D\\u043E\\u043C\\u0435\\u0440 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u0430\"), this.state.number ? /*#__PURE__*/React.createElement(Input, {\n      top: \"\\u0412\\u0430\\u0448 \\u043D\\u043E\\u043C\\u0435\\u0440\",\n      disabled: true,\n      value: this.state.number,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 40\n      }\n    }) : null, /*#__PURE__*/React.createElement(Checkbox, {\n      checked: this.state.check1,\n      onChange: () => this.state.check1 ? this.setState({\n        check1: false\n      }) : this.setState({\n        check1: true\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 19\n      }\n    }, \"\\u0421\\u043E\\u0433\\u043B\\u0430\\u0441\\u0435\\u043D \\u0441 \\u043F\\u0440\\u0430\\u0432\\u0438\\u043B\\u0430\\u043C\\u0438 \\u0432\\u0435\\u0440\\u0438\\u0444\\u0438\\u043A\\u0430\\u0446\\u0438\\u0438\"), /*#__PURE__*/React.createElement(Checkbox, {\n      checked: this.state.check2,\n      onChange: () => this.state.check2 ? this.setState({\n        check2: false\n      }) : this.setState({\n        check2: true\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 19\n      }\n    }, \"\\u0413\\u043E\\u0442\\u043E\\u0432 \\u043A \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u043D\\u043E\\u043C\\u0443 \\u0440\\u0430\\u0437\\u0433\\u043E\\u0432\\u043E\\u0440\\u0443 \\u0441 \\u043C\\u043E\\u0434\\u0435\\u0440\\u0430\\u0442\\u043E\\u0440\\u043E\\u043C \\u043E\\u0442\\u0434\\u0435\\u043B\\u0430 \\u0432\\u0435\\u0440\\u0438\\u0444\\u0438\\u043A\\u0430\\u0446\\u0438\\u0438\")), /*#__PURE__*/React.createElement(Div, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      size: \"xl\",\n      stretched: true,\n      disabled: !this.state.check1 || !this.state.check2 || !this.state.title || !this.state.description || !this.state.number,\n      onClick: () => this.handleForm(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 19\n      }\n    }, \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u043D\\u0430 \\u0440\\u0430\\u0441\\u0441\\u043C\\u043E\\u0442\\u0440\\u0435\\u043D\\u0438\\u0435\")), this.props.this.state.snackbar);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/rshub/Desktop/Road-to-Jedi/mobile-road/src/panels/Profile/panels/verfy.js"],"names":["React","bridge","Panel","PanelHeader","Group","Alert","Counter","SimpleCell","Snackbar","PanelHeaderBack","CellButton","Div","FormLayout","FormLayoutGroup","Input","Textarea","Checkbox","Button","PanelHeaderButton","FormStatus","Icon28SmartphoneOutline","platformname","test","navigator","userAgent","Verfy","Component","constructor","props","state","api_url","check1","check2","title","description","number","numberstatus","sign_number","propsbi","this","setPopout","showErrorAlert","showAlert","setActiveModal","onChange","event","name","currentTarget","value","setState","handleForm","fetch","window","location","search","replace","then","res","json","data","result","console","log","error","message","catch","err","componentDidMount","subscribe","detail","type","phone_number","sign","componentWillUnmount","unsubscribe","render","id","goBack","Prepare_top","send","snackbar"],"mappings":"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","sourcesContent":["import React from 'react';\nimport bridge from '@vkontakte/vk-bridge'; // VK Brige\n\n\nimport { \n    Panel,\n    PanelHeader,\n    Group,\n    Alert,\n    Counter,\n    SimpleCell,\n    Snackbar,\n    PanelHeaderBack,\n    CellButton,\n    Div,\n    FormLayout,\n    FormLayoutGroup,\n    Input,\n    Textarea,\n    Checkbox,\n    Button,\n    PanelHeaderButton,\n    FormStatus,\n\n    } from '@vkontakte/vkui';\n\nimport Icon28SmartphoneOutline from '@vkontakte/icons/dist/28/smartphone_outline';\n\nconst platformname = (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));\n\n\nexport default class Verfy extends React.Component{\n    constructor(props){\n        super(props)\n        this.state = {\n            api_url: \"https://xelene.ru/road/php/index.php?\",\n            check1: false,\n            check2: false,\n            title: '',\n            description: '',\n            number: '',\n            numberstatus: true,\n            sign_number: '',\n\n        }\n        var propsbi = this.props.this;\n        this.setPopout = propsbi.setPopout;\n        this.showErrorAlert = propsbi.showErrorAlert;\n        this.showAlert = propsbi.showAlert;\n        this.setActiveModal = propsbi.setActiveModal;\n        this.onChange = (event) => {\n            var name = event.currentTarget.name;\n            var value = event.currentTarget.value;\n            this.setState({ [name]: value });\n        }\n    }\n    handleForm(){\n      fetch(this.state.api_url + \"method=account.sendRequestVerf&title=\" + this.state.title + \n      \"&description=\" + this.state.description + \n      \"&phone_number=\" + this.state.number + \n      \"&phone_sign=\" + this.state.sign_number + \n      \"&cond1=\" + this.state.check1 + \n      \"&cond2=\" + this.state.check2 + \"&\" + window.location.search.replace('?', ''))\n      .then(res => res.json())\n      .then(data => {\n      if(data.result) {\n        console.log(data)\n      }else{\n          this.showErrorAlert(data.error.message)\n      }\n      })\n      .catch(err => {\n          this.showErrorAlert(err)\n\n      })\n    }\n    componentDidMount(){\n      bridge.subscribe(({ detail: { type, data }}) => { \n        if(type === 'VKWebAppGetPhoneNumberResult') {\n          this.setState({number: data.phone_number, sign_number: data.sign})\n        }\n        if(type === 'VKWebAppGetPhoneNumberFailed ') {\n          this.setState({numberstatus: false})\n        }\n        })\n    }\n    componentWillUnmount(){\n      bridge.unsubscribe()\n    }\n\n    render() {\n        var props = this.props.this;\n        return(\n            <Panel id={this.props.id}>\n                <PanelHeader \n                    left={<>\n                    <PanelHeaderBack onClick={() => this.props.this.goBack()}></PanelHeaderBack>\n                    {platformname ? null : <PanelHeaderButton onClick={() => this.Prepare_top(true)}></PanelHeaderButton>}</>}>\n                    Верификация\n                </PanelHeader>\n                <FormLayout>\n                  {this.state.numberstatus ? null : <FormStatus header='Некорректное заполнение формы' mode='error'>\n                    Вы должны указать номер телефона. Если этого не сделать, то пройти процедуру верефикации не получится\n                  </FormStatus>}\n                  <FormLayoutGroup top=\"Общая информация\" >\n                    <Input \n                    onChange={this.onChange}\n                    name='title'\n                    placeholder='Введите свой текст...' />\n                  </FormLayoutGroup>\n                  <FormLayoutGroup top=\"Почему вы решили верифицировать профиль\">\n                    <Textarea \n                    name='description'\n                    onChange={this.onChange}\n                    placeholder='Введите свой текст...' />\n                  </FormLayoutGroup>\n                  <SimpleCell\n                  description=\"Нажмите чтобы указать номер телефона\"\n                  onClick={() => bridge.send(\"VKWebAppGetPhoneNumber\", {})}\n                  before={<Icon28SmartphoneOutline/>}>Ваш номер телефона</SimpleCell>\n                  {this.state.number ? <Input\n                  top='Ваш номер'\n                  disabled\n                  value={this.state.number} /> : null}\n                  <Checkbox checked={this.state.check1} onChange={() => this.state.check1 ? this.setState({check1: false}) : this.setState({check1: true})}>Согласен с правилами верификации</Checkbox>\n                  <Checkbox checked={this.state.check2} onChange={() => this.state.check2 ? this.setState({check2: false}) : this.setState({check2: true})}>\n                    Готов к телефонному разговору с модератором отдела верификации\n                    </Checkbox>\n                </FormLayout>\n                <Div>\n                  <Button \n                  size='xl' \n                  stretched\n                  disabled={\n                    !this.state.check1 || \n                    !this.state.check2 || \n                    !this.state.title ||\n                    !this.state.description ||\n                    !this.state.number\n                  }\n                  onClick={() => this.handleForm()}\n                  >Отправить на рассмотрение</Button>\n                </Div>\n                {this.props.this.state.snackbar}\n            </Panel>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}