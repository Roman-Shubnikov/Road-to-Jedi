{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\src\\\\panels\\\\questions\\\\panels\\\\questions.js\";\nimport React from 'react';\nimport { Panel, PanelHeader, PanelHeaderButton, Avatar, Button, Group, Alert, Placeholder, Separator, PullToRefresh, PanelSpinner, InfoRow, Header, Counter, SimpleCell, PromoBanner, FixedLayout, Cell, Div, HorizontalScroll, View, Switch, Banner, Footer } from '@vkontakte/vkui';\nimport Icon24Filter from '@vkontakte/icons/dist/24/filter';\nimport Icon24Add from '@vkontakte/icons/dist/24/add';\nimport Icon56InboxOutline from '@vkontakte/icons/dist/56/inbox_outline';\nimport BannerAvatarPC from '../../../images/question_banner_pc.jpg';\nimport BannerAvatarMobile from '../../../images/question_banner_mobile.png';\nconst platformname = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);\nexport default class Questions extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      api_url: \"https://xelene.ru/road/php/index.php?\",\n      fething: false,\n      tiket_all: null,\n      tiket_all_helper: null,\n      offset: 0,\n      ShowBanner: true\n    };\n    var props = this.props.this;\n    this.setPopout = props.setPopout;\n    this.showErrorAlert = props.showErrorAlert;\n    this.setActiveModal = props.setActiveModal;\n    this.Prepare_questions = this.Prepare_questions.bind(this);\n  }\n\n  Prepare_questions(need_offset = false) {\n    this.setState({\n      fetching: true\n    });\n    fetch(this.state.api_url + \"method=tickets.get&count=20&unanswered=1&offset=\" + this.state.offset + \"&\" + window.location.search.replace('?', '')).then(res => res.json()).then(data => {\n      if (data.result) {\n        this.setState({\n          tiket_all: []\n        });\n\n        if (this.state.tiket_all) {\n          var sliyan = data.response ? this.state.tiket_all.concat(data.response) : this.state.tiket_all;\n        }\n\n        this.setState({\n          tiket_all: sliyan,\n          tiket_all_helper: data.response\n        });\n\n        if (need_offset) {\n          this.setState({\n            offset: this.state.offset + 20\n          });\n        }\n\n        setTimeout(() => {\n          this.setState({\n            fetching: false\n          });\n        }, 500);\n      } else {\n        this.showErrorAlert(data.error.message);\n      }\n    }).catch(err => {\n      this.showErrorAlert(err);\n    });\n  }\n\n  componentDidMount() {\n    this.Prepare_questions();\n  }\n\n  render() {\n    var props = this.props.this; // Для более удобного использования.\n\n    return /*#__PURE__*/React.createElement(Panel, {\n      id: this.props.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(PanelHeader, {\n      left: /*#__PURE__*/React.createElement(PanelHeaderButton, {\n        onClick: () => this.setActiveModal(\"settings\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(Icon24Filter, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 90\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }\n    }, \"\\u0412\\u043E\\u043F\\u0440\\u043E\\u0441\\u044B\"), this.state.ShowBanner ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Banner, {\n      mode: \"image\",\n      size: \"m\",\n      onDismiss: () => {\n        this.setState({\n          ShowBanner: false\n        });\n      },\n      header: \"\\u0421 \\u0447\\u0435\\u0433\\u043E \\u043D\\u0430\\u0447\\u0430\\u0442\\u044C?\",\n      subheader: \"\\u0421 \\u043F\\u0440\\u043E\\u0447\\u0442\\u0435\\u043D\\u0438\\u044F \\u0441\\u0442\\u0430\\u0442\\u044C\\u0438\",\n      background: /*#__PURE__*/React.createElement(\"div\", {\n        style: {\n          backgroundColor: '#5b9be6',\n          backgroundImage: platformname ? 'url(' + BannerAvatarMobile : BannerAvatarPC + \")\",\n          backgroundPosition: 'right bottom',\n          backgroundSize: '100%',\n          backgroundRepeat: 'no-repeat'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 17\n        }\n      }),\n      asideMode: \"dismiss\",\n      actions: /*#__PURE__*/React.createElement(Button, {\n        mode: \"overlay_primary\",\n        href: \"https://vk.com/@jedi_road-checking-responses\",\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        size: \"l\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 30\n        }\n      }, \"\\u0427\\u0438\\u0442\\u0430\\u0442\\u044C\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 44\n      }\n    }), /*#__PURE__*/React.createElement(Separator, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 19\n      }\n    })) : null, this.props.account.special ? /*#__PURE__*/React.createElement(Div, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 47\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: () => props.goPanel('new_ticket'),\n      size: \"xl\",\n      mode: \"outline\",\n      stretched: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 21\n      }\n    }, \"\\u041D\\u043E\\u0432\\u044B\\u0439 \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441\")) : null, /*#__PURE__*/React.createElement(PullToRefresh, {\n      onRefresh: this.Prepare_questions,\n      isFetching: this.state.fetching,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }\n    }, console.log(this.state.tiket_all), this.state.tiket_all ? this.state.tiket_all.length > 0 ? this.state.tiket_all.map((result, i) => /*#__PURE__*/React.createElement(React.Fragment, {\n      key: i,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Cell, {\n      onClick: () => props.goTiket(result['id']),\n      description: result['status'] === 0 ? \"На рассмотрении\" : result['status'] === 1 ? \"Есть ответ\" : \"Закрыт\",\n      asideContent: /*#__PURE__*/React.createElement(Avatar, {\n        src: result['author']['id'] === 526444378 ? \"https://cdn3.iconfinder.com/data/icons/avatars-15/64/_Ninja-2-512.png\" : result['author']['photo_200'],\n        size: 56,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 43\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 25\n      }\n    }, result['title']), /*#__PURE__*/React.createElement(Separator, {\n      style: {\n        width: \"90%\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 25\n      }\n    }))) : null : null, this.state.tiket_all_helper ? this.state.tiket_all_helper.length === 20 ? /*#__PURE__*/React.createElement(Div, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      size: \"xl\",\n      level: \"secondary\",\n      onClick: () => this.Prepare_questions(true),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 25\n      }\n    }, \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u0438\\u0442\\u044C \\u0435\\u0449\\u0451\")) : this.state.tiket_all ? this.state.tiket_all.length === 0 ? null : /*#__PURE__*/React.createElement(Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 62\n      }\n    }, this.state.tiket_all.length, \" \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441(\\u0430) \\u0432\\u0441\\u0435\\u0433\\u043E\") : null : null, this.state.tiket_all ? this.state.tiket_all.length === 0 ? /*#__PURE__*/React.createElement(Placeholder, {\n      icon: /*#__PURE__*/React.createElement(Icon56InboxOutline, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 23\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 17\n      }\n    }, \"\\u0423\\u043F\\u0441, \\u043A\\u0430\\u0436\\u0435\\u0442\\u0441\\u044F \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441\\u044B \\u0437\\u0430\\u043A\\u043E\\u043D\\u0447\\u0438\\u043B\\u0438\\u0441\\u044C\") : null : /*#__PURE__*/React.createElement(PanelSpinner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 26\n      }\n    })));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/rshub/Desktop/Road-to-Jedi/mobile-road/src/panels/questions/panels/questions.js"],"names":["React","Panel","PanelHeader","PanelHeaderButton","Avatar","Button","Group","Alert","Placeholder","Separator","PullToRefresh","PanelSpinner","InfoRow","Header","Counter","SimpleCell","PromoBanner","FixedLayout","Cell","Div","HorizontalScroll","View","Switch","Banner","Footer","Icon24Filter","Icon24Add","Icon56InboxOutline","BannerAvatarPC","BannerAvatarMobile","platformname","test","navigator","userAgent","Questions","Component","constructor","props","state","api_url","fething","tiket_all","tiket_all_helper","offset","ShowBanner","this","setPopout","showErrorAlert","setActiveModal","Prepare_questions","bind","need_offset","setState","fetching","fetch","window","location","search","replace","then","res","json","data","result","sliyan","response","concat","setTimeout","error","message","catch","err","componentDidMount","render","id","backgroundColor","backgroundImage","backgroundPosition","backgroundSize","backgroundRepeat","account","special","goPanel","console","log","length","map","i","goTiket","width"],"mappings":"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","sourcesContent":["import React from 'react';\n\nimport { \n    Panel,\n    PanelHeader,\n    PanelHeaderButton,\n    Avatar,\n    Button,\n    Group,\n    Alert,\n    Placeholder,\n    Separator,\n    PullToRefresh,\n    PanelSpinner,\n    InfoRow,\n    Header,\n    Counter,\n    SimpleCell,\n    PromoBanner,\n    FixedLayout,\n    Cell,\n    Div,\n    HorizontalScroll,\n    View,\n    Switch,\n    Banner,\n    Footer\n    \n    } from '@vkontakte/vkui';\n\nimport Icon24Filter from '@vkontakte/icons/dist/24/filter';\nimport Icon24Add from '@vkontakte/icons/dist/24/add';\nimport Icon56InboxOutline from '@vkontakte/icons/dist/56/inbox_outline';\n\nimport BannerAvatarPC from '../../../images/question_banner_pc.jpg'\nimport BannerAvatarMobile from '../../../images/question_banner_mobile.png'\n\nconst platformname = (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));\n\n\nexport default class Questions extends React.Component {\n        constructor(props) {\n            super(props);\n            this.state = {\n                api_url: \"https://xelene.ru/road/php/index.php?\",\n                fething: false,\n                tiket_all: null,\n                tiket_all_helper: null,\n                offset: 0,\n                ShowBanner: true,\n\n            }\n            var props = this.props.this;\n            this.setPopout = props.setPopout;\n            this.showErrorAlert = props.showErrorAlert;\n            this.setActiveModal = props.setActiveModal;\n            this.Prepare_questions = this.Prepare_questions.bind(this);\n        }\n        Prepare_questions(need_offset=false){\n            this.setState({ fetching: true });\n            fetch(this.state.api_url + \"method=tickets.get&count=20&unanswered=1&offset=\" + this.state.offset + \"&\" + window.location.search.replace('?', ''))\n            .then(res => res.json())\n            .then(data => {\n              if(data.result) {\n                this.setState({tiket_all: []})\n                if(this.state.tiket_all){\n                    var sliyan = data.response ? this.state.tiket_all.concat(data.response) : this.state.tiket_all;\n                }\n                \n                this.setState({tiket_all: sliyan, tiket_all_helper: data.response})\n                if(need_offset){\n                    this.setState({ offset: this.state.offset + 20 })\n                }\n                setTimeout(() => {\n                  this.setState({ fetching: false });\n                }, 500);\n              }else{\n                this.showErrorAlert(data.error.message)\n            }\n            })\n            .catch(err => {\n              this.showErrorAlert(err)\n            })\n        }\n        componentDidMount() {\n            this.Prepare_questions()\n        }\n\n        render() {\n            var props = this.props.this; // Для более удобного использования.\n            return (\n                <Panel id={this.props.id}> \n                <PanelHeader\n                left={<PanelHeaderButton onClick={() => this.setActiveModal(\"settings\")}><Icon24Filter/></PanelHeaderButton>}\n                >\n                Вопросы\n                </PanelHeader>\n\n                {this.state.ShowBanner ? <><Banner\n                mode=\"image\"\n                size=\"m\"\n                onDismiss={() => {\n                    this.setState({ShowBanner: false});\n                }}\n                header=\"С чего начать?\"\n                subheader='С прочтения статьи'\n                background={\n                <div\n                    style={{\n                    backgroundColor: '#5b9be6',\n                    backgroundImage: platformname ? 'url(' + BannerAvatarMobile : BannerAvatarPC + \")\",\n                    backgroundPosition: 'right bottom',\n                    backgroundSize: '100%',\n\n                    backgroundRepeat: 'no-repeat',\n                    }}\n                />\n                }\n                    asideMode=\"dismiss\"\n                    actions={<Button mode=\"overlay_primary\" href=\"https://vk.com/@jedi_road-checking-responses\" target=\"_blank\" rel=\"noopener noreferrer\" size=\"l\">Читать</Button>}\n                /><Separator /></> : null}\n                {this.props.account.special ? <Div>\n                    <Button onClick={() => props.goPanel('new_ticket')}\n                    size=\"xl\" \n                    mode=\"outline\" \n                    stretched>Новый вопрос</Button>\n                </Div> : null}\n                <PullToRefresh onRefresh={this.Prepare_questions} isFetching={this.state.fetching}>\n                    {console.log(this.state.tiket_all)}\n                    {this.state.tiket_all ? this.state.tiket_all.length > 0 ? this.state.tiket_all.map((result, i) => \n                    <React.Fragment key={i}>\n                        <Cell\n                            onClick={() => props.goTiket(result['id'])}\n                            description={result['status'] === 0 ? \"На рассмотрении\" : result['status'] === 1 ? \"Есть ответ\" : \"Закрыт\" } \n                            asideContent={<Avatar src={result['author']['id'] === 526444378 ? \"https://cdn3.iconfinder.com/data/icons/avatars-15/64/_Ninja-2-512.png\" : result['author']['photo_200']} size={56}/>}\n                        >\n                        {result['title']}\n\n                        </Cell>\n                        <Separator style={{width: \"90%\"}} />\n                    </React.Fragment>\n                    ) : null : null}\n                \n                    {this.state.tiket_all_helper ? this.state.tiket_all_helper.length === 20 ? \n                    <Div>\n                        <Button size=\"xl\" level=\"secondary\" onClick={() => this.Prepare_questions(true)}>Загрузить ещё</Button>\n                    </Div>\n                : this.state.tiket_all ?\n                (this.state.tiket_all.length === 0) ? null : <Footer>{this.state.tiket_all.length} вопрос(а) всего</Footer>\n                 : null :\n                null}\n                {this.state.tiket_all ? this.state.tiket_all.length === 0 ? \n                <Placeholder \n                icon={<Icon56InboxOutline />}>\n                    Упс, кажется вопросы закончились\n                </Placeholder>\n                : null : <PanelSpinner />}\n            </PullToRefresh>\n            </Panel>\n            )\n            }\n        }\n  "]},"metadata":{},"sourceType":"module"}