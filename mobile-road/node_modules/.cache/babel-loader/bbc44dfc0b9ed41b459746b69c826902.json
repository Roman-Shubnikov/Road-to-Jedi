{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\src\\\\components\\\\tiket.js\";\nimport React from 'react';\nimport bridge from '@vkontakte/vk-bridge'; // VK Brige\n\nimport { Panel, PanelHeader, Button, FixedLayout, Div, ScreenSpinner, ActionSheet, ActionSheetItem, PanelHeaderBack, Separator, WriteBarIcon, WriteBar, FormStatus } from '@vkontakte/vkui';\nimport Icon16ReplyOutline from '@vkontakte/icons/dist/16/reply_outline'; // import Ninja from '../images/Ninja.webp'\n\nimport Message from './message'; // const platformname = (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));\n\nconst queryString = require('query-string');\n\nconst parsedHash = queryString.parse(window.location.search.replace('?', ''));\nvar months = ['января', 'февраля', 'марта', 'апреля', 'мая', 'июня', 'июля', 'августа', 'сентября', 'ноября', 'декабря'];\n\nfunction fix_time(time) {\n  if (time < 10) {\n    return \"0\" + time;\n  } else {\n    return time;\n  }\n}\n\nfunction add_month(month) {\n  let number_month = new Date(month * 1e3).getMonth();\n  return months[number_month - 1];\n}\n\nexport default class Ticket extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      api_url: \"https://xelene.ru/road/php/index.php?\",\n      tiket_info: null,\n      tiket_message: [],\n      tiket_send_message: '',\n      add_comment: false,\n      redaction: false,\n      limitreach: false\n    };\n    var propsbi = this.props.this;\n    this.setPopout = propsbi.setPopout;\n    this.showErrorAlert = propsbi.showErrorAlert;\n    this.setActiveModal = propsbi.setActiveModal;\n    this.goOtherProfile = propsbi.goOtherProfile;\n    this.sendRayt = this.sendRayt.bind(this);\n\n    this.onChange = event => {\n      var name = event.currentTarget.name;\n      var value = event.currentTarget.value;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.setSnack = value => {\n      this.setState({\n        snackbar: value\n      });\n    };\n  }\n\n  Prepare_ticket() {\n    fetch(this.state.api_url + \"method=ticket.getById&\" + window.location.search.replace('?', ''), {\n      method: 'post',\n      headers: {\n        \"Content-type\": \"application/json; charset=UTF-8\"\n      },\n      // signal: controllertime.signal,\n      body: JSON.stringify({\n        'ticket_id': this.props.ticket_id\n      })\n    }).then(res => res.json()).then(data => {\n      if (data.result) {\n        this.setState({\n          tiket_info: data.response.info,\n          tiket_message: data.response.messages,\n          limitreach: data.response.limitReach\n        });\n        this.setPopout(null);\n      } else {\n        this.showErrorAlert(data.error.message, () => window.history.back());\n      }\n    }).catch(err => {\n      this.showErrorAlert('Ошибка запроса. Пожалуйста, попробуйте позже', () => {\n        this.props.this.changeData('activeStory', 'disconnect');\n      });\n    });\n  }\n\n  sendRayt(mark, message_id) {\n    let reyt = 1;\n\n    if (mark === true) {\n      reyt = 1;\n    } else {\n      reyt = 0;\n    }\n\n    if (reyt < 2) {\n      fetch(this.state.api_url + \"method=ticket.markMessage&\" + window.location.search.replace('?', ''), {\n        method: 'post',\n        headers: {\n          \"Content-type\": \"application/json; charset=UTF-8\"\n        },\n        // signal: controllertime.signal,\n        body: JSON.stringify({\n          'message_id': message_id,\n          'mark': reyt\n        })\n      }).then(res => res.json()).then(data => {\n        if (data.result) {\n          this.getMessages();\n        } else {\n          this.showErrorAlert(data.error.message);\n        }\n      }).catch(err => {\n        this.showErrorAlert('Ошибка запроса. Пожалуйста, попробуйте позже', () => {\n          this.props.this.changeData('activeStory', 'disconnect');\n        });\n      });\n    }\n  }\n\n  sendClear(id) {\n    this.setPopout( /*#__PURE__*/React.createElement(ScreenSpinner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 24\n      }\n    }));\n    fetch(this.state.api_url + \"method=ticket.approveReply&\" + window.location.search.replace('?', ''), {\n      method: 'post',\n      headers: {\n        \"Content-type\": \"application/json; charset=UTF-8\"\n      },\n      // signal: controllertime.signal,\n      body: JSON.stringify({\n        'message_id': id\n      })\n    }).then(res => res.json()).then(data => {\n      if (data.result) {\n        this.getMessages();\n      } else {\n        this.showErrorAlert(data.error.message);\n      }\n    }).catch(err => {\n      this.showErrorAlert('Ошибка запроса. Пожалуйста, попробуйте позже', () => {\n        this.props.this.changeData('activeStory', 'disconnect');\n      });\n    });\n  }\n\n  Admin(approved, id, author_id, text, comment, avatar = null, mark = -1) {\n    if (author_id > 0) {\n      this.props.this.setPopout( /*#__PURE__*/React.createElement(ActionSheet, {\n        onClose: () => this.setPopout(null),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 13\n        }\n      }, author_id > 0 ? /*#__PURE__*/React.createElement(ActionSheetItem, {\n        autoclose: true,\n        onClick: () => {\n          this.setState({\n            tiket_message: []\n          });\n          this.goOtherProfile(author_id);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 15\n        }\n      }, \"\\u041F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\") : null, this.props.account.special && mark !== 0 && mark !== 1 && author_id > 0 ? /*#__PURE__*/React.createElement(ActionSheetItem, {\n        autoclose: true,\n        onClick: () => this.sendRayt(true, id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 15\n        }\n      }, \"\\u041E\\u0446\\u0435\\u043D\\u0438\\u0442\\u044C \\u043F\\u043E\\u043B\\u043E\\u0436\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\") : null, this.props.account.special && mark !== 0 && mark !== 1 && author_id > 0 ? /*#__PURE__*/React.createElement(ActionSheetItem, {\n        autoclose: true,\n        onClick: () => this.sendRayt(false, id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 15\n        }\n      }, \"\\u041E\\u0446\\u0435\\u043D\\u0438\\u0442\\u044C \\u043E\\u0442\\u0440\\u0438\\u0446\\u0430\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\") : null, this.props.account.special === true && author_id > 0 && !approved ? /*#__PURE__*/React.createElement(ActionSheetItem, {\n        autoclose: true,\n        onClick: () => this.sendClear(id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 15\n        }\n      }, \"\\u041E\\u0434\\u043E\\u0431\\u0440\\u0438\\u0442\\u044C\") : null, this.props.account.special === true && (comment === null || comment === undefined) ? /*#__PURE__*/React.createElement(ActionSheetItem, {\n        autoclose: true,\n        onClick: () => this.setState({\n          add_comment: true,\n          message_id_add: id\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 15\n        }\n      }, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0439\") : null, Number(author_id === this.props.account.id) && this.state.tiket_info['status'] === 0 && mark === -1 && !approved ? /*#__PURE__*/React.createElement(ActionSheetItem, {\n        autoclose: true,\n        onClick: () => this.setState({\n          redaction: true,\n          message_id_redac: id,\n          tiket_send_message: text\n        }),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 14\n        }\n      }, \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\") : null, comment === null || comment === undefined ? null : /*#__PURE__*/React.createElement(ActionSheetItem, {\n        autoclose: true,\n        onClick: () => {\n          this.props.this.setState({\n            comment: comment\n          });\n          this.setActiveModal(\"comment\");\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 15\n        }\n      }, \"\\u041F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\\u0435\\u0442\\u044C \\u043A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0439\"), Number(author_id) === Number(this.props.account.id) || this.props.account.special === true ? /*#__PURE__*/React.createElement(ActionSheetItem, {\n        autoclose: true,\n        onClick: () => this.deleteMessage(id),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 15\n        }\n      }, \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435\") : null, /*#__PURE__*/React.createElement(ActionSheetItem, {\n        autoclose: true,\n        mode: \"cancel\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 16\n        }\n      }, \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\")));\n    } else {\n      if (this.props.account.special) {\n        this.props.this.setPopout( /*#__PURE__*/React.createElement(ActionSheet, {\n          onClose: () => this.setPopout(null),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(ActionSheetItem, {\n          autoclose: true,\n          onClick: () => this.deleteMessage(id),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 17\n          }\n        }, \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435\"), /*#__PURE__*/React.createElement(ActionSheetItem, {\n          autoclose: true,\n          onClick: () => {\n            this.props.this.setState({\n              other_profile: {\n                'id': author_id,\n                'avatar': {\n                  'url': avatar\n                }\n              }\n            });\n            this.setActiveModal('ban_user');\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 17\n          }\n        }, \"\\u0417\\u0430\\u0431\\u0430\\u043D\\u0438\\u0442\\u044C \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\"), Number(author_id === this.props.account.id) && this.state.tiket_info['status'] === 0 ? /*#__PURE__*/React.createElement(ActionSheetItem, {\n          autoclose: true,\n          onClick: () => this.setState({\n            redaction: true,\n            message_id_redac: id,\n            tiket_send_message: text\n          }),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 16\n          }\n        }, \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\") : null, /*#__PURE__*/React.createElement(ActionSheetItem, {\n          autoclose: true,\n          mode: \"cancel\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 16\n          }\n        }, \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\")));\n      } else {\n        if (Number(author_id === this.props.account.id)) {\n          this.props.this.setPopout( /*#__PURE__*/React.createElement(ActionSheet, {\n            onClose: () => this.setPopout(null),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 17\n            }\n          }, Number(author_id === this.props.account.id) && this.state.tiket_info['status'] === 0 ? /*#__PURE__*/React.createElement(ActionSheetItem, {\n            autoclose: true,\n            onClick: () => this.setState({\n              redaction: true,\n              message_id_redac: id,\n              tiket_send_message: text\n            }),\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 231,\n              columnNumber: 18\n            }\n          }, \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\") : null, /*#__PURE__*/React.createElement(ActionSheetItem, {\n            autoclose: true,\n            mode: \"cancel\",\n            __self: this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 18\n            }\n          }, \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\")));\n        }\n      }\n    }\n  }\n\n  copy(id) {\n    this.props.this.setPopout( /*#__PURE__*/React.createElement(ActionSheet, {\n      onClose: () => this.setPopout(null),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 11\n      }\n    }, Number(this.state.tiket_info['author']['id']) === Number(parsedHash.vk_user_id) ? this.state.tiket_info['status'] === 0 || this.state.tiket_info['status'] === 1 ? /*#__PURE__*/React.createElement(ActionSheetItem, {\n      autoclose: true,\n      onClick: () => this.deleteTicket(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 13\n      }\n    }, \"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C \\u0442\\u0438\\u043A\\u0435\\u0442\") : /*#__PURE__*/React.createElement(ActionSheetItem, {\n      autoclose: true,\n      onClick: () => this.openTicket(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254,\n        columnNumber: 13\n      }\n    }, \"\\u041E\\u0442\\u043A\\u0440\\u044B\\u0442\\u044C \\u0442\\u0438\\u043A\\u0435\\u0442\") : this.props.account.special === true ? this.state.tiket_info['status'] === 0 || this.state.tiket_info['status'] === 1 ? /*#__PURE__*/React.createElement(ActionSheetItem, {\n      autoclose: true,\n      onClick: () => this.deleteTicket(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 13\n      }\n    }, \"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C \\u0442\\u0438\\u043A\\u0435\\u0442\") : /*#__PURE__*/React.createElement(ActionSheetItem, {\n      autoclose: true,\n      onClick: () => this.openTicket(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 13\n      }\n    }, \"\\u041E\\u0442\\u043A\\u0440\\u044B\\u0442\\u044C \\u0442\\u0438\\u043A\\u0435\\u0442\") : null, /*#__PURE__*/React.createElement(ActionSheetItem, {\n      autoclose: true,\n      onClick: () => bridge.send(\"VKWebAppCopyText\", {\n        text: \"https://vk.com/app7409818#ticket_id=\" + id\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 13\n      }\n    }, \"\\u0421\\u043A\\u043E\\u043F\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u0441\\u0441\\u044B\\u043B\\u043A\\u0443\"), /*#__PURE__*/React.createElement(ActionSheetItem, {\n      autoclose: true,\n      mode: \"cancel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 14\n      }\n    }, \"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\")));\n  }\n\n  clickable_user_message(author_id) {\n    console.log(author_id);\n    let clickable = true;\n\n    if (author_id < 0) {\n      if (!this.props.account.special) {\n        if (!Boolean(Number(author_id === this.props.account.id))) {\n          clickable = false;\n        }\n      }\n    }\n\n    return clickable;\n  }\n\n  sendNewMessage() {\n    this.setPopout( /*#__PURE__*/React.createElement(ScreenSpinner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 24\n      }\n    }));\n    fetch(this.state.api_url + 'method=ticket.sendMessage&' + window.location.search.replace('?', ''), {\n      method: 'post',\n      headers: {\n        \"Content-type\": \"application/json; charset=UTF-8\"\n      },\n      // signal: controllertime.signal,\n      body: JSON.stringify({\n        'ticket_id': this.state.tiket_info['id'],\n        'text': this.state.tiket_send_message.trim()\n      })\n    }).then(res => res.json()).then(data => {\n      if (data.result) {\n        this.getMessages();\n      } else {\n        this.showErrorAlert(data.error.message);\n      }\n    }).catch(err => {\n      this.showErrorAlert('Ошибка запроса. Пожалуйста, попробуйте позже', () => {\n        this.props.this.changeData('activeStory', 'disconnect');\n      });\n    });\n  }\n\n  deleteMessage(message_id) {\n    this.setPopout( /*#__PURE__*/React.createElement(ScreenSpinner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 24\n      }\n    }));\n    fetch(this.state.api_url + \"method=ticket.deleteMessage&\" + window.location.search.replace('?', ''), {\n      method: 'post',\n      headers: {\n        \"Content-type\": \"application/json; charset=UTF-8\"\n      },\n      // signal: controllertime.signal,\n      body: JSON.stringify({\n        'message_id': message_id\n      })\n    }).then(res => res.json()).then(data => {\n      if (data.result) {\n        this.getMessages();\n      } else {\n        this.showErrorAlert(data.error.message);\n      }\n    }).catch(err => {\n      this.showErrorAlert('Ошибка запроса. Пожалуйста, попробуйте позже', () => {\n        this.props.this.changeData('activeStory', 'disconnect');\n      });\n    });\n  }\n\n  deleteTicket() {\n    this.setPopout( /*#__PURE__*/React.createElement(ScreenSpinner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 24\n      }\n    }));\n    fetch(this.state.api_url + \"method=ticket.close&\" + window.location.search.replace('?', ''), {\n      method: 'post',\n      headers: {\n        \"Content-type\": \"application/json; charset=UTF-8\"\n      },\n      // signal: controllertime.signal,\n      body: JSON.stringify({\n        'ticket_id': this.state.tiket_info['id']\n      })\n    }).then(res => res.json()).then(data => {\n      if (data.result) {\n        this.getMessages();\n      } else {\n        this.showErrorAlert(data.error.message);\n      }\n    }).catch(err => {\n      this.showErrorAlert('Ошибка запроса. Пожалуйста, попробуйте позже', () => {\n        this.props.this.changeData('activeStory', 'disconnect');\n      });\n    });\n  }\n\n  openTicket() {\n    this.setPopout( /*#__PURE__*/React.createElement(ScreenSpinner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 24\n      }\n    }));\n    fetch(this.state.api_url + \"method=ticket.open&\" + window.location.search.replace('?', ''), {\n      method: 'post',\n      headers: {\n        \"Content-type\": \"application/json; charset=UTF-8\"\n      },\n      // signal: controllertime.signal,\n      body: JSON.stringify({\n        'ticket_id': this.state.tiket_info['id']\n      })\n    }).then(res => res.json()).then(data => {\n      if (data.result) {\n        this.getMessages();\n      } else {\n        this.showErrorAlert(data.error.message);\n      }\n    }).catch(err => {\n      this.showErrorAlert('Ошибка запроса. Пожалуйста, попробуйте позже', () => {\n        this.props.this.changeData('activeStory', 'disconnect');\n      });\n    });\n  }\n\n  sendNewMessageRedact() {\n    this.setPopout( /*#__PURE__*/React.createElement(ScreenSpinner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 382,\n        columnNumber: 24\n      }\n    }));\n    fetch(this.state.api_url + 'method=ticket.editMessage&' + window.location.search.replace('?', ''), {\n      method: 'post',\n      headers: {\n        \"Content-type\": \"application/json; charset=UTF-8\"\n      },\n      // signal: controllertime.signal,\n      body: JSON.stringify({\n        'message_id': this.state.message_id_redac,\n        'text': this.state.tiket_send_message.trim()\n      })\n    }).then(res => res.json()).then(data => {\n      if (data.result) {\n        this.getMessages();\n      } else {\n        this.showErrorAlert(data.error.message);\n      }\n    }).catch(err => {\n      this.showErrorAlert('Ошибка запроса. Пожалуйста, попробуйте позже', () => {\n        this.props.this.changeData('activeStory', 'disconnect');\n      });\n    });\n  }\n\n  sendNewMessageComment() {\n    this.setPopout( /*#__PURE__*/React.createElement(ScreenSpinner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 24\n      }\n    }));\n    fetch(this.state.api_url + 'method=ticket.commentMessage&message_id=' + window.location.search.replace('?', ''), {\n      method: 'post',\n      headers: {\n        \"Content-type\": \"application/json; charset=UTF-8\"\n      },\n      // signal: controllertime.signal,\n      body: JSON.stringify({\n        'message_id': this.state.message_id_add,\n        'text': this.state.tiket_send_message.trim()\n      })\n    }).then(res => res.json()).then(data => {\n      if (data.result) {\n        this.getMessages();\n      } else {\n        this.showErrorAlert(data.error.message);\n      }\n    }).catch(err => {\n      this.showErrorAlert('Ошибка запроса. Пожалуйста, попробуйте позже', () => {\n        this.props.this.changeData('activeStory', 'disconnect');\n      });\n    });\n  }\n\n  getMessages() {\n    fetch(this.state.api_url + \"method=ticket.getMessages&ticket_id=\" + this.state.tiket_info['id'] + \"&\" + window.location.search.replace('?', '')).then(res => res.json()).then(data => {\n      if (data.result) {\n        this.setState({\n          tiket_message: data.response.messages,\n          tiket_send_message: \"\",\n          add_comment: false,\n          redaction: false,\n          limitreach: data.response.limitReach\n        });\n        this.setPopout(null);\n      } else {\n        this.showErrorAlert(data.error.message);\n      }\n    }).catch(err => {\n      this.showErrorAlert('Ошибка запроса. Пожалуйста, попробуйте позже', () => {\n        this.props.this.changeData('activeStory', 'disconnect');\n      });\n    });\n  }\n\n  componentDidMount() {\n    this.setPopout( /*#__PURE__*/React.createElement(ScreenSpinner, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 447,\n        columnNumber: 22\n      }\n    }));\n    this.Prepare_ticket();\n  }\n\n  nofinc() {\n    return 1;\n  }\n\n  render() {\n    var props = this.props;\n    var thisOb = this;\n    return /*#__PURE__*/React.createElement(Panel, {\n      id: this.props.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(PanelHeader, {\n      left: /*#__PURE__*/React.createElement(PanelHeaderBack, {\n        onClick: () => window.history.back(),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 459,\n          columnNumber: 23\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 458,\n        columnNumber: 13\n      }\n    }, this.state.tiket_info ? /*#__PURE__*/React.createElement(\"span\", {\n      id: \"animation\",\n      className: \"pointer\",\n      onClick: () => this.copy(this.state.tiket_info['id']),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 461,\n        columnNumber: 42\n      }\n    }, \"\\u0412\\u043E\\u043F\\u0440\\u043E\\u0441 #\", this.state.tiket_info['id']) : null), this.state.tiket_info ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"title_tiket\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 465,\n        columnNumber: 13\n      }\n    }, new Date(this.state.tiket_info['time'] * 1e3).getDate(), \" \", add_month(this.state.tiket_info['time'])), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"title_tiket\",\n      style: {\n        marginTop: \"10px\",\n        width: \"95%\",\n        marginLeft: \"10px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 466,\n        columnNumber: 13\n      }\n    }, \"\\u041F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C \\u043E\\u0431\\u0440\\u0430\\u0442\\u0438\\u043B\\u0441\\u044F \\u0441 \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441\\u043E\\u043C  \\xAB\", this.state.tiket_info['title'], \"\\xBB\"), /*#__PURE__*/React.createElement(React.Fragment, null, this.state.tiket_message ? this.state.tiket_message.map(function (result, i) {\n      var is_mine_ticket = Number(thisOb.state.tiket_info.author['id']) === Number(parsedHash.vk_user_id) ? true : false;\n      var is_mine_message = Number(result['author']['id']) === Number(parsedHash.vk_user_id) ? true : false;\n      var avatar = result.author.is_moderator ? result['author']['avatar']['url'] : result.author.photo_200;\n      var time = fix_time(new Date(result.time * 1e3).getHours()) + \":\" + fix_time(new Date(result.time * 1e3).getMinutes());\n      var title_moder = isFinite(result['nickname']) ? `Агент Поддержки #${result['nickname']}` : result['nickname'] ? result['nickname'] : `Агент Поддержки #${result['author']['id']}`;\n      return Number(thisOb.state.tiket_info.author['id']) === Number(parsedHash.vk_user_id) ? /*#__PURE__*/React.createElement(Message, {\n        clickable: true,\n        title: result.author.is_moderator ? title_moder : result.author.first_name + \" \" + result.author.last_name,\n        title_icon: result.moderator_comment !== undefined ? /*#__PURE__*/React.createElement(Icon16ReplyOutline, {\n          width: 10,\n          height: 10,\n          style: {\n            display: \"inline-block\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 478,\n            columnNumber: 86\n          }\n        }) : false,\n        is_mine: is_mine_message === is_mine_ticket,\n        avatar: avatar,\n        onClick: () => thisOb.Admin(result['approved'], result['id'], result['author'].first_name ? -result['author']['id'] : result['author']['id'], result['text'], result.moderator_comment !== undefined ? result['moderator_comment']['text'] : null, avatar, result['mark']),\n        key: i,\n        is_special: thisOb.props.account.special,\n        is_mark: result.mark,\n        time: time,\n        sendRayt_false: () => thisOb.sendRayt(false, result.id),\n        sendRayt_true: () => thisOb.sendRayt(true, result.id),\n        approved: result.approved ? true : false,\n        CanselApp: () => props.this.showAlert('Информация', 'Этот ответ оценен отрицательно'),\n        DoneApp: () => props.this.showAlert('Информация', 'Этот ответ оценен положительно'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 475,\n          columnNumber: 29\n        }\n      }, result.text) : /*#__PURE__*/React.createElement(Message, {\n        clickable: !thisOb.props.account.special ? false : true,\n        title: result.author.is_moderator ? title_moder : result.author.first_name + \" \" + result.author.last_name,\n        title_icon: result.moderator_comment !== undefined ? /*#__PURE__*/React.createElement(Icon16ReplyOutline, {\n          width: 10,\n          height: 10,\n          style: {\n            display: \"inline-block\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 499,\n            columnNumber: 86\n          }\n        }) : false,\n        is_mine: result.author.is_moderator,\n        avatar: avatar,\n        key: i,\n        time: time,\n        onClick: () => thisOb.Admin(result['approved'], result['id'], result['author'].first_name ? -result['author']['id'] : result['author']['id'], result['text'], result.moderator_comment !== undefined ? result['moderator_comment']['text'] : null, avatar, result['mark']),\n        is_special: thisOb.props.account.special,\n        is_mark: result.mark,\n        sendRayt_false: () => thisOb.sendRayt(false, result.id),\n        sendRayt_true: () => thisOb.sendRayt(true, result.id),\n        approved: result.approved ? true : false,\n        CanselApp: () => props.this.showAlert('Информация', 'Этот ответ оценен отрицательно'),\n        DoneApp: () => props.this.showAlert('Информация', 'Этот ответ оценен положительно'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 496,\n          columnNumber: 29\n        }\n      }, result.text);\n    }) : null, !(this.state.tiket_info['status'] === 1 || this.state.tiket_info['status'] === 2) ? /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginBottom: '20vh'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 516,\n        columnNumber: 114\n      }\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        marginBottom: '5vh'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 516,\n        columnNumber: 159\n      }\n    })), this.state.tiket_info['status'] === 0 || this.state.redaction === true || this.state.add_comment === true ? this.state.limitreach && !(this.state.redaction || this.state.add_comment) ? /*#__PURE__*/React.createElement(FixedLayout, {\n      filled: true,\n      vertical: \"bottom\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 521,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Div, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 522,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(FormStatus, {\n      header: \"\\u0412\\u043D\\u0438\\u043C\\u0430\\u043D\\u0438\\u0435!\",\n      mode: \"default\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 523,\n        columnNumber: 21\n      }\n    }, \"\\u0412\\u044B \\u0438\\u0441\\u0447\\u0435\\u0440\\u043F\\u0430\\u043B\\u0438 \\u043B\\u0438\\u043C\\u0438\\u0442 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0439 \\u0432 \\u044D\\u0442\\u043E\\u0442 \\u0442\\u0438\\u043A\\u0435\\u0442.\"))) : /*#__PURE__*/React.createElement(FixedLayout, {\n      vertical: \"bottom\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 528,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Separator, {\n      wide: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 529,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(WriteBar, {\n      after: /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(WriteBarIcon, {\n        mode: this.state.redaction ? 'done' : \"send\",\n        disabled: !(this.state.tiket_send_message.trim().length >= 5),\n        onClick: () => {\n          this.state.tiket_send_message.trim().length >= 5 ? this.state.redaction !== true && this.state.add_comment !== true ? this.sendNewMessage() : this.state.redaction ? this.sendNewMessageRedact() : this.sendNewMessageComment() : this.nofinc();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 533,\n          columnNumber: 27\n        }\n      })),\n      value: this.state.tiket_send_message,\n      maxLength: \"2020\",\n      name: \"tiket_send_message\",\n      onChange: e => this.onChange(e),\n      placeholder: \"\\u0421\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 530,\n        columnNumber: 21\n      }\n    })) : null, this.state.tiket_info['status'] === 1 ? Number(this.state.tiket_info['author']['id']) === Number(parsedHash.vk_user_id) ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 551,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(FixedLayout, {\n      vertical: \"bottom\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 552,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(Div, {\n      style: {\n        display: \"flex\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 553,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      size: \"l\",\n      style: {\n        marginRight: \"5%\"\n      },\n      stretched: true,\n      onClick: () => this.deleteTicket(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 554,\n        columnNumber: 27\n      }\n    }, \"\\u041F\\u0440\\u043E\\u0431\\u043B\\u0435\\u043C\\u0430 \\u0440\\u0435\\u0448\\u0435\\u043D\\u0430\"), /*#__PURE__*/React.createElement(Button, {\n      size: \"l\",\n      stretched: true,\n      mode: \"secondary\",\n      onClick: () => this.openTicket(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 555,\n        columnNumber: 27\n      }\n    }, \"\\u041F\\u0440\\u043E\\u0431\\u043B\\u0435\\u043C\\u0430 \\u043D\\u0435 \\u0440\\u0435\\u0448\\u0435\\u043D\\u0430\")))) : null : null) : null);\n  }\n\n}\n;","map":{"version":3,"sources":["C:/Users/rshub/Desktop/Road-to-Jedi/mobile-road/src/components/tiket.js"],"names":["React","bridge","Panel","PanelHeader","Button","FixedLayout","Div","ScreenSpinner","ActionSheet","ActionSheetItem","PanelHeaderBack","Separator","WriteBarIcon","WriteBar","FormStatus","Icon16ReplyOutline","Message","queryString","require","parsedHash","parse","window","location","search","replace","months","fix_time","time","add_month","month","number_month","Date","getMonth","Ticket","Component","constructor","props","state","api_url","tiket_info","tiket_message","tiket_send_message","add_comment","redaction","limitreach","propsbi","this","setPopout","showErrorAlert","setActiveModal","goOtherProfile","sendRayt","bind","onChange","event","name","currentTarget","value","setState","setSnack","snackbar","Prepare_ticket","fetch","method","headers","body","JSON","stringify","ticket_id","then","res","json","data","result","response","info","messages","limitReach","error","message","history","back","catch","err","changeData","mark","message_id","reyt","getMessages","sendClear","id","Admin","approved","author_id","text","comment","avatar","account","special","undefined","message_id_add","Number","message_id_redac","deleteMessage","other_profile","copy","vk_user_id","deleteTicket","openTicket","send","clickable_user_message","console","log","clickable","Boolean","sendNewMessage","trim","sendNewMessageRedact","sendNewMessageComment","componentDidMount","nofinc","render","thisOb","getDate","marginTop","width","marginLeft","map","i","is_mine_ticket","author","is_mine_message","is_moderator","photo_200","getHours","getMinutes","title_moder","isFinite","first_name","last_name","moderator_comment","display","showAlert","marginBottom","length","e","marginRight"],"mappings":"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","sourcesContent":["import React from 'react';\nimport bridge from '@vkontakte/vk-bridge'; // VK Brige\n\nimport { \n    Panel,\n    PanelHeader,\n    Button,\n    FixedLayout,\n    Div,\n    ScreenSpinner,\n    ActionSheet,\n    ActionSheetItem,\n    PanelHeaderBack,\n    Separator,\n    WriteBarIcon,\n    WriteBar,\n    FormStatus,\n    } from '@vkontakte/vkui';\n\nimport Icon16ReplyOutline from '@vkontakte/icons/dist/16/reply_outline';\n\n// import Ninja from '../images/Ninja.webp'\n\nimport Message from './message'\n// const platformname = (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));\nconst queryString = require('query-string');\nconst parsedHash = queryString.parse(window.location.search.replace('?', ''));\n\nvar months = [\n    'января',\n    'февраля',\n    'марта',\n    'апреля',\n    'мая',\n    'июня',\n    'июля',\n    'августа',\n    'сентября',\n    'ноября',\n    'декабря',\n];\n\nfunction fix_time(time) {\n    if(time < 10) {\n        return \"0\" + time\n    } else {\n        return time\n    }\n}\n\nfunction add_month(month) {\n    let number_month = new Date(month * 1e3).getMonth()\n    return months[number_month - 1]\n}\nexport default class Ticket extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            api_url: \"https://xelene.ru/road/php/index.php?\",\n            tiket_info: null,\n            tiket_message: [],\n            tiket_send_message: '',\n            add_comment: false,\n            redaction: false,\n            limitreach: false,\n        }\n        var propsbi = this.props.this;\n        this.setPopout = propsbi.setPopout;\n        this.showErrorAlert = propsbi.showErrorAlert;\n        this.setActiveModal = propsbi.setActiveModal;\n        this.goOtherProfile = propsbi.goOtherProfile;\n        this.sendRayt = this.sendRayt.bind(this);\n        this.onChange = (event) => {\n          var name = event.currentTarget.name;\n          var value = event.currentTarget.value;\n          this.setState({ [name]: value });\n        }\n        this.setSnack = (value) => {\n          this.setState({snackbar: value})\n        }\n\n    }\n    Prepare_ticket(){\n        fetch(this.state.api_url + \"method=ticket.getById&\" + window.location.search.replace('?', ''),\n        {method: 'post',\n      headers: {\"Content-type\": \"application/json; charset=UTF-8\"},\n          // signal: controllertime.signal,\n      body: JSON.stringify({\n        'ticket_id': this.props.ticket_id,\n\n    })\n      })\n        .then(res => res.json())\n        .then(data => {\n          if(data.result) {\n            this.setState({tiket_info: data.response.info,\n              tiket_message: data.response.messages,limitreach: data.response.limitReach });\n              this.setPopout(null);\n          } else {\n            this.showErrorAlert(data.error.message,() => window.history.back())\n          }\n        })\n        .catch(err => {\n          this.showErrorAlert('Ошибка запроса. Пожалуйста, попробуйте позже',() => {this.props.this.changeData('activeStory', 'disconnect')})\n        })\n    }\n    sendRayt(mark, message_id) {\n        let reyt = 1;\n        if(mark === true) {\n          reyt = 1;\n        } else {\n          reyt = 0;\n        }\n        if(reyt < 2) {\n          fetch(this.state.api_url + \"method=ticket.markMessage&\" + window.location.search.replace('?', ''),\n          {method: 'post',\n          headers: {\"Content-type\": \"application/json; charset=UTF-8\"},\n          // signal: controllertime.signal,\n          body: JSON.stringify({\n            'message_id': message_id,\n            'mark': reyt,\n          })\n            })\n            .then(res => res.json())\n            .then(data => {\n              if(data.result) {\n                this.getMessages()\n              }else {\n                this.showErrorAlert(data.error.message)\n              }\n            })\n            .catch(err => {\n              this.showErrorAlert('Ошибка запроса. Пожалуйста, попробуйте позже',() => {this.props.this.changeData('activeStory', 'disconnect')})\n            \n            })\n        }\n      }\n      sendClear(id) {\n        this.setPopout(<ScreenSpinner/>)\n        fetch(this.state.api_url + \"method=ticket.approveReply&\" + window.location.search.replace('?', ''),\n        {method: 'post',\n          headers: {\"Content-type\": \"application/json; charset=UTF-8\"},\n          // signal: controllertime.signal,\n          body: JSON.stringify({\n            'message_id': id,\n          })\n            })\n          .then(res => res.json())\n          .then(data => {\n            if(data.result) {\n              this.getMessages()\n            } else {\n              this.showErrorAlert(data.error.message)\n            }\n          })\n          .catch(err => {\n            this.showErrorAlert('Ошибка запроса. Пожалуйста, попробуйте позже',() => {this.props.this.changeData('activeStory', 'disconnect')})\n    \n          })\n      }\n      Admin(approved, id, author_id, text, comment,avatar=null, mark = -1){\n        if(author_id > 0){\n          this.props.this.setPopout(\n            <ActionSheet onClose={() => this.setPopout(null)}>\n               {author_id > 0 ?\n              <ActionSheetItem autoclose onClick={() => {this.setState({tiket_message: []});this.goOtherProfile(author_id);}}>\n                Профиль\n              </ActionSheetItem>\n              : null}\n             { this.props.account.special && mark !== 0 && mark !== 1 && author_id > 0 ? \n              <ActionSheetItem autoclose onClick={() => this.sendRayt(true, id)}>\n                Оценить положительно\n              </ActionSheetItem> \n              : null}\n              { this.props.account.special && mark !== 0 && mark !== 1 && author_id > 0 ? \n              <ActionSheetItem autoclose onClick={() => this.sendRayt(false, id)}>\n                Оценить отрицательно\n              </ActionSheetItem> \n              : null }\n              { (this.props.account.special === true && author_id > 0 && !approved) ? \n              <ActionSheetItem autoclose onClick={() => this.sendClear(id)}>\n                Одобрить\n              </ActionSheetItem> \n              : null }\n              {(this.props.account.special === true && (comment === null || comment === undefined)) ? \n              <ActionSheetItem autoclose onClick={() => this.setState({add_comment: true, message_id_add: id})}>\n              Добавить комментарий\n              </ActionSheetItem> \n              : null }\n              {(Number(author_id === this.props.account.id) && this.state.tiket_info['status'] === 0 && mark === -1 && !approved) ? \n             <ActionSheetItem autoclose onClick={() => this.setState({redaction: true, message_id_redac: id, tiket_send_message: text})}>\n             Редактировать\n             </ActionSheetItem>\n             : null}\n          {(comment === null || comment === undefined) ? null : \n              <ActionSheetItem autoclose onClick={() => {this.props.this.setState({comment: comment}); this.setActiveModal(\"comment\")}}>\n              Просмотреть комментарий\n            </ActionSheetItem>}\n              {Number(author_id) === Number(this.props.account.id) || this.props.account.special === true ? \n              <ActionSheetItem autoclose onClick={() => this.deleteMessage(id)}>\n                Удалить сообщение\n              </ActionSheetItem>\n              : null}\n              {<ActionSheetItem autoclose mode=\"cancel\">Отменить</ActionSheetItem>}\n            </ActionSheet>\n          )\n        }else{\n          if(this.props.account.special){\n            \n            this.props.this.setPopout(\n              <ActionSheet onClose={() => this.setPopout(null)}>\n                <ActionSheetItem autoclose onClick={() => this.deleteMessage(id)}>\n                  Удалить сообщение\n                </ActionSheetItem>\n                <ActionSheetItem autoclose onClick={() => {this.props.this.setState({other_profile:{'id':author_id,'avatar': {'url': avatar}}});this.setActiveModal('ban_user');}}>\n                  Забанить пользователя\n                </ActionSheetItem> \n                {(Number(author_id === this.props.account.id) && this.state.tiket_info['status'] === 0) ? \n               <ActionSheetItem autoclose onClick={() => this.setState({redaction: true, message_id_redac: id, tiket_send_message: text})}>\n               Редактировать\n               </ActionSheetItem>\n               : null}\n              {<ActionSheetItem autoclose mode=\"cancel\">Отменить</ActionSheetItem>}\n              </ActionSheet>\n            )\n          }else{\n            if(Number(author_id === this.props.account.id)){\n              this.props.this.setPopout(\n                <ActionSheet onClose={() => this.setPopout(null)}>\n                  {(Number(author_id === this.props.account.id) && this.state.tiket_info['status'] === 0) ? \n                 <ActionSheetItem autoclose onClick={() => this.setState({redaction: true, message_id_redac: id, tiket_send_message: text})}>\n                 Редактировать\n                 </ActionSheetItem>\n                 : null}\n                {<ActionSheetItem autoclose mode=\"cancel\">Отменить</ActionSheetItem>}\n                </ActionSheet>\n              )\n            }\n            \n          }\n          \n        }\n        \n      }\n      copy(id) {\n        this.props.this.setPopout(\n          <ActionSheet onClose={() => this.setPopout(null)}>\n            {Number(this.state.tiket_info['author']['id']) === Number(parsedHash.vk_user_id) ? \n            this.state.tiket_info['status'] === 0 ||  this.state.tiket_info['status'] === 1 ?\n            <ActionSheetItem autoclose onClick={() => this.deleteTicket()}>\n            Закрыть тикет\n            </ActionSheetItem>\n            : \n            <ActionSheetItem autoclose onClick={() => this.openTicket()}>\n            Открыть тикет\n            </ActionSheetItem>\n            : \n            this.props.account.special === true ?\n            this.state.tiket_info['status'] === 0 ||  this.state.tiket_info['status'] === 1 ?\n            <ActionSheetItem autoclose onClick={() => this.deleteTicket()}>\n            Закрыть тикет\n            </ActionSheetItem>\n            : \n            <ActionSheetItem autoclose onClick={() => this.openTicket()}>\n            Открыть тикет\n            </ActionSheetItem>\n            : null\n          }\n            <ActionSheetItem autoclose onClick={() => bridge.send(\"VKWebAppCopyText\", {text: \"https://vk.com/app7409818#ticket_id=\" + id})}>\n              Скопировать ссылку\n            </ActionSheetItem>\n            {<ActionSheetItem autoclose mode=\"cancel\">Отменить</ActionSheetItem>}\n          </ActionSheet>)\n      }\n      clickable_user_message(author_id){\n        console.log(author_id)\n        let clickable = true;\n        if(author_id < 0){\n          if(!this.props.account.special){\n            if(!Boolean(Number(author_id === this.props.account.id))){\n              clickable = false;\n            }\n          }\n        }\n        return clickable;\n      }\n      sendNewMessage() {\n        this.setPopout(<ScreenSpinner/>)\n          fetch(this.state.api_url + 'method=ticket.sendMessage&' + window.location.search.replace('?', ''),\n          {method: 'post',\n          headers: {\"Content-type\": \"application/json; charset=UTF-8\"},\n          // signal: controllertime.signal,\n          body: JSON.stringify({\n            'ticket_id': this.state.tiket_info['id'],\n            'text': this.state.tiket_send_message.trim(),\n          })\n            })\n          .then(res => res.json())\n          .then(data => {\n            if(data.result) {\n              this.getMessages()\n            }else {\n              this.showErrorAlert(data.error.message)\n            }\n          })\n          .catch(err => {\n            this.showErrorAlert('Ошибка запроса. Пожалуйста, попробуйте позже',() => {this.props.this.changeData('activeStory', 'disconnect')})\n\n          })\n      }\n      deleteMessage(message_id) {\n        this.setPopout(<ScreenSpinner/>)\n          fetch(this.state.api_url + \"method=ticket.deleteMessage&\" + window.location.search.replace('?', ''),\n          {method: 'post',\n          headers: {\"Content-type\": \"application/json; charset=UTF-8\"},\n          // signal: controllertime.signal,\n          body: JSON.stringify({\n            'message_id': message_id,\n          })\n            })\n            .then(res => res.json())\n            .then(data => {\n              if(data.result) {\n                this.getMessages()\n              }else {\n                this.showErrorAlert(data.error.message)\n              }\n            })\n            .catch(err => {\n              this.showErrorAlert('Ошибка запроса. Пожалуйста, попробуйте позже',() => {this.props.this.changeData('activeStory', 'disconnect')})\n  \n            })\n      }\n      deleteTicket() {\n        this.setPopout(<ScreenSpinner/>)\n        fetch(this.state.api_url + \"method=ticket.close&\" + window.location.search.replace('?', ''),\n        {method: 'post',\n          headers: {\"Content-type\": \"application/json; charset=UTF-8\"},\n          // signal: controllertime.signal,\n          body: JSON.stringify({\n            'ticket_id': this.state.tiket_info['id'],\n\n          })\n            })\n          .then(res => res.json())\n          .then(data => {\n            if(data.result) {\n              this.getMessages()\n            }else {\n              this.showErrorAlert(data.error.message)\n            }\n          })\n          .catch(err => {\n            this.showErrorAlert('Ошибка запроса. Пожалуйста, попробуйте позже',() => {this.props.this.changeData('activeStory', 'disconnect')})\n  \n          })\n      }\n      openTicket() {\n        this.setPopout(<ScreenSpinner/>)\n        fetch(this.state.api_url + \"method=ticket.open&\" + window.location.search.replace('?', ''),\n        {method: 'post',\n          headers: {\"Content-type\": \"application/json; charset=UTF-8\"},\n          // signal: controllertime.signal,\n          body: JSON.stringify({\n            'ticket_id': this.state.tiket_info['id'],\n          })\n            })\n          .then(res => res.json())\n          .then(data => {\n            if(data.result) {\n              this.getMessages()\n            }else {\n              this.showErrorAlert(data.error.message)\n            }\n          })\n          .catch(err => {\n            this.showErrorAlert('Ошибка запроса. Пожалуйста, попробуйте позже',() => {this.props.this.changeData('activeStory', 'disconnect')})\n  \n          })\n      }\n      sendNewMessageRedact() {\n        this.setPopout(<ScreenSpinner/>)\n        fetch(this.state.api_url + 'method=ticket.editMessage&' + window.location.search.replace('?', ''),\n        {method: 'post',\n          headers: {\"Content-type\": \"application/json; charset=UTF-8\"},\n          // signal: controllertime.signal,\n          body: JSON.stringify({\n            'message_id': this.state.message_id_redac,\n            'text': this.state.tiket_send_message.trim(),\n          })\n            })\n          .then(res => res.json())\n          .then(data => {\n            if(data.result) {\n              this.getMessages()\n            }else {\n              this.showErrorAlert(data.error.message)\n            }\n          })\n          .catch(err => {\n            this.showErrorAlert('Ошибка запроса. Пожалуйста, попробуйте позже',() => {this.props.this.changeData('activeStory', 'disconnect')})\n\n          })\n        \n      }\n      sendNewMessageComment() {\n        this.setPopout(<ScreenSpinner/>)\n        fetch(this.state.api_url + 'method=ticket.commentMessage&message_id=' + window.location.search.replace('?', ''),\n        {method: 'post',\n          headers: {\"Content-type\": \"application/json; charset=UTF-8\"},\n          // signal: controllertime.signal,\n          body: JSON.stringify({\n            'message_id': this.state.message_id_add,\n            'text': this.state.tiket_send_message.trim(),\n          })\n            })\n          .then(res => res.json())\n          .then(data => {\n            if(data.result) {\n              this.getMessages()\n            }else {\n              this.showErrorAlert(data.error.message)\n            }\n          })\n          .catch(err => {\n            this.showErrorAlert('Ошибка запроса. Пожалуйста, попробуйте позже',() => {this.props.this.changeData('activeStory', 'disconnect')})\n\n          })\n      }\n    getMessages(){\n      fetch(this.state.api_url + \"method=ticket.getMessages&ticket_id=\" + this.state.tiket_info['id'] + \"&\" + window.location.search.replace('?', ''))\n      .then(res => res.json())\n      .then(data => {\n        if(data.result) {\n          this.setState({tiket_message: data.response.messages, tiket_send_message: \"\",add_comment: false, redaction: false,limitreach: data.response.limitReach})\n          this.setPopout(null)\n        }else {\n          this.showErrorAlert(data.error.message)\n        }\n      })\n      .catch(err => {\n        this.showErrorAlert('Ошибка запроса. Пожалуйста, попробуйте позже',() => {this.props.this.changeData('activeStory', 'disconnect')})\n\n      })\n    }\n    componentDidMount(){\n      this.setPopout(<ScreenSpinner/>)\n      this.Prepare_ticket()\n    }\n    nofinc(){\n      return 1\n    }\n    render(){\n        var props = this.props;\n        var thisOb = this;\n        return(\n        <Panel id={this.props.id}>\n            <PanelHeader \n                left={<PanelHeaderBack onClick={() => window.history.back()} />}\n            >\n                {this.state.tiket_info ? <span id=\"animation\" className='pointer' onClick={() => this.copy(this.state.tiket_info['id'])}>Вопрос #{this.state.tiket_info['id']}</span> : null}\n            </PanelHeader>\n            {/* MESSAGES */}\n            {this.state.tiket_info ? <>\n            <div className=\"title_tiket\">{new Date(this.state.tiket_info['time'] * 1e3).getDate()} {add_month(this.state.tiket_info['time'])}</div>\n            <div className=\"title_tiket\" style={{marginTop: \"10px\", width: \"95%\", marginLeft: \"10px\"}}>Пользователь обратился с вопросом  «{this.state.tiket_info['title']}»</div>\n                    <>{this.state.tiket_message ? this.state.tiket_message.map(function(result, i) {\n                        var is_mine_ticket = Number(thisOb.state.tiket_info.author['id']) === Number(parsedHash.vk_user_id) ? true : false\n                        var is_mine_message = Number(result['author']['id']) === Number(parsedHash.vk_user_id) ? true : false\n                        var avatar = result.author.is_moderator ? result['author']['avatar']['url'] : result.author.photo_200\n                        var time = fix_time(new Date(result.time * 1e3).getHours()) + \":\" + fix_time(new Date(result.time * 1e3).getMinutes())\n                        var title_moder = isFinite(result['nickname']) ? `Агент Поддержки #${result['nickname']}` : result['nickname'] ? result['nickname'] : `Агент Поддержки #${result['author']['id']}`;\n                        return (\n                            Number(thisOb.state.tiket_info.author['id']) === Number(parsedHash.vk_user_id) ?\n                            <Message \n                                clickable={true}\n                                title={result.author.is_moderator ? title_moder : result.author.first_name + \" \" + result.author.last_name} \n                                title_icon={result.moderator_comment !== undefined ? <Icon16ReplyOutline width={10} height={10} style={{display: \"inline-block\"}}/> : false}\n                                is_mine={is_mine_message === is_mine_ticket}\n                                avatar={avatar}\n                                onClick={() => thisOb.Admin(result['approved'],result['id'], result['author'].first_name ? -result['author']['id'] : result['author']['id'] , result['text'], result.moderator_comment !== undefined ? result['moderator_comment']['text'] : null,avatar, result['mark'])}\n                                key={i}\n                                is_special={thisOb.props.account.special}\n                                is_mark={result.mark}\n                                time={time}\n                                sendRayt_false={() => thisOb.sendRayt(false, result.id)}\n                                sendRayt_true={() => thisOb.sendRayt(true, result.id)}\n                                approved={result.approved ? true : false}\n                                CanselApp={() => props.this.showAlert('Информация', 'Этот ответ оценен отрицательно')}\n                                DoneApp={() => props.this.showAlert('Информация', 'Этот ответ оценен положительно')}\n                            >\n                                {result.text}\n                            </Message>\n                            \n                            :\n                            <Message \n                                clickable={!thisOb.props.account.special ? false : true}\n                                title={result.author.is_moderator ? title_moder : result.author.first_name + \" \" + result.author.last_name} \n                                title_icon={result.moderator_comment !== undefined ? <Icon16ReplyOutline width={10} height={10} style={{display: \"inline-block\"}}/> : false}\n                                is_mine={result.author.is_moderator}\n                                avatar={avatar}\n                                key={i}\n                                time={time}\n                                onClick={() => thisOb.Admin(result['approved'], result['id'], result['author'].first_name ? -result['author']['id'] : result['author']['id'], result['text'], result.moderator_comment !== undefined ? result['moderator_comment']['text'] : null,avatar, result['mark'])}\n                                is_special={thisOb.props.account.special}\n                                is_mark={result.mark}\n                                sendRayt_false={() => thisOb.sendRayt(false, result.id)}\n                                sendRayt_true={() => thisOb.sendRayt(true, result.id)}\n                                approved={result.approved ? true : false}\n                                CanselApp={() => props.this.showAlert('Информация', 'Этот ответ оценен отрицательно')}\n                                DoneApp={() => props.this.showAlert('Информация', 'Этот ответ оценен положительно')}\n                            >\n                                {result.text}\n                            </Message>\n                        )}) : null}\n                        {!((this.state.tiket_info['status'] === 1) || (this.state.tiket_info['status'] === 2)) ? <div style={{marginBottom: '20vh'}}></div> : <div style={{marginBottom: '5vh'}}></div>}\n                      </>\n            {/* INPUT */}\n            {this.state.tiket_info['status'] === 0 || (this.state.redaction === true || this.state.add_comment === true) ? \n                (this.state.limitreach && !(this.state.redaction || this.state.add_comment)) ? \n                <FixedLayout filled vertical='bottom'>\n                  <Div>\n                    <FormStatus header='Внимание!' mode='default'>\n                      Вы исчерпали лимит сообщений в этот тикет.\n                    </FormStatus>\n                  </Div>\n                </FixedLayout> :\n                <FixedLayout vertical='bottom'>\n                  <Separator wide />\n                    <WriteBar\n                      after={\n                        <>\n                          <WriteBarIcon mode={this.state.redaction ? 'done' : \"send\"}\n                          disabled={!(this.state.tiket_send_message.trim().length >= 5)}\n                          onClick={() => {(this.state.tiket_send_message.trim().length >= 5) ? this.state.redaction !== true && this.state.add_comment !== true ? this.sendNewMessage() : this.state.redaction ? this.sendNewMessageRedact() : this.sendNewMessageComment() : this.nofinc()}}\n                          />\n                          {/* {<WriteBarIcon><Icon20Clear width={34} height={34} /></WriteBarIcon>} */}\n                        </>\n                      }\n                      value={this.state.tiket_send_message}\n                      maxLength=\"2020\"\n                      name=\"tiket_send_message\"\n                      onChange={(e) => this.onChange(e)}\n                      placeholder=\"Сообщение\"\n                    />\n                </FixedLayout>\n                \n                 : null}\n            {this.state.tiket_info['status'] === 1 ? \n                Number(this.state.tiket_info['author']['id']) === Number(parsedHash.vk_user_id) ?\n                    <div>\n                      <FixedLayout vertical=\"bottom\">\n                        <Div style={{display: \"flex\"}}>\n                          <Button size=\"l\" style={{marginRight: \"5%\"}} stretched onClick={() => this.deleteTicket()}>Проблема решена</Button>\n                          <Button size=\"l\" stretched mode=\"secondary\" onClick={() => this.openTicket()}>Проблема не решена</Button>\n                        </Div>\n                      </FixedLayout>\n                        \n                    </div>\n                : null\n            : null}</> : null}\n            </Panel>\n        )\n    }\n};\n"]},"metadata":{},"sourceType":"module"}