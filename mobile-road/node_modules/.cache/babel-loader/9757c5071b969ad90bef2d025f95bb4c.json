{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import bridge from'@vkontakte/vk-bridge';// VK Brige\nimport{Panel,PanelHeader,Button,FixedLayout,Div,ScreenSpinner,ActionSheet,ActionSheetItem,PanelHeaderBack,Textarea}from'@vkontakte/vkui';import Icon24Up from'@vkontakte/icons/dist/24/up';import Icon16ReplyOutline from'@vkontakte/icons/dist/16/reply_outline';import Ninja from'../images/Ninja.webp';import Message from'./message';var platformname=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);var queryString=require('query-string');var parsedHash=queryString.parse(window.location.search.replace('?',''));var months=['января','февраля','марта','апреля','мая','июня','июля','августа','сентября','ноября','декабря'];function fix_time(time){if(time<10){return\"0\"+time;}else{return time;}}function add_month(month){var number_month=new Date(month*1e3).getMonth();return months[number_month-1];}var Ticket=/*#__PURE__*/function(_React$Component){_inherits(Ticket,_React$Component);var _super=_createSuper(Ticket);function Ticket(props){var _this;_classCallCheck(this,Ticket);_this=_super.call(this,props);_this.state={api_url:\"https://xelene.ru/road/php/index.php?\",tiket_info:null,tiket_message:[],tiket_send_message:'',add_comment:false,redaction:false};var propsbi=_this.props.this;_this.setPopout=propsbi.setPopout;_this.showErrorAlert=propsbi.showErrorAlert;_this.setActiveModal=propsbi.setActiveModal;_this.goOtherProfile=propsbi.goOtherProfile;_this.sendRayt=_this.sendRayt.bind(_assertThisInitialized(_this));_this.onChange=function(event){var name=event.currentTarget.name;var value=event.currentTarget.value;_this.setState(_defineProperty({},name,value));};return _this;}_createClass(Ticket,[{key:\"Prepare_ticket\",value:function Prepare_ticket(){var _this2=this;fetch(this.state.api_url+\"method=ticket.getById&ticket_id=\"+this.props.ticket_id+\"&\"+window.location.search.replace('?','')).then(function(res){return res.json();}).then(function(data){if(data.result){_this2.setState({tiket_info:data.response.info,tiket_message:data.response.messages});_this2.setPopout(null);}else{_this2.showErrorAlert(data.error.message);}}).catch(function(err){_this2.showErrorAlert(err);});}},{key:\"sendRayt\",value:function sendRayt(mark,message_id){var _this3=this;var reyt=1;if(mark===true){reyt=1;}else{reyt=0;}if(reyt<2){fetch(this.state.api_url+\"method=ticket.markMessage&message_id=\"+message_id+\"&mark=\"+reyt+\"&\"+window.location.search.replace('?','')).then(function(res){return res.json();}).then(function(data){if(data.result){fetch(_this3.state.api_url+\"method=ticket.getMessages&ticket_id=\"+_this3.state.tiket_info['id']+\"&\"+window.location.search.replace('?','')).then(function(res){return res.json();}).then(function(data){if(data.result){_this3.setState({tiket_message:data.response});_this3.setActiveModal(null);_this3.setPopout(null);}else{_this3.showErrorAlert(data.error.message);}}).catch(function(err){_this3.showErrorAlert(err);});}else{_this3.showErrorAlert(data.error.message);}}).catch(function(err){_this3.showErrorAlert(err);});}}},{key:\"sendClear\",value:function sendClear(id){var _this4=this;this.setPopout(/*#__PURE__*/React.createElement(ScreenSpinner,null));fetch(this.state.api_url+\"method=ticket.approveReply&message_id=\"+id+\"&\"+window.location.search.replace('?','')).then(function(res){return res.json();}).then(function(data){if(data.result){_this4.setPopout(null);}else{_this4.showErrorAlert(data.error.message);}}).catch(function(err){_this4.showErrorAlert(err);});}},{key:\"Admin\",value:function Admin(id,author_id,text,comment){var _this5=this;var avatar=arguments.length>4&&arguments[4]!==undefined?arguments[4]:null;var mark=arguments.length>5&&arguments[5]!==undefined?arguments[5]:-1;if(author_id>0){this.props.this.setPopout(/*#__PURE__*/React.createElement(ActionSheet,{onClose:function onClose(){return _this5.setPopout(null);}},author_id>0?/*#__PURE__*/React.createElement(ActionSheetItem,{autoclose:true,onClick:function onClick(){_this5.setState({tiket_message:[]});_this5.goOtherProfile(author_id);}},\"\\u041F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\"):null,this.props.account.special&&mark!==0&&mark!==1&&author_id>0?/*#__PURE__*/React.createElement(ActionSheetItem,{autoclose:true,onClick:function onClick(){return _this5.sendRayt(true,id);}},\"\\u041E\\u0446\\u0435\\u043D\\u0438\\u0442\\u044C \\u043F\\u043E\\u043B\\u043E\\u0436\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\"):null,this.props.account.special&&mark!==0&&mark!==1&&author_id>0?/*#__PURE__*/React.createElement(ActionSheetItem,{autoclose:true,onClick:function onClick(){return _this5.sendRayt(false,id);}},\"\\u041E\\u0446\\u0435\\u043D\\u0438\\u0442\\u044C \\u043E\\u0442\\u0440\\u0438\\u0446\\u0430\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\"):null,this.props.account.special===true&&author_id>0?/*#__PURE__*/React.createElement(ActionSheetItem,{autoclose:true,onClick:function onClick(){return _this5.sendClear(id);}},\"\\u041E\\u0434\\u043E\\u0431\\u0440\\u0438\\u0442\\u044C\"):null,this.props.account.special===true&&(comment===null||comment===undefined)?/*#__PURE__*/React.createElement(ActionSheetItem,{autoclose:true,onClick:function onClick(){return _this5.setState({add_comment:true,message_id_add:id});}},\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0439\"):null,Number(author_id===this.props.account.id)?/*#__PURE__*/React.createElement(ActionSheetItem,{autoclose:true,onClick:function onClick(){return _this5.setState({redaction:true,message_id_redac:id,tiket_send_message:text});}},\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"):null,comment!==null||comment!==undefined?null:/*#__PURE__*/React.createElement(ActionSheetItem,{autoclose:true,onClick:function onClick(){_this5.props.this.setState({comment:comment});_this5.setActiveModal(\"comment\");}},\"\\u041F\\u0440\\u043E\\u0441\\u043C\\u043E\\u0442\\u0440\\u0435\\u0442\\u044C \\u043A\\u043E\\u043C\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0438\\u0439\"),Number(author_id)===Number(this.props.account.id)||this.props.account.special===true?/*#__PURE__*/React.createElement(ActionSheetItem,{autoclose:true,onClick:function onClick(){return _this5.deleteMessage(id);}},\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0441\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435\"):null,/*#__PURE__*/React.createElement(ActionSheetItem,{autoclose:true,mode:\"cancel\"},\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\")));}else{if(this.state.special){this.props.this.setPopout(/*#__PURE__*/React.createElement(ActionSheet,{onClose:function onClose(){return _this5.setPopout(null);}},this.props.account.special?/*#__PURE__*/React.createElement(ActionSheetItem,{autoclose:true,onClick:function onClick(){_this5.props.this.setState({other_profile:{'id':author_id,'avatar':{'url':avatar}}});_this5.setActiveModal('ban_user');}},\"\\u0417\\u0430\\u0431\\u0430\\u043D\\u0438\\u0442\\u044C \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F\"):null,Number(author_id===this.props.account.id)?/*#__PURE__*/React.createElement(ActionSheetItem,{autoclose:true,onClick:function onClick(){return _this5.setState({redaction:true,message_id_redac:id,tiket_send_message:text});}},\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"):null,/*#__PURE__*/React.createElement(ActionSheetItem,{autoclose:true,mode:\"cancel\"},\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\")));}else{if(Number(author_id===this.props.account.id)){this.props.this.setPopout(/*#__PURE__*/React.createElement(ActionSheet,{onClose:function onClose(){return _this5.setPopout(null);}},Number(author_id===this.props.account.id)?/*#__PURE__*/React.createElement(ActionSheetItem,{autoclose:true,onClick:function onClick(){return _this5.setState({redaction:true,message_id_redac:id,tiket_send_message:text});}},\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"):null,/*#__PURE__*/React.createElement(ActionSheetItem,{autoclose:true,mode:\"cancel\"},\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\")));}}}}},{key:\"copy\",value:function copy(id){var _this6=this;this.props.this.setPopout(/*#__PURE__*/React.createElement(ActionSheet,{onClose:function onClose(){return _this6.setPopout(null);}},Number(this.state.tiket_info['author']['id'])===Number(parsedHash.vk_user_id)?this.state.tiket_info['status']===0||this.state.tiket_info['status']===1?/*#__PURE__*/React.createElement(ActionSheetItem,{autoclose:true,onClick:function onClick(){return _this6.deleteTicket();}},\"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C \\u0442\\u0438\\u043A\\u0435\\u0442\"):/*#__PURE__*/React.createElement(ActionSheetItem,{autoclose:true,onClick:function onClick(){return _this6.openTicket();}},\"\\u041E\\u0442\\u043A\\u0440\\u044B\\u0442\\u044C \\u0442\\u0438\\u043A\\u0435\\u0442\"):this.props.account.special===true?this.state.tiket_info['status']===0||this.state.tiket_info['status']===1?/*#__PURE__*/React.createElement(ActionSheetItem,{autoclose:true,onClick:function onClick(){return _this6.deleteTicket();}},\"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C \\u0442\\u0438\\u043A\\u0435\\u0442\"):/*#__PURE__*/React.createElement(ActionSheetItem,{autoclose:true,onClick:function onClick(){return _this6.openTicket();}},\"\\u041E\\u0442\\u043A\\u0440\\u044B\\u0442\\u044C \\u0442\\u0438\\u043A\\u0435\\u0442\"):null,/*#__PURE__*/React.createElement(ActionSheetItem,{autoclose:true,onClick:function onClick(){return bridge.send(\"VKWebAppCopyText\",{text:\"https://vk.com/app7409818#ticket_id=\"+id});}},\"\\u0421\\u043A\\u043E\\u043F\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u0441\\u0441\\u044B\\u043B\\u043A\\u0443\"),/*#__PURE__*/React.createElement(ActionSheetItem,{autoclose:true,mode:\"cancel\"},\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\")));}},{key:\"sendNewMessage\",value:function sendNewMessage(){var _this7=this;if(this.state.tiket_send_message.length>=5){this.setPopout(/*#__PURE__*/React.createElement(ScreenSpinner,null));var url=this.state.api_url+'method=ticket.sendMessage&'+window.location.search.replace('?','');var method='POST';var async=true;var xhr=new XMLHttpRequest();xhr.open(method,url,async);xhr.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\");xhr.onreadystatechange=function(){if(xhr.status===4)return;if(xhr.status===200){setTimeout(function(){fetch(_this7.state.api_url+\"method=ticket.getMessages&ticket_id=\"+_this7.state.tiket_info['id']+\"&\"+window.location.search.replace('?','')).then(function(res){return res.json();}).then(function(data){if(data.result){_this7.setState({tiket_message:data.response,tiket_send_message:\"\",add_comment:false,redaction:false});_this7.setPopout(null);setTimeout(function(){_this7.setState({tiket_send_message:\".\"});},1000);setTimeout(function(){_this7.setState({tiket_send_message:\"\"});},1000);}else{_this7.showErrorAlert(data.error.message);}}).catch(function(err){_this7.showErrorAlert(err);});},500);}};xhr.send('ticket_id='+this.state.tiket_info['id']+'&text='+encodeURIComponent(this.state.tiket_send_message.trim()));xhr.onerror=function(error){_this7.showErrorAlert(error);};}else{// this.showErrorAlert(\"Текст сообщения должен быть минимум из 5 символов.\")\n}}},{key:\"deleteMessage\",value:function deleteMessage(message_id){var _this8=this;this.setPopout(/*#__PURE__*/React.createElement(ScreenSpinner,null));fetch(this.state.api_url+\"method=ticket.deleteMessage&message_id=\"+message_id+\"&\"+window.location.search.replace('?','')).then(function(res){return res.json();}).then(function(data){if(data.result){fetch(_this8.state.api_url+\"method=ticket.getMessages&ticket_id=\"+_this8.state.tiket_info['id']+\"&\"+window.location.search.replace('?','')).then(function(res){return res.json();}).then(function(data){if(data.result){_this8.setState({tiket_message:data.response});_this8.setPopout(null);}else{_this8.showErrorAlert(data.error.message);}}).catch(function(err){_this8.showErrorAlert(err);});}else{_this8.showErrorAlert(data.error.message);}}).catch(function(err){_this8.showErrorAlert(err);});}},{key:\"deleteTicket\",value:function deleteTicket(){var _this9=this;this.setPopout(/*#__PURE__*/React.createElement(ScreenSpinner,null));fetch(this.state.api_url+\"method=ticket.close&ticket_id=\"+this.state.tiket_info['id']+\"&\"+window.location.search.replace('?','')).then(function(res){return res.json();}).then(function(data){if(data.result){fetch(_this9.state.api_url+\"method=ticket.getById&ticket_id=\"+_this9.state.tiket_info['id']+\"&\"+window.location.search.replace('?','')).then(function(res){return res.json();}).then(function(data){if(data.result){_this9.setState({tiket_info:data.response.info});_this9.setPopout(null);}else{_this9.showErrorAlert(data.error.message);}}).catch(function(err){_this9.showErrorAlert(err);});}else{_this9.showErrorAlert(data.error.message);}}).catch(function(err){_this9.showErrorAlert(err);});}},{key:\"openTicket\",value:function openTicket(){var _this10=this;this.setPopout(/*#__PURE__*/React.createElement(ScreenSpinner,null));fetch(this.state.api_url+\"method=ticket.open&ticket_id=\"+this.state.tiket_info['id']+\"&\"+window.location.search.replace('?','')).then(function(res){return res.json();}).then(function(data){if(data.result){fetch(_this10.state.api_url+\"method=ticket.getById&ticket_id=\"+_this10.state.tiket_info['id']+\"&\"+window.location.search.replace('?','')).then(function(res){return res.json();}).then(function(data){if(data.result){_this10.setState({tiket_info:data.response.info});_this10.setPopout(null);}else{_this10.showErrorAlert(data.error.message);}}).catch(function(err){_this10.showErrorAlert(err);});}else{_this10.showErrorAlert(data.error.message);}}).catch(function(err){_this10.showErrorAlert(err);});}},{key:\"sendNewMessageRedact\",value:function sendNewMessageRedact(){var _this11=this;this.setPopout(/*#__PURE__*/React.createElement(ScreenSpinner,null));if(this.state.tiket_send_message.length>=5){var url=this.state.api_url+'method=ticket.editMessage&'+window.location.search.replace('?','');var method='POST';var async=true;var xhr=new XMLHttpRequest();xhr.open(method,url,async);xhr.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\");xhr.onreadystatechange=function(){if(xhr.status===4)return;if(xhr.status===200){fetch(_this11.state.api_url+\"method=ticket.getMessages&ticket_id=\"+_this11.state.tiket_info['id']+\"&\"+window.location.search.replace('?','')).then(function(res){return res.json();}).then(function(data){if(data.result){_this11.setState({tiket_message:data.response,tiket_send_message:\" \",add_comment:false,redaction:false});_this11.setPopout(null);_this11.setState({tiket_send_message:\"\"});}else{_this11.showErrorAlert(data.error.message);}}).catch(function(err){console.log(err);});}};xhr.send('message_id='+this.state.message_id_redac+'&text='+encodeURIComponent(this.state.tiket_send_message.trim()));xhr.onerror=function(error){_this11.showErrorAlert(error);};}else{this.showErrorAlert(\"Текст сообщения должен быть минимум из 5 символов.\");}}},{key:\"sendNewMessageComment\",value:function sendNewMessageComment(){var _this12=this;this.setPopout(/*#__PURE__*/React.createElement(ScreenSpinner,null));if(this.state.tiket_send_message.length>=5){var url=this.state.api_url+'method=ticket.commentMessage&'+window.location.search.replace('?','');var method='POST';var async=true;var xhr=new XMLHttpRequest();xhr.open(method,url,async);xhr.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\");xhr.onreadystatechange=function(){if(xhr.status===4)return;if(xhr.status===200){fetch(_this12.state.api_url+\"method=ticket.getMessages&ticket_id=\"+_this12.state.tiket_info['id']+\"&\"+window.location.search.replace('?','')).then(function(res){return res.json();}).then(function(data){if(data.result){_this12.setState({tiket_message:data.response,tiket_send_message:\" \",add_comment:false,redaction:false});_this12.setPopout(null);_this12.setState({tiket_send_message:\"\"});}else{_this12.showErrorAlert(data.error.message);}}).catch(function(err){_this12.showErrorAlert(err);});}};xhr.send('message_id='+this.state.message_id_add+'&text='+encodeURIComponent(this.state.tiket_send_message.trim()));xhr.onerror=function(error){_this12.showErrorAlert(error);};}else{this.showErrorAlert(\"Текст сообщения должен быть минимум из 5 символов.\");}}},{key:\"componentDidMount\",value:function componentDidMount(){this.setPopout(/*#__PURE__*/React.createElement(ScreenSpinner,null));this.Prepare_ticket();}},{key:\"nofinc\",value:function nofinc(){return 1;}},{key:\"render\",value:function render(){var _this13=this;var props=this.props;var thisOb=this;return/*#__PURE__*/React.createElement(Panel,{id:this.props.id},/*#__PURE__*/React.createElement(PanelHeader,{left:/*#__PURE__*/React.createElement(PanelHeaderBack,{onClick:function onClick(){return window.history.back();}})},this.state.tiket_info?/*#__PURE__*/React.createElement(\"span\",{id:\"animation\",onClick:function onClick(){return _this13.copy(_this13.state.tiket_info['id']);}},\"\\u0412\\u043E\\u043F\\u0440\\u043E\\u0441 #\",this.state.tiket_info['id']):null),this.state.tiket_info?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"title_tiket\"},new Date(this.state.tiket_info['time']*1e3).getDate(),\" \",add_month(this.state.tiket_info['time'])),/*#__PURE__*/React.createElement(\"div\",{className:\"title_tiket\",style:{marginTop:\"10px\",width:\"95%\",marginLeft:\"10px\"}},\"\\u041F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C \\u043E\\u0431\\u0440\\u0430\\u0442\\u0438\\u043B\\u0441\\u044F \\u0441 \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441\\u043E\\u043C  \\xAB\",this.state.tiket_info['title'],\"\\xBB\"),/*#__PURE__*/React.createElement(React.Fragment,null,this.state.tiket_message?this.state.tiket_message.map(function(result,i){var is_mine_ticket=Number(thisOb.state.tiket_info.author['id'])===Number(parsedHash.vk_user_id)?true:false;var is_mine_message=Number(result['author']['id'])===Number(parsedHash.vk_user_id)?true:false;var avatar=result.author.is_moderator?result['author']['avatar']['url']:result.author.photo_200;var time=fix_time(new Date(result.time*1e3).getHours())+\":\"+fix_time(new Date(result.time*1e3).getMinutes());var title_moder=isFinite(result['nickname'])?\"\\u0410\\u0433\\u0435\\u043D\\u0442 \\u041F\\u043E\\u0434\\u0434\\u0435\\u0440\\u0436\\u043A\\u0438 #\".concat(result['nickname']):result['nickname']?result['nickname']:\"\\u0410\\u0433\\u0435\\u043D\\u0442 \\u041F\\u043E\\u0434\\u0434\\u0435\\u0440\\u0436\\u043A\\u0438 #\".concat(result['author']['id']);return Number(thisOb.state.tiket_info.author['id'])===Number(parsedHash.vk_user_id)?/*#__PURE__*/React.createElement(Message,{title:result.author.id===526444378?\"Витёк\":result.author.is_moderator?title_moder:result.author.first_name+\" \"+result.author.last_name,title_icon:result.moderator_comment!==undefined?/*#__PURE__*/React.createElement(Icon16ReplyOutline,{width:10,height:10,style:{display:\"inline-block\"}}):false,is_mine:is_mine_message===is_mine_ticket,avatar:avatar,onClick:function onClick(){return thisOb.Admin(result['id'],result['author'].first_name?-result['author']['id']:result['author']['id'],result['text'],result.moderator_comment!==undefined?result['moderator_comment']['text']:null,avatar,result['mark']);},key:i,is_special:thisOb.props.account.special,is_mark:result.mark,time:time,sendRayt_false:function sendRayt_false(){return thisOb.sendRayt(false,result.id);},sendRayt_true:function sendRayt_true(){return thisOb.sendRayt(true,result.id);},approved:result.approved?true:false,CanselApp:function CanselApp(){return props.this.showAlert('Информация','Этот ответ оценен отрицательно');},DoneApp:function DoneApp(){return props.this.showAlert('Информация','Этот ответ оценен положительно');}},result.text):/*#__PURE__*/React.createElement(Message,{title:result.author.id===526444378?\"Витёк\":result.author.is_moderator?title_moder:result.author.first_name+\" \"+result.author.last_name,title_icon:result.moderator_comment!==undefined?/*#__PURE__*/React.createElement(Icon16ReplyOutline,{width:10,height:10,style:{display:\"inline-block\"}}):false,is_mine:result.author.is_moderator,avatar:result.author.id===526444378?Ninja:avatar,key:i,time:time,onClick:function onClick(){return thisOb.Admin(result['id'],result['author'].first_name?-result['author']['id']:result['author']['id'],result['text'],result.moderator_comment!==undefined?result['moderator_comment']['text']:null,avatar,result['mark']);},is_special:thisOb.props.account.special,is_mark:result.mark,sendRayt_false:function sendRayt_false(){return thisOb.sendRayt(false,result.id);},sendRayt_true:function sendRayt_true(){return thisOb.sendRayt(true,result.id);},approved:result.approved?true:false,CanselApp:function CanselApp(){return props.this.showAlert('Информация','Этот ответ оценен отрицательно');},DoneApp:function DoneApp(){return props.this.showAlert('Информация','Этот ответ оценен положительно');}},result.text);}):null,!(this.state.tiket_info['status']===1||this.state.tiket_info['status']===2)?/*#__PURE__*/React.createElement(\"div\",{style:{marginBottom:'20vh'}}):/*#__PURE__*/React.createElement(\"div\",{style:{marginBottom:'5vh'}})),this.state.tiket_info['status']===0||this.state.redaction===true||this.state.add_comment===true?/*#__PURE__*/ //  <div id=\"other\" className=\"other\">\n//     <div className=\"down_input_message\">\n//         <textarea maxLength=\"2020\" name=\"tiket_send_message\" value={this.state.tiket_send_message} onChange={(e) => this.onChange(e)} placeholder={this.state.add_comment ? \"Комментарий... (Не менее 6 символов)\" : \"Ответ... (Не менее 6 символов)\"} className=\"textarea\"></textarea>\n//     </div>\n//     <div className=\"send_text\" onClick={() => {(this.state.tiket_send_message.length > 5) ? this.state.redaction !== true && this.state.add_comment !== true ? this.sendNewMessage() : this.state.redaction ? this.sendNewMessageRedact() : this.sendNewMessageComment() : this.nofinc()}}>\n//         <Icon24Up style={{color: (this.state.tiket_send_message.length > 5) ? \"var(--dynamic_green)\" : \"var(--dynamic_orange)\"}} />\n//     </div>\n// </div>\nReact.createElement(FixedLayout,{vertical:\"bottom\"},/*#__PURE__*/React.createElement(Div,{className:\"message_sending\"},/*#__PURE__*/React.createElement(Textarea,{maxLength:\"2020\",value:this.state.tiket_send_message,grow:false,name:\"tiket_send_message\",onChange:function onChange(e){return _this13.onChange(e);},placeholder:this.state.add_comment?\"Ваш комментарий...\":\"Ваше сообщение...\",style:{width:platformname?\"82%\":\"85%\"}}),/*#__PURE__*/React.createElement(\"div\",{className:\"send_text\",onClick:function onClick(){_this13.state.tiket_send_message.trim().length>5?_this13.state.redaction!==true&&_this13.state.add_comment!==true?_this13.sendNewMessage():_this13.state.redaction?_this13.sendNewMessageRedact():_this13.sendNewMessageComment():_this13.nofinc();},style:{background:this.state.tiket_send_message.trim().length>5?\"var(--button_send)\":\"#98A0AD\"}},/*#__PURE__*/React.createElement(Icon24Up,{width:30,height:30})))):null,this.state.tiket_info['status']===1?Number(this.state.tiket_info['author']['id'])===Number(parsedHash.vk_user_id)?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(FixedLayout,{vertical:\"bottom\"},/*#__PURE__*/React.createElement(Div,{style:{display:\"flex\"}},/*#__PURE__*/React.createElement(Button,{size:\"l\",style:{marginRight:\"5%\"},stretched:true,onClick:function onClick(){return _this13.deleteTicket();}},\"\\u041F\\u0440\\u043E\\u0431\\u043B\\u0435\\u043C\\u0430 \\u0440\\u0435\\u0448\\u0435\\u043D\\u0430\"),/*#__PURE__*/React.createElement(Button,{size:\"l\",stretched:true,mode:\"secondary\",onClick:function onClick(){return _this13.openTicket();}},\"\\u041F\\u0440\\u043E\\u0431\\u043B\\u0435\\u043C\\u0430 \\u043D\\u0435 \\u0440\\u0435\\u0448\\u0435\\u043D\\u0430\")))):null:null):null);}}]);return Ticket;}(React.Component);export{Ticket as default};;","map":{"version":3,"sources":["C:/Users/rshub/Desktop/Road-to-Jedi/mobile-road/src/components/tiket.js"],"names":["React","bridge","Panel","PanelHeader","Button","FixedLayout","Div","ScreenSpinner","ActionSheet","ActionSheetItem","PanelHeaderBack","Textarea","Icon24Up","Icon16ReplyOutline","Ninja","Message","platformname","test","navigator","userAgent","queryString","require","parsedHash","parse","window","location","search","replace","months","fix_time","time","add_month","month","number_month","Date","getMonth","Ticket","props","state","api_url","tiket_info","tiket_message","tiket_send_message","add_comment","redaction","propsbi","this","setPopout","showErrorAlert","setActiveModal","goOtherProfile","sendRayt","bind","onChange","event","name","currentTarget","value","setState","fetch","ticket_id","then","res","json","data","result","response","info","messages","error","message","catch","err","mark","message_id","reyt","id","author_id","text","comment","avatar","account","special","sendClear","undefined","message_id_add","Number","message_id_redac","deleteMessage","other_profile","vk_user_id","deleteTicket","openTicket","send","length","url","method","async","xhr","XMLHttpRequest","open","setRequestHeader","onreadystatechange","status","setTimeout","encodeURIComponent","trim","onerror","console","log","Prepare_ticket","thisOb","history","back","copy","getDate","marginTop","width","marginLeft","map","i","is_mine_ticket","author","is_mine_message","is_moderator","photo_200","getHours","getMinutes","title_moder","isFinite","first_name","last_name","moderator_comment","display","Admin","approved","showAlert","marginBottom","e","sendNewMessage","sendNewMessageRedact","sendNewMessageComment","nofinc","background","marginRight","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport bridge from '@vkontakte/vk-bridge'; // VK Brige\n\nimport { \n    Panel,\n    PanelHeader,\n    Button,\n    FixedLayout,\n    Div,\n    ScreenSpinner,\n    ActionSheet,\n    ActionSheetItem,\n    PanelHeaderBack,\n    Textarea,\n    } from '@vkontakte/vkui';\n\nimport Icon24Up from '@vkontakte/icons/dist/24/up';\nimport Icon16ReplyOutline from '@vkontakte/icons/dist/16/reply_outline';\nimport Ninja from '../images/Ninja.webp'\n\nimport Message from './message'\nconst platformname = (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));\nconst queryString = require('query-string');\nconst parsedHash = queryString.parse(window.location.search.replace('?', ''));\n\nvar months = [\n    'января',\n    'февраля',\n    'марта',\n    'апреля',\n    'мая',\n    'июня',\n    'июля',\n    'августа',\n    'сентября',\n    'ноября',\n    'декабря',\n];\n\nfunction fix_time(time) {\n    if(time < 10) {\n        return \"0\" + time\n    } else {\n        return time\n    }\n}\n\nfunction add_month(month) {\n    let number_month = new Date(month * 1e3).getMonth()\n    return months[number_month - 1]\n}\n\nexport default class Ticket extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            api_url: \"https://xelene.ru/road/php/index.php?\",\n            tiket_info: null,\n            tiket_message: [],\n            tiket_send_message: '',\n            add_comment: false,\n            redaction: false,\n            \n\n\n        }\n        var propsbi = this.props.this;\n        this.setPopout = propsbi.setPopout;\n        this.showErrorAlert = propsbi.showErrorAlert;\n        this.setActiveModal = propsbi.setActiveModal;\n        this.goOtherProfile = propsbi.goOtherProfile;\n        this.sendRayt = this.sendRayt.bind(this);\n        this.onChange = (event) => {\n          var name = event.currentTarget.name;\n          var value = event.currentTarget.value;\n          this.setState({ [name]: value });\n        }\n\n    }\n    Prepare_ticket(){\n        fetch(this.state.api_url + \"method=ticket.getById&ticket_id=\" + this.props.ticket_id + \"&\" + window.location.search.replace('?', ''))\n        .then(res => res.json())\n        .then(data => {\n          if(data.result) {\n            this.setState({tiket_info: data.response.info,\n              tiket_message: data.response.messages });\n              this.setPopout(null);\n          } else {\n            this.showErrorAlert(data.error.message)\n          }\n        })\n        .catch(err => {\n          this.showErrorAlert(err)\n\n        })\n    }\n    sendRayt(mark, message_id) {\n        let reyt = 1;\n        if(mark === true) {\n          reyt = 1;\n        } else {\n          reyt = 0;\n        }\n        if(reyt < 2) {\n          fetch(this.state.api_url + \"method=ticket.markMessage&message_id=\" + message_id + \"&mark=\" + reyt + \"&\" + window.location.search.replace('?', ''))\n            .then(res => res.json())\n            .then(data => {\n              if(data.result) {\n          \n                fetch(this.state.api_url + \"method=ticket.getMessages&ticket_id=\" + this.state.tiket_info['id'] + \"&\" + window.location.search.replace('?', ''))\n                  .then(res => res.json())\n                  .then(data => {\n                    if(data.result) {\n                      this.setState({tiket_message: data.response})\n                      this.setActiveModal(null);\n                      this.setPopout(null);\n                    }else {\n                      this.showErrorAlert(data.error.message)\n                    }\n                    })\n                    .catch(err => {\n                      this.showErrorAlert(err)\n                    })\n              }else {\n                this.showErrorAlert(data.error.message)\n              }\n            })\n            .catch(err => {\n                this.showErrorAlert(err)\n            \n            })\n        }\n      }\n      sendClear(id) {\n        this.setPopout(<ScreenSpinner/>)\n        fetch(this.state.api_url + \"method=ticket.approveReply&message_id=\" + id + \"&\" + window.location.search.replace('?', ''))\n          .then(res => res.json())\n          .then(data => {\n            if(data.result) {\n              this.setPopout(null)\n            } else {\n              this.showErrorAlert(data.error.message)\n            }\n          })\n          .catch(err => {\n            this.showErrorAlert(err)\n    \n          })\n      }\n      Admin(id, author_id, text, comment,avatar=null, mark = -1){\n        if(author_id > 0){\n          this.props.this.setPopout(\n            <ActionSheet onClose={() => this.setPopout(null)}>\n               {author_id > 0 ?\n              <ActionSheetItem autoclose onClick={() => {this.setState({tiket_message: []});this.goOtherProfile(author_id);}}>\n                Профиль\n              </ActionSheetItem>\n              : null}\n             { this.props.account.special && mark !== 0 && mark !== 1 && author_id > 0 ? \n              <ActionSheetItem autoclose onClick={() => this.sendRayt(true, id)}>\n                Оценить положительно\n              </ActionSheetItem> \n              : null}\n              { this.props.account.special && mark !== 0 && mark !== 1 && author_id > 0 ? \n              <ActionSheetItem autoclose onClick={() => this.sendRayt(false, id)}>\n                Оценить отрицательно\n              </ActionSheetItem> \n              : null }\n              { this.props.account.special === true && author_id > 0 ? \n              <ActionSheetItem autoclose onClick={() => this.sendClear(id)}>\n                Одобрить\n              </ActionSheetItem> \n              : null }\n              {(this.props.account.special === true && (comment === null || comment === undefined)) ? \n              <ActionSheetItem autoclose onClick={() => this.setState({add_comment: true, message_id_add: id})}>\n              Добавить комментарий\n              </ActionSheetItem> \n              : null }\n              {Number(author_id === this.props.account.id) ? \n             <ActionSheetItem autoclose onClick={() => this.setState({redaction: true, message_id_redac: id, tiket_send_message: text})}>\n             Редактировать\n             </ActionSheetItem>\n             : null}\n          {(comment !== null || comment !== undefined) ? null : \n              <ActionSheetItem autoclose onClick={() => {this.props.this.setState({comment: comment}); this.setActiveModal(\"comment\")}}>\n              Просмотреть комментарий\n            </ActionSheetItem>}\n              {Number(author_id) === Number(this.props.account.id) || this.props.account.special === true ? \n              <ActionSheetItem autoclose onClick={() => this.deleteMessage(id)}>\n                Удалить сообщение\n              </ActionSheetItem>\n              : null}\n              {<ActionSheetItem autoclose mode=\"cancel\">Отменить</ActionSheetItem>}\n            </ActionSheet>\n          )\n        }else{\n          if(this.state.special){\n            this.props.this.setPopout(\n              <ActionSheet onClose={() => this.setPopout(null)}>\n                { (this.props.account.special) ? \n                <ActionSheetItem autoclose onClick={() => {this.props.this.setState({other_profile:{'id':author_id,'avatar': {'url': avatar}}});this.setActiveModal('ban_user');}}>\n                  Забанить пользователя\n                </ActionSheetItem> \n                : null }\n                {Number(author_id === this.props.account.id) ? \n               <ActionSheetItem autoclose onClick={() => this.setState({redaction: true, message_id_redac: id, tiket_send_message: text})}>\n               Редактировать\n               </ActionSheetItem>\n               : null}\n              {<ActionSheetItem autoclose mode=\"cancel\">Отменить</ActionSheetItem>}\n              </ActionSheet>\n            )\n          }else{\n            if(Number(author_id === this.props.account.id)){\n              this.props.this.setPopout(\n                <ActionSheet onClose={() => this.setPopout(null)}>\n                  {Number(author_id === this.props.account.id) ? \n                 <ActionSheetItem autoclose onClick={() => this.setState({redaction: true, message_id_redac: id, tiket_send_message: text})}>\n                 Редактировать\n                 </ActionSheetItem>\n                 : null}\n                {<ActionSheetItem autoclose mode=\"cancel\">Отменить</ActionSheetItem>}\n                </ActionSheet>\n              )\n            }\n            \n          }\n          \n        }\n        \n      }\n      copy(id) {\n        this.props.this.setPopout(\n          <ActionSheet onClose={() => this.setPopout(null)}>\n            {Number(this.state.tiket_info['author']['id']) === Number(parsedHash.vk_user_id) ? \n            this.state.tiket_info['status'] === 0 ||  this.state.tiket_info['status'] === 1 ?\n            <ActionSheetItem autoclose onClick={() => this.deleteTicket()}>\n            Закрыть тикет\n            </ActionSheetItem>\n            : \n            <ActionSheetItem autoclose onClick={() => this.openTicket()}>\n            Открыть тикет\n            </ActionSheetItem>\n            : \n            this.props.account.special === true ?\n            this.state.tiket_info['status'] === 0 ||  this.state.tiket_info['status'] === 1 ?\n            <ActionSheetItem autoclose onClick={() => this.deleteTicket()}>\n            Закрыть тикет\n            </ActionSheetItem>\n            : \n            <ActionSheetItem autoclose onClick={() => this.openTicket()}>\n            Открыть тикет\n            </ActionSheetItem>\n            : null\n          }\n            <ActionSheetItem autoclose onClick={() => bridge.send(\"VKWebAppCopyText\", {text: \"https://vk.com/app7409818#ticket_id=\" + id})}>\n              Скопировать ссылку\n            </ActionSheetItem>\n            {<ActionSheetItem autoclose mode=\"cancel\">Отменить</ActionSheetItem>}\n          </ActionSheet>)\n      }\n      sendNewMessage() {\n        if(this.state.tiket_send_message.length >= 5) {\n          this.setPopout(<ScreenSpinner/>)\n          var url = this.state.api_url + 'method=ticket.sendMessage&' + window.location.search.replace('?', '');\n          var method = 'POST';\n          var async = true;\n      \n          var xhr = new XMLHttpRequest();\n          xhr.open( method, url, async );\n          xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n      \n          xhr.onreadystatechange = () => {\n            if(xhr.status === 4) return;\n            if ( xhr.status === 200 ) {\n              setTimeout(() => {\n                fetch(this.state.api_url + \"method=ticket.getMessages&ticket_id=\" + this.state.tiket_info['id'] + \"&\" + window.location.search.replace('?', ''))\n                .then(res => res.json())\n                .then(data => {\n                  if(data.result) {\n                    this.setState({tiket_message: data.response, tiket_send_message: \"\",add_comment: false, redaction: false})\n                    this.setPopout(null)\n                    setTimeout(() => {\n                      this.setState({tiket_send_message: \".\"})\n                    }, 1000)\n                    setTimeout(() => {\n                      this.setState({tiket_send_message: \"\"})\n                    }, 1000)\n                  }else {\n                    this.showErrorAlert(data.error.message)\n                  }\n                })\n                .catch(err => {\n                  this.showErrorAlert(err)\n    \n                })\n              }, 500)\n              \n            }\n          }\n          \n          xhr.send( 'ticket_id=' + this.state.tiket_info['id'] + '&text=' + encodeURIComponent(this.state.tiket_send_message.trim()));\n      \n          xhr.onerror = ( error ) => {\n            this.showErrorAlert(error)\n          }\n        } else {\n            // this.showErrorAlert(\"Текст сообщения должен быть минимум из 5 символов.\")\n        }\n      }\n      deleteMessage(message_id) {\n        this.setPopout(<ScreenSpinner/>)\n          fetch(this.state.api_url + \"method=ticket.deleteMessage&message_id=\" + message_id + \"&\" + window.location.search.replace('?', ''))\n            .then(res => res.json())\n            .then(data => {\n              if(data.result) {\n                fetch(this.state.api_url + \"method=ticket.getMessages&ticket_id=\" + this.state.tiket_info['id'] + \"&\" + window.location.search.replace('?', ''))\n                  .then(res => res.json())\n                  .then(data => {\n                    if(data.result) {\n                      this.setState({tiket_message: data.response})\n                      this.setPopout(null)\n                    }else {\n                      this.showErrorAlert(data.error.message)\n                    }\n                  })\n                  .catch(err => {\n                    this.showErrorAlert(err)\n          \n                  })\n              }else {\n                this.showErrorAlert(data.error.message)\n              }\n            })\n            .catch(err => {\n                this.showErrorAlert(err)\n  \n            })\n      }\n      deleteTicket() {\n        this.setPopout(<ScreenSpinner/>)\n        fetch(this.state.api_url + \"method=ticket.close&ticket_id=\" + this.state.tiket_info['id'] + \"&\" + window.location.search.replace('?', ''))\n          .then(res => res.json())\n          .then(data => {\n            if(data.result) {\n              fetch(this.state.api_url + \"method=ticket.getById&ticket_id=\" + this.state.tiket_info['id'] + \"&\" + window.location.search.replace('?', ''))\n              .then(res => res.json())\n               .then(data => {\n              if(data.result) {\n                this.setState({tiket_info: data.response.info})\n                this.setPopout(null)\n              }else {\n                this.showErrorAlert(data.error.message)\n              }\n              })\n              .catch(err => {\n                this.showErrorAlert(err)\n      \n              })\n            }else {\n              this.showErrorAlert(data.error.message)\n            }\n          })\n          .catch(err => {\n            this.showErrorAlert(err)\n  \n          })\n      }\n      openTicket() {\n        this.setPopout(<ScreenSpinner/>)\n        fetch(this.state.api_url + \"method=ticket.open&ticket_id=\" + this.state.tiket_info['id'] + \"&\" + window.location.search.replace('?', ''))\n          .then(res => res.json())\n          .then(data => {\n            if(data.result) {\n              fetch(this.state.api_url + \"method=ticket.getById&ticket_id=\" + this.state.tiket_info['id'] + \"&\" + window.location.search.replace('?', ''))\n              .then(res => res.json())\n               .then(data => {\n              if(data.result) {\n                this.setState({tiket_info: data.response.info})\n                this.setPopout(null)\n              }else {\n                this.showErrorAlert(data.error.message)\n              }\n            })\n          .catch(err => {\n            this.showErrorAlert(err)\n  \n          })\n            }else {\n              this.showErrorAlert(data.error.message)\n            }\n          })\n          .catch(err => {\n            this.showErrorAlert(err)\n  \n          })\n      }\n      sendNewMessageRedact() {\n        this.setPopout(<ScreenSpinner/>)\n        if(this.state.tiket_send_message.length >= 5) {\n          var url = this.state.api_url + 'method=ticket.editMessage&' + window.location.search.replace('?', '');\n          var method = 'POST';\n          var async = true;\n      \n          var xhr = new XMLHttpRequest();\n          xhr.open( method, url, async );\n          xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n      \n          xhr.onreadystatechange = () => {\n            if(xhr.status === 4) return;\n            if ( xhr.status === 200 ) {\n              fetch(this.state.api_url + \"method=ticket.getMessages&ticket_id=\" + this.state.tiket_info['id'] + \"&\" + window.location.search.replace('?', ''))\n              .then(res => res.json())\n              .then(data => {\n                if(data.result) {\n                  this.setState({tiket_message: data.response, tiket_send_message: \" \", add_comment: false, redaction: false})\n                  this.setPopout(null)\n                  this.setState({tiket_send_message: \"\"})\n                }else {\n                  this.showErrorAlert(data.error.message)\n                }\n              })\n              .catch(err => {\n                console.log(err)\n              })\n            }\n          }\n          \n          xhr.send('message_id=' + this.state.message_id_redac + '&text=' + encodeURIComponent(this.state.tiket_send_message.trim()));\n      \n          xhr.onerror = ( error ) => {\n            this.showErrorAlert(error)\n          }\n        } else {\n            this.showErrorAlert(\"Текст сообщения должен быть минимум из 5 символов.\")\n        }\n      }\n      sendNewMessageComment() {\n        this.setPopout(<ScreenSpinner/>)\n        if(this.state.tiket_send_message.length >= 5) {\n          var url = this.state.api_url + 'method=ticket.commentMessage&' + window.location.search.replace('?', '');\n          var method = 'POST';\n          var async = true;\n      \n          var xhr = new XMLHttpRequest();\n          xhr.open( method, url, async );\n          xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\n      \n          xhr.onreadystatechange = () => {\n            if(xhr.status === 4) return;\n            if ( xhr.status === 200 ) {\n              fetch(this.state.api_url + \"method=ticket.getMessages&ticket_id=\" + this.state.tiket_info['id'] + \"&\" + window.location.search.replace('?', ''))\n              .then(res => res.json())\n              .then(data => {\n                if(data.result) {\n                  this.setState({tiket_message: data.response, tiket_send_message: \" \",add_comment: false, redaction: false})\n                  this.setPopout(null)\n                  this.setState({tiket_send_message: \"\"})\n                }else{\n                  this.showErrorAlert(data.error.message)\n                }\n              })\n              .catch(err => {\n                this.showErrorAlert(err)\n  \n              })\n            }\n          }\n          xhr.send('message_id=' + this.state.message_id_add + '&text=' + encodeURIComponent(this.state.tiket_send_message.trim()));\n      \n          xhr.onerror = ( error ) => {\n            this.showErrorAlert(error)\n          }\n        } else {\n          this.showErrorAlert(\"Текст сообщения должен быть минимум из 5 символов.\")\n        }\n      }\n    componentDidMount(){\n      this.setPopout(<ScreenSpinner/>)\n      this.Prepare_ticket()\n    }\n    nofinc(){\n      return 1\n    }\n    render(){\n        var props = this.props;\n        var thisOb = this;\n        return(\n        <Panel id={this.props.id}>\n            <PanelHeader \n                left={<PanelHeaderBack onClick={() => window.history.back()} />}\n            >\n                {this.state.tiket_info ? <span id=\"animation\" onClick={() => this.copy(this.state.tiket_info['id'])}>Вопрос #{this.state.tiket_info['id']}</span> : null}\n            </PanelHeader>\n            {/* MESSAGES */}\n            {this.state.tiket_info ? <>\n            <div className=\"title_tiket\">{new Date(this.state.tiket_info['time'] * 1e3).getDate()} {add_month(this.state.tiket_info['time'])}</div>\n            <div className=\"title_tiket\" style={{marginTop: \"10px\", width: \"95%\", marginLeft: \"10px\"}}>Пользователь обратился с вопросом  «{this.state.tiket_info['title']}»</div>\n                    <>{this.state.tiket_message ? this.state.tiket_message.map(function(result, i) {\n                        var is_mine_ticket = Number(thisOb.state.tiket_info.author['id']) === Number(parsedHash.vk_user_id) ? true : false\n\n\n                        var is_mine_message = Number(result['author']['id']) === Number(parsedHash.vk_user_id) ? true : false\n                        var avatar = result.author.is_moderator ? result['author']['avatar']['url'] : result.author.photo_200\n                        var time = fix_time(new Date(result.time * 1e3).getHours()) + \":\" + fix_time(new Date(result.time * 1e3).getMinutes())\n                        var title_moder = isFinite(result['nickname']) ? `Агент Поддержки #${result['nickname']}` : result['nickname'] ? result['nickname'] : `Агент Поддержки #${result['author']['id']}`;\n                        return (\n                            Number(thisOb.state.tiket_info.author['id']) === Number(parsedHash.vk_user_id) ?\n                            <Message \n                                title={result.author.id === 526444378 ? \"Витёк\" : result.author.is_moderator ? title_moder : result.author.first_name + \" \" + result.author.last_name} \n                                title_icon={result.moderator_comment !== undefined ? <Icon16ReplyOutline width={10} height={10} style={{display: \"inline-block\"}}/> : false}\n                                is_mine={is_mine_message === is_mine_ticket}\n                                avatar={avatar}\n                                onClick={() => thisOb.Admin(result['id'], result['author'].first_name ? -result['author']['id'] : result['author']['id'] , result['text'], result.moderator_comment !== undefined ? result['moderator_comment']['text'] : null,avatar, result['mark'])}\n                                key={i}\n                                is_special={thisOb.props.account.special}\n                                is_mark={result.mark}\n                                time={time}\n                                sendRayt_false={() => thisOb.sendRayt(false, result.id)}\n                                sendRayt_true={() => thisOb.sendRayt(true, result.id)}\n                                approved={result.approved ? true : false}\n                                CanselApp={() => props.this.showAlert('Информация', 'Этот ответ оценен отрицательно')}\n                                DoneApp={() => props.this.showAlert('Информация', 'Этот ответ оценен положительно')}\n                            >\n                                {result.text}\n                            </Message>\n                            \n                            :\n                            <Message \n                                title={result.author.id === 526444378 ? \"Витёк\" : result.author.is_moderator ? title_moder : result.author.first_name + \" \" + result.author.last_name} \n                                title_icon={result.moderator_comment !== undefined ? <Icon16ReplyOutline width={10} height={10} style={{display: \"inline-block\"}}/> : false}\n                                is_mine={result.author.is_moderator}\n                                avatar={result.author.id === 526444378 ? Ninja : avatar}\n                                key={i}\n                                time={time}\n                                onClick={() => thisOb.Admin(result['id'], result['author'].first_name ? -result['author']['id'] : result['author']['id'], result['text'], result.moderator_comment !== undefined ? result['moderator_comment']['text'] : null,avatar, result['mark'])}\n                                is_special={thisOb.props.account.special}\n                                is_mark={result.mark}\n                                sendRayt_false={() => thisOb.sendRayt(false, result.id)}\n                                sendRayt_true={() => thisOb.sendRayt(true, result.id)}\n                                approved={result.approved ? true : false}\n                                CanselApp={() => props.this.showAlert('Информация', 'Этот ответ оценен отрицательно')}\n                                DoneApp={() => props.this.showAlert('Информация', 'Этот ответ оценен положительно')}\n                            >\n                                {result.text}\n                            </Message>\n                        )}) : null}\n                        {!((this.state.tiket_info['status'] === 1) || (this.state.tiket_info['status'] === 2)) ? <div style={{marginBottom: '20vh'}}></div> : <div style={{marginBottom: '5vh'}}></div>}\n                      </>\n            {/* INPUT */}\n            {this.state.tiket_info['status'] === 0 || (this.state.redaction === true || this.state.add_comment === true) ? \n                //  <div id=\"other\" className=\"other\">\n                //     <div className=\"down_input_message\">\n                //         <textarea maxLength=\"2020\" name=\"tiket_send_message\" value={this.state.tiket_send_message} onChange={(e) => this.onChange(e)} placeholder={this.state.add_comment ? \"Комментарий... (Не менее 6 символов)\" : \"Ответ... (Не менее 6 символов)\"} className=\"textarea\"></textarea>\n                //     </div>\n                //     <div className=\"send_text\" onClick={() => {(this.state.tiket_send_message.length > 5) ? this.state.redaction !== true && this.state.add_comment !== true ? this.sendNewMessage() : this.state.redaction ? this.sendNewMessageRedact() : this.sendNewMessageComment() : this.nofinc()}}>\n                //         <Icon24Up style={{color: (this.state.tiket_send_message.length > 5) ? \"var(--dynamic_green)\" : \"var(--dynamic_orange)\"}} />\n                //     </div>\n                // </div>\n                <FixedLayout vertical='bottom'>\n                  <Div className=\"message_sending\">\n                  <Textarea \n                    maxLength=\"2020\" \n                    value={this.state.tiket_send_message}\n                    grow={false}\n                    name=\"tiket_send_message\"\n                    onChange={(e) => this.onChange(e)} \n                    placeholder={this.state.add_comment ? \"Ваш комментарий...\" : \"Ваше сообщение...\"}\n                    style={{width: platformname ? \"82%\" : \"85%\"}}></Textarea>\n                    {/* <textarea maxLength=\"2020\" \n                    name=\"tiket_send_message\" \n                    value={this.state.tiket_send_message} \n                    onChange={(e) => this.onChange(e)} \n                    placeholder={this.state.add_comment ? \"Ваш комментарий...\" : \"Ваше сообщение...\"} \n                    className=\"textarea\"\n                    style={{width: platformname ? '80%' : '85%'}}></textarea> */}\n                    <div className=\"send_text\"\n                    onClick={() => {(this.state.tiket_send_message.trim().length > 5) ? this.state.redaction !== true && this.state.add_comment !== true ? this.sendNewMessage() : this.state.redaction ? this.sendNewMessageRedact() : this.sendNewMessageComment() : this.nofinc()}}\n                    style={{background: (this.state.tiket_send_message.trim().length > 5) ? \"var(--button_send)\" : \"#98A0AD\"}} >\n                        <Icon24Up width={30} height={30} />\n                    </div>\n                  </Div>\n                </FixedLayout>\n                \n                 : null}\n            {this.state.tiket_info['status'] === 1 ? \n                Number(this.state.tiket_info['author']['id']) === Number(parsedHash.vk_user_id) ?\n                    <div>\n                      <FixedLayout vertical=\"bottom\">\n                        <Div style={{display: \"flex\"}}>\n                          <Button size=\"l\" style={{marginRight: \"5%\"}} stretched onClick={() => this.deleteTicket()}>Проблема решена</Button>\n                          <Button size=\"l\" stretched mode=\"secondary\" onClick={() => this.openTicket()}>Проблема не решена</Button>\n                        </Div>\n                      </FixedLayout>\n                        \n                    </div>\n                : null\n            : null}</> : null}\n            </Panel>\n        )\n    }\n};\n"]},"metadata":{},"sourceType":"module"}