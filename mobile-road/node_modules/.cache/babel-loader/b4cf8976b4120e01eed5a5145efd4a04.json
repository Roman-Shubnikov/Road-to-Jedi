{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import bridge from'@vkontakte/vk-bridge';// VK Brige\nimport{Panel,PanelHeader,SimpleCell,PanelHeaderBack,Div,FormLayout,FormLayoutGroup,Input,Textarea,Checkbox,Button,FormStatus,Link,Placeholder,FixedLayout,ScreenSpinner}from'@vkontakte/vkui';import Icon28SmartphoneOutline from'@vkontakte/icons/dist/28/smartphone_outline';import VerfIcon from'../../../images/verfload.png';// const platformname = (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));\nvar Verfy=/*#__PURE__*/function(_React$Component){_inherits(Verfy,_React$Component);var _super=_createSuper(Verfy);function Verfy(props){var _this;_classCallCheck(this,Verfy);_this=_super.call(this,props);_this.state={api_url:\"https://xelene.ru/road/php/index.php?\",check1:false,check2:false,title:'',description:'',number:'',numberstatus:true,sign_number:'',verfstatus:-1};var propsbi=_this.props.this;_this.setPopout=propsbi.setPopout;_this.showErrorAlert=propsbi.showErrorAlert;_this.showAlert=propsbi.showAlert;_this.setActiveModal=propsbi.setActiveModal;_this.onChange=function(event){var name=event.currentTarget.name;var value=event.currentTarget.value;_this.setState(_defineProperty({},name,value));};return _this;}_createClass(Verfy,[{key:\"handleForm\",value:function handleForm(){var _this2=this;this.setPopout(/*#__PURE__*/React.createElement(ScreenSpinner,null));fetch(this.state.api_url+\"method=account.sendRequestVerf&title=\"+this.state.title+\"&description=\"+this.state.description+\"&phone_number=\"+this.state.number+\"&phone_sign=\"+this.state.sign_number+\"&cond1=1&cond2=1&\"+window.location.search.replace('?','')).then(function(res){return res.json();}).then(function(data){if(data.result){_this2.checkVerfStatus();}else{_this2.showErrorAlert(data.error.message);}}).catch(function(err){_this2.showErrorAlert(err);});}},{key:\"checkVerfStatus\",value:function checkVerfStatus(){var _this3=this;fetch(this.state.api_url+\"method=account.getVerfStatus&\"+window.location.search.replace('?','')).then(function(res){return res.json();}).then(function(data){if(data.result){_this3.setState({verfstatus:data.response});_this3.setPopout(null);}else{_this3.showErrorAlert(data.error.message);}}).catch(function(err){_this3.showErrorAlert(err);});}},{key:\"componentDidMount\",value:function componentDidMount(){this.setPopout(/*#__PURE__*/React.createElement(ScreenSpinner,null));this.checkVerfStatus();}},{key:\"render\",value:function render(){var _this4=this;// var props = this.props.this;\nreturn/*#__PURE__*/React.createElement(Panel,{id:this.props.id},/*#__PURE__*/React.createElement(PanelHeader,{left:/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(PanelHeaderBack,{onClick:function onClick(){return window.history.back();}}))},\"\\u0412\\u0435\\u0440\\u0438\\u0444\\u0438\\u043A\\u0430\\u0446\\u0438\\u044F\"),this.state.verfstatus!==-1?this.state.verfstatus===2?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Placeholder,{icon:/*#__PURE__*/React.createElement(\"img\",{src:VerfIcon,alt:\"\\u041E\\u0436\\u0438\\u0434\\u0430\\u0439\\u0442\\u0435 \\u0440\\u0430\\u0441\\u0441\\u043C\\u043E\\u0442\\u0440\\u0435\\u043D\\u0438\\u044F\"}),header:\"\\u0412\\u044B \\u043E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u043B\\u0438 \\u0437\\u0430\\u044F\\u0432\\u043A\\u0443 \\u043D\\u0430 \\u0432\\u0435\\u0440\\u0438\\u0444\\u0438\\u043A\\u0430\\u0446\\u0438\\u044E\"},\"\\u0412\\u044B \\u043E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u043B\\u0438 \\u0437\\u0430\\u044F\\u0432\\u043A\\u0443 \\u043D\\u0430 \\u0432\\u0435\\u0440\\u0438\\u0444\\u0438\\u043A\\u0430\\u0446\\u0438\\u044E, \\u043F\\u043E \\u043E\\u043A\\u043E\\u043D\\u0447\\u0430\\u043D\\u0438\\u044E \\u043F\\u0440\\u043E\\u0432\\u0435\\u0440\\u043A\\u0438 \\u2014 \\u0412\\u0430\\u043C \\u043F\\u043E\\u0437\\u0432\\u043E\\u043D\\u0438\\u0442 \\u043D\\u0430\\u0448 \\u0441\\u043E\\u0442\\u0440\\u0443\\u0434\\u043D\\u0438\\u043A \\u0438 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0438\\u0442 \\u0440\\u0435\\u0437\\u0443\\u043B\\u044C\\u0442\\u0430\\u0442\\u044B \\u043E \\u043E\\u0444\\u0438\\u0446\\u0438\\u0430\\u043B\\u044C\\u043D\\u043E\\u043C \\u0441\\u0442\\u0430\\u0442\\u0443\\u0441\\u0435.\",/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),\"\\u0410\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u0430 \\u043D\\u0435 \\u0441\\u043E\\u043E\\u0431\\u0449\\u0430\\u0435\\u0442 \\u043E \\u0440\\u0430\\u0441\\u0441\\u043C\\u043E\\u0442\\u0440\\u0435\\u043D\\u0438\\u0438 \\u0432\\u0435\\u0440\\u0438\\u0444\\u0438\\u043A\\u0430\\u0446\\u0438\\u0438.\"),/*#__PURE__*/React.createElement(FixedLayout,{vertical:\"bottom\"},/*#__PURE__*/React.createElement(Div,null,/*#__PURE__*/React.createElement(Button,{size:\"xl\",onClick:function onClick(){window.history.back();}},\"\\u0412\\u0435\\u0440\\u043D\\u0443\\u0442\\u044C\\u0441\\u044F \\u043A \\u043D\\u0430\\u0441\\u0442\\u0440\\u043E\\u0439\\u043A\\u0430\\u043C\")))):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(FormLayout,null,this.state.numberstatus?null:/*#__PURE__*/React.createElement(FormStatus,{header:\"\\u041D\\u0435\\u043A\\u043E\\u0440\\u0440\\u0435\\u043A\\u0442\\u043D\\u043E\\u0435 \\u0437\\u0430\\u043F\\u043E\\u043B\\u043D\\u0435\\u043D\\u0438\\u0435 \\u0444\\u043E\\u0440\\u043C\\u044B\",mode:\"error\"},\"\\u0412\\u044B \\u0434\\u043E\\u043B\\u0436\\u043D\\u044B \\u0443\\u043A\\u0430\\u0437\\u0430\\u0442\\u044C \\u043D\\u043E\\u043C\\u0435\\u0440 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u0430. \\u0415\\u0441\\u043B\\u0438 \\u044D\\u0442\\u043E\\u0433\\u043E \\u043D\\u0435 \\u0441\\u0434\\u0435\\u043B\\u0430\\u0442\\u044C, \\u0442\\u043E \\u043F\\u0440\\u043E\\u0439\\u0442\\u0438 \\u043F\\u0440\\u043E\\u0446\\u0435\\u0434\\u0443\\u0440\\u0443 \\u0432\\u0435\\u0440\\u0435\\u0444\\u0438\\u043A\\u0430\\u0446\\u0438\\u0438 \\u043D\\u0435 \\u043F\\u043E\\u043B\\u0443\\u0447\\u0438\\u0442\\u0441\\u044F\"),/*#__PURE__*/React.createElement(FormLayoutGroup,{top:\"\\u041E\\u0431\\u0449\\u0430\\u044F \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F\"},/*#__PURE__*/React.createElement(Input,{onChange:this.onChange,name:\"title\",placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0441\\u0432\\u043E\\u0439 \\u0442\\u0435\\u043A\\u0441\\u0442...\"})),/*#__PURE__*/React.createElement(FormLayoutGroup,{top:\"\\u041F\\u043E\\u0447\\u0435\\u043C\\u0443 \\u0432\\u044B \\u0440\\u0435\\u0448\\u0438\\u043B\\u0438 \\u0432\\u0435\\u0440\\u0438\\u0444\\u0438\\u0446\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\"},/*#__PURE__*/React.createElement(Textarea,{name:\"description\",onChange:this.onChange,placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0441\\u0432\\u043E\\u0439 \\u0442\\u0435\\u043A\\u0441\\u0442...\"})),/*#__PURE__*/React.createElement(SimpleCell,{description:\"\\u041D\\u0430\\u0436\\u043C\\u0438\\u0442\\u0435 \\u0447\\u0442\\u043E\\u0431\\u044B \\u0443\\u043A\\u0430\\u0437\\u0430\\u0442\\u044C \\u043D\\u043E\\u043C\\u0435\\u0440 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u0430\",onClick:function onClick(){return bridge.send(\"VKWebAppGetPhoneNumber\",{}).then(function(data){_this4.setState({number:data.phone_number,sign_number:data.sign,numberstatus:true});}).catch(function(error){_this4.setState({numberstatus:false});});},before:/*#__PURE__*/React.createElement(Icon28SmartphoneOutline,null)},\"\\u0412\\u0430\\u0448 \\u043D\\u043E\\u043C\\u0435\\u0440 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u0430\"),this.state.number?/*#__PURE__*/React.createElement(Input,{top:\"\\u0412\\u0430\\u0448 \\u043D\\u043E\\u043C\\u0435\\u0440\",disabled:true,value:this.state.number}):null,/*#__PURE__*/React.createElement(Checkbox,{checked:this.state.check1,onChange:function onChange(){return _this4.state.check1?_this4.setState({check1:false}):_this4.setState({check1:true});}},\"\\u0421\\u043E\\u0433\\u043B\\u0430\\u0441\\u0435\\u043D \\u0441 \",/*#__PURE__*/React.createElement(Link,{href:\"https://vk.com/@jedi_road-chto-takoe-verifikaciya-i-kak-ee-poluchit-galochku\",target:\"_blank\",rel:\"noopener noreferrer\"},\"\\u043F\\u0440\\u0430\\u0432\\u0438\\u043B\\u0430\\u043C\\u0438\"),\" \\u0432\\u0435\\u0440\\u0438\\u0444\\u0438\\u043A\\u0430\\u0446\\u0438\\u0438\"),/*#__PURE__*/React.createElement(Checkbox,{checked:this.state.check2,onChange:function onChange(){return _this4.state.check2?_this4.setState({check2:false}):_this4.setState({check2:true});}},\"\\u0413\\u043E\\u0442\\u043E\\u0432 \\u043A \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u043D\\u043E\\u043C\\u0443 \\u0440\\u0430\\u0437\\u0433\\u043E\\u0432\\u043E\\u0440\\u0443 \\u0441 \\u043C\\u043E\\u0434\\u0435\\u0440\\u0430\\u0442\\u043E\\u0440\\u043E\\u043C \\u043E\\u0442\\u0434\\u0435\\u043B\\u0430 \\u0432\\u0435\\u0440\\u0438\\u0444\\u0438\\u043A\\u0430\\u0446\\u0438\\u0438\")),/*#__PURE__*/React.createElement(Div,null,/*#__PURE__*/React.createElement(Button,{size:\"xl\",stretched:true,disabled:!this.state.check1||!this.state.check2||!this.state.title||!this.state.description||!this.state.number,onClick:function onClick(){return _this4.handleForm();}},\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u043D\\u0430 \\u0440\\u0430\\u0441\\u0441\\u043C\\u043E\\u0442\\u0440\\u0435\\u043D\\u0438\\u0435\"))):null,this.props.this.state.snackbar);}}]);return Verfy;}(React.Component);export{Verfy as default};","map":{"version":3,"sources":["C:/Users/rshub/Desktop/Road-to-Jedi/mobile-road/src/panels/Profile/panels/verfy.js"],"names":["React","bridge","Panel","PanelHeader","SimpleCell","PanelHeaderBack","Div","FormLayout","FormLayoutGroup","Input","Textarea","Checkbox","Button","FormStatus","Link","Placeholder","FixedLayout","ScreenSpinner","Icon28SmartphoneOutline","VerfIcon","Verfy","props","state","api_url","check1","check2","title","description","number","numberstatus","sign_number","verfstatus","propsbi","this","setPopout","showErrorAlert","showAlert","setActiveModal","onChange","event","name","currentTarget","value","setState","fetch","window","location","search","replace","then","res","json","data","result","checkVerfStatus","error","message","catch","err","response","id","history","back","send","phone_number","sign","handleForm","snackbar","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport bridge from '@vkontakte/vk-bridge'; // VK Brige\n\n\nimport { \n    Panel,\n    PanelHeader,\n    SimpleCell,\n    PanelHeaderBack,\n    Div,\n    FormLayout,\n    FormLayoutGroup,\n    Input,\n    Textarea,\n    Checkbox,\n    Button,\n    FormStatus,\n    Link,\n    Placeholder,\n    FixedLayout,\n    ScreenSpinner,\n\n    } from '@vkontakte/vkui';\n\nimport Icon28SmartphoneOutline from '@vkontakte/icons/dist/28/smartphone_outline';\nimport VerfIcon from '../../../images/verfload.png';\n\n// const platformname = (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));\n\n\nexport default class Verfy extends React.Component{\n    constructor(props){\n        super(props)\n        this.state = {\n            api_url: \"https://xelene.ru/road/php/index.php?\",\n            check1: false,\n            check2: false,\n            title: '',\n            description: '',\n            number: '',\n            numberstatus: true,\n            sign_number: '',\n            verfstatus: -1,\n\n        }\n        var propsbi = this.props.this;\n        this.setPopout = propsbi.setPopout;\n        this.showErrorAlert = propsbi.showErrorAlert;\n        this.showAlert = propsbi.showAlert;\n        this.setActiveModal = propsbi.setActiveModal;\n        this.onChange = (event) => {\n            var name = event.currentTarget.name;\n            var value = event.currentTarget.value;\n            this.setState({ [name]: value });\n        }\n    }\n    handleForm(){\n      this.setPopout(<ScreenSpinner />);\n      fetch(this.state.api_url + \n      \"method=account.sendRequestVerf&title=\" + this.state.title + \n      \"&description=\" + this.state.description + \n      \"&phone_number=\" + this.state.number + \n      \"&phone_sign=\" + this.state.sign_number + \n      \"&cond1=1&cond2=1&\" + window.location.search.replace('?', ''))\n      .then(res => res.json())\n      .then(data => {\n      if(data.result) {\n        this.checkVerfStatus()\n      }else{\n          this.showErrorAlert(data.error.message)\n      }\n      })\n      .catch(err => {\n          this.showErrorAlert(err)\n\n      })\n\n    }\n    checkVerfStatus(){\n      fetch(this.state.api_url + \n        \"method=account.getVerfStatus&\" + window.location.search.replace('?', ''))\n        .then(res => res.json())\n        .then(data => {\n        if(data.result) {\n          this.setState({verfstatus: data.response})\n          this.setPopout(null);\n        }else{\n            this.showErrorAlert(data.error.message)\n        }\n        })\n        .catch(err => {\n            this.showErrorAlert(err)\n\n        })\n    }\n    componentDidMount(){\n      this.setPopout(<ScreenSpinner />);\n      this.checkVerfStatus();\n    }\n\n    render() {\n        // var props = this.props.this;\n        return(\n            <Panel id={this.props.id}>\n                <PanelHeader \n                    left={<>\n                    <PanelHeaderBack onClick={() => window.history.back()}></PanelHeaderBack>\n                    </>}>\n                    Верификация\n                </PanelHeader>\n                {(this.state.verfstatus !== -1) ? (this.state.verfstatus === 2) ? <><Placeholder \n                icon={<img src={VerfIcon} alt='Ожидайте рассмотрения' />}\n                header='Вы отправили заявку на верификацию'>Вы отправили заявку на верификацию, по\n                                                              окончанию проверки — Вам позвонит наш\n                                                              сотрудник и сообщит результаты о\n                                                              официальном статусе.<br /><br />\n                                                              Администрация проекта не сообщает о\n                                                              рассмотрении верификации.</Placeholder>\n                <FixedLayout vertical='bottom'>\n                  <Div>\n                    <Button size=\"xl\" onClick={() => {window.history.back()}}>Вернуться к настройкам</Button>\n                  </Div>\n                </FixedLayout>\n                \n                                                              </> : <>\n                <FormLayout>\n                  {this.state.numberstatus ? null : <FormStatus header='Некорректное заполнение формы' mode='error'>\n                    Вы должны указать номер телефона. Если этого не сделать, то пройти процедуру верефикации не получится\n                  </FormStatus>}\n                  <FormLayoutGroup top=\"Общая информация\" >\n                    <Input \n                    onChange={this.onChange}\n                    name='title'\n                    placeholder='Введите свой текст...' />\n                  </FormLayoutGroup>\n                  <FormLayoutGroup top=\"Почему вы решили верифицировать профиль\">\n                    <Textarea \n                    name='description'\n                    onChange={this.onChange}\n                    placeholder='Введите свой текст...' />\n                  </FormLayoutGroup>\n                  <SimpleCell\n                  description=\"Нажмите чтобы указать номер телефона\"\n                  onClick={() => bridge.send(\"VKWebAppGetPhoneNumber\", {})\n                  .then(data => {\n                    this.setState({number: data.phone_number, sign_number: data.sign, numberstatus: true})\n                  })\n                  .catch(error => {\n                    this.setState({numberstatus: false})\n                  })}\n                  before={<Icon28SmartphoneOutline/>}>Ваш номер телефона</SimpleCell>\n                  {this.state.number ? <Input\n                  top='Ваш номер'\n                  disabled\n                  value={this.state.number} /> : null}\n                  <Checkbox checked={this.state.check1} onChange={() => this.state.check1 ? this.setState({check1: false}) : this.setState({check1: true})}>\n                    Согласен с <Link \n                    href='https://vk.com/@jedi_road-chto-takoe-verifikaciya-i-kak-ee-poluchit-galochku'\n                    target=\"_blank\" rel=\"noopener noreferrer\">\n                    правилами\n                      </Link> верификации\n                  </Checkbox>\n                  <Checkbox checked={this.state.check2} onChange={() => this.state.check2 ? this.setState({check2: false}) : this.setState({check2: true})}>\n                    Готов к телефонному разговору с модератором отдела верификации\n                  </Checkbox>\n                </FormLayout>\n                <Div>\n                  <Button \n                  size='xl' \n                  stretched\n                  disabled={\n                    !this.state.check1 || \n                    !this.state.check2 || \n                    !this.state.title ||\n                    !this.state.description ||\n                    !this.state.number\n                  }\n                  onClick={() => this.handleForm()}\n                  >Отправить на рассмотрение</Button>\n                </Div></>: null}\n                {this.props.this.state.snackbar}\n            </Panel>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}