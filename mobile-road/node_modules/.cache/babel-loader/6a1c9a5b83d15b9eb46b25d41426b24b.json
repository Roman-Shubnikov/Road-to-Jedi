{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import bridge from'@vkontakte/vk-bridge';// VK Brige\nimport{Panel,PanelHeader,Group,Div,FormStatus,Avatar,Separator,Counter,SimpleCell,Cell,ScreenSpinner,ActionSheet,ActionSheetItem,PanelHeaderBack}from'@vkontakte/vkui';import Icon28RecentOutline from'@vkontakte/icons/dist/28/recent_outline';import Icon24DoNotDisturb from'@vkontakte/icons/dist/24/do_not_disturb';import Icon28CheckCircleOutline from'@vkontakte/icons/dist/28/check_circle_outline';import Icon16Fire from'@vkontakte/icons/dist/16/fire';import Icon16Verified from'@vkontakte/icons/dist/16/verified';import Icon16StarCircleFillYellow from'@vkontakte/icons/dist/16/star_circle_fill_yellow';function fix_time(time){if(time<10){return\"0\"+time;}else{return time;}}var Reader=/*#__PURE__*/function(_React$Component){_inherits(Reader,_React$Component);var _super=_createSuper(Reader);function Reader(props){var _this;_classCallCheck(this,Reader);_this=_super.call(this,props);_this.state={api_url:\"https://xelene.ru/road/php/index.php?\",other_profile:null};var propsbi=_this.props.this;_this.setPopout=propsbi.setPopout;_this.showErrorAlert=propsbi.showErrorAlert;_this.setActiveModal=propsbi.setActiveModal;return _this;}_createClass(Reader,[{key:\"PrepareProfile\",value:function PrepareProfile(){var _this2=this;var is_change=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;fetch(this.state.api_url+\"method=user.getById&id=\"+this.props.agent_id+\"&\"+window.location.search.replace('?','')).then(function(res){return res.json();}).then(function(data){if(data.result){_this2.setState({other_profile:data.response});_this2.setPopout(null);}else{_this2.showErrorAlert(data.error.message,function(){window.history.back();_this2.props.this.setPopout(null);});}}).catch(function(err){_this2.showErrorAlert(err,function(){return window.history.back();});});}},{key:\"Prom\",value:function Prom(id){var _this3=this;var give=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;this.setState({popout:/*#__PURE__*/React.createElement(ScreenSpinner,null)});fetch(this.state.api_url+\"method=account.Flash&agent_id=\"+id+'&give='+Number(give)+\"&\"+window.location.search.replace('?','')).then(function(res){return res.json();}).then(function(data){if(data.result){var prof=_this3.state.other_profile;if(give){prof['flash']=true;}else{prof['flash']=false;}_this3.setState({other_profile:prof});}else{_this3.showErrorAlert(data.error.message);}}).catch(function(err){_this3.showErrorAlert(err);});}},{key:\"copy\",value:function copy(id,prometey){var _this4=this;this.setPopout(/*#__PURE__*/React.createElement(ActionSheet,{onClose:function onClose(){return _this4.setPopout(null);}},this.props.account.special?/*#__PURE__*/React.createElement(ActionSheetItem,{autoclose:true,onClick:prometey?function(){return _this4.Prom(id,false);}:function(){return _this4.Prom(id);}},prometey?'Забрать прометей':'Выдать прометей'):null,this.props.account.special?/*#__PURE__*/React.createElement(ActionSheetItem,{autoclose:true,onClick:function onClick(){_this4.props.this.setState({other_profile:_this4.state.other_profile});_this4.setActiveModal('ban_user');}},\"\\u0417\\u0430\\u0431\\u043B\\u043E\\u043A\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"):null,/*#__PURE__*/React.createElement(ActionSheetItem,{autoclose:true,onClick:function onClick(){bridge.send(\"VKWebAppCopyText\",{text:\"https://vk.com/app7409818#agent_id=\"+id});}},\"\\u0421\\u043A\\u043E\\u043F\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u0441\\u0441\\u044B\\u043B\\u043A\\u0443\"),/*#__PURE__*/React.createElement(ActionSheetItem,{autoclose:true,theme:\"cancel\"},\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\")));}},{key:\"please_Month\",value:function please_Month(text){var month='января';switch(text){case 0:month=\"января\";break;case 1:month=\"февраля\";break;case 2:month=\"марта\";break;case 3:month=\"апреля\";break;case 4:month=\"мая\";break;case 5:month=\"июня\";break;case 6:month=\"июля\";break;case 7:month=\"августа\";break;case 8:month=\"сентября\";break;case 9:month=\"октября\";break;case 10:month=\"ноября\";break;case 11:month=\"декабря\";break;default:month=\"января\";}return month;}},{key:\"componentDidMount\",value:function componentDidMount(){this.setPopout(/*#__PURE__*/React.createElement(ScreenSpinner,null));this.PrepareProfile();// console.log(queryString.parse(window.location.hash))\n}},{key:\"render\",value:function render(){var _this5=this;var props=this.props.this;// для более удобного использования.\nreturn/*#__PURE__*/React.createElement(Panel,{id:this.props.id},/*#__PURE__*/React.createElement(PanelHeader,{left:/*#__PURE__*/React.createElement(PanelHeaderBack,{onClick:function onClick(){return window.history.back();}})},/*#__PURE__*/React.createElement(\"span\",{className:\"pointer\",onClick:function onClick(){return _this5.copy(_this5.state.other_profile['id'],_this5.state.other_profile['flash']);}},\"\\u041F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\")),this.state.other_profile?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Cell,{description:/*#__PURE__*/React.createElement(\"div\",{className:\"description_other_profile\"},this.state.other_profile['online']['is_online']===true?\"online\":new Date(this.state.other_profile['online']['last_seen']*1e3).getDate()+\" \"+this.please_Month(new Date(this.state.other_profile['online']['last_seen']*1e3).getMonth())+\" \"+new Date(this.state.other_profile['online']['last_seen']*1e3).getFullYear()+\" в \"+fix_time(new Date(this.state.other_profile['online']['last_seen']*1e3).getHours())+\":\"+fix_time(new Date(this.state.other_profile['online']['last_seen']*1e3).getMinutes())),size:\"l\",before:/*#__PURE__*/React.createElement(Avatar,{src:this.state.other_profile['avatar']['url'],size:70})},/*#__PURE__*/React.createElement(\"div\",{className:\"title_profile\"},isFinite(this.state.other_profile['nickname'])?\"\\u0410\\u0433\\u0435\\u043D\\u0442 \\u041F\\u043E\\u0434\\u0434\\u0435\\u0440\\u0436\\u043A\\u0438 #\".concat(this.state.other_profile['nickname']):this.state.other_profile['nickname']?this.state.other_profile['nickname']:\"\\u0410\\u0433\\u0435\\u043D\\u0442 \\u041F\\u043E\\u0434\\u0434\\u0435\\u0440\\u0436\\u043A\\u0438 #\".concat(this.state.other_profile['id']),this.state.other_profile['flash']===true?/*#__PURE__*/React.createElement(\"div\",{className:\"profile_moderator_name_icon\"},/*#__PURE__*/React.createElement(Icon16Fire,{width:12,height:12,style:{color:\"var(--prom_icon)\"},onClick:function onClick(){return props.setActiveModal('prom');}})):null,this.state.other_profile['donut']===true?/*#__PURE__*/React.createElement(\"div\",{className:\"profile_moderator_name_icon\"},/*#__PURE__*/React.createElement(Icon16StarCircleFillYellow,{width:12,height:12,onClick:function onClick(){return props.setActiveModal('donut');}})):null,this.state.other_profile['verified']===true?/*#__PURE__*/React.createElement(\"div\",{className:\"profile_moderator_name_icon\"},/*#__PURE__*/React.createElement(Icon16Verified,{width:12,height:12,style:{color:\"var(--dynamic_blue)\"}})):null)),/*#__PURE__*/React.createElement(Separator,null),this.state.other_profile['nickname']==='Специальный Агент'||this.state.other_profile['banned']?/*#__PURE__*/React.createElement(\"div\",{style:{marginTop:\"20px\"},className:\"help_title_profile\"},this.state.other_profile['banned']?'Этот профиль забанен':'Вы не можете просматривать этот профиль'):/*#__PURE__*/React.createElement(Group,null,/*#__PURE__*/React.createElement(SimpleCell,{disabled:true,before:/*#__PURE__*/React.createElement(Icon28RecentOutline,null),indicator:new Date(this.state.other_profile.registered*1e3).getDate()+\" \"+this.please_Month(new Date(this.state.other_profile['registered']*1e3).getMonth())+\" \"+new Date(this.state.other_profile.registered*1e3).getFullYear()},\"\\u0414\\u0430\\u0442\\u0430 \\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u0438\"),/*#__PURE__*/React.createElement(SimpleCell,{disabled:true,before:/*#__PURE__*/React.createElement(Icon28CheckCircleOutline,null),indicator:/*#__PURE__*/React.createElement(Counter,{mode:\"primary\"},this.state.other_profile['good_answers'])},\"\\u041F\\u043E\\u043B\\u043E\\u0436\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u044B\\u0435 \\u043E\\u0442\\u0432\\u0435\\u0442\\u044B\"),/*#__PURE__*/React.createElement(SimpleCell,{disabled:true,before:/*#__PURE__*/React.createElement(Icon24DoNotDisturb,{width:28,height:28}),indicator:/*#__PURE__*/React.createElement(Counter,{mode:\"primary\"},this.state.other_profile['bad_answers'])},\"\\u041E\\u0442\\u0440\\u0438\\u0446\\u0430\\u0442\\u0435\\u043B\\u044C\\u043D\\u044B\\u0445 \\u043E\\u0442\\u0432\\u0435\\u0442\\u043E\\u0432\")),/*#__PURE__*/React.createElement(Separator,null),/*#__PURE__*/React.createElement(Div,null,/*#__PURE__*/React.createElement(FormStatus,{header:\"\\u0412\\u043D\\u0438\\u043C\\u0430\\u043D\\u0438\\u0435! \\u0412\\u0430\\u0436\\u043D\\u0430\\u044F \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F\",mode:\"default\"},\"\\u0421\\u0435\\u0440\\u0432\\u0438\\u0441 \\u043D\\u0435 \\u0438\\u043C\\u0435\\u0435\\u0442 \\u043E\\u0442\\u043D\\u043E\\u0448\\u0435\\u043D\\u0438\\u044F \\u043A \\u0410\\u0434\\u043C\\u0438\\u043D\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u0438 \\u0412\\u041A\\u043E\\u043D\\u0442\\u0430\\u043A\\u0442\\u0435, \\u0430 \\u0442\\u0430\\u043A\\u0436\\u0435 \\u0438\\u0445 \\u0440\\u0430\\u0437\\u0440\\u0430\\u0431\\u043E\\u0442\\u043A\\u0430\\u043C.\"))):null);}}]);return Reader;}(React.Component);export default Reader;","map":{"version":3,"sources":["C:/Users/rshub/Desktop/Road-to-Jedi/mobile-road/src/components/other_profile.js"],"names":["React","bridge","Panel","PanelHeader","Group","Div","FormStatus","Avatar","Separator","Counter","SimpleCell","Cell","ScreenSpinner","ActionSheet","ActionSheetItem","PanelHeaderBack","Icon28RecentOutline","Icon24DoNotDisturb","Icon28CheckCircleOutline","Icon16Fire","Icon16Verified","Icon16StarCircleFillYellow","fix_time","time","Reader","props","state","api_url","other_profile","propsbi","this","setPopout","showErrorAlert","setActiveModal","is_change","fetch","agent_id","window","location","search","replace","then","res","json","data","result","setState","response","error","message","history","back","catch","err","id","give","popout","Number","prof","prometey","account","special","Prom","send","text","month","PrepareProfile","copy","Date","getDate","please_Month","getMonth","getFullYear","getHours","getMinutes","isFinite","color","marginTop","registered","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport bridge from '@vkontakte/vk-bridge'; // VK Brige\n\nimport { \n    Panel,\n    PanelHeader,\n    Group,\n    Div,\n    FormStatus,\n    Avatar,\n    Separator,\n    Counter,\n    SimpleCell,\n    Cell,\n    ScreenSpinner,\n    ActionSheet,\n    ActionSheetItem,\n    PanelHeaderBack,\n    } from '@vkontakte/vkui';\n\nimport Icon28RecentOutline from '@vkontakte/icons/dist/28/recent_outline';\nimport Icon24DoNotDisturb from '@vkontakte/icons/dist/24/do_not_disturb';\nimport Icon28CheckCircleOutline from '@vkontakte/icons/dist/28/check_circle_outline';\nimport Icon16Fire from '@vkontakte/icons/dist/16/fire';\nimport Icon16Verified from '@vkontakte/icons/dist/16/verified';\nimport Icon16StarCircleFillYellow from '@vkontakte/icons/dist/16/star_circle_fill_yellow';\n\nfunction fix_time(time) {\n    if(time < 10) {\n        return \"0\" + time\n    } else {\n        return time\n    }\n  }\n    class Reader extends React.Component {\n        constructor(props) {\n            super(props);\n            this.state = {\n                api_url: \"https://xelene.ru/road/php/index.php?\",\n                other_profile: null\n            }\n            var propsbi = this.props.this;\n            this.setPopout = propsbi.setPopout;\n            this.showErrorAlert = propsbi.showErrorAlert;\n            this.setActiveModal = propsbi.setActiveModal;\n        }\n        PrepareProfile(is_change=false){\n            fetch(this.state.api_url + \"method=user.getById&id=\" + this.props.agent_id + \"&\" + window.location.search.replace('?', ''))\n            .then(res => res.json())\n            .then(data => {\n              if(data.result) {\n                this.setState({other_profile: data.response})\n                this.setPopout(null)\n              }else {\n                this.showErrorAlert(data.error.message, () => {window.history.back();this.props.this.setPopout(null)})\n              }\n            })\n            .catch(err => {\n              this.showErrorAlert(err, () => window.history.back())\n    \n            })\n        }\n        Prom(id, give=true) {\n            this.setState({popout: <ScreenSpinner/>})\n            fetch(this.state.api_url + \"method=account.Flash&agent_id=\" + id + '&give=' + Number(give) + \"&\" + window.location.search.replace('?', ''))\n              .then(res => res.json())\n              .then(data => {\n                if(data.result) {\n                    let prof = this.state.other_profile;\n                    if(give){\n                        prof['flash'] = true;\n                    } else {\n                        prof['flash'] = false;\n                    }\n                    this.setState({other_profile: prof})\n                }else {\n                    this.showErrorAlert(data.error.message)\n                  }\n              })\n              .catch(err => {\n                this.showErrorAlert(err)\n              })\n          }\n        copy(id, prometey) {\n            this.setPopout(\n              <ActionSheet onClose={() => this.setPopout(null)}>\n                {this.props.account.special ? \n                 <ActionSheetItem autoclose onClick={prometey ? () => this.Prom(id, false) : () => this.Prom(id)}>\n                  {prometey ? 'Забрать прометей' : 'Выдать прометей'}\n                </ActionSheetItem>\n                : null }\n                {this.props.account.special ? \n                 <ActionSheetItem autoclose onClick={() => {this.props.this.setState({other_profile:this.state.other_profile});this.setActiveModal('ban_user');}}>\n                  Заблокировать\n                </ActionSheetItem>\n                : null }\n                <ActionSheetItem autoclose onClick={() => {bridge.send(\"VKWebAppCopyText\", {text: \"https://vk.com/app7409818#agent_id=\" + id})}}>\n                  Скопировать ссылку\n                </ActionSheetItem>\n                {<ActionSheetItem autoclose theme=\"cancel\">Отменить</ActionSheetItem>}\n              </ActionSheet>)\n          }\n        \n        please_Month(text) {\n            let month = 'января'\n            switch(text) {\n               case 0:\n                 month = \"января\"\n               break;\n               case 1:\n                   month = \"февраля\"\n               break;\n               case 2:\n                   month= \"марта\"\n               break;\n               case 3:\n                   month= \"апреля\"\n               break;\n               case 4:\n                   month= \"мая\"\n               break;\n               case 5:\n                   month= \"июня\"\n               break;\n               case 6:\n                   month= \"июля\"\n               break;\n               case 7:\n                   month= \"августа\"\n               break;\n               case 8:\n                   month= \"сентября\"\n               break;\n               case 9:\n                   month= \"октября\"\n               break;\n               case 10:\n                   month= \"ноября\"\n               break;\n               case 11:\n                   month= \"декабря\"\n               break;\n               default: \n                month = \"января\"\n            }\n            return month\n         }\n        componentDidMount(){\n            this.setPopout(<ScreenSpinner/>);\n            this.PrepareProfile();\n            // console.log(queryString.parse(window.location.hash))\n        }\n\n        render() {\n            var props = this.props.this; // для более удобного использования.\n            return (\n                <Panel id={this.props.id}>\n                <PanelHeader \n                    left={\n                        <PanelHeaderBack onClick={() => window.history.back()}></PanelHeaderBack>\n                    }>\n                        <span className='pointer' onClick={() => this.copy(this.state.other_profile['id'], this.state.other_profile['flash'])}>Профиль</span>\n                </PanelHeader>\n                \n                {this.state.other_profile ? <>\n                <Cell\n                  description={\n                      <div className=\"description_other_profile\">\n                     {this.state.other_profile['online']['is_online'] === true ? \"online\" : new Date(this.state.other_profile['online']['last_seen'] * 1e3).getDate() + \" \" + this.please_Month(new Date(this.state.other_profile['online']['last_seen'] * 1e3).getMonth()) + \" \"  + new Date(this.state.other_profile['online']['last_seen'] * 1e3).getFullYear() + \" в \" \n                  + fix_time(new Date(this.state.other_profile['online']['last_seen'] * 1e3).getHours()) + \":\" + fix_time(new Date(this.state.other_profile['online']['last_seen'] * 1e3).getMinutes())}\n                  </div>\n                }\n                  size=\"l\"\n                  before={<Avatar src={this.state.other_profile['avatar']['url']} size={70}/>}\n                >\n                  <div className=\"title_profile\">\n                  {isFinite(this.state.other_profile['nickname']) ? `Агент Поддержки #${this.state.other_profile['nickname']}` : this.state.other_profile['nickname'] ? this.state.other_profile['nickname'] : `Агент Поддержки #${this.state.other_profile['id']}`}\n                    {this.state.other_profile['flash'] === true ? \n                    <div className=\"profile_moderator_name_icon\">\n                        <Icon16Fire width={12} height={12} style={{color: \"var(--prom_icon)\"}} onClick={() => props.setActiveModal('prom')} />  \n                    </div>\n                    : null}\n                    {this.state.other_profile['donut'] === true ?\n                    <div className=\"profile_moderator_name_icon\">\n                        <Icon16StarCircleFillYellow width={12} height={12} onClick={() => props.setActiveModal('donut')} />  \n                    </div>\n                    : null}\n                    {this.state.other_profile['verified'] === true ?\n                    <div className=\"profile_moderator_name_icon\">\n                        <Icon16Verified width={12} height={12} style={{color: \"var(--dynamic_blue)\"}} />  \n                    </div>\n                    : null}\n                  </div>\n                  </Cell>\n                  <Separator />\n                  {this.state.other_profile['nickname'] === 'Специальный Агент' || this.state.other_profile['banned'] ? <div style={{marginTop: \"20px\"}} className=\"help_title_profile\">{this.state.other_profile['banned'] ? 'Этот профиль забанен' : 'Вы не можете просматривать этот профиль'}</div> :\n                    <Group>\n                    <SimpleCell \n                        disabled\n                        before={<Icon28RecentOutline />}\n                        indicator={new Date(this.state.other_profile.registered * 1e3).getDate() + \" \" + this.please_Month(new Date(this.state.other_profile['registered'] * 1e3).getMonth()) + \" \" + new Date(this.state.other_profile.registered * 1e3).getFullYear()}>\n                            Дата регистрации\n                    </SimpleCell>\n                    {/* <SimpleCell \n                        disabled\n                        before={<Icon28InfoOutline />}\n                        indicator={<Counter mode='primary'>{this.state.other_profile['total_answers']}</Counter>}>\n                            Всего ответов\n                    </SimpleCell> */}\n                    <SimpleCell \n                        disabled\n                        before={<Icon28CheckCircleOutline />}\n                        indicator={<Counter mode='primary'>{this.state.other_profile['good_answers']}</Counter>}>\n                            Положительные ответы\n                    </SimpleCell>\n                    <SimpleCell \n                        disabled\n                        before={<Icon24DoNotDisturb width={28} height={28} />}\n                        indicator={<Counter mode='primary'>{this.state.other_profile['bad_answers']}</Counter>}>\n                            Отрицательных ответов\n                    </SimpleCell>\n                </Group>}\n                <Separator />\n                <Div>\n                    <FormStatus header=\"Внимание! Важная информация\" mode=\"default\">\n                    Сервис не имеет отношения к Администрации ВКонтакте, а также их разработкам.\n                    </FormStatus>\n                </Div>\n                {/* <div style={{marginTop: \"20px\"}} className=\"help_title_profile\">В недалеком будущем здесь что-то будет.</div>\n                <div className=\"help_title_profile\">Ждем вместе с вами!</div> */}\n                </> : null}\n            </Panel>\n            )\n            }\n        }\n  \nexport default Reader;"]},"metadata":{},"sourceType":"module"}