{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\rshub\\\\Desktop\\\\Road-to-Jedi\\\\mobile-road\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React from'react';import{Panel,PanelHeader,Input,Avatar,Button,Header,Div,Snackbar,PanelHeaderBack,Separator,Text,SimpleCell,PanelHeaderButton}from'@vkontakte/vkui';import Icon24Repeat from'@vkontakte/icons/dist/24/repeat';import Icon28MoneyCircleOutline from'@vkontakte/icons/dist/28/money_circle_outline';import Icon28MoneyHistoryBackwardOutline from'@vkontakte/icons/dist/28/money_history_backward_outline';import Icon16CheckCircle from'@vkontakte/icons/dist/16/check_circle';import Icon20CancelCircleFillRed from'@vkontakte/icons/dist/20/cancel_circle_fill_red';import Icon28InfoCircleOutline from'@vkontakte/icons/dist/28/info_circle_outline';var avatars=[\"1.png\",\"2.png\",\"3.png\",\"4.png\",\"5.png\",\"6.png\",\"7.png\",\"8.png\",\"9.png\",\"10.png\",\"11.png\",\"12.png\",\"13.png\",\"14.png\",\"15.png\",\"16.png\",\"17.png\",\"18.png\",\"19.png\",\"20.png\",\"21.png\",\"22.png\",\"23.png\",\"24.png\",\"25.png\",\"26.png\",\"27.png\",\"28.png\"];var blueBackground={backgroundColor:'var(--accent)'};var Market=/*#__PURE__*/function(_React$Component){_inherits(Market,_React$Component);var _super=_createSuper(Market);function Market(props){var _this;_classCallCheck(this,Market);_this=_super.call(this,props);_this.state={changed_id:'',api_url:\"https://xelene.ru/road/php/index.php?\",last_selected:null};var propsbi=_this.props.this;_this.setPopout=propsbi.setPopout;_this.showErrorAlert=propsbi.showErrorAlert;_this.showAlert=propsbi.showAlert;_this.setActiveModal=propsbi.setActiveModal;_this.onChange=function(event){var name=event.currentTarget.name;var value=event.currentTarget.value;_this.setState(_defineProperty({},name,value));};return _this;}_createClass(Market,[{key:\"images\",value:function images(){var _this2=this;var number=Object.keys(avatars).length;var object=[];var _loop=function _loop(i){object.push(/*#__PURE__*/React.createElement(\"img\",{id:i,onClick:function onClick(e){return _this2.props.account.avatar.id===i+1?_this2.props.this.setSnack(/*#__PURE__*/React.createElement(Snackbar,{layout:\"vertical\",onClose:function onClose(){return _this2.props.this.setSnack(null);},before:/*#__PURE__*/React.createElement(Icon20CancelCircleFillRed,{width:24,height:24})},\"\\u0412\\u044B \\u0443\\u0436\\u0435 \\u0438\\u043C\\u0435\\u0435\\u0442\\u0435 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0439 \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\")):_this2.selectImage(e);},style:i===0?{marginLeft:\"20px\"}:null,className:\"changes_avatars pointer\",key:i,src:\"https://xelene.ru/road/php/images/avatars/\"+avatars[i],alt:'ava'}));};for(var i=0;i<number;i++){_loop(i);}return object;}},{key:\"selectImage\",value:function selectImage(e){var number=e.currentTarget.id;if(this.state.last_selected!==null){var last_image=document.getElementById(this.state.last_selected);last_image.className=\"changes_avatars pointer\";}var image=document.getElementById(number);image.className=\"changes_avatars select_avatar\";this.setState({last_selected:Number(number)});}},{key:\"changeAvatar\",value:function changeAvatar(last_selected){var _this3=this;fetch(this.state.api_url+\"method=shop.changeAvatar&avatar_id=\"+last_selected+\"&\"+window.location.search.replace('?','')).then(function(data){return data.json();}).then(function(data){if(last_selected){var last_image=document.getElementById(_this3.state.last_selected);last_image.className=\"changes_avatars\";_this3.setState({last_selected:null});}if(data.result){_this3.props.this.setSnack(/*#__PURE__*/React.createElement(Snackbar,{layout:\"vertical\",onClose:function onClose(){return _this3.props.this.setSnack(null);},before:/*#__PURE__*/React.createElement(Avatar,{size:24,style:blueBackground},/*#__PURE__*/React.createElement(Icon16CheckCircle,{fill:\"#fff\",width:14,height:14}))},\"\\u0410\\u0432\\u0430\\u0442\\u0430\\u0440 \\u0443\\u0441\\u043F\\u0435\\u0448\\u043D\\u043E \\u0441\\u043C\\u0435\\u043D\\u0435\\u043D\"));setTimeout(function(){_this3.props.this.ReloadProfile();},4000);}else{_this3.props.this.setSnack(/*#__PURE__*/React.createElement(Snackbar,{layout:\"vertical\",onClose:function onClose(){return _this3.props.this.setSnack(null);},before:/*#__PURE__*/React.createElement(Icon20CancelCircleFillRed,{width:24,height:24})},data.error.message));}}).catch(function(err){_this3.showErrorAlert(err);});}},{key:\"ChangeId\",value:function ChangeId(){var _this4=this;if(this.state.changed_id){fetch(this.state.api_url+\"method=shop.changeId&change_id=\"+this.state.changed_id+\"&\"+window.location.search.replace('?','')).then(function(res){return res.json();}).then(function(data){if(data.result){_this4.props.this.setSnack(/*#__PURE__*/React.createElement(Snackbar,{layout:\"vertical\",onClose:function onClose(){return _this4.props.this.setSnack(null);},before:/*#__PURE__*/React.createElement(Avatar,{size:24,style:blueBackground},/*#__PURE__*/React.createElement(Icon16CheckCircle,{fill:\"#fff\",width:14,height:14}))},\"\\u0412\\u044B \\u0443\\u0441\\u043F\\u0435\\u0448\\u043D\\u043E \\u0441\\u043C\\u0435\\u043D\\u0438\\u043B\\u0438 \\u043D\\u0438\\u043A\"));setTimeout(function(){_this4.props.this.ReloadProfile();},4000);}else{_this4.props.this.setSnack(/*#__PURE__*/React.createElement(Snackbar,{layout:\"vertical\",onClose:function onClose(){return _this4.props.this.setSnack(null);},before:/*#__PURE__*/React.createElement(Icon20CancelCircleFillRed,{width:24,height:24})},data.error.message));}}).catch(function(err){_this4.showErrorAlert(err);});}else{this.props.this.setSnack(/*#__PURE__*/React.createElement(Snackbar,{layout:\"vertical\",onClose:function onClose(){return _this4.props.this.setSnack(null);},before:/*#__PURE__*/React.createElement(Icon20CancelCircleFillRed,{width:24,height:24})},\"\\u0412\\u044B \\u043D\\u0435 \\u0443\\u043A\\u0430\\u0437\\u0430\\u043B\\u0438 \\u0436\\u0435\\u043B\\u0430\\u0435\\u043C\\u044B\\u0439 \\u043D\\u0438\\u043A\"));}}},{key:\"render\",value:function render(){var _this5=this;return/*#__PURE__*/React.createElement(Panel,{id:this.props.id},/*#__PURE__*/React.createElement(PanelHeader,{left:/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(PanelHeaderBack,{onClick:function onClick(){return window.history.back();}}),/*#__PURE__*/React.createElement(PanelHeaderButton,{href:\"https://vk.com/@jedi_road-sistema-nachisleniya-ballov-i-shop\",target:\"_blank\",rel:\"noopener noreferrer\"},/*#__PURE__*/React.createElement(Icon28InfoCircleOutline,null)),\" \")},\"\\u041C\\u0430\\u0433\\u0430\\u0437\\u0438\\u043D\"),/*#__PURE__*/React.createElement(Div,null,/*#__PURE__*/React.createElement(Text,{weight:\"medium\"},\"\\u041C\\u043E\\u043D\\u0435\\u0442\\u043A\\u0438 \\u2014 \\u044D\\u0442\\u043E \\u0443\\u043D\\u0438\\u0432\\u0435\\u0440\\u0441\\u0430\\u043B\\u044C\\u043D\\u0430\\u044F \\u0443\\u0441\\u043B\\u043E\\u0432\\u043D\\u0430\\u044F \\u0435\\u0434\\u0438\\u043D\\u0438\\u0446\\u0430 \\u0434\\u043B\\u044F \\u043F\\u0440\\u0438\\u043E\\u0431\\u0440\\u0435\\u0442\\u0435\\u043D\\u0438\\u044F \\u0440\\u0430\\u0437\\u043B\\u0438\\u0447\\u043D\\u044B\\u0445 \\u0442\\u043E\\u0432\\u0430\\u0440\\u043E\\u0432 \\u0432 \\u043C\\u0430\\u0433\\u0430\\u0437\\u0438\\u043D\\u0435\")),/*#__PURE__*/React.createElement(SimpleCell,{disabled:true,indicator:this.props.account.balance},\"\\u0412\\u0430\\u0448 \\u0431\\u0430\\u043B\\u0430\\u043D\\u0441\"),/*#__PURE__*/React.createElement(Separator,null),/*#__PURE__*/React.createElement(Header,null,\"\\u0421\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\"),/*#__PURE__*/React.createElement(\"div\",{className:\"scrollImages\"},this.images()),/*#__PURE__*/React.createElement(Div,null,/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){_this5.changeAvatar(Number(_this5.state.last_selected)+1);},before:/*#__PURE__*/React.createElement(Icon28MoneyCircleOutline,{style:{marginRight:\"5px\"}}),size:\"xl\",mode:\"secondary\",disabled:this.state.last_selected!==null?false:true},\"\\u0421\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u0437\\u0430 1 \\u043C\\u043E\\u043D\\u0435\\u0442\\u043A\\u0443\")),/*#__PURE__*/React.createElement(Separator,null),/*#__PURE__*/React.createElement(Header,null,\"\\u0421\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u0441\\u0432\\u043E\\u0439 \\u043D\\u0438\\u043A\"),/*#__PURE__*/React.createElement(Div,null,/*#__PURE__*/React.createElement(Input,{placeholder:\"\\u0412\\u0432\\u0435\\u0434\\u0438\\u0442\\u0435 \\u0436\\u0435\\u043B\\u0430\\u0435\\u043C\\u044B\\u0439 \\u043D\\u0438\\u043A (\\u043C\\u0430\\u043A\\u0441. 10 \\u0441\\u0438\\u043C\\u0432\\u043E\\u043B\\u043E\\u0432)\",onChange:function onChange(e){return _this5.onChange(e);},value:this.state.changed_id,maxLength:\"10\",name:\"changed_id\"}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){_this5.ChangeId(_this5.state.changed_id);},before:/*#__PURE__*/React.createElement(Icon24Repeat,{width:28,height:28,style:{marginRight:\"5px\"}}),size:\"xl\",mode:\"secondary\",disabled:this.state.changed_id<=0?true:false},\"\\u0421\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u0437\\u0430 2 \\u043C\\u043E\\u043D\\u0435\\u0442\\u043A\\u0438\")),/*#__PURE__*/React.createElement(Separator,null),/*#__PURE__*/React.createElement(Header,null,\"\\u041E\\u043F\\u0446\\u0438\\u0438\"),/*#__PURE__*/React.createElement(Div,null,/*#__PURE__*/React.createElement(Button,{onClick:function onClick(){return _this5.setActiveModal('send');},before:/*#__PURE__*/React.createElement(Icon28MoneyHistoryBackwardOutline,{style:{marginRight:\"5px\"}}),size:\"xl\",mode:\"secondary\"},\"\\u041F\\u0435\\u0440\\u0435\\u0432\\u0435\\u0441\\u0442\\u0438\")),this.props.this.state.snackbar);}}]);return Market;}(React.Component);export{Market as default};","map":{"version":3,"sources":["C:/Users/rshub/Desktop/Road-to-Jedi/mobile-road/src/panels/Profile/panels/market.js"],"names":["React","Panel","PanelHeader","Input","Avatar","Button","Header","Div","Snackbar","PanelHeaderBack","Separator","Text","SimpleCell","PanelHeaderButton","Icon24Repeat","Icon28MoneyCircleOutline","Icon28MoneyHistoryBackwardOutline","Icon16CheckCircle","Icon20CancelCircleFillRed","Icon28InfoCircleOutline","avatars","blueBackground","backgroundColor","Market","props","state","changed_id","api_url","last_selected","propsbi","this","setPopout","showErrorAlert","showAlert","setActiveModal","onChange","event","name","currentTarget","value","setState","number","Object","keys","length","object","i","push","e","account","avatar","id","setSnack","selectImage","marginLeft","last_image","document","getElementById","className","image","Number","fetch","window","location","search","replace","then","data","json","result","setTimeout","ReloadProfile","error","message","catch","err","res","history","back","balance","images","changeAvatar","marginRight","ChangeId","snackbar","Component"],"mappings":"k2BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OACIC,KADJ,CAEIC,WAFJ,CAGIC,KAHJ,CAIIC,MAJJ,CAKIC,MALJ,CAMIC,MANJ,CAOIC,GAPJ,CAQIC,QARJ,CASIC,eATJ,CAUIC,SAVJ,CAWIC,IAXJ,CAYIC,UAZJ,CAaIC,iBAbJ,KAcW,iBAdX,CAgBA,MAAOC,CAAAA,YAAP,KAAyB,iCAAzB,CACA,MAAOC,CAAAA,wBAAP,KAAqC,+CAArC,CAEA,MAAOC,CAAAA,iCAAP,KAA8C,yDAA9C,CACA,MAAOC,CAAAA,iBAAP,KAA8B,uCAA9B,CACA,MAAOC,CAAAA,yBAAP,KAAsC,iDAAtC,CACA,MAAOC,CAAAA,uBAAP,KAAoC,8CAApC,CAEA,GAAIC,CAAAA,OAAO,CAAG,CACV,OADU,CAEV,OAFU,CAGV,OAHU,CAIV,OAJU,CAKV,OALU,CAMV,OANU,CAOV,OAPU,CAQV,OARU,CASV,OATU,CAUV,QAVU,CAWV,QAXU,CAYV,QAZU,CAaV,QAbU,CAcV,QAdU,CAeV,QAfU,CAgBV,QAhBU,CAiBV,QAjBU,CAkBV,QAlBU,CAmBV,QAnBU,CAoBV,QApBU,CAqBV,QArBU,CAsBV,QAtBU,CAuBV,QAvBU,CAwBV,QAxBU,CAyBV,QAzBU,CA0BV,QA1BU,CA2BV,QA3BU,CA4BV,QA5BU,CAAd,CAgCA,GAAMC,CAAAA,cAAc,CAAG,CACnBC,eAAe,CAAE,eADE,CAAvB,C,GAGqBC,CAAAA,M,4GACjB,gBAAYC,KAAZ,CAAkB,wCACd,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAa,CACTC,UAAU,CAAE,EADH,CAETC,OAAO,CAAE,uCAFA,CAGTC,aAAa,CAAE,IAHN,CAAb,CAMA,GAAIC,CAAAA,OAAO,CAAG,MAAKL,KAAL,CAAWM,IAAzB,CACA,MAAKC,SAAL,CAAiBF,OAAO,CAACE,SAAzB,CACA,MAAKC,cAAL,CAAsBH,OAAO,CAACG,cAA9B,CACA,MAAKC,SAAL,CAAiBJ,OAAO,CAACI,SAAzB,CACA,MAAKC,cAAL,CAAsBL,OAAO,CAACK,cAA9B,CACA,MAAKC,QAAL,CAAgB,SAACC,KAAD,CAAW,CACvB,GAAIC,CAAAA,IAAI,CAAGD,KAAK,CAACE,aAAN,CAAoBD,IAA/B,CACA,GAAIE,CAAAA,KAAK,CAAGH,KAAK,CAACE,aAAN,CAAoBC,KAAhC,CACA,MAAKC,QAAL,oBAAiBH,IAAjB,CAAwBE,KAAxB,GACH,CAJD,CAbc,aAkBjB,C,0DACQ,iBACP,GAAIE,CAAAA,MAAM,CAAGC,MAAM,CAACC,IAAP,CAAYvB,OAAZ,EAAqBwB,MAAlC,CACA,GAAIC,CAAAA,MAAM,CAAG,EAAb,CAFO,yBAGMC,CAHN,EAICD,MAAM,CAACE,IAAP,cACI,2BAAK,EAAE,CAAED,CAAT,CACA,OAAO,CAAE,iBAACE,CAAD,QAAQ,CAAA,MAAI,CAACxB,KAAL,CAAWyB,OAAX,CAAmBC,MAAnB,CAA0BC,EAA1B,GAAiCL,CAAC,CAAE,CAArC,CAA0C,MAAI,CAACtB,KAAL,CAAWM,IAAX,CAAgBsB,QAAhB,cACxD,oBAAC,QAAD,EACA,MAAM,CAAC,UADP,CAEA,OAAO,CAAE,yBAAM,CAAA,MAAI,CAAC5B,KAAL,CAAWM,IAAX,CAAgBsB,QAAhB,CAAyB,IAAzB,CAAN,EAFT,CAGA,MAAM,cAAE,oBAAC,yBAAD,EAA2B,KAAK,CAAE,EAAlC,CAAsC,MAAM,CAAE,EAA9C,EAHR,mJADwD,CAA1C,CAOD,MAAI,CAACC,WAAL,CAAiBL,CAAjB,CAPN,EADT,CASA,KAAK,CAAEF,CAAC,GAAK,CAAN,CAAU,CAACQ,UAAU,CAAE,MAAb,CAAV,CAAiC,IATxC,CAUA,SAAS,CAAC,yBAVV,CAUoC,GAAG,CAAER,CAVzC,CAWA,GAAG,CAAE,6CAA+C1B,OAAO,CAAC0B,CAAD,CAX3D,CAYA,GAAG,CAAE,KAZL,EADJ,EAJD,EAGH,IAAK,GAAIA,CAAAA,CAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGL,MAApB,CAA4BK,CAAC,EAA7B,CAAkC,OAAzBA,CAAyB,EAgBjC,CAEL,MAAOD,CAAAA,MAAP,CACH,C,gDACWG,C,CAAG,CACb,GAAIP,CAAAA,MAAM,CAAGO,CAAC,CAACV,aAAF,CAAgBa,EAA7B,CACA,GAAG,KAAK1B,KAAL,CAAWG,aAAX,GAA6B,IAAhC,CAAqC,CACnC,GAAI2B,CAAAA,UAAU,CAAGC,QAAQ,CAACC,cAAT,CAAwB,KAAKhC,KAAL,CAAWG,aAAnC,CAAjB,CACA2B,UAAU,CAACG,SAAX,CAAuB,yBAAvB,CACD,CACD,GAAIC,CAAAA,KAAK,CAAGH,QAAQ,CAACC,cAAT,CAAwBhB,MAAxB,CAAZ,CAEAkB,KAAK,CAACD,SAAN,CAAkB,+BAAlB,CACA,KAAKlB,QAAL,CAAc,CAACZ,aAAa,CAAEgC,MAAM,CAACnB,MAAD,CAAtB,CAAd,EACD,C,kDACcb,a,CAAe,iBACxBiC,KAAK,CAAC,KAAKpC,KAAL,CAAWE,OAAX,CAAqB,qCAArB,CAA6DC,aAA7D,CAA6E,GAA7E,CAAmFkC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuBC,OAAvB,CAA+B,GAA/B,CAAoC,EAApC,CAApF,CAAL,CACCC,IADD,CACM,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACC,IAAL,EAAJ,EADV,EAECF,IAFD,CAEM,SAAAC,IAAI,CAAI,CACZ,GAAGvC,aAAH,CAAiB,CACf,GAAI2B,CAAAA,UAAU,CAAGC,QAAQ,CAACC,cAAT,CAAwB,MAAI,CAAChC,KAAL,CAAWG,aAAnC,CAAjB,CACA2B,UAAU,CAACG,SAAX,CAAuB,iBAAvB,CACA,MAAI,CAAClB,QAAL,CAAc,CAACZ,aAAa,CAAE,IAAhB,CAAd,EACD,CAGG,GAAGuC,IAAI,CAACE,MAAR,CAAe,CACX,MAAI,CAAC7C,KAAL,CAAWM,IAAX,CAAgBsB,QAAhB,cACE,oBAAC,QAAD,EACE,MAAM,CAAC,UADT,CAEE,OAAO,CAAE,yBAAM,CAAA,MAAI,CAAC5B,KAAL,CAAWM,IAAX,CAAgBsB,QAAhB,CAAyB,IAAzB,CAAN,EAFX,CAGE,MAAM,cAAE,oBAAC,MAAD,EAAQ,IAAI,CAAE,EAAd,CAAkB,KAAK,CAAE/B,cAAzB,eAAyC,oBAAC,iBAAD,EAAmB,IAAI,CAAC,MAAxB,CAA+B,KAAK,CAAE,EAAtC,CAA0C,MAAM,CAAE,EAAlD,EAAzC,CAHV,yHADF,EAUAiD,UAAU,CAAC,UAAM,CACf,MAAI,CAAC9C,KAAL,CAAWM,IAAX,CAAgByC,aAAhB,GACD,CAFS,CAEP,IAFO,CAAV,CAGD,CAdH,IAcO,CACH,MAAI,CAAC/C,KAAL,CAAWM,IAAX,CAAgBsB,QAAhB,cACE,oBAAC,QAAD,EACA,MAAM,CAAC,UADP,CAEA,OAAO,CAAE,yBAAM,CAAA,MAAI,CAAC5B,KAAL,CAAWM,IAAX,CAAgBsB,QAAhB,CAAyB,IAAzB,CAAN,EAFT,CAGA,MAAM,cAAE,oBAAC,yBAAD,EAA2B,KAAK,CAAE,EAAlC,CAAsC,MAAM,CAAE,EAA9C,EAHR,EAKCe,IAAI,CAACK,KAAL,CAAWC,OALZ,CADF,EAQD,CACJ,CAlCL,EAmCKC,KAnCL,CAmCW,SAAAC,GAAG,CAAI,CACV,MAAI,CAAC3C,cAAL,CAAoB2C,GAApB,EACP,CArCD,EAuCH,C,2CACU,iBACP,GAAG,KAAKlD,KAAL,CAAWC,UAAd,CAAyB,CACvBmC,KAAK,CAAC,KAAKpC,KAAL,CAAWE,OAAX,CAAqB,iCAArB,CAAyD,KAAKF,KAAL,CAAWC,UAApE,CAAiF,GAAjF,CAAuFoC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuBC,OAAvB,CAA+B,GAA/B,CAAoC,EAApC,CAAxF,CAAL,CACCC,IADD,CACM,SAAAU,GAAG,QAAIA,CAAAA,GAAG,CAACR,IAAJ,EAAJ,EADT,EAECF,IAFD,CAEM,SAAAC,IAAI,CAAI,CACZ,GAAGA,IAAI,CAACE,MAAR,CAAgB,CACZ,MAAI,CAAC7C,KAAL,CAAWM,IAAX,CAAgBsB,QAAhB,cACA,oBAAC,QAAD,EACE,MAAM,CAAC,UADT,CAEE,OAAO,CAAE,yBAAM,CAAA,MAAI,CAAC5B,KAAL,CAAWM,IAAX,CAAgBsB,QAAhB,CAAyB,IAAzB,CAAN,EAFX,CAGE,MAAM,cAAE,oBAAC,MAAD,EAAQ,IAAI,CAAE,EAAd,CAAkB,KAAK,CAAE/B,cAAzB,eAAyC,oBAAC,iBAAD,EAAmB,IAAI,CAAC,MAAxB,CAA+B,KAAK,CAAE,EAAtC,CAA0C,MAAM,CAAE,EAAlD,EAAzC,CAHV,0HADA,EASFiD,UAAU,CAAC,UAAM,CACf,MAAI,CAAC9C,KAAL,CAAWM,IAAX,CAAgByC,aAAhB,GACD,CAFS,CAEP,IAFO,CAAV,CAGD,CAbD,IAaO,CACL,MAAI,CAAC/C,KAAL,CAAWM,IAAX,CAAgBsB,QAAhB,cACE,oBAAC,QAAD,EACA,MAAM,CAAC,UADP,CAEA,OAAO,CAAE,yBAAM,CAAA,MAAI,CAAC5B,KAAL,CAAWM,IAAX,CAAgBsB,QAAhB,CAAyB,IAAzB,CAAN,EAFT,CAGA,MAAM,cAAE,oBAAC,yBAAD,EAA2B,KAAK,CAAE,EAAlC,CAAsC,MAAM,CAAE,EAA9C,EAHR,EAKCe,IAAI,CAACK,KAAL,CAAWC,OALZ,CADF,EAQD,CACF,CA1BD,EA2BCC,KA3BD,CA2BO,SAAAC,GAAG,CAAI,CACZ,MAAI,CAAC3C,cAAL,CAAoB2C,GAApB,EACD,CA7BD,EA8BD,CA/BD,IA+BO,CACL,KAAKnD,KAAL,CAAWM,IAAX,CAAgBsB,QAAhB,cACE,oBAAC,QAAD,EACA,MAAM,CAAC,UADP,CAEA,OAAO,CAAE,yBAAM,CAAA,MAAI,CAAC5B,KAAL,CAAWM,IAAX,CAAgBsB,QAAhB,CAAyB,IAAzB,CAAN,EAFT,CAGA,MAAM,cAAE,oBAAC,yBAAD,EAA2B,KAAK,CAAE,EAAlC,CAAsC,MAAM,CAAE,EAA9C,EAHR,6IADF,EAQD,CACF,C,uCAEM,iBACL,mBACI,oBAAC,KAAD,EAAO,EAAE,CAAE,KAAK5B,KAAL,CAAW2B,EAAtB,eACI,oBAAC,WAAD,EACI,IAAI,cACA,qDAAE,oBAAC,eAAD,EAAiB,OAAO,CAAE,yBAAMW,CAAAA,MAAM,CAACe,OAAP,CAAeC,IAAf,EAAN,EAA1B,EAAF,cACA,oBAAC,iBAAD,EACA,IAAI,CAAC,8DADL,CAEA,MAAM,CAAC,QAFP,CAEgB,GAAG,CAAC,qBAFpB,eAGE,oBAAC,uBAAD,MAHF,CADA,KAFR,+CADJ,cAYI,oBAAC,GAAD,mBACE,oBAAC,IAAD,EAAM,MAAM,CAAC,QAAb,0eADF,CAZJ,cAeI,oBAAC,UAAD,EAAY,QAAQ,KAApB,CAAqB,SAAS,CAAE,KAAKtD,KAAL,CAAWyB,OAAX,CAAmB8B,OAAnD,4DAfJ,cAgBI,oBAAC,SAAD,MAhBJ,cAiBI,oBAAC,MAAD,wFAjBJ,cAkBI,2BAAK,SAAS,CAAC,cAAf,EACK,KAAKC,MAAL,EADL,CAlBJ,cAqBI,oBAAC,GAAD,mBACI,oBAAC,MAAD,EAAQ,OAAO,CAAE,kBAAM,CAAC,MAAI,CAACC,YAAL,CAAkBrB,MAAM,CAAC,MAAI,CAACnC,KAAL,CAAWG,aAAZ,CAAN,CAAmC,CAArD,EAAwD,CAAhF,CACA,MAAM,cAAE,oBAAC,wBAAD,EACR,KAAK,CAAE,CAACsD,WAAW,CAAE,KAAd,CADC,EADR,CAGA,IAAI,CAAC,IAHL,CAIA,IAAI,CAAC,WAJL,CAKA,QAAQ,CAAG,KAAKzD,KAAL,CAAWG,aAAX,GAA6B,IAA9B,CAAsC,KAAtC,CAA8C,IALxD,yGADJ,CArBJ,cA6BI,oBAAC,SAAD,MA7BJ,cA8BI,oBAAC,MAAD,+FA9BJ,cA+BI,oBAAC,GAAD,mBACI,oBAAC,KAAD,EAAO,WAAW,CAAC,gMAAnB,CAA8D,QAAQ,CAAE,kBAACoB,CAAD,QAAO,CAAA,MAAI,CAACb,QAAL,CAAca,CAAd,CAAP,EAAxE,CAAiG,KAAK,CAAE,KAAKvB,KAAL,CAAWC,UAAnH,CAA+H,SAAS,CAAC,IAAzI,CAA8I,IAAI,CAAC,YAAnJ,EADJ,cAEI,8BAFJ,cAGI,oBAAC,MAAD,EAAQ,OAAO,CAAE,kBAAM,CAAC,MAAI,CAACyD,QAAL,CAAc,MAAI,CAAC1D,KAAL,CAAWC,UAAzB,EAAqC,CAA7D,CACA,MAAM,cAAE,oBAAC,YAAD,EAAc,KAAK,CAAE,EAArB,CAAyB,MAAM,CAAE,EAAjC,CAAqC,KAAK,CAAE,CAACwD,WAAW,CAAE,KAAd,CAA5C,EADR,CAEA,IAAI,CAAC,IAFL,CAGA,IAAI,CAAC,WAHL,CAIA,QAAQ,CAAG,KAAKzD,KAAL,CAAWC,UAAX,EAAyB,CAA1B,CAA+B,IAA/B,CAAsC,KAJhD,yGAHJ,CA/BJ,cA6CI,oBAAC,SAAD,MA7CJ,cA8CI,oBAAC,MAAD,uCA9CJ,cA+CQ,oBAAC,GAAD,mBACI,oBAAC,MAAD,EAAQ,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACQ,cAAL,CAAoB,MAApB,CAAN,EAAjB,CAAoD,MAAM,cAAE,oBAAC,iCAAD,EAAmC,KAAK,CAAE,CAACgD,WAAW,CAAE,KAAd,CAA1C,EAA5D,CAA+H,IAAI,CAAC,IAApI,CAAyI,IAAI,CAAC,WAA9I,2DADJ,CA/CR,CAoDK,KAAK1D,KAAL,CAAWM,IAAX,CAAgBL,KAAhB,CAAsB2D,QApD3B,CADJ,CAwEH,C,oBApN+BpF,KAAK,CAACqF,S,SAArB9D,M","sourcesContent":["import React from 'react';\nimport { \n    Panel,\n    PanelHeader,\n    Input,\n    Avatar,\n    Button,\n    Header,\n    Div,\n    Snackbar,\n    PanelHeaderBack,\n    Separator,\n    Text,\n    SimpleCell,\n    PanelHeaderButton\n    } from '@vkontakte/vkui';\n\nimport Icon24Repeat from '@vkontakte/icons/dist/24/repeat';\nimport Icon28MoneyCircleOutline from '@vkontakte/icons/dist/28/money_circle_outline';\n\nimport Icon28MoneyHistoryBackwardOutline from '@vkontakte/icons/dist/28/money_history_backward_outline';\nimport Icon16CheckCircle from '@vkontakte/icons/dist/16/check_circle';\nimport Icon20CancelCircleFillRed from '@vkontakte/icons/dist/20/cancel_circle_fill_red';\nimport Icon28InfoCircleOutline from '@vkontakte/icons/dist/28/info_circle_outline';\n\nvar avatars = [\n    \"1.png\",\n    \"2.png\",\n    \"3.png\",\n    \"4.png\",\n    \"5.png\",\n    \"6.png\",\n    \"7.png\",\n    \"8.png\",\n    \"9.png\",\n    \"10.png\",\n    \"11.png\",\n    \"12.png\",\n    \"13.png\",\n    \"14.png\",\n    \"15.png\",\n    \"16.png\",\n    \"17.png\",\n    \"18.png\",\n    \"19.png\",\n    \"20.png\",\n    \"21.png\",\n    \"22.png\",\n    \"23.png\",\n    \"24.png\",\n    \"25.png\",\n    \"26.png\",\n    \"27.png\",\n    \"28.png\",\n\n]\n\nconst blueBackground = {\n    backgroundColor: 'var(--accent)'\n  };\nexport default class Market extends React.Component{\n    constructor(props){\n        super(props)\n        this.state = {\n            changed_id: '',\n            api_url: \"https://xelene.ru/road/php/index.php?\",\n            last_selected: null,\n\n        }\n        var propsbi = this.props.this;\n        this.setPopout = propsbi.setPopout;\n        this.showErrorAlert = propsbi.showErrorAlert;\n        this.showAlert = propsbi.showAlert;\n        this.setActiveModal = propsbi.setActiveModal;\n        this.onChange = (event) => {\n            var name = event.currentTarget.name;\n            var value = event.currentTarget.value;\n            this.setState({ [name]: value });\n        }\n    }\n    images() {\n      var number = Object.keys(avatars).length;\n      var object = []\n          for (let i = 0; i < number; i++ ) {\n              object.push(\n                  <img id={i}\n                  onClick={(e) => (this.props.account.avatar.id === i +1) ? this.props.this.setSnack(\n                    <Snackbar\n                    layout=\"vertical\"\n                    onClose={() => this.props.this.setSnack(null)}\n                    before={<Icon20CancelCircleFillRed width={24} height={24} />}\n                  >\n                    Вы уже имеете данный аватар\n                  </Snackbar>) : this.selectImage(e)} \n                  style={i === 0 ? {marginLeft: \"20px\"} : null} \n                  className=\"changes_avatars pointer\" key={i} \n                  src={\"https://xelene.ru/road/php/images/avatars/\" + avatars[i]}\n                  alt={'ava'} />\n              )\n          }\n      \n      return(object)\n  }\n  selectImage(e) {\n    let number = e.currentTarget.id;\n    if(this.state.last_selected !== null){\n      let last_image = document.getElementById(this.state.last_selected)\n      last_image.className = \"changes_avatars pointer\"\n    }\n    let image = document.getElementById(number);\n    \n    image.className = \"changes_avatars select_avatar\"\n    this.setState({last_selected: Number(number)});\n  }\n    changeAvatar(last_selected) {\n        fetch(this.state.api_url + \"method=shop.changeAvatar&avatar_id=\" + last_selected + \"&\" + window.location.search.replace('?', ''))\n        .then(data => data.json())\n        .then(data => {\n          if(last_selected){\n            let last_image = document.getElementById(this.state.last_selected)\n            last_image.className = \"changes_avatars\"\n            this.setState({last_selected: null})\n          }\n          \n          \n              if(data.result){\n                  this.props.this.setSnack( \n                    <Snackbar\n                      layout=\"vertical\"\n                      onClose={() => this.props.this.setSnack(null)}\n                      before={<Avatar size={24} style={blueBackground}><Icon16CheckCircle fill=\"#fff\" width={14} height={14} /></Avatar>}\n                    >\n                      Аватар успешно сменен\n                    </Snackbar>\n                  )\n\n                  setTimeout(() => {\n                    this.props.this.ReloadProfile();\n                  }, 4000)\n                }else{\n                  this.props.this.setSnack(\n                    <Snackbar\n                    layout=\"vertical\"\n                    onClose={() => this.props.this.setSnack(null)}\n                    before={<Icon20CancelCircleFillRed width={24} height={24} />}\n                  >\n                    {data.error.message}\n                  </Snackbar>);\n                }\n            })\n            .catch(err => {\n                this.showErrorAlert(err)\n        })\n        \n    }\n    ChangeId() {\n        if(this.state.changed_id){ \n          fetch(this.state.api_url + \"method=shop.changeId&change_id=\" + this.state.changed_id + \"&\" + window.location.search.replace('?', ''))\n          .then(res => res.json())\n          .then(data => {\n            if(data.result) {\n                this.props.this.setSnack(\n                <Snackbar\n                  layout=\"vertical\"\n                  onClose={() => this.props.this.setSnack(null)}\n                  before={<Avatar size={24} style={blueBackground}><Icon16CheckCircle fill=\"#fff\" width={14} height={14} /></Avatar>}\n                >\n                  Вы успешно сменили ник\n                </Snackbar>\n              )\n              setTimeout(() => {\n                this.props.this.ReloadProfile();\n              }, 4000)\n            } else {\n              this.props.this.setSnack(\n                <Snackbar\n                layout=\"vertical\"\n                onClose={() => this.props.this.setSnack(null)}\n                before={<Icon20CancelCircleFillRed width={24} height={24} />}\n              >\n                {data.error.message}\n              </Snackbar>);\n            }\n          })\n          .catch(err => {\n            this.showErrorAlert(err)\n          })\n        } else {\n          this.props.this.setSnack(\n            <Snackbar\n            layout=\"vertical\"\n            onClose={() => this.props.this.setSnack(null)}\n            before={<Icon20CancelCircleFillRed width={24} height={24} />}\n          >\n            Вы не указали желаемый ник\n          </Snackbar>);\n        }\n      }\n\n    render() {\n        return(\n            <Panel id={this.props.id}>\n                <PanelHeader \n                    left={\n                        <><PanelHeaderBack onClick={() => window.history.back()} />\n                        <PanelHeaderButton \n                        href='https://vk.com/@jedi_road-sistema-nachisleniya-ballov-i-shop'\n                        target=\"_blank\" rel=\"noopener noreferrer\">\n                          <Icon28InfoCircleOutline />\n                        </PanelHeaderButton> </>\n                }>\n                    Магазин\n                </PanelHeader>\n                <Div>\n                  <Text weight='medium'>Монетки — это универсальная условная единица для приобретения различных товаров в магазине</Text>\n                </Div>\n                <SimpleCell disabled indicator={this.props.account.balance}>Ваш баланс</SimpleCell>\n                <Separator />\n                <Header>Сменить аватар</Header>\n                <div className=\"scrollImages\">\n                    {this.images()}\n                </div>\n                <Div>\n                    <Button onClick={() => {this.changeAvatar(Number(this.state.last_selected) + 1)}} \n                    before={<Icon28MoneyCircleOutline \n                    style={{marginRight: \"5px\"}}/>} \n                    size=\"xl\" \n                    mode=\"secondary\"\n                    disabled={(this.state.last_selected !== null) ? false : true}>Сменить за 1 монетку</Button>\n                </Div>\n                <Separator />\n                <Header>Сменить свой ник</Header>\n                <Div>\n                    <Input placeholder=\"Введите желаемый ник (макс. 10 символов)\" onChange={(e) => this.onChange(e)} value={this.state.changed_id} maxLength=\"10\" name=\"changed_id\"/>\n                    <br/>\n                    <Button onClick={() => {this.ChangeId(this.state.changed_id)}} \n                    before={<Icon24Repeat width={28} height={28} style={{marginRight: \"5px\"}}/>}\n                    size=\"xl\" \n                    mode=\"secondary\"\n                    disabled={(this.state.changed_id <= 0) ? true : false}>Сменить за 2 монетки</Button>\n                </Div>\n                {/* <Group separator=\"hide\" header={<Header>Сброс статистики</Header>}>\n                    <Div>\n                        <Button onClick={() => props.this.deleteStats()} before={<Icon28GridSquareOutline style={{marginRight: \"5px\"}}/>} size=\"xl\" mode=\"secondary\">Сбросить за 150 монеток</Button>\n                    </Div>\n                </Group> */}\n                <Separator />\n                <Header>Опции</Header>\n                    <Div>\n                        <Button onClick={() => this.setActiveModal('send')} before={<Icon28MoneyHistoryBackwardOutline style={{marginRight: \"5px\"}}/>} size=\"xl\" mode=\"secondary\">Перевести</Button>\n                        {/* <br/>\n                        <Button onClick={() => props.this.goVitas()} before={<Icon28GlobeOutline style={{marginRight: \"5px\"}}/>} size=\"xl\" mode=\"secondary\">Обучать Витька</Button> */}\n                    </Div>\n                {this.props.this.state.snackbar}\n                {/* <Group separator=\"hide\" header={<Header>Обнулить статистику</Header>}>\n                    <Div>\n                        Мы обнулим вам встатистику, число всех ответов станет равным 0.\n                    </Div>\n                </Group>\n                <Div>\n                    <Button before={<Icon28MoneyCircleOutline style={{marginRight: \"5px\"}}/>} size=\"xl\" mode=\"secondary\">Купить за 350 монеток</Button>\n                </Div>\n                <Group separator=\"hide\" header={<Header>Сменить id Агента</Header>}>\n                    <Div>\n                        Установите себе другой id и будьте заметнее!\n                    </Div>\n                </Group>\n                <Div>\n                    <Button before={<Icon28MoneyCircleOutline style={{marginRight: \"5px\"}}/>} size=\"xl\" mode=\"secondary\">Купить за 700 монеток</Button>\n                </Div> */}\n            </Panel>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}