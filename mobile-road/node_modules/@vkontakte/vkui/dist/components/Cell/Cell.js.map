{"version":3,"sources":["../../../src/components/Cell/Cell.tsx"],"names":["React","Component","Fragment","PropTypes","classNames","getClassName","IconButton","Touch","ANDROID","IOS","VKCOM","Icon24Cancel","Icon24Reorder","Icon24ReorderIos","Icon16Done","withPlatform","SimpleCell","setRef","Cell","props","e","nativeEvent","stopPropagation","preventDefault","setState","isRemoveActivated","document","addEventListener","deactivateRemove","removeOffset","removeEventListener","stopImmediatePropagation","onRemove","rootEl","el","removeButton","element","getRootRef","dragging","dragShift","listEl","closest","classList","add","siblings","Array","prototype","slice","call","parentElement","childNodes","dragStartIndex","indexOf","originalEvent","state","style","transform","shiftY","rootGesture","getBoundingClientRect","dragDirection","dragEndIndex","forEach","sibling","siblingIndex","siblingGesture","bottom","top","height","remove","onDragFinish","from","to","_prevProps","prevState","offsetWidth","removePlaceholder","className","platform","before","after","disabled","removable","draggable","selectable","onChange","name","checked","defaultChecked","restProps","onRemoveActivateClick","onDragStart","onDragMove","onDragEnd","onDragClick","onRemoveClick","getRemoveRef","context","any"],"mappings":"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","sourcesContent":["import React, { Component, ReactNode, MouseEvent, Fragment, InputHTMLAttributes } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from '../../lib/classNames';\nimport getClassName from '../../helpers/getClassName';\nimport IconButton from '../IconButton/IconButton';\nimport Touch, { TouchEvent } from '../Touch/Touch';\nimport { ANDROID, IOS, VKCOM } from '../../lib/platform';\nimport { Icon24Cancel, Icon24Reorder, Icon24ReorderIos, Icon16Done } from '@vkontakte/icons';\nimport withPlatform from '../../hoc/withPlatform';\nimport SimpleCell, { SimpleCellProps } from '../SimpleCell/SimpleCell';\nimport { HasPlatform } from '../../types';\nimport { setRef } from '../../lib/utils';\n\nexport interface CellProps extends SimpleCellProps, HasPlatform, Pick<InputHTMLAttributes<HTMLInputElement>, 'name' | 'checked' | 'defaultChecked'> {\n  /**\n   * В режиме перетаскивания ячейка перестает быть кликабельной, то есть при клике переданный onClick вызываться не будет\n   */\n  draggable?: boolean;\n  /**\n   * В режиме перетаскивания ячейка перестает быть кликабельной, то есть при клике переданный onClick вызываться не будет\n   */\n  removable?: boolean;\n  selectable?: boolean;\n  /**\n   * В режиме selectable реагирует на входящие значения пропса cheсked, как зависящий напрямую от входящего значения\n   */\n  checked?: boolean;\n  /**\n   * В режиме selectable реагирует на входящие значения пропса defaultChecked как неконтролируемый компонент\n   */\n  defaultChecked?: boolean;\n  /**\n   * Коллбэк срабатывает при клике на контрол удаления.\n   */\n  onRemove?(e: MouseEvent, rootEl: HTMLElement): void;\n  /**\n   * iOS only. Текст в выезжаеющей кнопке для удаления ячейки.\n   */\n  removePlaceholder?: ReactNode;\n  /**\n   * Коллбэк срабатывает при завершении перетаскивания.\n   * **Важно:** режим перетаскивания не меняет порядок ячеек в DOM. В коллбэке есть объект с полями `from` и `to`.\n   * Эти числа нужны для того, чтобы разработчик понимал, с какого индекса на какой произошел переход. В песочнице\n   * есть рабочий пример с обработкой этих чисел и перерисовкой списка.\n   */\n  onDragFinish?({ from, to }: { from: number; to: number }): void;\n}\n\nexport interface CellState {\n  isRemoveActivated: boolean;\n  removeOffset: number;\n  dragging: boolean;\n  checked?: boolean;\n}\n\nclass Cell extends Component<CellProps, CellState> {\n  constructor(props: CellProps) {\n    super(props);\n\n    this.state = {\n      isRemoveActivated: false,\n      removeOffset: 0,\n      dragging: false,\n    };\n  }\n\n  rootEl: HTMLElement;\n  removeButton: HTMLDivElement;\n\n  static defaultProps = {\n    removePlaceholder: 'Удалить',\n  };\n\n  static contextTypes = {\n    document: PropTypes.any,\n  };\n\n  get document() {return this.context.document || document;}\n\n  private readonly onRemoveActivateClick = (e: MouseEvent) => {\n    e.nativeEvent.stopPropagation();\n    e.preventDefault();\n    this.setState({ isRemoveActivated: true });\n    this.document.addEventListener('click', this.deactivateRemove);\n  };\n\n  deactivateRemove = () => {\n    this.setState({ isRemoveActivated: false, removeOffset: 0 });\n    this.document.removeEventListener('click', this.deactivateRemove);\n  };\n\n  private readonly onRemoveClick = (e: MouseEvent) => {\n    e.nativeEvent.stopImmediatePropagation();\n    e.preventDefault();\n    this.props.onRemove && this.props.onRemove(e, this.rootEl);\n  };\n\n  componentWillUnmount() {\n    this.document.removeEventListener('click', this.deactivateRemove);\n  }\n\n  componentDidUpdate(_prevProps: CellProps, prevState: CellState) {\n    if (prevState.isRemoveActivated !== this.state.isRemoveActivated && this.state.isRemoveActivated) {\n      this.setState({ removeOffset: this.removeButton.offsetWidth });\n    }\n  }\n\n  getRemoveRef = (el: HTMLDivElement) => this.removeButton = el;\n\n  getRootRef = (element: HTMLElement) => {\n    this.rootEl = element;\n    setRef(element, this.props.getRootRef);\n  };\n\n  dragShift: number;\n  listEl: HTMLElement;\n  siblings: HTMLElement[];\n  dragStartIndex: number;\n  dragEndIndex: number;\n  dragDirection: 'down' | 'up';\n\n  onDragStart = () => {\n    this.setState({ dragging: true });\n    this.dragShift = 0;\n    this.listEl = this.rootEl.closest('.List');\n    this.listEl && this.listEl.classList.add('List--dragging');\n    this.siblings = Array.prototype.slice.call(this.rootEl.parentElement.childNodes);\n    this.dragStartIndex = this.siblings.indexOf(this.rootEl);\n  };\n\n  onDragMove = (e: TouchEvent) => {\n    e.originalEvent.preventDefault();\n    if (this.state.removeOffset) {\n      return;\n    }\n\n    this.rootEl.style.transform = `translateY(${e.shiftY}px)`;\n    const rootGesture = this.rootEl.getBoundingClientRect();\n    this.dragDirection = this.dragShift - e.shiftY < 0 ? 'down' : 'up';\n    this.dragShift = e.shiftY;\n    this.dragEndIndex = this.dragStartIndex;\n\n    this.siblings.forEach((sibling, siblingIndex) => {\n      const siblingGesture = sibling.getBoundingClientRect();\n      if (this.dragStartIndex < siblingIndex) {\n        if (rootGesture.bottom > siblingGesture.top + siblingGesture.height / 2) {\n          if (this.dragDirection === 'down') {\n            sibling.style.transform = 'translateY(-100%)';\n          }\n          this.dragEndIndex++;\n        }\n        if (rootGesture.top < siblingGesture.bottom - siblingGesture.height / 2 && this.dragDirection === 'up') {\n          sibling.style.transform = 'translateY(0)';\n        }\n      } else if (this.dragStartIndex > siblingIndex) {\n        if (rootGesture.top < siblingGesture.bottom - siblingGesture.height / 2) {\n          if (this.dragDirection === 'up') {\n            sibling.style.transform = 'translateY(100%)';\n          }\n          this.dragEndIndex--;\n        }\n        if (rootGesture.bottom > siblingGesture.top + siblingGesture.height / 2 && this.dragDirection === 'down') {\n          sibling.style.transform = 'translateY(0)';\n        }\n      }\n    });\n  };\n\n  onDragEnd = () => {\n    this.setState({ dragging: false });\n    this.listEl && this.listEl.classList.remove('List--dragging');\n    this.props.onDragFinish && this.props.onDragFinish({ from: this.dragStartIndex, to: this.dragEndIndex });\n    this.siblings.forEach((sibling) => sibling.style.transform = null);\n    delete this.dragShift;\n    delete this.listEl;\n    delete this.siblings;\n    delete this.dragStartIndex;\n    delete this.dragEndIndex;\n    delete this.dragDirection;\n  };\n\n  private readonly onDragClick = (e: MouseEvent) => {\n    e.nativeEvent.stopPropagation();\n    e.preventDefault();\n  };\n\n  render() {\n    let {\n      onRemove,\n      removePlaceholder,\n      onDragFinish,\n      className,\n      style,\n      getRootRef,\n      platform,\n      before,\n      after,\n      disabled,\n      removable,\n      draggable,\n      selectable,\n      Component,\n      onChange,\n      name,\n      checked,\n      defaultChecked,\n      ...restProps\n    } = this.props;\n\n    return (\n      <div\n        className={classNames(getClassName('Cell', platform), {\n          'Cell--dragging': this.state.dragging,\n          'Cell--removable': removable,\n        }, className)}\n        style={style}\n        ref={this.getRootRef}\n      >\n        <div\n          className=\"Cell__in\"\n          style={platform === IOS && removable ? { transform: `translateX(-${this.state.removeOffset}px)` } : null}\n        >\n          <SimpleCell\n            {...restProps}\n            disabled={draggable || removable || disabled}\n            Component={selectable ? 'label' : Component}\n            before={\n              <Fragment>\n                {platform === IOS && removable && <div className=\"Cell__remove-marker\" onClick={this.onRemoveActivateClick} />}\n                {selectable &&\n                  <Fragment>\n                    <input type=\"checkbox\" className=\"Cell__checkbox\" name={name} onChange={onChange} defaultChecked={defaultChecked} checked={checked} />\n                    <div className=\"Cell__marker\"><Icon16Done /></div>\n                  </Fragment>\n                }\n                {(platform === ANDROID || platform === VKCOM) && draggable &&\n                <Touch\n                  onStart={this.onDragStart}\n                  onMoveY={this.onDragMove}\n                  onEnd={this.onDragEnd}\n                  onClick={this.onDragClick}\n                  className=\"Cell__dragger\"\n                ><Icon24Reorder /></Touch>\n                }\n                {before}\n              </Fragment>\n            }\n            after={\n              <Fragment>\n                {(platform === ANDROID || platform === VKCOM) && removable &&\n                <div className=\"Cell__remove-marker\">\n                  <IconButton icon={<Icon24Cancel />} onClick={this.onRemoveClick} />\n                </div>\n                }\n                {platform === IOS && draggable &&\n                <Touch\n                  className=\"Cell__dragger\"\n                  onStart={this.onDragStart}\n                  onMoveY={this.onDragMove}\n                  onEnd={this.onDragEnd}\n                  onClick={this.onDragClick}\n                ><Icon24ReorderIos /></Touch>\n                }\n                {after}\n              </Fragment>\n            }\n          />\n        </div>\n        {platform === IOS && removable &&\n        <div\n          ref={this.getRemoveRef}\n          className=\"Cell__remove\"\n          onClick={this.onRemoveClick}\n          style={{ transform: `translateX(-${this.state.removeOffset}px)` }}\n        >\n          <span className=\"Cell__remove-in\">{removePlaceholder}</span>\n        </div>\n        }\n      </div>\n    );\n  }\n}\n\nexport default withPlatform(Cell);\n"],"file":"Cell.js"}