{"version":3,"sources":["../../src/lib/SSR.tsx"],"names":["React","createContext","platform","computeBrowserInfo","SSRContext","userAgent","browserInfo","undefined","SSRWrapper","props","children","contextValue"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,aAAhB,QAAyC,OAAzC;AACA,SAAuBC,QAAvB,QAAuC,YAAvC;AACA,SAAsBC,kBAAtB,QAAgD,WAAhD;AAQA,OAAO,IAAMC,UAAU,gBAAGH,aAAa,CAAsB;AAC3DC,EAAAA,QAAQ,EAAE,IADiD;AAE3DG,EAAAA,SAAS,EAAE,EAFgD;AAG3DC,EAAAA,WAAW,EAAEC;AAH8C,CAAtB,CAAhC;AAWP,OAAO,IAAMC,UAA+B,GAAG,SAAlCA,UAAkC,CAACC,KAAD,EAAW;AAAA,MAClDJ,SADkD,GACbI,KADa,CAClDJ,SADkD;AAAA,MACvCC,WADuC,GACbG,KADa,CACvCH,WADuC;AAAA,MAC1BI,QAD0B,GACbD,KADa,CAC1BC,QAD0B;;AAGxD,MAAI,CAACJ,WAAD,IAAgBD,SAApB,EAA+B;AAC7BC,IAAAA,WAAW,GAAGH,kBAAkB,CAACE,SAAD,CAAhC;AACD,GALuD,CAOxD;;;AACA,MAAMM,YAAY,GAAG;AACnBT,IAAAA,QAAQ,EAAEA,QAAQ,CAACI,WAAD,CADC;AAEnBA,IAAAA,WAAW,EAAXA,WAFmB;AAGnBD,IAAAA,SAAS,EAATA;AAHmB,GAArB;AAMA,sBACE,oBAAC,UAAD,CAAY,QAAZ;AAAqB,IAAA,KAAK,EAAEM;AAA5B,KACGD,QADH,CADF;AAKD,CAnBM","sourcesContent":["import React, { createContext, FC } from 'react';\nimport { PlatformType, platform } from './platform';\nimport { BrowserInfo, computeBrowserInfo } from './browser';\n\nexport interface SSRContextInterface {\n  platform: PlatformType;\n  userAgent?: string;\n  browserInfo?: BrowserInfo;\n}\n\nexport const SSRContext = createContext<SSRContextInterface>({\n  platform: null,\n  userAgent: '',\n  browserInfo: undefined,\n});\n\nexport interface SSRWrapperProps {\n  userAgent?: string;\n  browserInfo?: BrowserInfo;\n}\n\nexport const SSRWrapper: FC<SSRWrapperProps> = (props) => {\n  let { userAgent, browserInfo, children } = props;\n\n  if (!browserInfo && userAgent) {\n    browserInfo = computeBrowserInfo(userAgent);\n  }\n\n  // TODO: Каждый раз создаётся новый объект для контекста – плохо\n  const contextValue = {\n    platform: platform(browserInfo),\n    browserInfo,\n    userAgent,\n  };\n\n  return (\n    <SSRContext.Provider value={contextValue}>\n      {children}\n    </SSRContext.Provider>\n  );\n};\n"],"file":"SSR.js"}