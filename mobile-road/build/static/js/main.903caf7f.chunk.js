(this["webpackJsonpmobile-road"]=this["webpackJsonpmobile-road"]||[]).push([[0],{125:function(e,t,a){e.exports=a.p+"static/media/Soloriver.57a77e9b.mp3"},139:function(e,t,a){e.exports=a.p+"static/media/question_banner_pc.b2b8189b.jpg"},140:function(e,t,a){e.exports=a.p+"static/media/question_banner_mobile.14c5ae38.png"},142:function(e,t,a){e.exports=a.p+"static/media/Ninja.0c4d240d.webp"},168:function(e,t,a){e.exports=a.p+"static/media/user.cfc7e0b1.jpg"},169:function(e,t,a){e.exports=a.p+"static/media/jedi.7c18eb66.svg"},172:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAAA4CAYAAABE814IAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAyuSURBVHgB3Vtfb1XHEZ859/gf+BowGBsbgk3ahKZtAi+pojYVqKJ9bJ/7kn6Dts+thPMJ2o8Az63UjxCSELWR2jRR1aoh0BgDBYwLDuaP7Xvvme6e3dmd2T33mkRWJLOSOefsvzPzm9/Mzu654HvLW79ALH4HAPsRuNg7AlnQPBNwDwp90LaYW6R0hOhaj+V5xfjQhro735MfYSYnUtPV17odQbcBPxu5/ASxvVrCVmvxJwvlRehTCixa5y0YWhglFjAk+l+nlBQwG2brkQJ8oZKf0GskBqKYolYWBBgk3uU7U2IF9RymZnPgfNWl38OAUpoZ5nlsw0zhPnDCSOnYgPlsGYGo7sv8im0UrZ8MJJJsyTnXpC81NFIyh2WLv9sPA0rBE+evpUBmDPbF4BqyHiiZw4PBXqHsH7DG8BZ+F0AzGHoOISXp15Honw2SxhpQiiifVMkJh4LoGVPAoc5NJLUPPgwBA5RuhijqkCfQCoV3xDkj+1G5kXY4lplUTGHmbYOHZ0iITCgmjtOmU4We0rMsJdG3ohcHI6Mo4bMSWLyTkhplWE0iYHAhcTMiEjNFJkp37AuIRB2gAiUeplCgUAgyk6IX2EV/d6MsogTCyABuJv02aX3WWzKzNhaRihPRfVHLyIBvQ5FSaRSWUk1PbsNUrybAA5VlEHWDiJF0ywdX54MTwVkWJmCVjJBuDBIcEG6HTaEhLwVKUno/oJwTeUQHyJw9RnIxKrhj5Hu6jDpKNZtOxwHowzgU7MJoFNmVAdqGIYVSM+utKY+kr1JvJwp7vUAq7cvhlfHxATlbJYC5Gq/sjq5SG46ExDauRCCx0dD9SqHExNQ94r8E0SAklk62MILMZYXlWBgvWMYw6egESfLl+eaZF5XjIMnDtX+RR5tZE9iTMqyhlOwq5JMoErFCgiEYD+qxHoTwZGMLLn/y3xrUc68f953Ih4sYjCOWlFmZX0iSKij7kE7Lg57RHShxbrlGbs+PGhApAecaDaBgJrepdOHtsQHjAwPGk80u7BkdisoAhKXuxt2HBrRuEgC9FpI5TD8ZiJUlyIEU8NBqjg4PwczUeGAsD0ndcQAgJPIFEfiSCRRTaldwjLJKSjC+/+pstKyg8t+vrMDXVWYOtaN7N1F7QHHLLjErIhgq8FE0nHuu6r4WjMuf3BJgzJlry684mlKnXzpsmNSFVDLKKAMQA2B8KSkWR1XldPZ5dGQIwvJOqPoR6Z11X0AcvbRMngh1WTZ0/+jTFTh5fNL8HajrnjztNIBRBnC18ABHD0+IuRtWBxkXKakLbONkLhkvgy7EpT/k2ZL926y7JU+KyRVkgy//vn4fOr0KTszuM25yS7nJnpEyWClZeHnV8w8k4kvswzcJUUI76Z4AYZVBYKCcvhGUEFBDPTwLQzBLvrRACC9MT8BQqwUfXbkL126u1X+2WDB+8NqcoWkrWCkFg6837jysAezvKhjCub2OGerPTbUjECqIolI4TujnkcuzdLVt4ocHBJ6FSXDk0B44O360XlolM8ZGyhD5o/E1tWzzx599+aA6awDh8TqohZkh5hvMJLmyYFyROKw8k8tQ+j4MM9T28jKMWRBemzVL6CM4NtM2bjLkBUmXbr2xsjWnvjnlGaJXq0w5f62BhvQYsN8zhtQ+xA4ZkyR3B3sMb+6ELuznQsw6aQPnXJYZL5vgmgcA1AIwbf18R6ddUM2GAaSJpjeQBycJaigDrNqfIISzV3Uc4J555dkufS+ahIIE3bgci6iAQXLIMhdO0z0Y2aqh3pObDOUKoWaOYHBPkvLze0QwDv94sZ5p2QX9DnZGJ4JXXBhJelSIHyyFDpaaulmswujTQm4I0Isc3jFHxiV9IgZKbFLgcT1lMSgv+MGNrto5oxKOIGIkUZD7C8Ee6SYgFYkvbHIVSkAmoXQcp12F49aNu1/AzZWHsBOFqHq70EuXBiNfkF3UrmsQIe59ePGmSFsY4K0kQULNOB+tZGzi4wG5onDZKTDq2bE4X6AUOxz7Sa8FKS2wqmkqTSIeyCifBUzuhnG2rJDMNiGCzG4YDIEhWO9IQVjEy8ZltEw6wVq+sw5PNzuZcNo1IFErzkB5o++B2YjU1VT7ALf7+RtT0DPXymy+u/Zq/kxCXdfVf6Yi3rv2bv68du5460ApFWQfRW9h6xZf5y71q5aNzkGTSbsFszFkyu+daWDnQrBkLzEPSSI6f0a0u1ROqHzzgIlJ34ktckzLASKDIHE9yqzfPLtuswwYaumArPpTXyqHYmRbstcISJ16E/DOkn34hZkJseLo3WRccrUqJHQOm600lngGyhWDwWrKOEPcIP092f5t9ApzMOTySVRKNiieuHpsoEseED8LIeQpOMVZRNQPLU1gBAU44SW1opBUzyseA7lfUUCPC5YXR46xH8CmDQgNH6EaPaMxntn403vXAwIBbVC0dvXLd9ejywwMogIIqSzobEb6mv55BWT5SOMbRBtfO0+GYfrkvmxcczyBbHJjuKUfLwx/bO/L9JXKx3dJUF25V8D3XmxD6QNrGktUUG0opvkS34cDIpWzh72ICKrUREHK70jOhXoMiTgLADGjEO3ZzGJ4ylDhUo+2CA6MxRSnkR19CvW23ub7soHswJ8I7PMxk/iEqOKrSUojhFPV3iqVjCmod6j5Nh1EHEMzlpJ691SBjF0O1lvrUAOiZGooKVBGpAtnF8aWAiDRQqhmyiYk+02VgUpjhYq5Xm5SdQhi9ZLIYVx+1ccssTGL/2AAmC1A/ixkbcNkVpsE7WFzRHFvGfZf/atZj3v+zzC82wHqmmtnq75f+s45WJl9ZanXieyoAZGpN39UkkRf9kd/OhaRAoGBcSJjI5juGCAGUaFjozuO2O8rh9qiHoPhSLw/HgwBfLbahVePmEOriUPQHR6D8rHZ51S9+o9sGmuBMfdbYxOwPnkUCqJFyQ4PiJsa/RvSIPxVjv52qkwbQCJTGL1YCGLIst02Ogj/ud+DE5N7YOWVH8Lo6k3Ye/sqjDxYqZnSGdkL/zv+EqwcPwXdcmTxjSOti+k78f3rHQeDt6AExF7t4fDTzW7CCeFmyQGHWqUgiSsQuNHcJnS2X+CmD40Dn43y8UK6cSQxD/9MYthkrd+aaplVB7O9zEPjWqNjrTOvT+G70FDw/eUOyVXFzS1zBu0giQsPVI6DoVWjEh1UJirmiveYyAIh/qQxK7xHXG2x75vbV5hAi1Ca1XjDJG/3HhPcWa/grVMjfRehggLqMiJAbY3UfYJOSaXe+rNFo8S6u+wHEDLkGvwmOUlsJagvGLIMG2Z8e7oFcxMFjJRuziFTN90u4OXDJfz59tN56AeIC/IITRQPVlX5eIIJCsWlr4EYJq2tmCU/SOs+IY0nIRvlYLj5Inv2DiGcmm1Buw8J7CawBcOff3i7+1ZTu3GZrvr1EysdlIo3IalSeidjc0YJqovNHp9+UTI2dxXvLvaxiv3TMfY6anzjuzMtt/PtdOqAOr56HcqNR7V1H48fhPsHF2B1cr4+D+n2qrNvHhu6pAB5rw6qAClDMopKxVlhwQTLtCoDJ7qhDoa8x5GfBzADNU3eSNQBxJ0y1580gfTwXhMzvliFg1f+4nIO22CX3HpgVd+vtw/D1W+8CVvF8NLWVnH67AKusU5FFBj0RleprsGQfbmuBkP8lCkmYxrQsOFT2vsgqsAg0Lto0q5GwgXJsgNgZhyhtfnEgPGhMf8W00v8OWDaa7fhxU/fsUPny+Hql1LHIt1vpGn5tsW7Av8Mk7FkSyIK4aVi6OJDoL/4daD+xOCB4rMT0j7L4p6YbNVvmPzXZcOMTWchAYJjB7OlggkDysztf9rHX73zefy5d9Gkf7qUQWplTYPg59zEd/G03D9Lq0Kcgyi+Q3QXMUYwCVy+UesrAvyBUYShh6tQbDzOGBHA4PrKuc7c0t+g7G7uL8rIEvvT7jWdPie+kFqjAbRYh4Ex8SyEQn9ozG8CXAqImJTq8xmZrbJ+k3sQ7C+5RleuQ0RXMMKzIlxrplVQdjbgyK1/2M3imQCIOXX+tYF6qc7NsDluSDmIxDOJVTeo76R0jBKBGvOjv5BsKZBJsE78QWIAivftYXdtPVrzDCDNCMkWAwrV+xsH0MSDm7b+DLtNeXahvGCuF2AXl/sb9KduRT9ziFWaJSTYUYNRKbexLLGlV/R+ai4XS3geCrn/APXg9I/CnqWS32Uo/zYj7x0p8ZS5u1jAc1CMPvP2inm9vyHYrhi8ztjrcwGI0Xi+/tc/YXJNS1O9CXH7B43ZNeU3f7i2aJQ5DztQ7Nf/XQ/Ib/94bXt/+BJl97sMFouwU8V8/f8/bheLKjkHUTMAAAAASUVORK5CYII="},213:function(e,t,a){e.exports=a(268)},268:function(e,t,a){"use strict";a.r(t);a(214),a(242),a(244),a(245),a(247);var n=a(0),o=a.n(n),r=a(124),i=a.n(r),s=a(21),l=a.n(s),c=a(272),u=a(183),h=a(27),p=a(12),m=a(13),d=a(15),f=a(14),E=a(125),g=a.n(E),v=a(1),_=(a(57),a(58),a(39)),k=a(68),w=a.n(k),b=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?",title_new_tiket:"",text_new_tiket:""},n.onChange=function(e){var t=e.currentTarget.name,a=e.currentTarget.value;n.setState(Object(h.a)({},t,a))},n}return Object(m.a)(a,[{key:"sendNewTiket",value:function(){var e=this;this.setState({popout:o.a.createElement(v.K,null)});var t=this;if(this.state.text_new_tiket.length>5||this.state.title_new_tiket.length>5){var a=this.state.api_url+"method=ticket.add&"+window.location.search.replace("?",""),n=new XMLHttpRequest;n.open("POST",a,!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.onreadystatechange=function(){var e=this;if(n.readyState===XMLHttpRequest.DONE&&200===n.status&&n.responseText){var a=JSON.parse(n.responseText);t.props.this.goTiket(a.response.ticket_id),fetch(t.state.api_url+"method=tickets.get&unanswered=1&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(a){a.result?t.setState({tiket_all:a.response,popout:null,title_new_tiket:"",text_new_tiket:""}):e.showErrorAlert(a.error.message)})).catch((function(t){e.showErrorAlert()}))}},n.send("title="+this.state.title_new_tiket+"&text="+this.state.text_new_tiket),n.onerror=function(t){e.showErrorAlert(),console.error(t)}}else this.setState({popout:o.a.createElement(v.c,{actions:[{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,style:"cancel"}],onClose:this.closePopout},o.a.createElement("h2",null,"\u041e\u0448\u0438\u0431\u043a\u0430"),o.a.createElement("p",null,"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0438\u043b\u0438 \u0442\u0435\u043a\u0441\u0442 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 5 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432."))})}},{key:"render",value:function(){var e=this;return o.a.createElement(v.C,{id:this.props.id},o.a.createElement(v.D,{left:o.a.createElement(v.F,{onClick:function(){return window.history.back()}},o.a.createElement(w.a,null))},"\u041d\u043e\u0432\u044b\u0439 \u0432\u043e\u043f\u0440\u043e\u0441"),o.a.createElement(v.p,null,o.a.createElement(v.v,{top:null===this.state.title_new_tiket?"\u0421\u0443\u0442\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b (0/30). \u041d\u0435 \u043c\u0435\u043d\u0435\u0435 5 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432":"\u0421\u0443\u0442\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b ("+this.state.title_new_tiket.length+"/80). \u041d\u0435 \u043c\u0435\u043d\u0435\u0435 5 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432",maxLength:"80",type:"text",name:"title_new_tiket",value:this.state.title_new_tiket,onChange:function(t){return e.onChange(t)}}),o.a.createElement(v.U,{maxLength:"2020",name:"text_new_tiket",top:null===this.state.text_new_tiket?"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u043e \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0435 (0/2020). \u041d\u0435 \u043c\u0435\u043d\u0435\u0435 5 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432":"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u043e \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0435 ("+this.state.text_new_tiket.length+"/2020). \u041d\u0435 \u043c\u0435\u043d\u0435\u0435 5 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432",onChange:function(t){return e.onChange(t)},value:this.state.text_new_tiket}),o.a.createElement(v.f,{size:"xl",level:"secondary",stretched:!0,disabled:!Boolean(this.state.text_new_tiket.length>5)||!Boolean(this.state.title_new_tiket.length>5),onClick:function(){e.sendNewTiket()}},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")))}}]),a}(o.a.Component),y=a(48),A=a(69),C=a.n(A),P=a(141),S=a.n(P),M=a(66),j=a.n(M),O=a(139),x=a.n(O),N=a(140),D=a.n(N),B=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),T=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?",fething:!1,offset:0,ShowBanner:!0};var o=n.props.this;return n.setPopout=o.setPopout,n.showErrorAlert=o.showErrorAlert,n.setActiveModal=o.setActiveModal,n.Prepare_questions=n.Prepare_questions.bind(Object(y.a)(n)),n}return Object(m.a)(a,[{key:"Prepare_questions",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a&&this.setPopout(o.a.createElement(v.K,null)),this.props.this.getQuestions(t),setTimeout((function(){e.setState({fetching:!1}),a&&e.setPopout(null)}),500)}},{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.props.account.is_first_start&&e.setActiveModal("start"),e.setPopout(null)}),1e3)}},{key:"render",value:function(){var e=this,t=this.props.this;return o.a.createElement(v.C,{id:this.props.id},o.a.createElement(v.D,{left:o.a.createElement(o.a.Fragment,null,o.a.createElement(v.F,{onClick:function(){return e.props.this.getRandomTiket()}},o.a.createElement(S.a,null)))},"\u0412\u043e\u043f\u0440\u043e\u0441\u044b"),this.state.ShowBanner&&this.props.account.is_first_start?o.a.createElement(o.a.Fragment,null,o.a.createElement(v.e,{mode:"image",size:"m",onDismiss:function(){e.setState({ShowBanner:!1})},header:"\u0421 \u0447\u0435\u0433\u043e \u043d\u0430\u0447\u0430\u0442\u044c?",subheader:"\u0421 \u043f\u0440\u043e\u0447\u0442\u0435\u043d\u0438\u044f \u0441\u0442\u0430\u0442\u044c\u0438",background:o.a.createElement("div",{style:{backgroundColor:"#5b9be6",backgroundImage:B?"url("+D.a+")":"url("+x.a+")",backgroundPosition:"right bottom",backgroundSize:"100%",backgroundRepeat:"no-repeat"}}),asideMode:"dismiss",actions:o.a.createElement(v.f,{mode:"overlay_primary",href:"https://vk.com/@jedi_road-checking-responses",target:"_blank",rel:"noopener noreferrer",size:"l"},"\u0427\u0438\u0442\u0430\u0442\u044c")}),o.a.createElement(v.M,null)):null,this.props.account.special?o.a.createElement(v.l,null,o.a.createElement(v.f,{onClick:function(){return t.goPanel("new_ticket")},size:"xl",mode:"outline",stretched:!0},"\u041d\u043e\u0432\u044b\u0439 \u0432\u043e\u043f\u0440\u043e\u0441")):null,o.a.createElement(v.I,{onRefresh:function(){e.setState({fetching:!0}),e.Prepare_questions()},isFetching:this.state.fetching},this.props.tiket_all?this.props.tiket_all.length>0?this.props.tiket_all.map((function(a,n){return o.a.createElement(o.a.Fragment,{key:n},o.a.createElement(v.g,{onClick:function(){e.setState({tiket_all:null}),t.goTiket(a.id)},description:0===a.status?"\u041d\u0430 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u0438\u0438":1===a.status?"\u0415\u0441\u0442\u044c \u043e\u0442\u0432\u0435\u0442":"\u0417\u0430\u043a\u0440\u044b\u0442",asideContent:o.a.createElement(v.d,{src:526444378===a.author.id?"https://cdn3.iconfinder.com/data/icons/avatars-15/64/_Ninja-2-512.png":a.author.photo_200,size:56})},a.title),o.a.createElement(v.M,{style:{width:"90%"}}))})):o.a.createElement(v.H,{icon:o.a.createElement(C.a,null)},"\u0423\u043f\u0441, \u043a\u0430\u0436\u0435\u0442\u0441\u044f \u0432\u043e\u043f\u0440\u043e\u0441\u044b \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b\u0438\u0441\u044c"):o.a.createElement(v.G,null),this.props.tiket_all_helper?20===this.props.tiket_all_helper.length?o.a.createElement(v.l,null,o.a.createElement(v.f,{size:"xl",level:"secondary",before:this.state.fetching?o.a.createElement(j.a,{width:28,height:28,className:"Spinner__self"}):null,onClick:function(){e.setState({fetching:!0}),e.Prepare_questions(!0)}},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0435\u0449\u0451")):this.props.tiket_all?0===this.props.tiket_all.length?null:o.a.createElement(v.o,null,this.props.tiket_all.length," \u0432\u043e\u043f\u0440\u043e\u0441(\u0430) \u0432\u0441\u0435\u0433\u043e"):null:null))}}]),a}(o.a.Component),H=a(144),R=a.n(H),z=a(95),L=a.n(z),I=a(142),F=a.n(I),K=a(44),q=a.n(K),U=a(143),V=a.n(U),J=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),W=function(e){return!0===e.is_mine?o.a.createElement("div",{className:"mine_message"},o.a.createElement("div",{id:"animation",className:"message_report_moderator",style:{marginBottom:e.approved?"20px":null,right:J?"-12%":"-22%"}},o.a.createElement("div",{onClick:function(){return e.onClick()}},o.a.createElement("p",{className:"moderator_name_message"},e.title),o.a.createElement("p",{className:"text_message"},e.children)),1===e.is_mark?o.a.createElement("div",{className:"approved",onClick:function(){return e.DoneApp()}},o.a.createElement(q.a,{className:"approved_icon green",height:15,width:15,style:{display:"inline-block"}})):0===e.is_mark?o.a.createElement("div",{className:"approved",onClick:function(){return e.CanselApp()}},o.a.createElement(V.a,{className:"approved_icon",height:15,width:15,style:{display:"inline-block"}})):null,o.a.createElement("img",{className:"avatar_message_moderator",src:e.avatar,alt:"\u0430",style:{marginLeft:"99%"}}),o.a.createElement("p",{className:"time_message"},e.time))):o.a.createElement("div",{className:"all_message",style:!1===e.is_mark?{marginBottom:"-3px"}:null},o.a.createElement("img",{className:"avatar_message",src:e.avatar,alt:"\u0430"}),o.a.createElement("div",{id:"animation",className:"message_report",onClick:function(){return e.onClick()}},o.a.createElement("p",{className:"moderator_name_message"},e.title),o.a.createElement("p",null,e.children),o.a.createElement("p",{className:"time_message"},e.time)))},Q=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),G=a(123).parse(window.location.search.replace("?","")),X=["\u044f\u043d\u0432\u0430\u0440\u044f","\u0444\u0435\u0432\u0440\u0430\u043b\u044f","\u043c\u0430\u0440\u0442\u0430","\u0430\u043f\u0440\u0435\u043b\u044f","\u043c\u0430\u044f","\u0438\u044e\u043d\u044f","\u0438\u044e\u043b\u044f","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u043d\u043e\u044f\u0431\u0440\u044f","\u0434\u0435\u043a\u0430\u0431\u0440\u044f"];function Y(e){return e<10?"0"+e:e}var Z=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?",tiket_info:null,tiket_message:[],tiket_send_message:"",add_comment:!1,redaction:!1};var o=n.props.this;return n.setPopout=o.setPopout,n.showErrorAlert=o.showErrorAlert,n.setActiveModal=o.setActiveModal,n.goOtherProfile=o.goOtherProfile,n.sendRayt=n.sendRayt.bind(Object(y.a)(n)),n.onChange=function(e){var t=e.currentTarget.name,a=e.currentTarget.value;n.setState(Object(h.a)({},t,a))},n}return Object(m.a)(a,[{key:"Prepare_ticket",value:function(){var e=this;fetch(this.state.api_url+"method=ticket.getById&ticket_id="+this.props.ticket_id+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?(e.setState({tiket_info:t.response.info,tiket_message:t.response.messages}),e.setPopout(null)):e.showErrorAlert(t.error.message)})).catch((function(t){e.showErrorAlert(t)}))}},{key:"sendRayt",value:function(e,t){var a=this,n=1;(n=!0===e?1:0)<2&&fetch(this.state.api_url+"method=ticket.markMessage&message_id="+t+"&mark="+n+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result?fetch(a.state.api_url+"method=ticket.getMessages&ticket_id="+a.state.tiket_info.id+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result?(a.setState({tiket_message:e.response}),a.setActiveModal(null),a.setPopout(null)):a.showErrorAlert(e.error.message)})).catch((function(e){a.showErrorAlert(e)})):a.showErrorAlert(e.error.message)})).catch((function(e){a.showErrorAlert(e)}))}},{key:"sendClear",value:function(e){var t=this;this.setPopout(o.a.createElement(v.K,null)),fetch(this.state.api_url+"method=ticket.approveReply&message_id="+e+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result?t.setPopout(null):t.showErrorAlert(e.error.message)})).catch((function(e){t.showErrorAlert(e)}))}},{key:"Admin",value:function(e,t,a,n){var r=this,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1;this.props.this.setPopout(o.a.createElement(v.a,{onClose:function(){return r.setPopout(null)}},t>0?o.a.createElement(v.b,{autoclose:!0,onClick:function(){return r.goOtherProfile(t)}},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"):null,this.props.account.special&&0!==s&&1!==s&&t>0?o.a.createElement(v.b,{autoclose:!0,onClick:function(){return r.sendRayt(!0,e)}},"\u041e\u0446\u0435\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e"):null,this.props.account.special&&0!==s&&1!==s&&t>0?o.a.createElement(v.b,{autoclose:!0,onClick:function(){return r.sendRayt(!1,e)}},"\u041e\u0446\u0435\u043d\u0438\u0442\u044c \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u043e"):null,!0===this.props.account.special&&t>0?o.a.createElement(v.b,{autoclose:!0,onClick:function(){return r.sendClear(e)}},"\u041e\u0434\u043e\u0431\u0440\u0438\u0442\u044c"):null,!0===this.props.account.special&&t<0?o.a.createElement(v.b,{autoclose:!0,onClick:function(){r.props.this.setState({other_profile:{id:t,avatar:{url:i}}}),r.setActiveModal("ban_user")}},"\u0417\u0430\u0431\u0430\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"):null,!0===this.props.account.special&&t>0&&(null===n||void 0===n)?o.a.createElement(v.b,{autoclose:!0,onClick:function(){return r.setState({add_comment:!0,message_id_add:e})}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"):null,Number(t===this.props.account.id)?o.a.createElement(v.b,{autoclose:!0,onClick:function(){return r.setState({redaction:!0,message_id_redac:e,tiket_send_message:a})}},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"):null,null===n||void 0===n?null:o.a.createElement(v.b,{autoclose:!0,onClick:function(){r.props.this.setState({comment:n}),r.setActiveModal("comment")}},"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"),Number(t)===Number(this.props.account.id)||!0===this.props.account.special?o.a.createElement(v.b,{autoclose:!0,onClick:function(){return r.deleteMessage(e)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"):null,o.a.createElement(v.b,{autoclose:!0,mode:"cancel"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c")))}},{key:"copy",value:function(e){var t=this;this.setPopout(o.a.createElement(v.a,{onClose:function(){return t.setState({popout:null})}},Number(this.state.tiket_info.author.id)===Number(G.vk_user_id)||!0===this.props.account.special?0===this.state.tiket_info.status||1===this.state.tiket_info.status?o.a.createElement(v.b,{autoclose:!0,onClick:function(){return t.deleteTicket()}},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0442\u0438\u043a\u0435\u0442"):o.a.createElement(v.b,{autoclose:!0,onClick:function(){return t.openTicket()}},"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0442\u0438\u043a\u0435\u0442"):null,o.a.createElement(v.b,{autoclose:!0,onClick:function(){return l.a.send("VKWebAppCopyText",{text:"https://vk.com/app7409818#ticket_id="+e})}},"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443"),o.a.createElement(v.b,{autoclose:!0,mode:"cancel"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c")))}},{key:"sendNewMessage",value:function(){var e=this;if(this.state.tiket_send_message.length>=5){this.setPopout(o.a.createElement(v.K,null));var t=this.state.api_url+"method=ticket.sendMessage&"+window.location.search.replace("?",""),a=new XMLHttpRequest;a.open("POST",t,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.onreadystatechange=function(){4!==a.status&&200===a.status&&setTimeout((function(){fetch(e.state.api_url+"method=ticket.getMessages&ticket_id="+e.state.tiket_info.id+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?(e.setState({tiket_message:t.response,tiket_send_message:"",add_comment:!1,redaction:!1}),e.setPopout(null),setTimeout((function(){e.setState({tiket_send_message:"."})}),1e3),setTimeout((function(){e.setState({tiket_send_message:""})}),1e3)):e.showErrorAlert(t.error.message)})).catch((function(t){e.showErrorAlert(t)}))}),500)},a.send("ticket_id="+this.state.tiket_info.id+"&text="+this.state.tiket_send_message),a.onerror=function(t){e.showErrorAlert(t)}}}},{key:"deleteMessage",value:function(e){var t=this;this.setPopout(o.a.createElement(v.K,null)),fetch(this.state.api_url+"method=ticket.deleteMessage&message_id="+e+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result?fetch(t.state.api_url+"method=ticket.getMessages&ticket_id="+t.state.tiket_info.id+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result?(t.setState({tiket_message:e.response}),t.setPopout(null)):t.showErrorAlert(e.error.message)})).catch((function(e){t.showErrorAlert(e)})):t.showErrorAlert(e.error.message)})).catch((function(e){t.showErrorAlert(e)}))}},{key:"deleteTicket",value:function(){var e=this;this.setPopout(o.a.createElement(v.K,null)),fetch(this.state.api_url+"method=ticket.close&ticket_id="+this.state.tiket_info.id+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?fetch(e.state.api_url+"method=ticket.getById&ticket_id="+e.state.tiket_info.id+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?(e.setState({tiket_info:t.response.info}),e.setPopout(null)):e.showErrorAlert(t.error.message)})).catch((function(t){e.showErrorAlert(t)})):e.showErrorAlert(t.error.message)})).catch((function(t){e.showErrorAlert(t)}))}},{key:"openTicket",value:function(){var e=this;this.setPopout(o.a.createElement(v.K,null)),fetch(this.state.api_url+"method=ticket.open&ticket_id="+this.state.tiket_info.id+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?fetch(e.state.api_url+"method=ticket.getById&ticket_id="+e.state.tiket_info.id+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?(e.setState({tiket_info:t.response.info}),e.setPopout(null)):e.showErrorAlert(t.error.message)})).catch((function(t){e.showErrorAlert(t)})):e.showErrorAlert(t.error.message)})).catch((function(t){e.showErrorAlert(t)}))}},{key:"sendNewMessageRedact",value:function(){var e=this;if(this.setPopout(o.a.createElement(v.K,null)),this.state.tiket_send_message.length>=5){var t=this.state.api_url+"method=ticket.editMessage&"+window.location.search.replace("?",""),a=new XMLHttpRequest;a.open("POST",t,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.onreadystatechange=function(){4!==a.status&&200===a.status&&fetch(e.state.api_url+"method=ticket.getMessages&ticket_id="+e.state.tiket_info.id+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?(e.setState({tiket_message:t.response,tiket_send_message:" ",add_comment:!1,redaction:!1}),e.setPopout(null),e.setState({tiket_send_message:""})):e.showErrorAlert(t.error.message)})).catch((function(e){console.log(e)}))},a.send("message_id="+this.state.message_id_redac+"&text="+this.state.tiket_send_message),a.onerror=function(t){e.showErrorAlert(t)}}else this.showErrorAlert("\u0422\u0435\u043a\u0441\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u0438\u0437 5 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432.")}},{key:"sendNewMessageComment",value:function(){var e=this;if(this.setPopout(o.a.createElement(v.K,null)),this.state.tiket_send_message.length>=5){var t=this.state.api_url+"method=ticket.commentMessage&"+window.location.search.replace("?",""),a=new XMLHttpRequest;a.open("POST",t,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.onreadystatechange=function(){4!==a.status&&200===a.status&&fetch(e.state.api_url+"method=ticket.getMessages&ticket_id="+e.state.tiket_info.id+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?(e.setState({tiket_message:t.response,tiket_send_message:" ",add_comment:!1,redaction:!1}),e.setPopout(null),e.setState({tiket_send_message:""})):e.showErrorAlert(t.error.message)})).catch((function(t){e.showErrorAlert(t)}))},a.send("message_id="+this.state.message_id_add+"&text="+this.state.tiket_send_message),a.onerror=function(t){e.showErrorAlert(t)}}else this.showErrorAlert("\u0422\u0435\u043a\u0441\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u0438\u0437 5 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432.")}},{key:"componentDidMount",value:function(){this.setPopout(o.a.createElement(v.K,null)),this.Prepare_ticket()}},{key:"nofinc",value:function(){return 1}},{key:"render",value:function(){var e=this,t=this.props,a=this;return o.a.createElement(v.C,{id:this.props.id},o.a.createElement(v.D,{left:o.a.createElement(v.E,{onClick:function(){return window.history.back()}})},this.state.tiket_info?o.a.createElement("span",{id:"animation",onClick:function(){return e.copy(e.state.tiket_info.id)}},"\u0412\u043e\u043f\u0440\u043e\u0441 #",this.state.tiket_info.id):null),this.state.tiket_info?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"title_tiket"},new Date(1e3*this.state.tiket_info.time).getDate()," ",function(e){var t=new Date(1e3*e).getMonth();return X[t]}(this.state.tiket_info.time)),o.a.createElement("div",{className:"title_tiket",style:{marginTop:"10px",width:"95%",marginLeft:"10px"}},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043e\u0431\u0440\u0430\u0442\u0438\u043b\u0441\u044f \u0441 \u0432\u043e\u043f\u0440\u043e\u0441\u043e\u043c  \xab",this.state.tiket_info.title,"\xbb"),o.a.createElement(o.a.Fragment,null,this.state.tiket_message?this.state.tiket_message.map((function(e,n){var r=Number(a.state.tiket_info.author.id)===Number(G.vk_user_id),i=Number(e.author.id)===Number(G.vk_user_id),s=e.author.is_moderator?e.author.avatar.url:e.author.photo_200,l=Y(new Date(1e3*e.time).getHours())+":"+Y(new Date(1e3*e.time).getMinutes()),c=isFinite(e.nickname)?"\u0410\u0433\u0435\u043d\u0442 \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438 #".concat(e.nickname):e.nickname?e.nickname:"\u0410\u0433\u0435\u043d\u0442 \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438 #".concat(e.author.id);return Number(a.state.tiket_info.author.id)===Number(G.vk_user_id)?o.a.createElement(W,{title:526444378===e.author.id?"\u0412\u0438\u0442\u0451\u043a":e.author.is_moderator?c:e.author.first_name+" "+e.author.last_name,title_icon:void 0!==e.moderator_comment&&o.a.createElement(L.a,{width:10,height:10,style:{display:"inline-block"}}),is_mine:i===r,avatar:s,onClick:function(){return a.Admin(e.id,e.author.first_name?-e.author.id:e.author.id,e.text,void 0!==e.moderator_comment?e.moderator_comment.text:null,s,e.mark)},key:n,is_special:a.props.account.special,is_mark:e.mark,time:l,sendRayt_false:function(){return a.sendRayt(!1,e.id)},sendRayt_true:function(){return a.sendRayt(!0,e.id)},approved:!!e.approved,CanselApp:function(){return t.this.showAlert("\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f","\u042d\u0442\u043e\u0442 \u043e\u0442\u0432\u0435\u0442 \u043e\u0446\u0435\u043d\u0435\u043d \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u043e")},DoneApp:function(){return t.this.showAlert("\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f","\u042d\u0442\u043e\u0442 \u043e\u0442\u0432\u0435\u0442 \u043e\u0446\u0435\u043d\u0435\u043d \u043f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e")}},e.text):o.a.createElement(W,{title:526444378===e.author.id?"\u0412\u0438\u0442\u0451\u043a":e.author.is_moderator?c:e.author.first_name+" "+e.author.last_name,title_icon:void 0!==e.moderator_comment&&o.a.createElement(L.a,{width:10,height:10,style:{display:"inline-block"}}),is_mine:e.author.is_moderator,avatar:526444378===e.author.id?F.a:s,key:n,time:l,onClick:function(){return a.Admin(e.id,e.author.first_name?-e.author.id:e.author.id,e.text,void 0!==e.moderator_comment?e.moderator_comment.text:null,s,e.mark)},is_special:a.props.account.special,is_mark:e.mark,sendRayt_false:function(){return a.sendRayt(!1,e.id)},sendRayt_true:function(){return a.sendRayt(!0,e.id)},approved:!!e.approved,CanselApp:function(){return t.this.showAlert("\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f","\u042d\u0442\u043e\u0442 \u043e\u0442\u0432\u0435\u0442 \u043e\u0446\u0435\u043d\u0435\u043d \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u043e")},DoneApp:function(){return t.this.showAlert("\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f","\u042d\u0442\u043e\u0442 \u043e\u0442\u0432\u0435\u0442 \u043e\u0446\u0435\u043d\u0435\u043d \u043f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e")}},e.text)})):null,o.a.createElement("div",{style:{marginBottom:"10vh"}})),0===this.state.tiket_info.status||!0===this.state.redaction||!0===this.state.add_comment?o.a.createElement(v.n,{vertical:"bottom"},o.a.createElement(v.l,{className:"message_sending"},o.a.createElement("textarea",{maxLength:"2020",name:"tiket_send_message",value:this.state.tiket_send_message,onChange:function(t){return e.onChange(t)},placeholder:this.state.add_comment?"\u0412\u0430\u0448 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439...":"\u0412\u0430\u0448\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435...",className:"textarea",style:{width:Q?"80%":"85%"}}),o.a.createElement("div",{className:"send_text",onClick:function(){e.state.tiket_send_message.length>5?!0!==e.state.redaction&&!0!==e.state.add_comment?e.sendNewMessage():e.state.redaction?e.sendNewMessageRedact():e.sendNewMessageComment():e.nofinc()},style:{background:this.state.tiket_send_message.length>5?"var(--button_send)":"#98A0AD"}},o.a.createElement(R.a,{width:30,height:30})))):null,1===this.state.tiket_info.status&&Number(this.state.tiket_info.author.id)===Number(G.vk_user_id)?o.a.createElement("div",null,o.a.createElement(v.n,{vertical:"bottom"},o.a.createElement(v.l,{style:{display:"flex"}},o.a.createElement(v.f,{size:"l",style:{marginRight:"5%"},stretched:!0,onClick:function(){return e.deleteTicket()}},"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0440\u0435\u0448\u0435\u043d\u0430"),o.a.createElement(v.f,{size:"l",stretched:!0,mode:"secondary",onClick:function(){return e.openTicket()}},"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u043d\u0435 \u0440\u0435\u0448\u0435\u043d\u0430")))):null):null)}}]),a}(o.a.Component),$=a(145),ee=a.n($),te=a(147),ae=a.n(te),ne=a(146),oe=a.n(ne),re=a(71),ie=a.n(re),se=a(70),le=a.n(se),ce=a(51),ue=a.n(ce),he=a(50),pe=a.n(he);function me(e){return e<10?"0"+e:e}var de=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?",other_profile:null};var o=n.props.this;return n.setPopout=o.setPopout,n.showErrorAlert=o.showErrorAlert,n.setActiveModal=o.setActiveModal,n}return Object(m.a)(a,[{key:"PrepareProfile",value:function(){var e=this;fetch(this.state.api_url+"method=user.getById&id="+this.props.agent_id+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?(e.setState({other_profile:t.response}),e.setPopout(null)):e.showErrorAlert(t.error.message)})).catch((function(t){e.showErrorAlert(t)}))}},{key:"Prom",value:function(e){var t=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setState({popout:o.a.createElement(v.K,null)}),fetch(this.state.api_url+"method=account.Flash&agent_id="+e+"&give="+Number(a)+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){if(e.result){var n=t.state.other_profile;n.flash=!!a,t.setState({other_profile:n})}else t.showErrorAlert(e.error.message)})).catch((function(e){t.showErrorAlert(e)}))}},{key:"copy",value:function(e,t){var a=this;this.setPopout(o.a.createElement(v.a,{onClose:function(){return a.setPopout(null)}},this.props.account.special?o.a.createElement(v.b,{autoclose:!0,onClick:t?function(){return a.Prom(e,!1)}:function(){return a.Prom(e)}},t?"\u0417\u0430\u0431\u0440\u0430\u0442\u044c \u043f\u0440\u043e\u043c\u0435\u0442\u0435\u0439":"\u0412\u044b\u0434\u0430\u0442\u044c \u043f\u0440\u043e\u043c\u0435\u0442\u0435\u0439"):null,this.props.account.special?o.a.createElement(v.b,{autoclose:!0,onClick:function(){a.props.this.setState({other_profile:a.state.other_profile}),a.setActiveModal("ban_user")}},"\u0417\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c"):null,o.a.createElement(v.b,{autoclose:!0,onClick:function(){l.a.send("VKWebAppCopyText",{text:"https://vk.com/app7409818#agent_id="+e})}},"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443"),o.a.createElement(v.b,{autoclose:!0,theme:"cancel"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c")))}},{key:"please_Month",value:function(e){var t="\u044f\u043d\u0432\u0430\u0440\u044f";switch(e){case 0:t="\u044f\u043d\u0432\u0430\u0440\u044f";break;case 1:t="\u0444\u0435\u0432\u0440\u0430\u043b\u044f";break;case 2:t="\u043c\u0430\u0440\u0442\u0430";break;case 3:t="\u0430\u043f\u0440\u0435\u043b\u044f";break;case 4:t="\u043c\u0430\u044f";break;case 5:t="\u0438\u044e\u043d\u044f";break;case 6:t="\u0438\u044e\u043b\u044f";break;case 7:t="\u0430\u0432\u0433\u0443\u0441\u0442\u0430";break;case 8:t="\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f";break;case 9:t="\u043e\u043a\u0442\u044f\u0431\u0440\u044f";break;case 10:t="\u043d\u043e\u044f\u0431\u0440\u044f";break;case 11:t="\u0434\u0435\u043a\u0430\u0431\u0440\u044f";break;default:t="\u044f\u043d\u0432\u0430\u0440\u044f"}return t}},{key:"componentDidMount",value:function(){this.setPopout(o.a.createElement(v.K,null)),this.PrepareProfile()}},{key:"render",value:function(){var e=this,t=this.props.this;return o.a.createElement(v.C,{id:this.props.id},o.a.createElement(v.D,{left:o.a.createElement(v.F,{onClick:function(){return window.history.back()}},o.a.createElement(w.a,null))},o.a.createElement("span",{onClick:function(){return e.copy(e.state.other_profile.id,e.state.other_profile.flash)}},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c")),o.a.createElement(v.n,{vertical:"bottom"},o.a.createElement(v.l,null,o.a.createElement(v.r,{header:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u0412\u0430\u0436\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f",mode:"default"},"\u0421\u0435\u0440\u0432\u0438\u0441 \u043d\u0435 \u0438\u043c\u0435\u0435\u0442 \u043e\u0442\u043d\u043e\u0448\u0435\u043d\u0438\u044f \u043a \u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u0412\u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0435, \u0430 \u0442\u0430\u043a \u0436\u0435 \u0438\u0445 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0430\u043c."))),this.state.other_profile?o.a.createElement(o.a.Fragment,null,o.a.createElement(v.g,{description:o.a.createElement("div",{className:"description_other_profile"},!0===this.state.other_profile.online.is_online?"online":new Date(1e3*this.state.other_profile.online.last_seen).getDate()+" "+this.please_Month(new Date(1e3*this.state.other_profile.online.last_seen).getMonth())+" "+new Date(1e3*this.state.other_profile.online.last_seen).getFullYear()+" \u0432 "+me(new Date(1e3*this.state.other_profile.online.last_seen).getHours())+":"+me(new Date(1e3*this.state.other_profile.online.last_seen).getMinutes())),size:"l",before:o.a.createElement(v.d,{src:this.state.other_profile.avatar.url,size:70})},o.a.createElement("div",{className:"title_profile"},isFinite(this.state.other_profile.nickname)?"\u0410\u0433\u0435\u043d\u0442 \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438 #".concat(this.state.other_profile.nickname):this.state.other_profile.nickname?this.state.other_profile.nickname:"\u0410\u0433\u0435\u043d\u0442 \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438 #".concat(this.state.other_profile.id),!0===this.state.other_profile.flash?o.a.createElement("div",{className:"profile_moderator_name_icon"},o.a.createElement(le.a,{width:12,height:12,style:{color:"var(--prom_icon)"},onClick:function(){return t.setActiveModal("prom")}})):null,!0===this.state.other_profile.donut?o.a.createElement("div",{className:"profile_moderator_name_icon"},o.a.createElement(pe.a,{width:12,height:12,onClick:function(){return t.setActiveModal("donut")}})):null,!0===this.state.other_profile.verified?o.a.createElement("div",{className:"profile_moderator_name_icon"},o.a.createElement(ue.a,{width:12,height:12,style:{color:"var(--dynamic_blue)"}})):null)),o.a.createElement(v.M,null),"\u0421\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 \u0410\u0433\u0435\u043d\u0442"===this.state.other_profile.nickname||this.state.other_profile.banned?o.a.createElement("div",{style:{marginTop:"20px"},className:"help_title_profile"},this.state.other_profile.banned?"\u042d\u0442\u043e\u0442 \u043f\u0440\u043e\u0444\u0438\u043b\u044c \u0437\u0430\u0431\u0430\u043d\u0435\u043d":"\u0412\u044b \u043d\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c \u044d\u0442\u043e\u0442 \u043f\u0440\u043e\u0444\u0438\u043b\u044c"):o.a.createElement(v.s,null,o.a.createElement(v.N,{disabled:!0,before:o.a.createElement(ee.a,null),indicator:new Date(1e3*this.state.other_profile.registered).getDate()+" "+this.please_Month(new Date(1e3*this.state.other_profile.registered).getMonth())+" "+new Date(1e3*this.state.other_profile.registered).getFullYear()},"\u0414\u0430\u0442\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"),o.a.createElement(v.N,{disabled:!0,before:o.a.createElement(ie.a,null),indicator:o.a.createElement(v.k,{mode:"primary"},this.state.other_profile.total_answers)},"\u0412\u0441\u0435\u0433\u043e \u043e\u0442\u0432\u0435\u0442\u043e\u0432"),o.a.createElement(v.N,{disabled:!0,before:o.a.createElement(oe.a,null),indicator:o.a.createElement(v.k,{mode:"primary"},this.state.other_profile.good_answers)},"\u041f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043e\u0442\u0432\u0435\u0442\u044b"),o.a.createElement(v.N,{disabled:!0,before:o.a.createElement(ae.a,{width:28,height:28}),indicator:o.a.createElement(v.k,{mode:"primary"},this.state.other_profile.bad_answers)},"\u041e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043e\u0442\u0432\u0435\u0442\u043e\u0432")),o.a.createElement(v.M,null)):null)}}]),a}(o.a.Component),fe=a(148),Ee=a.n(fe),ge=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return o.a.createElement(v.y,{id:this.props.id,onClose:this.props.onClose,icon:o.a.createElement(Ee.a,{style:{color:"var(--prom_icon)"},width:72,height:72}),caption:"\u041f\u0440\u043e\u043c\u0435\u0442\u0435\u0439 \u2014 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u044b\u0439 \u0437\u043d\u0430\u0447\u043e\u043a, \u0432\u044b\u0434\u0430\u0432\u0430\u0435\u043c\u044b\u0439 \u0430\u0433\u0435\u043d\u0442\u0430\u043c \u0437\u0430 \u0445\u043e\u0440\u043e\u0448\u0435\u0435 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u043e \u043e\u0442\u0432\u0435\u0442\u043e\u0432.",actions:[{title:"\u041f\u043e\u043d\u044f\u0442\u043d\u043e",mode:"secondary",action:this.props.action}]})}}]),a}(o.a.Component),ve=a(149),_e=a.n(ve),ke=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return o.a.createElement(v.y,{id:this.props.id,onClose:this.props.onClose,icon:o.a.createElement(_e.a,{width:72,height:72}),caption:o.a.createElement("span",null,"Donut \u2014 \u043e\u0442\u043c\u0435\u0442\u043a\u0430 \u0432\u044b\u0434\u0430\u0432\u0430\u0435\u043c\u0430\u044f \u0410\u0433\u0435\u043d\u0442\u0430\u043c \u0437\u0430 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0443 \u043f\u0440\u043e\u0435\u043a\u0442\u0430.",o.a.createElement("br",null),o.a.createElement("br",null),"\u0410\u0433\u0435\u043d\u0442\u044b \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0430\u043b\u0438 \u043f\u0440\u043e\u0435\u043a\u0442, \u043f\u043e\u043b\u0443\u0447\u0430\u044e\u0442 \u043e\u0442\u043c\u0435\u0442\u043a\u0443 \u043d\u0430 \u0432\u0435\u0441\u044c \u043f\u0435\u0440\u0435\u043e\u0434 \u043f\u043e\u0434\u043f\u0438\u0441\u043a\u0438. \u041f\u043e \u0438\u0441\u0442\u0435\u0447\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u043f\u0435\u0440\u0438\u043e\u0434\u0430, \u043e\u0442\u043c\u0435\u0442\u043a\u0430 \u043f\u0440\u043e\u043f\u0430\u0434\u0430\u0435\u0442"),actions:[{title:"\u041f\u043e\u043d\u044f\u0442\u043d\u043e",mode:"secondary",action:this.props.action}]})}}]),a}(o.a.Component),we=a(33),be=a.n(we),ye=a(52),Ae=a.n(ye),Ce=a(72),Pe=a.n(Ce),Se=a(150),Me=a.n(Se),je=a(151),Oe=a.n(je),xe=a(123).parse(window.location.hash),Ne=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?",activePanel:"questions",activeModal:null,modalHistory:[],popout:n.props.popout,ticket_id:null,history:["questions"],active_other_profile:0,other_profile:null,ban_reason:"",comment:"",transfer:{avatar:"",comment:""},AgeUser:0,offset:0,tiket_all:null,tiket_all_helper:null},n.changeData=n.props.this.changeData,n.playAudio=n.props.this.playAudio,n.ReloadProfile=n.props.reloadProfile,n.getQuestions=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e?"method=tickets.get&count=20&unanswered=1&offset="+n.state.offset:"method=tickets.get&count=20&unanswered=1";e||n.setState({offset:20}),fetch(n.state.api_url+t+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){if(t.result){if(n.setState({tiket_all:[]}),n.state.tiket_all)var a=t.response?n.state.tiket_all.concat(t.response):n.state.tiket_all;n.setState({tiket_all:a,tiket_all_helper:t.response}),e&&n.setState({offset:n.state.offset+20})}else n.showErrorAlert(t.error.message)})).catch((function(e){n.showErrorAlert(e)}))},n.setPopout=function(e){n.setState({popout:e})},n.handlePopstate=function(e){e.preventDefault(),n.goBack()},n.goTiket=function(e){n.setPopout(o.a.createElement(v.K,null)),n.setState({ticket_id:e}),n.goPanel("ticket"),n.setPopout(null)},n.onChange=function(e){var t=e.currentTarget.name,a=e.currentTarget.value;n.setState(Object(h.a)({},t,a))},n.goOtherProfile=function(e){n.setState({active_other_profile:e}),n.goPanel("other_profile")},n.modalBack=function(){n.setActiveModal(n.state.modalHistory[n.state.modalHistory.length-2])},n.goBack=function(){var e=n.state.history;1===e.length?l.a.send("VKWebAppClose",{status:"success"}):e.length>1&&(e.pop(),n.setState({activePanel:e[e.length-1]}))},n.goPanel=function(e){var t=n.state.history.slice();t.push(e),window.history.pushState({panel:e},e),n.setState({history:t,activePanel:e})},n.setActiveModal=function(e){e=e||null;var t=n.state.modalHistory?Object(_.a)(n.state.modalHistory):[];null===e?t=[]:-1!==t.indexOf(e)?t=t.splice(0,t.indexOf(e)+1):t.push(e),n.setState({activeModal:e,modalHistory:t})},n.showAlert=function(e,t){n.setState({popout:o.a.createElement(v.c,{actions:[{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",autoclose:!0,mode:"cancel"}],onClose:function(){return n.setPopout(null)}},o.a.createElement("h2",null,e),o.a.createElement("p",null,t))})},n.showErrorAlert=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n.setPopout(o.a.createElement(v.c,{actions:[{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,mode:"cancel"}],onClose:function(){return n.setPopout(null)}},o.a.createElement("h2",null,"\u041e\u0448\u0438\u0431\u043a\u0430"),e?o.a.createElement("p",null,e):o.a.createElement("p",null,"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430!")))},n}return Object(m.a)(a,[{key:"ChangeAge",value:function(e){var t=this;this.setState({popout:o.a.createElement(v.K,null)}),fetch(this.state.api_url+"method=account.setAge&age="+e+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result&&t.setState({popout:null})})).catch((function(e){t.showErrorAlert(e)}))}},{key:"userBan",value:function(e,t){var a=this;this.setPopout(o.a.createElement(v.K,null)),fetch(this.state.api_url+"method=account.ban&agent_id="+e+"&banned=true&reason="+t+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result?(a.setActiveModal(null),a.showAlert("\u0423\u0441\u043f\u0435\u0445","\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0437\u0430\u0431\u0430\u043d\u0435\u043d"),a.setPopout(null)):a.showErrorAlert(e.error.message)})).catch((function(e){a.showErrorAlert(e)}))}},{key:"getRandomTiket",value:function(){var e=this;fetch(this.state.api_url+"method=ticket.getRandom&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?e.goTiket(t.response.id):e.showErrorAlert(t.error.message)})).catch((function(t){e.showErrorAlert(t)}))}},{key:"componentDidMount",value:function(){window.addEventListener("popstate",this.handlePopstate),void 0!==xe.ticket_id&&(this.goTiket(xe.ticket_id),l.a.send("VKWebAppSetLocation",{location:""})),void 0!==xe.agent_id&&(this.goOtherProfile(xe.agent_id),l.a.send("VKWebAppSetLocation",{location:""})),this.getQuestions()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("popstate",this.handlePopstate)}},{key:"render",value:function(){var e=this,t=o.a.createElement(v.B,{activeModal:this.state.activeModal},o.a.createElement(v.z,{id:"start",onClose:this.modalBack,dynamicContentHeight:!0,header:o.a.createElement(v.A,null,"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u0432 \u0438\u0433\u0440\u0443")},o.a.createElement(v.l,{style:{marginTop:0}},o.a.createElement("img",{className:"AvaModalPage",src:void 0!==this.props.account.id?this.props.account.avatar.url:null,size:70,alt:"\u0442\u0432\u043e\u044f \u0430\u0432\u0430"}),o.a.createElement(v.t,{subtitle:"\u041f\u043e\u043c\u043d\u0438\u0442\u0435, \u043e\u0442\u0432\u0435\u0447\u0430\u0442\u044c \u043d\u0443\u0436\u043d\u043e \u0432\u0434\u0443\u043c\u0447\u0438\u0432\u043e."},"\u0412\u0430\u043c \u043f\u0440\u0438\u0441\u0432\u043e\u0435\u043d \u043d\u043e\u043c\u0435\u0440 #",void 0!==this.props.account.id?this.props.account.id:"undefined"),o.a.createElement(v.M,null),o.a.createElement(v.p,null,o.a.createElement(v.r,{header:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u0412\u0430\u0436\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f",mode:"error"},"\u0421\u0435\u0440\u0432\u0438\u0441 \u043d\u0435 \u0438\u043c\u0435\u0435\u0442 \u043e\u0442\u043d\u043e\u0448\u0435\u043d\u0438\u044f \u043a \u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u0412\u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0435, \u0430 \u0442\u0430\u043a \u0436\u0435 \u0438\u0445 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0430\u043c."),o.a.createElement(v.O,{min:10,max:100,step:1,value:this.state.AgeUser,onChange:function(t){e.setState({AgeUser:t})},top:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u0432\u043e\u0439 \u0432\u043e\u0437\u0440\u0430\u0441\u0442: ".concat(this.state.AgeUser)})),o.a.createElement(v.s,null,o.a.createElement(v.N,{disabled:!0,multiline:!0,before:o.a.createElement(Pe.a,null)},"\u0417\u0430\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0439 \u043c\u043e\u043d\u0435\u0442\u044b"),o.a.createElement(v.N,{disabled:!0,multiline:!0,before:o.a.createElement(Me.a,null)},"\u041e\u0442\u0432\u0435\u0447\u0430\u0439 \u043d\u0430 \u0432\u043e\u043f\u0440\u043e\u0441\u044b"),o.a.createElement(v.N,{disabled:!0,multiline:!0,before:o.a.createElement(Ae.a,null)},"\u0423\u0447\u0430\u0441\u0442\u0432\u0443\u0439 \u0432 \u0440\u0435\u0439\u0442\u0438\u043d\u0433\u0435"),o.a.createElement(v.N,{disabled:!0,multiline:!0,before:o.a.createElement(Oe.a,null)},"\u041f\u043e\u043b\u0443\u0447\u0430\u0439 \u043e\u0442\u043c\u0435\u0442\u043a\u0443 \u043e\u0433\u043d\u044f")),o.a.createElement(v.l,null,o.a.createElement(v.f,{mode:"secondary",size:"xl",stretched:!0,onClick:function(){e.ChangeAge(e.state.AgeUser),e.setActiveModal(null),setTimeout((function(){e.ReloadProfile()}),2e3)}},"\u0412\u043f\u0435\u0440\u0451\u0434!")))),o.a.createElement(ge,{id:"prom",onClose:function(){return e.setActiveModal(null)},action:function(){return e.setActiveModal(null)}}),o.a.createElement(ke,{id:"donut",onClose:function(){return e.setActiveModal(null)},action:function(){return e.setActiveModal(null)}}),o.a.createElement(v.y,{id:"ban_user",onClose:function(){return e.setActiveModal(null)},icon:o.a.createElement(v.d,{src:this.state.other_profile?this.state.other_profile.avatar.url:null,size:72}),header:"\u0417\u0430\u0431\u0430\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",actions:[{title:"\u0417\u0430\u0431\u0430\u043d\u0438\u0442\u044c! \ud83e\udd2c",mode:"secondary",action:function(){e.userBan(e.state.other_profile?e.state.other_profile.id:0,e.state.ban_reason),console.log(e.state.other_profile.id)}}]},o.a.createElement(v.v,{disabled:!0,value:this.state.other_profile?this.state.other_profile.id<0?-this.state.other_profile.id:this.state.other_profile.id:null}),o.a.createElement("br",null),o.a.createElement(v.v,{maxLength:"100",name:"ban_reason",onChange:function(t){return e.onChange(t)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0440\u0438\u0447\u0438\u043d\u0443 \u0431\u0430\u043d\u0430",value:this.state.ban_reason})),o.a.createElement(v.y,{id:"transfer",onClose:function(){return e.setActiveModal(null)},icon:o.a.createElement(v.d,{src:this.state.transfer.avatar,size:72}),header:"\u041f\u0435\u0440\u0435\u0432\u043e\u0434 \u043c\u043e\u043d\u0435\u0442\u043e\u043a",caption:this.state.transfer.comment,actions:[{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",mode:"secondary",action:function(){e.setActiveModal(null)}}]}),o.a.createElement(v.z,{id:"comment",onClose:this.modalBack,header:o.a.createElement(v.A,{right:o.a.createElement(v.t,{onClick:this.modalBack},o.a.createElement(be.a,null))},"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439")},o.a.createElement(v.l,null,o.a.createElement("div",{style:{whiteSpace:"pre-wrap"}},this.state.comment))));return o.a.createElement(v.V,{id:this.props.id,activePanel:this.state.activePanel,modal:t,popout:this.state.popout,onSwipeBack:this.goBack},o.a.createElement(T,{id:"questions",this:this,account:this.props.account,tiket_all:this.state.tiket_all,tiket_all_helper:this.state.tiket_all_helper}),o.a.createElement(b,{id:"new_ticket",this:this,account:this.props.account}),o.a.createElement(Z,{id:"ticket",this:this,ticket_id:this.state.ticket_id,account:this.props.account}),o.a.createElement(de,{id:"other_profile",this:this,agent_id:this.state.active_other_profile,account:this.props.account}))}}]),a}(o.a.Component),De=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?",fetching:!1};var o=n.props.this;return n.setPopout=o.setPopout,n.showErrorAlert=o.showErrorAlert,n.setActiveModal=o.setActiveModal,n}return Object(m.a)(a,[{key:"Prepare_top",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t&&this.setPopout(o.a.createElement(v.K,null)),this.props.this.getTopUsers(),setTimeout((function(){e.setState({fetching:!1}),t&&e.setPopout(null)}),500)}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.this;return o.a.createElement(v.C,{id:this.props.id},o.a.createElement(v.D,null,"\u0422\u043e\u043f"),o.a.createElement(v.l,null,o.a.createElement(v.r,{header:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u0412\u0430\u0436\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f",mode:"default"},"\u0421\u0435\u0440\u0432\u0438\u0441 \u043d\u0435 \u0438\u043c\u0435\u0435\u0442 \u043e\u0442\u043d\u043e\u0448\u0435\u043d\u0438\u044f \u043a \u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u0412\u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0435, \u0430 \u0442\u0430\u043a \u0436\u0435 \u0438\u0445 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0430\u043c.")),o.a.createElement(o.a.Fragment,null,o.a.createElement(v.I,{onRefresh:function(){e.setState({fetching:!0}),e.Prepare_top()},isFetching:this.state.fetching},this.props.top_agents?this.props.top_agents.map((function(a,n){return a.banned?null:o.a.createElement(o.a.Fragment,{key:a.id},o.a.createElement(v.N,{onClick:function(){t.goOtherProfile(a.id,!0),e.setState({top_agents:null})},description:o.a.createElement("div",{className:"top_moderator_desc"},a.good_answers+" \u0445\u043e\u0440\u043e\u0448\u0438\u0445 \u043e\u0442\u0432\u0435\u0442\u043e\u0432, "+a.bad_answers+" \u043f\u043b\u043e\u0445\u0438\u0445 \u043e\u0442\u0432\u0435\u0442\u043e\u0432"),size:"l",before:o.a.createElement(v.d,{src:a.avatar.url})},o.a.createElement("div",{className:"top_moderator_name"},isFinite(a.nickname)?"\u0410\u0433\u0435\u043d\u0442 \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438 #".concat(a.nickname):a.nickname?a.nickname:"\u0410\u0433\u0435\u043d\u0442 \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438 #".concat(a.id),o.a.createElement("div",{className:"top_moderator_name_icon"},!0===a.flash?o.a.createElement(le.a,{width:12,height:12,onClick:function(){return e.setActiveModal("prom")},className:"top_moderator_name_icon"}):null),o.a.createElement("div",{className:"top_moderator_name_icon"},!0===a.donut?o.a.createElement(pe.a,{width:12,height:12,className:"top_moderator_name_icon",onClick:function(){return e.setActiveModal("donut")}}):null),o.a.createElement("div",{className:"top_moderator_name_icon_ver"},!0===a.verified?o.a.createElement(ue.a,{className:"top_moderator_name_icon_ver"}):null))),o.a.createElement(v.M,null))})):o.a.createElement(v.G,null))))}}]),a}(o.a.Component),Be=a(73),Te=a.n(Be),He=a(74),Re=a.n(He),ze=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?",activePanel:"top",activeModal:null,modalHistory:[],popout:n.props.popout,ticket_id:null,history:["top"],active_other_profile:0,other_profile:null,ban_reason:"",comment:"",transfer:{avatar:"",comment:""},AgeUser:0,top_agents:null},n.changeData=n.props.this.changeData,n.playAudio=n.props.this.playAudio,n.getTopUsers=function(){fetch(n.state.api_url+"method=users.getTop&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result&&n.setState({top_agents:e.response})})).catch((function(e){n.showErrorAlert(e)}))},n.setPopout=function(e){n.setState({popout:e})},n.handlePopstate=function(e){e.preventDefault(),n.goBack()},n.goTiket=function(e){n.setPopout(o.a.createElement(v.K,null)),n.setState({ticket_id:e}),n.goPanel("ticket"),n.setPopout(null)},n.onChange=function(e){var t=e.currentTarget.name,a=e.currentTarget.value;n.setState(Object(h.a)({},t,a))},n.goOtherProfile=function(e){n.setState({active_other_profile:e}),n.goPanel("other_profile")},n.modalBack=function(){n.setActiveModal(n.state.modalHistory[n.state.modalHistory.length-2])},n.goBack=function(){var e=n.state.history;1===e.length?l.a.send("VKWebAppClose",{status:"success"}):e.length>1&&(e.pop(),n.setState({activePanel:e[e.length-1]}))},n.goPanel=function(e){var t=n.state.history.slice();t.push(e),window.history.pushState({panel:e},e),n.setState({history:t,activePanel:e})},n.setActiveModal=function(e){e=e||null;var t=n.state.modalHistory?Object(_.a)(n.state.modalHistory):[];null===e?t=[]:-1!==t.indexOf(e)?t=t.splice(0,t.indexOf(e)+1):t.push(e),n.setState({activeModal:e,modalHistory:t})},n.showAlert=function(e,t){n.setState({popout:o.a.createElement(v.c,{actions:[{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",autoclose:!0,mode:"cancel"}],onClose:function(){return n.setPopout(null)}},o.a.createElement("h2",null,e),o.a.createElement("p",null,t))})},n.showErrorAlert=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n.setPopout(o.a.createElement(v.c,{actions:[{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,mode:"cancel"}],onClose:function(){return n.closePopout}},o.a.createElement("h2",null,"\u041e\u0448\u0438\u0431\u043a\u0430"),e?o.a.createElement("p",null,e):o.a.createElement("p",null,"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430!")))},n}return Object(m.a)(a,[{key:"ChangeAge",value:function(e){var t=this;this.setState({popout:o.a.createElement(v.K,null)}),fetch(this.state.api_url+"method=account.setAge&age="+e+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result&&t.setState({popout:null})})).catch((function(e){t.showErrorAlert()}))}},{key:"userBan",value:function(e,t){var a=this;this.setPopout(o.a.createElement(v.K,null)),fetch(this.state.api_url+"method=account.ban&agent_id="+e+"&banned=true&reason="+t+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result?(a.setActiveModal(null),a.showAlert("\u0423\u0441\u043f\u0435\u0445","\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0437\u0430\u0431\u0430\u043d\u0435\u043d"),a.setPopout(null)):a.showErrorAlert(e.error.message)})).catch((function(e){a.showErrorAlert(e)}))}},{key:"getRandomTiket",value:function(){var e=this;fetch(this.state.api_url+"method=ticket.getRandom&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?e.goTiket(t.response.id):e.showErrorAlert(t.error.message)})).catch((function(t){e.showErrorAlert(t)}))}},{key:"componentDidMount",value:function(){window.addEventListener("popstate",this.handlePopstate),this.getTopUsers()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("popstate",this.handlePopstate)}},{key:"render",value:function(){var e=this,t=o.a.createElement(v.B,{activeModal:this.state.activeModal},o.a.createElement(v.z,{id:"settings",onClose:this.modalBack,header:o.a.createElement(v.A,{right:o.a.createElement(v.t,{onClick:this.modalBack},o.a.createElement(be.a,{style:{color:"var(--placeholder_icon_foreground_primary)"}}))},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438")},o.a.createElement(v.l,{style:{display:"flex"}},o.a.createElement(v.f,{onClick:function(){e.setActiveModal(null),e.getRandomTiket()},stretched:!0,size:"l",before:o.a.createElement(Te.a,null)},"\u0421\u043b\u0443\u0447\u0430\u0439\u043d\u044b\u0439 \u0442\u0438\u043a\u0435\u0442"),o.a.createElement(v.f,{onClick:function(){e.setActiveModal(null),e.props.this.changeData("scheme","bright_light"===e.props.this.state.scheme?"space_gray":"bright_light")},stretched:!0,size:"l",style:{marginLeft:"5%"},before:o.a.createElement(Re.a,null)},"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0442\u0435\u043c\u0443"))),o.a.createElement(ge,{id:"prom",onClose:function(){return e.setActiveModal(null)},action:function(){return e.setActiveModal(null)}}),o.a.createElement(ke,{id:"donut",onClose:function(){return e.setActiveModal(null)},action:function(){return e.setActiveModal(null)}}),o.a.createElement(v.y,{id:"ban_user",onClose:function(){return e.setActiveModal(null)},icon:o.a.createElement(v.d,{src:this.state.other_profile?this.state.other_profile.avatar.url:null,size:72}),header:"\u0417\u0430\u0431\u0430\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",actions:[{title:"\u0417\u0430\u0431\u0430\u043d\u0438\u0442\u044c! \ud83e\udd2c",mode:"secondary",action:function(){e.userBan(e.state.other_profile?e.state.other_profile.id:0,e.state.ban_reason),console.log(e.state.other_profile.id)}}]},o.a.createElement(v.v,{disabled:!0,value:this.state.other_profile?this.state.other_profile.id<0?-this.state.other_profile.id:this.state.other_profile.id:null}),o.a.createElement("br",null),o.a.createElement(v.v,{maxLength:"100",name:"ban_reason",onChange:function(t){return e.onChange(t)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0440\u0438\u0447\u0438\u043d\u0443 \u0431\u0430\u043d\u0430",value:this.state.ban_reason})),o.a.createElement(v.y,{id:"transfer",onClose:function(){return e.setActiveModal(null)},icon:o.a.createElement(v.d,{src:this.state.transfer.avatar,size:72}),header:"\u041f\u0435\u0440\u0435\u0432\u043e\u0434 \u043c\u043e\u043d\u0435\u0442\u043e\u043a",caption:this.state.transfer.comment,actions:[{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",mode:"secondary",action:function(){e.setActiveModal(null)}}]}));return o.a.createElement(v.V,{id:this.props.id,activePanel:this.state.activePanel,modal:t,popout:this.state.popout,onSwipeBack:this.goBack},o.a.createElement(De,{id:"top",this:this,account:this.props.account,top_agents:this.state.top_agents}),o.a.createElement(de,{id:"other_profile",this:this,agent_id:this.state.active_other_profile,account:this.props.account}))}}]),a}(o.a.Component),Le=a(152),Ie=a.n(Le);function Fe(e){return e<10?"0"+e:e}var Ke=["\u044f\u043d\u0432\u0430\u0440\u044f","\u0444\u0435\u0432\u0440\u0430\u043b\u044f","\u043c\u0430\u0440\u0442\u0430","\u0430\u043f\u0440\u0435\u043b\u044f","\u043c\u0430\u044f","\u0438\u044e\u043d\u044f","\u0438\u044e\u043b\u044f","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u043e\u043a\u0442\u044f\u0431\u0440\u044f","\u043d\u043e\u044f\u0431\u0440\u044f","\u0434\u0435\u043a\u0430\u0431\u0440\u044f"],qe=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={notification:null,fetching:!1},n.getNotif=function(){fetch(n.props.this.state.api_url+"method=notifications.get&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result?(n.setState({notification:e.response}),setTimeout((function(){n.setState({fetching:!1})}),500)):n.props.this.showErrorAlert(e.error.message)})).catch((function(e){n.props.this.showErrorAlert()}))},n.markView=function(){fetch(n.props.this.state.api_url+"method=notifications.markAsViewed&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result?setTimeout((function(){n.props.this.ReloadProfile()}),4e3):n.props.this.showErrorAlert(e.error.message)})).catch((function(e){n.props.this.showErrorAlert()}))},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getNotif(),this.markView()}},{key:"render",value:function(){var e=this,t=this.props.this;return o.a.createElement(v.C,{id:this.props.id},o.a.createElement(v.D,{left:o.a.createElement(v.E,{onClick:function(){e.props.this.changeData("activeStory","profile")}})},"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f"),o.a.createElement(o.a.Fragment,null,o.a.createElement(v.I,{onRefresh:function(){e.setState({fetching:!0}),e.getNotif()},isFetching:this.state.fetching},this.state.notification?this.state.notification.length>0?this.state.notification.map((function(e,a){return o.a.createElement(o.a.Fragment,{key:a},o.a.createElement(v.N,{onClick:"0"!==e.object.object?function(){return t.goTiket(e.object.object)}:function(){return t.openMoneyTransfer(e.image,e.text,e.comment)},description:new Date(1e3*e.time).getDate()+" "+Ke[new Date(1e3*e.time).getMonth()]+" "+new Date(1e3*e.time).getFullYear()+" \u0432 "+Fe(new Date(1e3*e.time).getHours())+":"+Fe(new Date(1e3*e.time).getMinutes()),size:"l",before:o.a.createElement(v.d,{src:e.image}),multiline:"boolean"},o.a.createElement("div",{style:{lineHeight:"17px",marginTop:"3px"}},e.text),o.a.createElement("div",{style:{marginTop:"4px"}})),o.a.createElement(v.M,{className:{width:"100%"}}))})):o.a.createElement(v.H,{stretched:!0,icon:o.a.createElement(Ie.a,null)},"\u0423 \u0412\u0430\u0441 \u043d\u0435\u0442 \u043d\u043e\u0432\u044b\u0445 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0439"):o.a.createElement(v.G,null))))}}]),a}(o.a.Component),Ue=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?",activePanel:"notif",activeModal:null,modalHistory:[],popout:n.props.popout,ticket_id:null,history:["notif"],active_other_profile:0,other_profile:null,ban_reason:"",comment:"",transfer:{avatar:"",comment:""}},n.changeData=n.props.this.changeData,n.ReloadProfile=n.props.reloadProfile,n.setPopout=function(e){n.setState({popout:e})},n.handlePopstate=function(e){e.preventDefault(),n.goBack()},n.goTiket=function(e){n.setPopout(o.a.createElement(v.K,null)),n.setState({ticket_id:e}),n.goPanel("ticket"),n.setPopout(null)},n.onChange=function(e){var t=e.currentTarget.name,a=e.currentTarget.value;n.setState(Object(h.a)({},t,a))},n.goOtherProfile=function(e){n.setState({active_other_profile:e}),n.goPanel("other_profile")},n.openMoneyTransfer=function(e,t,a){n.setState({transfer:{avatar:e,text:t,comment:a||"\u0410\u0433\u0435\u043d\u0442 \u043d\u0435 \u043e\u0441\u0442\u0430\u0432\u0438\u043b \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f \ud83d\ude22"}}),n.setActiveModal("transfer")},n.modalBack=function(){n.setActiveModal(n.state.modalHistory[n.state.modalHistory.length-2])},n.goBack=function(){var e=n.state.history;1===e.length?l.a.send("VKWebAppClose",{status:"success"}):e.length>1&&(e.pop(),n.setState({activePanel:e[e.length-1]}))},n.goPanel=function(e){var t=n.state.history.slice();t.push(e),window.history.pushState({panel:e},e),n.setState({history:t,activePanel:e})},n.setActiveModal=function(e){e=e||null;var t=n.state.modalHistory?Object(_.a)(n.state.modalHistory):[];null===e?t=[]:-1!==t.indexOf(e)?t=t.splice(0,t.indexOf(e)+1):t.push(e),n.setState({activeModal:e,modalHistory:t})},n.showAlert=function(e,t){n.setState({popout:o.a.createElement(v.c,{actions:[{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",autoclose:!0,mode:"cancel"}],onClose:function(){return n.setPopout(null)}},o.a.createElement("h2",null,e),o.a.createElement("p",null,t))})},n.showErrorAlert=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n.setPopout(o.a.createElement(v.c,{actions:[{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,mode:"cancel"}],onClose:function(){return n.setPopout(null)}},o.a.createElement("h2",null,"\u041e\u0448\u0438\u0431\u043a\u0430"),e?o.a.createElement("p",null,e):o.a.createElement("p",null,"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430!")))},n}return Object(m.a)(a,[{key:"userBan",value:function(e,t){var a=this;this.setPopout(o.a.createElement(v.K,null)),fetch(this.state.api_url+"method=account.ban&agent_id="+e+"&banned=true&reason="+t+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result&&(a.setActiveModal(null),a.showAlert("\u0423\u0441\u043f\u0435\u0445","\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0437\u0430\u0431\u0430\u043d\u0435\u043d"),a.setPopout(null))})).catch((function(e){a.showErrorAlert()}))}},{key:"componentDidMount",value:function(){window.addEventListener("popstate",this.handlePopstate)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("popstate",this.handlePopstate)}},{key:"render",value:function(){var e=this,t=o.a.createElement(v.B,{activeModal:this.state.activeModal},o.a.createElement(ge,{id:"prom",onClose:function(){return e.setActiveModal(null)},action:function(){return e.setActiveModal(null)}}),o.a.createElement(ke,{id:"donut",onClose:function(){return e.setActiveModal(null)},action:function(){return e.setActiveModal(null)}}),o.a.createElement(v.y,{id:"ban_user",onClose:function(){return e.setActiveModal(null)},icon:o.a.createElement(v.d,{src:this.state.other_profile?this.state.other_profile.avatar.url:null,size:72}),header:"\u0417\u0430\u0431\u0430\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",actions:[{title:"\u0417\u0430\u0431\u0430\u043d\u0438\u0442\u044c! \ud83e\udd2c",mode:"secondary",action:function(){e.userBan(e.state.other_profile?e.state.other_profile.id:0,e.state.ban_reason),console.log(e.state.other_profile.id)}}]},o.a.createElement(v.v,{disabled:!0,value:this.state.other_profile?this.state.other_profile.id<0?-this.state.other_profile.id:this.state.other_profile.id:null}),o.a.createElement("br",null),o.a.createElement(v.v,{maxLength:"100",name:"ban_reason",onChange:function(t){return e.onChange(t)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0440\u0438\u0447\u0438\u043d\u0443 \u0431\u0430\u043d\u0430",value:this.state.ban_reason})),o.a.createElement(v.y,{id:"transfer",onClose:function(){return e.setActiveModal(null)},icon:o.a.createElement(v.d,{src:this.state.transfer.avatar,size:72}),header:"\u041f\u0435\u0440\u0435\u0432\u043e\u0434 \u043c\u043e\u043d\u0435\u0442\u043e\u043a",caption:this.state.transfer.comment,actions:[{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",mode:"secondary",action:function(){e.setActiveModal(null)}}]}));return o.a.createElement(v.V,{id:this.props.id,activePanel:this.state.activePanel,modal:t,popout:this.state.popout},o.a.createElement(qe,{id:"notif",this:this}),o.a.createElement(Z,{id:"ticket",this:this,ticket_id:this.state.ticket_id,account:this.props.account}),o.a.createElement(de,{id:"other_profile",this:this,agent_id:this.state.active_other_profile,account:this.props.account}))}}]),a}(o.a.Component),Ve=a(153),Je=a.n(Ve),We=a(156),Qe=a.n(We),Ge=a(158),Xe=a.n(Ge),Ye=a(159),Ze=a.n(Ye),$e=a(155),et=a.n($e),tt=a(154),at=a.n(tt),nt=a(157),ot=a.n(nt),rt=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?"};var o=n.props.this;return n.setPopout=o.setPopout,n.showErrorAlert=o.showErrorAlert,n.setActiveModal=o.setActiveModal,n}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props.this;return o.a.createElement(v.C,{id:this.props.id},o.a.createElement(v.D,{left:o.a.createElement(o.a.Fragment,null,o.a.createElement(v.F,{onClick:function(){e.setActiveModal("share")}},o.a.createElement(at.a,null)),o.a.createElement(v.F,{label:this.props.account.notif_count?o.a.createElement(v.k,{size:"s",mode:"prominent"},this.props.account.notif_count):null,onClick:function(){e.props.this.changeData("activeStory","notif")}},o.a.createElement(et.a,null)))},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"),o.a.createElement(v.n,{vertical:"bottom"},o.a.createElement(v.l,null,o.a.createElement(v.r,{header:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u0412\u0430\u0436\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f",mode:"default"},"\u0421\u0435\u0440\u0432\u0438\u0441 \u043d\u0435 \u0438\u043c\u0435\u0435\u0442 \u043e\u0442\u043d\u043e\u0448\u0435\u043d\u0438\u044f \u043a \u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u0412\u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0435, \u0430 \u0442\u0430\u043a \u0436\u0435 \u0438\u0445 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0430\u043c."))),o.a.createElement(v.N,{disabled:!0,before:o.a.createElement(v.d,{src:this.props.account.avatar.url,size:72}),size:"l",description:isFinite(this.props.account.nickname)?"#".concat(this.props.account.nickname):this.props.account.nickname?"":"#".concat(this.props.account.id)},o.a.createElement("div",{style:{display:"flex"}},o.a.createElement("p",{style:{margin:0}},isFinite(this.props.account.nickname)?"\u0410\u0433\u0435\u043d\u0442 \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438":this.props.account.nickname?this.props.account.nickname:"\u0410\u0433\u0435\u043d\u0442 \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438"),!0===this.props.account.flash?o.a.createElement("div",{className:"profile_icon"},o.a.createElement(Qe.a,{width:12,height:12,onClick:function(){return t.setActiveModal("prom")}})):null,!0===this.props.account.donut?o.a.createElement("div",{className:"profile_icon"},o.a.createElement(pe.a,{width:12,height:12,onClick:function(){return t.setActiveModal("donut")}})):null,!0===this.props.account.verified?o.a.createElement("div",{className:"profile_icon_ver"},o.a.createElement(ue.a,null)):null)),o.a.createElement(v.M,null),o.a.createElement(v.l,null,o.a.createElement(v.f,{stretched:!0,size:"l",mode:"secondary",onClick:function(){return e.props.this.goPanel("settings")}},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438")),o.a.createElement(v.M,null),o.a.createElement(v.s,null,o.a.createElement(v.N,{expandable:!0,href:"https://vk.me/join/zyWQzsgQ9iw6V2YAfbwiGtuO883rnYhXwAY=",target:"_blank",rel:"noopener noreferrer",before:o.a.createElement(ot.a,null)},"\u0427\u0430\u0442")),o.a.createElement(v.s,null,o.a.createElement(v.N,{expandable:!0,onClick:function(){e.props.this.goPanel("qu")},before:o.a.createElement(Xe.a,null)},"\u041c\u043e\u0438 \u043e\u0442\u0432\u0435\u0442\u044b"),o.a.createElement(v.N,{expandable:!0,onClick:function(){e.props.this.goPanel("market")},before:o.a.createElement(Ze.a,null)},"\u041c\u0430\u0433\u0430\u0437\u0438\u043d")),this.props.this.state.snackbar)}}]),a}(o.a.Component),it=a(161),st=a.n(it),lt=a(160),ct=a.n(lt),ut=a(162),ht=a.n(ut),pt=a(60),mt=a.n(pt),dt=a(77),ft=a.n(dt),Et=["1.png","2.png","3.png","4.png","5.png","6.png","7.png","8.png","9.png","10.png","11.png","12.png","13.png","14.png","15.png","16.png","17.png"],gt={backgroundColor:"var(--accent)"},vt=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e)).state={changed_id:"",api_url:"https://xelene.ru/road/php/index.php?",last_selected:null};var o=n.props.this;return n.setPopout=o.setPopout,n.showErrorAlert=o.showErrorAlert,n.showAlert=o.showAlert,n.setActiveModal=o.setActiveModal,n.onChange=function(e){var t=e.currentTarget.name,a=e.currentTarget.value;n.setState(Object(h.a)({},t,a))},n}return Object(m.a)(a,[{key:"images",value:function(){for(var e=this,t=Object.keys(Et).length,a=[],n=0;n<t;n++)a.push(o.a.createElement("img",{id:n,onClick:function(t){return e.selectImage(t)},style:0===n?{marginLeft:"20px"}:null,className:"changes_avatars",key:n,src:"https://xelene.ru/road/php/images/avatars/"+Et[n],alt:"ava"}));return a}},{key:"selectImage",value:function(e){var t=e.currentTarget.id;null!==this.state.last_selected&&(document.getElementById(this.state.last_selected).className="changes_avatars");document.getElementById(t).className="changes_avatars select_avatar",this.setState({last_selected:Number(t)})}},{key:"changeAvatar",value:function(e){var t=this;fetch(this.state.api_url+"method=shop.changeAvatar&avatar_id="+e+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){document.getElementById(t.state.last_selected).className="changes_avatars",t.setState({last_selected:null}),e.result?(t.props.this.setSnack(o.a.createElement(v.P,{layout:"vertical",onClose:function(){return t.props.this.setSnack(null)},before:o.a.createElement(v.d,{size:24,style:gt},o.a.createElement(mt.a,{fill:"#fff",width:14,height:14}))},"\u0410\u0432\u0430\u0442\u0430\u0440 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043c\u0435\u043d\u0435\u043d")),setTimeout((function(){t.props.this.ReloadProfile()}),4e3)):t.props.this.setSnack(o.a.createElement(v.P,{layout:"vertical",onClose:function(){return t.props.this.setSnack(null)},before:o.a.createElement(ft.a,{width:24,height:24})},e.error.message))})).catch((function(e){t.showErrorAlert(e)}))}},{key:"ChangeId",value:function(){var e=this;this.state.changed_id?fetch(this.state.api_url+"method=shop.changeId&change_id="+this.state.changed_id+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?(e.props.this.setSnack(o.a.createElement(v.P,{layout:"vertical",onClose:function(){return e.props.this.setSnack(null)},before:o.a.createElement(v.d,{size:24,style:gt},o.a.createElement(mt.a,{fill:"#fff",width:14,height:14}))},"id \u0410\u0433\u0435\u043d\u0442\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043c\u0435\u043d\u0435\u043d")),setTimeout((function(){e.props.this.ReloadProfile()}),4e3)):e.props.this.setSnack(o.a.createElement(v.P,{layout:"vertical",onClose:function(){return e.props.this.setSnack(null)},before:o.a.createElement(ft.a,{width:24,height:24})},t.error.message))})).catch((function(t){e.showErrorAlert(t)})):this.props.this.setSnack(o.a.createElement(v.P,{layout:"vertical",onClose:function(){return e.props.this.setSnack(null)},before:o.a.createElement(ft.a,{width:24,height:24})},"\u0412\u044b \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043b\u0438 \u0436\u0435\u043b\u0430\u0435\u043c\u044b\u0439 id"))}},{key:"render",value:function(){var e=this;return o.a.createElement(v.C,{id:this.props.id},o.a.createElement(v.D,{left:o.a.createElement(v.E,{onClick:function(){return window.history.back()}})},"\u041c\u0430\u0433\u0430\u0437\u0438\u043d"),o.a.createElement(v.s,{separator:"hide",header:o.a.createElement(v.t,null,"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440")},o.a.createElement("div",{className:"scrollImages"},this.images()),o.a.createElement(v.l,null,o.a.createElement(v.f,{onClick:function(){e.changeAvatar(Number(e.state.last_selected)+1)},before:o.a.createElement(ct.a,{style:{marginRight:"5px"}}),size:"xl",mode:"secondary",disabled:null===this.state.last_selected},"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0437\u0430 300 \u043c\u043e\u043d\u0435\u0442\u043e\u043a"))),o.a.createElement(v.s,{separator:"hide",header:o.a.createElement(v.t,null,"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0439 \u043d\u0438\u043a")},o.a.createElement(v.l,null,o.a.createElement(v.v,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0436\u0435\u043b\u0430\u0435\u043c\u044b\u0439 \u043d\u0438\u043a (\u043c\u0430\u043a\u0441. 10 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432)",onChange:function(t){return e.onChange(t)},value:this.state.changed_id,maxLength:"10",name:"changed_id"}),o.a.createElement("br",null),o.a.createElement(v.f,{onClick:function(){e.ChangeId(e.state.changed_id)},before:o.a.createElement(st.a,{width:28,height:28,style:{marginRight:"5px"}}),size:"xl",mode:"secondary",disabled:this.state.changed_id<=0},"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0437\u0430 500 \u043c\u043e\u043d\u0435\u0442\u043e\u043a"))),o.a.createElement(v.s,{separator:"hide",header:o.a.createElement(v.t,null,"\u041e\u043f\u0446\u0438\u0438")},o.a.createElement(v.l,null,o.a.createElement(v.f,{onClick:function(){return e.setActiveModal("send")},before:o.a.createElement(ht.a,{style:{marginRight:"5px"}}),size:"xl",mode:"secondary"},"\u041f\u0435\u0440\u0435\u0432\u0435\u0441\u0442\u0438"))),this.props.this.state.snackbar)}}]),a}(o.a.Component),_t=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e)).state={changed_id:0};var o=n.props.this;return n.setPopout=o.setPopout,n.showErrorAlert=o.showErrorAlert,n.setActiveModal=o.setActiveModal,n}return Object(m.a)(a,[{key:"render",value:function(){return o.a.createElement(v.C,{id:this.props.id},o.a.createElement(v.D,{left:o.a.createElement(v.E,{onClick:function(){return window.history.back()}})}),o.a.createElement("div",{className:"Achives_Block"},o.a.createElement("img",{src:"https://vk.com/images/blog/about/img_about_2_2x.png",alt:"\u0414\u0440\u0430\u043a\u043e\u043d"})),o.a.createElement("div",{style:{marginTop:"20px"},className:"help_title_profile"},"\u0412 \u043d\u0435\u0434\u0430\u043b\u0435\u043a\u043e\u043c \u0431\u0443\u0434\u0443\u0449\u0435\u043c \u0437\u0434\u0435\u0441\u044c \u0447\u0442\u043e-\u0442\u043e \u0431\u0443\u0434\u0435\u0442"),o.a.createElement("div",{className:"help_title_profile"},"\u0416\u0434\u0435\u043c \u0432\u043c\u0435\u0441\u0442\u0435 \u0441 \u0432\u0430\u043c\u0438!"))}}]),a}(o.a.Component),kt=a(163),wt=a.n(kt);function bt(e){return e<10?"0"+e:e}var yt=["\u044f\u043d\u0432","\u0444\u0435\u0432","\u043c\u0430\u0440","\u0430\u043f\u0440","\u043c\u0430\u044f","\u0438\u044e\u043d","\u0438\u044e\u043b","\u0430\u0432\u0433","\u0441\u0435\u043d","\u043e\u043a\u0442","\u043d\u043e\u044f","\u0434\u0435\u043a"],At=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?",myQuestions:[],fetching:!1,activeTab:"positive",search:"",limiter:20},n}return Object(m.a)(a,[{key:"getFiltresQuestions",value:function(e){return"positive"===this.state.activeTab?e.filter((function(e){return 1===e.mark})):e.filter((function(e){return 0===e.mark}))}},{key:"getFilterSearch",value:function(e){var t=this.state.search.toLowerCase();return e.filter((function(e){return e.text.toLowerCase().indexOf(t)>-1}))}},{key:"limiter",value:function(e){return e.slice(0,this.state.limiter)}},{key:"prepare_questions",value:function(){var e=this;this.props.this.myQuestions(),setTimeout((function(){e.setState({fetching:!1})}),500)}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.this,a=this.getFiltresQuestions(this.props.myQuestions),n=this.getFilterSearch(a),r=this.limiter(n);return o.a.createElement(v.C,{id:this.props.id},o.a.createElement(v.D,{separator:!1,left:o.a.createElement(v.E,{onClick:function(){return window.history.back()}})},"\u041c\u043e\u0438 \u043e\u0442\u0432\u0435\u0442\u044b"),o.a.createElement(v.L,{value:this.state.search,onChange:function(t){e.setState({search:t.target.value})}}),o.a.createElement(v.S,null,o.a.createElement(v.T,{onClick:function(){return e.setState({activeTab:"positive"})},selected:"positive"===this.state.activeTab},"\u041f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435"),o.a.createElement(v.T,{onClick:function(){return e.setState({activeTab:"negative"})},selected:"negative"===this.state.activeTab},"\u041e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435")),o.a.createElement(v.I,{onRefresh:function(){e.setState({fetching:!0}),e.prepare_questions()},isFetching:this.state.fetching},a.length>0?n.length>0?o.a.createElement(o.a.Fragment,null,r.map((function(e,a){return o.a.createElement(o.a.Fragment,{key:e.id},o.a.createElement(v.g,{key:a,onClick:function(){return t.goTiket(e.ticket_id)},description:new Date(1e3*e.time).getDate()+" "+yt[new Date(1e3*e.time).getMonth()]+" "+new Date(1e3*e.time).getFullYear()+" \u0432 "+bt(new Date(1e3*e.time).getHours())+":"+bt(new Date(1e3*e.time).getMinutes()),size:"l"},e.text),o.a.createElement(v.M,{style:{width:"90%"}}))})),r<n?o.a.createElement(v.l,null,o.a.createElement(v.f,{mode:"secondary",size:"xl",stretched:!0,onClick:function(){return e.setState({limiter:e.state.limiter+10})}},"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0451 10 \u043e\u0442\u0432\u0435\u0442\u043e\u0432")):null):o.a.createElement(v.H,{icon:o.a.createElement(wt.a,{width:56,height:56})},"\u041f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e."):o.a.createElement(v.H,{icon:o.a.createElement(C.a,null)},"\u0423\u043f\u0441, \u043a\u0430\u0436\u0435\u0442\u0441\u044f \u0437\u0434\u0435\u0441\u044c \u043d\u0435\u0442 \u0432\u0430\u0448\u0438\u0445 \u043e\u0442\u0432\u0435\u0442\u043e\u0432.")))}}]),a}(o.a.Component),Ct=a(166),Pt=a.n(Ct),St=a(167),Mt=a.n(St),jt=a(165),Ot=a.n(jt),xt=a(164),Nt=a.n(xt),Dt=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?"};var o=n.props.this;return n.setPopout=o.setPopout,n.showErrorAlert=o.showErrorAlert,n.showAlert=o.showAlert,n.setActiveModal=o.setActiveModal,n.onChange=function(e){var t=e.currentTarget.name,a=e.currentTarget.value;n.setState(Object(h.a)({},t,a))},n}return Object(m.a)(a,[{key:"deleteAccount",value:function(){var e=this;fetch(this.state.api_url+"method=account.delete&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?l.a.send("VKWebAppClose",{status:"success"}):e.showErrorAlert(t.error.message)})).catch((function(t){e.showErrorAlert(t)}))}},{key:"nofinc",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.this;return o.a.createElement(v.C,{id:this.props.id},o.a.createElement(v.D,{left:o.a.createElement(v.E,{onClick:function(){return window.history.back()}})},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),o.a.createElement(v.s,null,o.a.createElement(v.N,{disabled:!0,indicator:this.props.account.age,before:o.a.createElement(Nt.a,null)},"\u0412\u0430\u0448 \u0432\u043e\u0437\u0440\u0430\u0441\u0442")),o.a.createElement(v.s,null,o.a.createElement(v.N,{before:o.a.createElement(Ot.a,null),expandable:!0,onClick:function(){return t.goPanel("schemechange")}},"\u0421\u043c\u0435\u043d\u0430 \u0442\u0435\u043c\u044b"),o.a.createElement(v.N,{indicator:this.props.account.verified?"\u041f\u0440\u0438\u0441\u0432\u043e\u0435\u043d":null,disabled:this.props.account.verified,expandable:!this.props.account.verified,onClick:this.props.account.verified?function(){return e.nofinc()}:function(){return t.goPanel("verf")},before:o.a.createElement(Pt.a,null)},"\u0412\u0435\u0440\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f")),o.a.createElement(v.s,null,o.a.createElement(v.N,{disabled:!0,indicator:o.a.createElement(v.k,null,this.props.account.balance),before:o.a.createElement(Pe.a,null)},"\u0411\u0430\u043b\u0430\u043d\u0441"),Object(v.W)()!==v.u?o.a.createElement(v.N,{expandable:!0,href:"https://vk.com/jedi_road?source=description&w=donut_payment-188280516",target:"_blank",rel:"noopener noreferrer",before:o.a.createElement(Ae.a,null)},"VK Donut"):null),o.a.createElement(v.s,null,o.a.createElement(v.N,{expandable:!0,onClick:function(){e.props.this.goPanel("info")},before:o.a.createElement(ie.a,null)},"\u041e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438")),o.a.createElement(v.s,null,o.a.createElement(v.h,{mode:"danger",onClick:function(){return e.setPopout(o.a.createElement(v.c,{actionsLayout:"vertical",actions:[{title:"\u041d\u0435\u0442, \u044f \u043d\u0430\u0436\u0430\u043b \u0441\u044e\u0434\u0430 \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u043e",autoclose:!0,style:"cancel"},{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442",autoclose:!0,mode:"destructive",action:function(){return e.deleteAccount()}}],onClose:function(){return e.setPopout(null)}},o.a.createElement("h2",null,"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435, \u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c"),o.a.createElement("p",null,"\u0414\u0430\u043d\u043d\u043e\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u0432\u0435\u0434\u0451\u0442 \u043a \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044e \u0432\u0430\u0448\u0435\u0433\u043e \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430: \u0432\u0441\u0435\u0445 \u043e\u0442\u0432\u0435\u0442\u043e\u0432, \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u0439 \u0438 \u0434\u0440\u0443\u0433\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430 \u043d\u0430 \u0432\u0430\u0448\u0435\u043c \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0435. \u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0435\u0433\u043e \u0443\u0434\u0430\u043b\u0438\u0442\u044c?")))},before:o.a.createElement(Mt.a,null)},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442")),this.props.this.state.snackbar)}}]),a}(o.a.Component),Bt=a(168),Tt=a.n(Bt),Ht=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?"};var r=n.props.this;return n.setPopout=r.setPopout,n.showErrorAlert=r.showErrorAlert,n.showAlert=r.showAlert,n.setActiveModal=r.setActiveModal,n.onChange=function(e){var t=e.currentTarget.name,a=e.currentTarget.value;n.setState(Object(h.a)({},t,a))},n.ChangeScheme=function(e){n.setPopout(o.a.createElement(v.K,null));var t=e.currentTarget.value;fetch(n.state.api_url+"method=account.changeScheme&scheme="+t+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result?setTimeout((function(){n.props.this.ReloadProfile(),n.setPopout(null)}),3e3):n.showErrorAlert(e.error.message)})).catch((function(e){n.showErrorAlert(e)}))},n}return Object(m.a)(a,[{key:"render",value:function(){return o.a.createElement(v.C,{id:this.props.id},o.a.createElement(v.D,{left:o.a.createElement(v.E,{onClick:function(){return window.history.back()}})},"\u0421\u043c\u0435\u043d\u0430 \u0442\u0435\u043c\u044b"),o.a.createElement(v.t,{mode:"secondary"},"\u041f\u0440\u0435\u0434\u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"),o.a.createElement(v.M,null),o.a.createElement(W,{title:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",is_mine:!1,avatar:Tt.a},"\u041e \u0442\u0443\u0442 \u043c\u043e\u0436\u043d\u043e \u043c\u0435\u043d\u044f\u0442\u044c \u0442\u0435\u043c\u0443"),o.a.createElement(W,{title:"\u0410\u0433\u0435\u043d\u0442 \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438",is_mine:!0,avatar:"https://xelene.ru/road/php/images/avatars/10004.png"},"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e"),o.a.createElement(v.M,{style:{marginTop:10}}),o.a.createElement(v.p,null,o.a.createElement("div",null,o.a.createElement(v.J,{name:"radio",onChange:this.ChangeScheme,value:"1",defaultChecked:1===this.props.account.scheme},"\u0421\u0432\u0435\u0442\u043b\u0430\u044f \u0442\u0435\u043c\u0430"),o.a.createElement(v.J,{name:"radio",onChange:this.ChangeScheme,value:"2",defaultChecked:2===this.props.account.scheme},"\u0422\u0451\u043c\u043d\u0430\u044f \u0442\u0435\u043c\u0430"),o.a.createElement(v.J,{name:"radio",onChange:this.ChangeScheme,value:"0",description:"\u0421\u0435\u0440\u0432\u0438\u0441 \u0431\u0443\u0434\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u0435\u043c\u0443, \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u0443\u044e \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445 \u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435",defaultChecked:0===this.props.account.scheme},"\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438"))))}}]),a}(o.a.Component),Rt=a(169),zt=a.n(Rt),Lt=a(171),It=a.n(Lt),Ft=a(170),Kt=a.n(Ft),qt=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={},n}return Object(m.a)(a,[{key:"render",value:function(){return o.a.createElement(v.C,{id:this.props.id},o.a.createElement(v.D,{left:o.a.createElement(v.E,{onClick:function(){return window.history.back()}})},"\u041e \u0441\u0435\u0440\u0432\u0438\u0441\u0435"),o.a.createElement(v.H,{icon:o.a.createElement("img",{src:zt.a,alt:"jedi"})},"\u0412\u0435\u0440\u0441\u0438\u044f 2.0"),o.a.createElement(v.M,null),o.a.createElement(v.s,null,o.a.createElement(v.N,{before:o.a.createElement(Kt.a,null),href:"https://vk.com/jedi_road",target:"_blank",rel:"noopener noreferrer"},"\u041e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u043e"),o.a.createElement(v.N,{before:o.a.createElement(It.a,null),href:"https://vk.me/jedi_road",target:"_blank",rel:"noopener noreferrer"},"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u043d\u0430\u043c")),o.a.createElement(v.M,null),o.a.createElement(v.o,null,"\u0412\u0441\u0435\u0433\u0434\u0430 \u0432\u0430\u0448\u0430",o.a.createElement("br",null),"\u041a\u043e\u043c\u0430\u043d\u0434\u0430 Jedi"))}}]),a}(o.a.Component),Ut=a(173),Vt=a.n(Ut),Jt=a(172),Wt=a.n(Jt),Qt=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?",check1:!1,check2:!1,title:"",description:"",number:"",numberstatus:!0,sign_number:"",verfstatus:-1};var o=n.props.this;return n.setPopout=o.setPopout,n.showErrorAlert=o.showErrorAlert,n.showAlert=o.showAlert,n.setActiveModal=o.setActiveModal,n.onChange=function(e){var t=e.currentTarget.name,a=e.currentTarget.value;n.setState(Object(h.a)({},t,a))},n}return Object(m.a)(a,[{key:"handleForm",value:function(){var e=this;this.setPopout(o.a.createElement(v.K,null)),fetch(this.state.api_url+"method=account.sendRequestVerf&title="+this.state.title+"&description="+this.state.description+"&phone_number="+this.state.number+"&phone_sign="+this.state.sign_number+"&cond1=1&cond2=1&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?e.checkVerfStatus():e.showErrorAlert(t.error.message)})).catch((function(t){e.showErrorAlert(t)}))}},{key:"checkVerfStatus",value:function(){var e=this;fetch(this.state.api_url+"method=account.getVerfStatus&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?(e.setState({verfstatus:t.response}),e.setPopout(null)):e.showErrorAlert(t.error.message)})).catch((function(t){e.showErrorAlert(t)}))}},{key:"componentDidMount",value:function(){this.setPopout(o.a.createElement(v.K,null)),this.checkVerfStatus()}},{key:"render",value:function(){var e=this;return o.a.createElement(v.C,{id:this.props.id},o.a.createElement(v.D,{left:o.a.createElement(o.a.Fragment,null,o.a.createElement(v.E,{onClick:function(){return window.history.back()}}))},"\u0412\u0435\u0440\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f"),-1!==this.state.verfstatus?2===this.state.verfstatus?o.a.createElement(o.a.Fragment,null,o.a.createElement(v.H,{icon:o.a.createElement("img",{src:Wt.a,alt:"\u041e\u0436\u0438\u0434\u0430\u0439\u0442\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u0438\u044f"}),header:"\u0412\u044b \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u043b\u0438 \u0437\u0430\u044f\u0432\u043a\u0443 \u043d\u0430 \u0432\u0435\u0440\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044e"},"\u0412\u044b \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u043b\u0438 \u0437\u0430\u044f\u0432\u043a\u0443 \u043d\u0430 \u0432\u0435\u0440\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044e, \u043f\u043e \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044e \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u2014 \u0412\u0430\u043c \u043f\u043e\u0437\u0432\u043e\u043d\u0438\u0442 \u043d\u0430\u0448 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a \u0438 \u0441\u043e\u043e\u0431\u0449\u0438\u0442 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u044b \u043e \u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u043c \u0441\u0442\u0430\u0442\u0443\u0441\u0435.",o.a.createElement("br",null),o.a.createElement("br",null),"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u043d\u0435 \u0441\u043e\u043e\u0431\u0449\u0430\u0435\u0442 \u043e \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u0438\u0438 \u0432\u0435\u0440\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438."),o.a.createElement(v.n,{vertical:"bottom"},o.a.createElement(v.l,null,o.a.createElement(v.f,{size:"xl",onClick:function(){window.history.back()}},"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043a \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u043c")))):o.a.createElement(o.a.Fragment,null,o.a.createElement(v.p,null,this.state.numberstatus?null:o.a.createElement(v.r,{header:"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u043e\u0435 \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u0438\u0435 \u0444\u043e\u0440\u043c\u044b",mode:"error"},"\u0412\u044b \u0434\u043e\u043b\u0436\u043d\u044b \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430. \u0415\u0441\u043b\u0438 \u044d\u0442\u043e\u0433\u043e \u043d\u0435 \u0441\u0434\u0435\u043b\u0430\u0442\u044c, \u0442\u043e \u043f\u0440\u043e\u0439\u0442\u0438 \u043f\u0440\u043e\u0446\u0435\u0434\u0443\u0440\u0443 \u0432\u0435\u0440\u0435\u0444\u0438\u043a\u0430\u0446\u0438\u0438 \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f"),o.a.createElement(v.q,{top:"\u041e\u0431\u0449\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"},o.a.createElement(v.v,{onChange:this.onChange,name:"title",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0432\u043e\u0439 \u0442\u0435\u043a\u0441\u0442..."})),o.a.createElement(v.q,{top:"\u041f\u043e\u0447\u0435\u043c\u0443 \u0432\u044b \u0440\u0435\u0448\u0438\u043b\u0438 \u0432\u0435\u0440\u0438\u0444\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c"},o.a.createElement(v.U,{name:"description",onChange:this.onChange,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0432\u043e\u0439 \u0442\u0435\u043a\u0441\u0442..."})),o.a.createElement(v.N,{description:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u0447\u0442\u043e\u0431\u044b \u0443\u043a\u0430\u0437\u0430\u0442\u044c \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430",onClick:function(){return l.a.send("VKWebAppGetPhoneNumber",{}).then((function(t){e.setState({number:t.phone_number,sign_number:t.sign,numberstatus:!0})})).catch((function(t){e.setState({numberstatus:!1})}))},before:o.a.createElement(Vt.a,null)},"\u0412\u0430\u0448 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430"),this.state.number?o.a.createElement(v.v,{top:"\u0412\u0430\u0448 \u043d\u043e\u043c\u0435\u0440",disabled:!0,value:this.state.number}):null,o.a.createElement(v.i,{checked:this.state.check1,onChange:function(){return e.state.check1?e.setState({check1:!1}):e.setState({check1:!0})}},"\u0421\u043e\u0433\u043b\u0430\u0441\u0435\u043d \u0441 ",o.a.createElement(v.w,{href:"https://vk.com/@jedi_road-chto-takoe-verifikaciya-i-kak-ee-poluchit-galochku",target:"_blank",rel:"noopener noreferrer"},"\u043f\u0440\u0430\u0432\u0438\u043b\u0430\u043c\u0438")," \u0432\u0435\u0440\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438"),o.a.createElement(v.i,{checked:this.state.check2,onChange:function(){return e.state.check2?e.setState({check2:!1}):e.setState({check2:!0})}},"\u0413\u043e\u0442\u043e\u0432 \u043a \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u043e\u043c\u0443 \u0440\u0430\u0437\u0433\u043e\u0432\u043e\u0440\u0443 \u0441 \u043c\u043e\u0434\u0435\u0440\u0430\u0442\u043e\u0440\u043e\u043c \u043e\u0442\u0434\u0435\u043b\u0430 \u0432\u0435\u0440\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438")),o.a.createElement(v.l,null,o.a.createElement(v.f,{size:"xl",stretched:!0,disabled:!this.state.check1||!this.state.check2||!this.state.title||!this.state.description||!this.state.number,onClick:function(){return e.handleForm()}},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u0438\u0435"))):null,this.props.this.state.snackbar)}}]),a}(o.a.Component),Gt=a(175),Xt=a.n(Gt),Yt=a(176),Zt=a.n(Yt),$t=a(177),ea=a.n($t),ta=a(174),aa=a.n(ta);function na(e,t){var a="foregroundColor";return"bright_light"===t&&(a="#000"),"space_gray"===t&&(a="#fff"),Je.a.createQR("https://vk.com/app7409818#agent_id="+e,{qrSize:120,isShowLogo:!0,foregroundColor:a})}var oa=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?",activePanel:"profile",activeModal:null,modalHistory:[],popout:n.props.popout,ticket_id:null,history:["profile"],active_other_profile:0,other_profile:null,ban_reason:"",comment:"",transfer:{avatar:"",comment:""},moneys:null,money_transfer_send:null,money_transfer_count:null,AgeUser:0,snackbar:null,myQuestions:[]},n.changeData=n.props.this.changeData,n.playAudio=n.props.this.playAudio,n.ReloadProfile=n.props.reloadProfile,n.ChangeData=n.props.this.changeData,n.setPopout=function(e){n.setState({popout:e})},n.myQuestions=function(){fetch(n.state.api_url+"method=tickets.getByModeratorAnswers&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result&&(n.setState({myQuestions:e.response}),setTimeout((function(){n.setState({fetching:!1})}),500))})).catch((function(e){n.props.this.showErrorAlert()}))},n.handlePopstate=function(e){e.preventDefault(),n.goBack()},n.setSnack=function(e){n.setState({snackbar:e})},n.goTiket=function(e){n.setPopout(o.a.createElement(v.K,null)),n.setState({ticket_id:e}),n.goPanel("ticket"),n.setPopout(null)},n.onChange=function(e){var t=e.currentTarget.name,a=e.currentTarget.value;n.setState(Object(h.a)({},t,a))},n.goOtherProfile=function(e){n.setState({active_other_profile:e}),n.goPanel("other_profile")},n.modalBack=function(){n.setActiveModal(n.state.modalHistory[n.state.modalHistory.length-2])},n.goBack=function(){var e=n.state.history;1===e.length?l.a.send("VKWebAppClose",{status:"success"}):e.length>1&&(e.pop(),n.setState({activePanel:e[e.length-1],snackbar:null}))},n.goPanel=function(e){var t=n.state.history.slice();t.push(e),window.history.pushState({panel:e},e),n.setState({history:t,activePanel:e,snackbar:null})},n.setActiveModal=function(e){e=e||null;var t=n.state.modalHistory?Object(_.a)(n.state.modalHistory):[];null===e?t=[]:-1!==t.indexOf(e)?t=t.splice(0,t.indexOf(e)+1):t.push(e),n.setState({activeModal:e,modalHistory:t})},n.showAlert=function(e,t){n.setState({popout:o.a.createElement(v.c,{actions:[{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",autoclose:!0,mode:"cancel"}],onClose:function(){return n.setPopout(null)}},o.a.createElement("h2",null,e),o.a.createElement("p",null,t))})},n.showErrorAlert=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n.setPopout(o.a.createElement(v.c,{actions:[{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,mode:"cancel"}],onClose:function(){return n.setPopout(null)}},o.a.createElement("h2",null,"\u041e\u0448\u0438\u0431\u043a\u0430"),e?o.a.createElement("p",null,e):o.a.createElement("p",null,"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430!")))},n}return Object(m.a)(a,[{key:"ChangeAge",value:function(e){var t=this;this.setState({popout:o.a.createElement(v.K,null)}),fetch(this.state.api_url+"method=account.setAge&age="+e+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result&&t.setState({popout:null})})).catch((function(e){t.showErrorAlert(e)}))}},{key:"userBan",value:function(e,t){var a=this;this.setPopout(o.a.createElement(v.K,null)),fetch(this.state.api_url+"method=account.ban&agent_id="+e+"&banned=true&reason="+t+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result?(a.setActiveModal(null),a.showAlert("\u0423\u0441\u043f\u0435\u0445","\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0437\u0430\u0431\u0430\u043d\u0435\u043d"),a.setPopout(null)):a.showErrorAlert(e.error.message)})).catch((function(e){a.showErrorAlert(e)}))}},{key:"sendMoney",value:function(){var e=this;fetch(this.state.api_url+"method=transfers.send&summa="+this.state.money_transfer_count+"&send_to="+this.state.money_transfer_send+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?(e.setState({moneys:t.response}),e.setActiveModal("moneys")):e.showErrorAlert(t.error.message)}))}},{key:"componentDidMount",value:function(){window.addEventListener("popstate",this.handlePopstate),this.myQuestions()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("popstate",this.handlePopstate)}},{key:"render",value:function(){var e=this,t=o.a.createElement(v.B,{activeModal:this.state.activeModal},o.a.createElement(v.z,{id:"settings",onClose:this.modalBack,header:o.a.createElement(v.A,{right:o.a.createElement(v.t,{onClick:this.modalBack},o.a.createElement(be.a,{style:{color:"var(--placeholder_icon_foreground_primary)"}}))},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438")},o.a.createElement(v.l,{style:{display:"flex"}},o.a.createElement(v.f,{onClick:function(){e.setActiveModal(null),e.getRandomTiket()},stretched:!0,size:"l",before:o.a.createElement(Te.a,null)},"\u0421\u043b\u0443\u0447\u0430\u0439\u043d\u044b\u0439 \u0442\u0438\u043a\u0435\u0442"),o.a.createElement(v.f,{onClick:function(){e.setActiveModal(null),e.props.this.changeData("scheme","bright_light"===e.props.this.state.scheme?"space_gray":"bright_light")},stretched:!0,size:"l",style:{marginLeft:"5%"},before:o.a.createElement(Re.a,null)},"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0442\u0435\u043c\u0443"))),o.a.createElement(ge,{id:"prom",onClose:function(){return e.setActiveModal(null)},action:function(){return e.setActiveModal(null)}}),o.a.createElement(ke,{id:"donut",onClose:function(){return e.setActiveModal(null)},action:function(){return e.setActiveModal(null)}}),o.a.createElement(v.y,{id:"ban_user",onClose:function(){return e.setActiveModal(null)},icon:o.a.createElement(v.d,{src:this.state.other_profile?this.state.other_profile.avatar.url:null,size:72}),header:"\u0417\u0430\u0431\u0430\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",actions:[{title:"\u0417\u0430\u0431\u0430\u043d\u0438\u0442\u044c! \ud83e\udd2c",mode:"secondary",action:function(){e.userBan(e.state.other_profile?e.state.other_profile.id:0,e.state.ban_reason)}}]},o.a.createElement(v.v,{disabled:!0,value:this.state.other_profile?this.state.other_profile.id<0?-this.state.other_profile.id:this.state.other_profile.id:null}),o.a.createElement("br",null),o.a.createElement(v.v,{maxLength:"100",name:"ban_reason",onChange:function(t){return e.onChange(t)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0440\u0438\u0447\u0438\u043d\u0443 \u0431\u0430\u043d\u0430",value:this.state.ban_reason})),o.a.createElement(v.y,{id:"send",onClose:function(){return e.setActiveModal(null)},icon:o.a.createElement(aa.a,null),header:"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0439\u0442\u0435 \u043c\u043e\u043d\u0435\u0442\u043a\u0438 \u0434\u0440\u0443\u0437\u044c\u044f\u043c",actions:[{title:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c",mode:"secondary",disabled:!0,action:function(){e.sendMoney()}}]},o.a.createElement(v.v,{maxLength:"5",onChange:function(t){return e.onChange(t)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 id \u0430\u0433\u0435\u043d\u0442\u0430",name:"money_transfer_send",value:this.state.money_transfer_send}),o.a.createElement("br",null),o.a.createElement(v.v,{maxLength:"5",name:"money_transfer_count",onChange:function(t){return e.onChange(t)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043b-\u0432\u043e \u043c\u043e\u043d\u0435\u0442\u043e\u043a",value:this.state.money_transfer_count})),o.a.createElement(v.y,{id:"moneys",onClose:function(){return e.setActiveModal(null)},icon:o.a.createElement(v.d,{src:this.state.moneys?this.state.moneys.avatar:null,size:72}),header:this.state.moneys?"\u0412\u0430\u0448 \u0431\u0430\u043b\u0430\u043d\u0441: "+this.state.moneys.money:null,caption:this.state.moneys?this.state.moneys.text:null,actions:[{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",mode:"secondary",action:function(){e.setActiveModal(null),e.setState({moneys:null,money_transfer_count:null,money_transfer_send:null})}}]}),o.a.createElement(v.y,{id:"transfer",onClose:function(){return e.setActiveModal(null)},icon:o.a.createElement(v.d,{src:this.state.transfer.avatar,size:72}),header:"\u041f\u0435\u0440\u0435\u0432\u043e\u0434 \u043c\u043e\u043d\u0435\u0442\u043e\u043a",caption:this.state.transfer.comment,actions:[{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",mode:"secondary",action:function(){e.setActiveModal(null)}}]}),o.a.createElement(v.z,{id:"share",onClose:this.modalBack,header:o.a.createElement(v.A,{right:o.a.createElement(v.t,{onClick:this.modalBack},o.a.createElement(be.a,null))},"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f")},o.a.createElement(v.x,null,o.a.createElement(v.g,{onClick:function(){return e.setActiveModal("qr")},before:o.a.createElement(Xt.a,{width:28,height:28})},"QR-code"),o.a.createElement(v.g,{onClick:function(){l.a.send("VKWebAppShare",{link:"https://vk.com/app7409818#agent_id="+e.props.account.id}),e.setActiveModal(null)},before:o.a.createElement(Zt.a,{width:28,height:28})},"\u0412 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"),o.a.createElement(v.g,{onClick:function(){l.a.send("VKWebAppCopyText",{text:"https://vk.com/app7409818#agent_id="+e.props.account.id}),e.setActiveModal(null)},before:o.a.createElement(ea.a,{width:28,height:28})},"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443"))),o.a.createElement(v.z,{id:"qr",onClose:this.modalBack,header:o.a.createElement(v.A,{right:o.a.createElement(v.t,{onClick:this.modalBack},o.a.createElement(be.a,{style:{color:"var(--placeholder_icon_foreground_primary)"}}))},"QR")},o.a.createElement("div",{className:"qr",dangerouslySetInnerHTML:{__html:na(this.props.account.id,this.props.this.state.scheme)}}),o.a.createElement("br",null),o.a.createElement("div",{className:"qr"},"\u041e\u0442\u0441\u043a\u0430\u043d\u0438\u0440\u0443\u0439\u0442\u0435 \u043a\u0430\u043c\u0435\u0440\u043e\u0439 \u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435!"),o.a.createElement("br",null)));return o.a.createElement(v.V,{id:this.props.id,activePanel:this.state.activePanel,modal:t,popout:this.state.popout,onSwipeBack:this.goBack},o.a.createElement(rt,{id:"profile",this:this,account:this.props.account}),o.a.createElement(At,{id:"qu",this:this,account:this.props.account,myQuestions:this.state.myQuestions}),o.a.createElement(vt,{id:"market",this:this,account:this.props.account}),o.a.createElement(_t,{id:"achievements",this:this,account:this.props.account}),o.a.createElement(Dt,{id:"settings",this:this,account:this.props.account}),o.a.createElement(Ht,{id:"schemechange",this:this,account:this.props.account}),o.a.createElement(qt,{id:"info",this:this}),o.a.createElement(Qt,{id:"verf",this:this,account:this.props.account}),o.a.createElement(Z,{id:"ticket",this:this,ticket_id:this.state.ticket_id,account:this.props.account}),o.a.createElement(de,{id:"other_profile",this:this,agent_id:this.state.active_other_profile,account:this.props.account}))}}]),a}(o.a.Component),ra=a(179),ia=a.n(ra),sa=a(178),la=a.n(sa),ca=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),ua={backgroundColor:"var(--accent)"},ha=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={account:[],activeStory:"questions",scheme:"bright_light",api_url:"https://xelene.ru/road/php/index.php?",popout:o.a.createElement(v.K,null),snackbar:null,switchKeys:!1,need_epic:!0},n.changeData=function(e,t){n.setState(Object(h.a)({},e,t))},n.LoadProfile=function(){fetch(n.state.api_url+"method=account.get&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){if(e.result&&(n.setState({account:e.response,popout:null,switchKeys:e.response.noti}),0!==Number(n.state.account.scheme))){var t=1===Number(n.state.account.scheme)?"bright_light":"space_gray";n.setState({scheme:t})}})).catch((function(e){n.showErrorAlert(e)}))},n.setPopout=function(e){n.setState({popout:e})},n.playAudio=function(){if(n.audio.paused){n.audio.volume=.1,n.audio.currentTime=0;var e=n.audio.play();void 0!==e&&e.then((function(e){})).catch((function(e){console.info(e)}))}else n.audio.pause();n.setState({paused:n.audio.paused})},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.audio=new Audio(g.a),this.audio.load(),this.audio.loop=!0,l.a.subscribe((function(t){var a=t.detail,n=a.type,o=a.data;if("VKWebAppAllowMessagesFromGroupResult"===n&&fetch(e.state.api_url_second+"method=notifications.swift&swift=on&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t&&e.setState({switchKeys:!0})})).catch((function(t){e.showErrorAlert()})),"VKWebAppAllowMessagesFromGroupFailed"===n&&fetch(e.state.api_url_second+"method=notifications.swift&swift=off&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t&&e.setState({switchKeys:!1})})).catch((function(t){e.showErrorAlert()})),"VKWebAppViewHide"===n&&console.log("closing..."),"VKWebAppUpdateConfig"===n)if(e.state.account){var r=1===Number(e.state.account.scheme)?"bright_light":"space_gray";e.setState({scheme:r})}else e.setState({scheme:o.scheme})})),fetch(this.state.api_url+"method=account.get&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){if(t.result){if(e.setState({account:t.response,popout:null,switchKeys:t.response.noti}),0!==Number(e.state.account.scheme)){var a=1===Number(e.state.account.scheme)?"bright_light":"space_gray";e.setState({scheme:a})}}else e.setState({popout:o.a.createElement(v.c,{actions:[{title:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c",autoclose:!0,action:function(){return e.componentDidMount()}}],onClose:function(){e.closePopout(),e.componentDidMount()}},o.a.createElement("h2",null,"\u041e\u0448\u0438\u0431\u043a\u0430"),o.a.createElement("p",null,t.error.message))})})).catch((function(t){e.showErrorAlert(t)}))}},{key:"showAlert",value:function(e,t){this.setState({popout:o.a.createElement(v.c,{actions:[{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",autoclose:!0,style:"cancel"}],onClose:this.setPopout(null)},o.a.createElement("h2",null,e),o.a.createElement("p",null,t))})}},{key:"deleteStats",value:function(){var e=this;this.setState({popout:o.a.createElement(v.K,null)}),fetch(this.state.api_url+"method=delete.stats&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.response?(e.setState({snackbar:o.a.createElement(v.P,{layout:"vertical",onClose:function(){return e.setState({snackbar:null})},before:o.a.createElement(v.d,{size:24,style:ua},o.a.createElement(mt.a,{fill:"#fff",width:14,height:14}))},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u0440\u043e\u0444\u0438\u043b\u044f \u0441\u0431\u0440\u043e\u0448\u0435\u043d\u0430"),popout:null}),e.LoadProfile(),window.history.back()):e.showAlert("\u041e\u0448\u0438\u0431\u043a\u0430",t.error_text)})).catch((function(t){e.showErrorAlert()}))}},{key:"showErrorAlert",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.setPopout(o.a.createElement(v.c,{actions:[{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,mode:"cancel"}],onClose:function(){return e.setPopout(null)}},o.a.createElement("h2",null,"\u041e\u0448\u0438\u0431\u043a\u0430"),t?o.a.createElement("p",null,t):o.a.createElement("p",null,"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430!")))}},{key:"render",value:function(){var e=this;return o.a.createElement(v.j,{isWebView:ca,scheme:this.state.scheme},o.a.createElement(v.m,{activeStory:this.state.activeStory,tabbar:this.state.need_epic&&o.a.createElement(v.Q,null,o.a.createElement(v.R,{onClick:function(t){e.setState({activeStory:t.currentTarget.dataset.story})},selected:"questions"===this.state.activeStory,"data-story":"questions",text:"\u0412\u043e\u043f\u0440\u043e\u0441\u044b"},o.a.createElement(la.a,null)),o.a.createElement(v.R,{onClick:function(t){e.setState({activeStory:t.currentTarget.dataset.story})},selected:"top"===this.state.activeStory,"data-story":"top",text:"\u0422\u043e\u043f"},o.a.createElement(Ae.a,null)),o.a.createElement(v.R,{onClick:function(t){e.setState({activeStory:t.currentTarget.dataset.story})},selected:"profile"===this.state.activeStory,"data-story":"profile",text:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"},o.a.createElement(ia.a,null)))},o.a.createElement(Ne,{id:"questions",this:this,scheme:this.state.scheme,reloadProfile:this.LoadProfile,account:this.state.account,popout:this.state.popout}),o.a.createElement(ze,{id:"top",this:this,scheme:this.state.scheme,account:this.state.account,popout:this.state.popout}),o.a.createElement(Ue,{id:"notif",this:this,scheme:this.state.scheme,reloadProfile:this.LoadProfile,account:this.state.account,popout:this.state.popout}),o.a.createElement(oa,{id:"profile",this:this,reloadProfile:this.LoadProfile,scheme:this.state.scheme,account:this.state.account,popout:this.state.popout})))}}]),a}(o.a.Component),pa=a(180),ma=a.n(pa);c.a({dsn:"https://0045161b140249dcbc378fe70d966605@o461731.ingest.sentry.io/5465956",integrations:[new u.a.BrowserTracing],tracesSampleRate:1}),l.a.send("VKWebAppInit",{});var da=document.getElementById("root");Object(v.W)()===v.u&&ma()(da),i.a.render(o.a.createElement(ha,null),da)},58:function(e,t,a){}},[[213,1,2]]]);
//# sourceMappingURL=main.903caf7f.chunk.js.map