(this["webpackJsonpmobile-road"]=this["webpackJsonpmobile-road"]||[]).push([[0],{125:function(e,t,a){e.exports=a.p+"static/media/Soloriver.57a77e9b.mp3"},140:function(e,t,a){e.exports=a.p+"static/media/question_banner_pc.b2b8189b.jpg"},141:function(e,t,a){e.exports=a.p+"static/media/question_banner_mobile.14c5ae38.png"},143:function(e,t,a){e.exports=a.p+"static/media/Ninja.0c4d240d.webp"},166:function(e,t,a){e.exports=a.p+"static/media/user.cfc7e0b1.jpg"},167:function(e,t,a){e.exports=a.p+"static/media/jedi.7c18eb66.svg"},212:function(e,t,a){e.exports=a(267)},267:function(e,t,a){"use strict";a.r(t);a(213),a(241),a(243),a(244),a(246);var n=a(0),o=a.n(n),r=a(124),i=a.n(r),s=a(23),l=a.n(s),c=a(271),u=a(179),h=a(27),p=a(12),m=a(13),d=a(15),f=a(14),g=a(125),_=a.n(g),E=a(1),v=(a(55),a(56),a(31)),k=a(67),b=a.n(k),w=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?",title_new_tiket:"",text_new_tiket:""},n.onChange=function(e){var t=e.currentTarget.name,a=e.currentTarget.value;n.setState(Object(h.a)({},t,a))},n}return Object(m.a)(a,[{key:"sendNewTiket",value:function(){var e=this;this.setState({popout:o.a.createElement(E.H,null)});var t=this;if(this.state.text_new_tiket.length>5||this.state.title_new_tiket.length>5){var a=this.state.api_url+"method=ticket.add&"+window.location.search.replace("?",""),n=new XMLHttpRequest;n.open("POST",a,!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.onreadystatechange=function(){var e=this;if(n.readyState===XMLHttpRequest.DONE&&200===n.status&&n.responseText){var a=JSON.parse(n.responseText);t.props.this.goTiket(a.response.ticket_id),fetch(t.state.api_url+"method=tickets.get&unanswered=1&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(a){a.result?t.setState({tiket_all:a.response,popout:null,title_new_tiket:"",text_new_tiket:""}):e.showErrorAlert(a.error.message)})).catch((function(t){e.showErrorAlert()}))}},n.send("title="+this.state.title_new_tiket+"&text="+this.state.text_new_tiket),n.onerror=function(t){e.showErrorAlert(),console.error(t)}}else this.setState({popout:o.a.createElement(E.c,{actions:[{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,style:"cancel"}],onClose:this.closePopout},o.a.createElement("h2",null,"\u041e\u0448\u0438\u0431\u043a\u0430"),o.a.createElement("p",null,"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0438\u043b\u0438 \u0442\u0435\u043a\u0441\u0442 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 5 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432."))})}},{key:"render",value:function(){var e=this;return o.a.createElement(E.z,{id:this.props.id},o.a.createElement(E.A,{left:o.a.createElement(E.C,{onClick:function(){return e.props.this.goBack()}},o.a.createElement(b.a,null))},"\u041d\u043e\u0432\u044b\u0439 \u0432\u043e\u043f\u0440\u043e\u0441"),o.a.createElement(E.o,null,o.a.createElement(E.t,{top:null===this.state.title_new_tiket?"\u0421\u0443\u0442\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b (0/30). \u041d\u0435 \u043c\u0435\u043d\u0435\u0435 5 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432":"\u0421\u0443\u0442\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b ("+this.state.title_new_tiket.length+"/80). \u041d\u0435 \u043c\u0435\u043d\u0435\u0435 5 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432",maxLength:"80",type:"text",name:"title_new_tiket",value:this.state.title_new_tiket,onChange:function(t){return e.onChange(t)}}),o.a.createElement(E.R,{maxLength:"2020",name:"text_new_tiket",top:null===this.state.text_new_tiket?"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u043e \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0435 (0/2020). \u041d\u0435 \u043c\u0435\u043d\u0435\u0435 5 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432":"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u043e \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0435 ("+this.state.text_new_tiket.length+"/2020). \u041d\u0435 \u043c\u0435\u043d\u0435\u0435 5 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432",onChange:function(t){return e.onChange(t)},value:this.state.text_new_tiket}),o.a.createElement(E.f,{size:"xl",level:"secondary",stretched:!0,disabled:!Boolean(this.state.text_new_tiket.length>5)||!Boolean(this.state.title_new_tiket.length>5),onClick:function(){e.sendNewTiket()}},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")))}}]),a}(o.a.Component),y=a(48),A=a(68),C=a.n(A),P=a(142),S=a.n(P),M=a(140),j=a.n(M),x=a(141),O=a.n(x),T=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),N=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?",fething:!1,tiket_all:null,tiket_all_helper:null,offset:0,ShowBanner:!0};var o=n.props.this;return n.setPopout=o.setPopout,n.showErrorAlert=o.showErrorAlert,n.setActiveModal=o.setActiveModal,n.Prepare_questions=n.Prepare_questions.bind(Object(y.a)(n)),n}return Object(m.a)(a,[{key:"Prepare_questions",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setState({fetching:!0}),fetch(this.state.api_url+"method=tickets.get&count=20&unanswered=1&offset="+this.state.offset+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(a){if(a.result){if(e.setState({tiket_all:[]}),e.state.tiket_all)var n=a.response?e.state.tiket_all.concat(a.response):e.state.tiket_all;e.setState({tiket_all:n,tiket_all_helper:a.response}),t&&e.setState({offset:e.state.offset+20}),setTimeout((function(){e.setState({fetching:!1})}),500)}else e.showErrorAlert(a.error.message)})).catch((function(t){e.showErrorAlert(t)}))}},{key:"componentDidMount",value:function(){var e=this;this.Prepare_questions(),setTimeout((function(){e.props.account.is_first_start&&e.setActiveModal("start"),e.setPopout(null)}),1e3)}},{key:"render",value:function(){var e=this,t=this.props.this;return o.a.createElement(E.z,{id:this.props.id},o.a.createElement(E.A,{left:o.a.createElement(E.C,{onClick:function(){return e.props.this.getRandomTiket()}},o.a.createElement(S.a,null))},"\u0412\u043e\u043f\u0440\u043e\u0441\u044b"),this.state.ShowBanner&&this.props.account.is_first_start?o.a.createElement(o.a.Fragment,null,o.a.createElement(E.e,{mode:"image",size:"m",onDismiss:function(){e.setState({ShowBanner:!1})},header:"\u0421 \u0447\u0435\u0433\u043e \u043d\u0430\u0447\u0430\u0442\u044c?",subheader:"\u0421 \u043f\u0440\u043e\u0447\u0442\u0435\u043d\u0438\u044f \u0441\u0442\u0430\u0442\u044c\u0438",background:o.a.createElement("div",{style:{backgroundColor:"#5b9be6",backgroundImage:T?"url("+O.a+")":"url("+j.a+")",backgroundPosition:"right bottom",backgroundSize:"100%",backgroundRepeat:"no-repeat"}}),asideMode:"dismiss",actions:o.a.createElement(E.f,{mode:"overlay_primary",href:"https://vk.com/@jedi_road-checking-responses",target:"_blank",rel:"noopener noreferrer",size:"l"},"\u0427\u0438\u0442\u0430\u0442\u044c")}),o.a.createElement(E.J,null)):null,this.props.account.special?o.a.createElement(E.k,null,o.a.createElement(E.f,{onClick:function(){return t.goPanel("new_ticket")},size:"xl",mode:"outline",stretched:!0},"\u041d\u043e\u0432\u044b\u0439 \u0432\u043e\u043f\u0440\u043e\u0441")):null,o.a.createElement(E.F,{onRefresh:this.Prepare_questions,isFetching:this.state.fetching},this.state.tiket_all&&this.state.tiket_all.length>0?this.state.tiket_all.map((function(e,a){return o.a.createElement(o.a.Fragment,{key:a},o.a.createElement(E.g,{onClick:function(){return t.goTiket(e.id)},description:0===e.status?"\u041d\u0430 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u0438\u0438":1===e.status?"\u0415\u0441\u0442\u044c \u043e\u0442\u0432\u0435\u0442":"\u0417\u0430\u043a\u0440\u044b\u0442",asideContent:o.a.createElement(E.d,{src:526444378===e.author.id?"https://cdn3.iconfinder.com/data/icons/avatars-15/64/_Ninja-2-512.png":e.author.photo_200,size:56})},e.title),o.a.createElement(E.J,{style:{width:"90%"}}))})):null,this.state.tiket_all_helper?20===this.state.tiket_all_helper.length?o.a.createElement(E.k,null,o.a.createElement(E.f,{size:"xl",level:"secondary",onClick:function(){return e.Prepare_questions(!0)}},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0435\u0449\u0451")):this.state.tiket_all?0===this.state.tiket_all.length?null:o.a.createElement(E.n,null,this.state.tiket_all.length," \u0432\u043e\u043f\u0440\u043e\u0441(\u0430) \u0432\u0441\u0435\u0433\u043e"):null:null,this.state.tiket_all?0===this.state.tiket_all.length?o.a.createElement(E.E,{icon:o.a.createElement(C.a,null)},"\u0423\u043f\u0441, \u043a\u0430\u0436\u0435\u0442\u0441\u044f \u0432\u043e\u043f\u0440\u043e\u0441\u044b \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b\u0438\u0441\u044c"):null:o.a.createElement(E.D,null)))}}]),a}(o.a.Component),B=a(145),D=a.n(B),H=a(95),R=a.n(H),z=a(143),K=a.n(z),q=a(58),F=a.n(q),L=a(144),I=a.n(L),V=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),J=function(e){return!0===e.is_mine?o.a.createElement("div",{className:"mine_message"},o.a.createElement("div",{id:"animation",className:"message_report_moderator",style:{marginBottom:e.approved?"20px":null,right:V?"-12%":"-22%"}},o.a.createElement("div",{onClick:function(){return e.onClick()}},o.a.createElement("p",{className:"moderator_name_message"},e.title," ",e.approved?"\u2714\ufe0f":""),o.a.createElement("p",{className:"text_message"},e.children)),1===e.is_mark?o.a.createElement("div",{className:"approved",onClick:function(){return e.DoneApp()}},o.a.createElement(F.a,{className:"approved_icon green",height:15,width:15,style:{display:"inline-block"}})):0===e.is_mark?o.a.createElement("div",{className:"approved",onClick:function(){return e.CanselApp()}},o.a.createElement(I.a,{className:"approved_icon",height:15,width:15,style:{display:"inline-block"}})):null,o.a.createElement("img",{className:"avatar_message_moderator",src:e.avatar,alt:"\u0430",style:{marginLeft:"99%"}}),o.a.createElement("p",{className:"time_message"},e.time))):o.a.createElement("div",{className:"all_message",style:!1===e.is_mark?{marginBottom:"-3px"}:null},o.a.createElement("img",{className:"avatar_message",src:e.avatar,alt:"\u0430"}),o.a.createElement("div",{id:"animation",className:"message_report",onClick:function(){return e.onClick()}},o.a.createElement("p",{className:"moderator_name_message"},e.title),o.a.createElement("p",null,e.children),o.a.createElement("p",{className:"time_message"},e.time)))},W=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),Q=a(123).parse(window.location.search.replace("?","")),U=["\u044f\u043d\u0432\u0430\u0440\u044f","\u0444\u0435\u0432\u0440\u0430\u043b\u044f","\u043c\u0430\u0440\u0442\u0430","\u0430\u043f\u0440\u0435\u043b\u044f","\u043c\u0430\u044f","\u0438\u044e\u043d\u044f","\u0438\u044e\u043b\u044f","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u043d\u043e\u044f\u0431\u0440\u044f","\u0434\u0435\u043a\u0430\u0431\u0440\u044f"];function G(e){return e<10?"0"+e:e}var Y=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?",tiket_info:[],tiket_message:[],tiket_send_message:"",add_comment:!1,redaction:!1};var o=n.props.this;return n.setPopout=o.setPopout,n.showErrorAlert=o.showErrorAlert,n.setActiveModal=o.setActiveModal,n.goOtherProfile=o.goOtherProfile,n.sendRayt=n.sendRayt.bind(Object(y.a)(n)),n.onChange=function(e){var t=e.currentTarget.name,a=e.currentTarget.value;n.setState(Object(h.a)({},t,a))},n}return Object(m.a)(a,[{key:"Prepare_ticket",value:function(){var e=this;fetch(this.state.api_url+"method=ticket.getById&ticket_id="+this.props.ticket_id+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?(e.setState({tiket_info:t.response.info,tiket_message:t.response.messages}),e.setPopout(null)):e.showErrorAlert(t.error.message)})).catch((function(t){e.showErrorAlert(t)}))}},{key:"sendRayt",value:function(e,t){var a=this,n=1;(n=!0===e?1:0)<2&&fetch(this.state.api_url+"method=ticket.markMessage&message_id="+t+"&mark="+n+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result?fetch(a.state.api_url+"method=ticket.getMessages&ticket_id="+a.state.tiket_info.id+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result?(a.setState({tiket_message:e.response}),a.setActiveModal(null),a.setPopout(null)):a.showErrorAlert(e.error.message)})).catch((function(e){a.showErrorAlert(e)})):a.showErrorAlert(e.error.message)})).catch((function(e){a.showErrorAlert(e)}))}},{key:"sendClear",value:function(e){var t=this;this.setPopout(o.a.createElement(E.H,null)),fetch(this.state.api_url+"method=ticket.approveReply&message_id="+e+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result?t.setPopout(null):t.showErrorAlert(e.error.message)})).catch((function(e){t.showErrorAlert(e)}))}},{key:"Admin",value:function(e,t,a,n){var r=this,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1;this.props.this.setPopout(o.a.createElement(E.a,{onClose:function(){return r.setPopout(null)}},t>0?o.a.createElement(E.b,{autoclose:!0,onClick:function(){return r.goOtherProfile(t)}},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"):null,this.props.account.special&&0!==s&&1!==s&&t>0?o.a.createElement(E.b,{autoclose:!0,onClick:function(){return r.sendRayt(!0,e)}},"\u041e\u0446\u0435\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e"):null,this.props.account.special&&0!==s&&1!==s&&t>0?o.a.createElement(E.b,{autoclose:!0,onClick:function(){return r.sendRayt(!1,e)}},"\u041e\u0446\u0435\u043d\u0438\u0442\u044c \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u043e"):null,!0===this.props.account.special&&t>0?o.a.createElement(E.b,{autoclose:!0,onClick:function(){return r.sendClear(e)}},"\u041e\u0434\u043e\u0431\u0440\u0438\u0442\u044c"):null,!0===this.props.account.special&&t<0?o.a.createElement(E.b,{autoclose:!0,onClick:function(){r.props.this.setState({other_profile:{id:t,avatar:{url:i}}}),r.setActiveModal("ban_user")}},"\u0417\u0430\u0431\u0430\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"):null,!0===this.props.account.special&&t>0&&(null===n||void 0===n)?o.a.createElement(E.b,{autoclose:!0,onClick:function(){return r.setState({add_comment:!0,message_id_add:e})}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"):null,Number(t===this.props.account.id)?o.a.createElement(E.b,{autoclose:!0,onClick:function(){return r.setState({redaction:!0,message_id_redac:e,tiket_send_message:a})}},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"):null,null===n||void 0===n?null:o.a.createElement(E.b,{autoclose:!0,onClick:function(){r.props.this.setState({comment:n}),r.setActiveModal("comment")}},"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"),Number(t)===Number(this.props.account.id)||!0===this.props.account.special?o.a.createElement(E.b,{autoclose:!0,onClick:function(){return r.deleteMessage(e)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"):null,o.a.createElement(E.b,{autoclose:!0,mode:"cancel"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c")))}},{key:"copy",value:function(e){var t=this;this.setPopout(o.a.createElement(E.a,{onClose:function(){return t.setState({popout:null})}},Number(this.state.tiket_info.author.id)===Number(Q.vk_user_id)||!0===this.props.account.special?0===this.state.tiket_info.status||1===this.state.tiket_info.status?o.a.createElement(E.b,{autoclose:!0,onClick:function(){return t.deleteTicket()}},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0442\u0438\u043a\u0435\u0442"):o.a.createElement(E.b,{autoclose:!0,onClick:function(){return t.openTicket()}},"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0442\u0438\u043a\u0435\u0442"):null,o.a.createElement(E.b,{autoclose:!0,onClick:function(){return l.a.send("VKWebAppCopyText",{text:"https://vk.com/app7409818#ticket_id="+e})}},"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443"),o.a.createElement(E.b,{autoclose:!0,mode:"cancel"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c")))}},{key:"sendNewMessage",value:function(){var e=this;if(this.state.tiket_send_message.length>=5){this.setPopout(o.a.createElement(E.H,null));var t=this.state.api_url+"method=ticket.sendMessage&"+window.location.search.replace("?",""),a=new XMLHttpRequest;a.open("POST",t,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.onreadystatechange=function(){4!==a.status&&200===a.status&&fetch(e.state.api_url+"method=ticket.getMessages&ticket_id="+e.state.tiket_info.id+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?(e.setState({tiket_message:t.response,tiket_send_message:"",add_comment:!1,redaction:!1}),e.setPopout(null)):e.showErrorAlert(t.error.message)})).catch((function(t){e.showErrorAlert(t)}))},a.send("ticket_id="+this.state.tiket_info.id+"&text="+this.state.tiket_send_message),a.onerror=function(t){e.showErrorAlert(t),console.error(t)}}}},{key:"deleteMessage",value:function(e){var t=this;this.setPopout(o.a.createElement(E.H,null)),fetch(this.state.api_url+"method=ticket.deleteMessage&message_id="+e+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result?fetch(t.state.api_url+"method=ticket.getMessages&ticket_id="+t.state.tiket_info.id+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result?(t.setState({tiket_message:e.response}),t.setPopout(null)):t.showErrorAlert(e.error.message)})).catch((function(e){t.showErrorAlert(e)})):t.showErrorAlert(e.error.message)})).catch((function(e){t.showErrorAlert(e)}))}},{key:"deleteTicket",value:function(){var e=this;this.setPopout(o.a.createElement(E.H,null)),fetch(this.state.api_url+"method=ticket.close&ticket_id="+this.state.tiket_info.id+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?fetch(e.state.api_url+"method=ticket.getById&ticket_id="+e.state.tiket_info.id+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?(e.setState({tiket_info:t.response.info}),e.setPopout(null)):e.showErrorAlert(t.error.message)})).catch((function(t){e.showErrorAlert(t)})):e.showErrorAlert(t.error.message)})).catch((function(t){e.showErrorAlert(t)}))}},{key:"openTicket",value:function(){var e=this;this.setPopout(o.a.createElement(E.H,null)),fetch(this.state.api_url+"method=ticket.open&ticket_id="+this.state.tiket_info.id+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?fetch(e.state.api_url+"method=ticket.getById&ticket_id="+e.state.tiket_info.id+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?(e.setState({tiket_info:t.response.info}),e.setPopout(null)):e.showErrorAlert(t.error.message)})).catch((function(t){e.showErrorAlert(t)})):e.showErrorAlert(t.error.message)})).catch((function(t){e.showErrorAlert(t)}))}},{key:"sendNewMessageRedact",value:function(){var e=this;if(this.setPopout(o.a.createElement(E.H,null)),this.state.tiket_send_message.length>=5){var t=this.state.api_url+"method=ticket.editMessage&"+window.location.search.replace("?",""),a=new XMLHttpRequest;a.open("POST",t,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.onreadystatechange=function(){4!==a.status&&200===a.status&&fetch(e.state.api_url+"method=ticket.getMessages&ticket_id="+e.state.tiket_info.id+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?(e.setState({tiket_message:t.response,tiket_send_message:"",add_comment:!1,redaction:!1}),e.setPopout(null)):e.showErrorAlert(t.error.message)})).catch((function(e){console.log(e)}))},a.send("message_id="+this.state.message_id_redac+"&text="+this.state.tiket_send_message),a.onerror=function(t){e.showErrorAlert(t),console.error(t)}}else this.showErrorAlert("\u0422\u0435\u043a\u0441\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u0438\u0437 5 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432.")}},{key:"componentDidMount",value:function(){this.setPopout(o.a.createElement(E.H,null)),this.Prepare_ticket()}},{key:"nofinc",value:function(){return 1}},{key:"render",value:function(){var e=this,t=this.props,a=this;return o.a.createElement(E.z,{id:this.props.id},o.a.createElement(E.A,{left:o.a.createElement(E.B,{onClick:function(){return e.props.this.goBack()}})},o.a.createElement("span",{id:"animation",onClick:function(){return e.copy(e.state.tiket_info.id)}},"\u0412\u043e\u043f\u0440\u043e\u0441 #",this.state.tiket_info.id)),o.a.createElement("div",{className:"title_tiket"},new Date(1e3*this.state.tiket_info.time).getDate()," ",function(e){var t=new Date(1e3*e).getMonth();return U[t]}(this.state.tiket_info.time)),o.a.createElement("div",{className:"title_tiket",style:{marginTop:"10px",width:"95%",marginLeft:"10px"}},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043e\u0431\u0440\u0430\u0442\u0438\u043b\u0441\u044f \u0441 \u0432\u043e\u043f\u0440\u043e\u0441\u043e\u043c  \xab",this.state.tiket_info.title,"\xbb"),this.state.tiket_message?this.state.tiket_message.map((function(e,n){var r=Number(a.state.tiket_info.author.id)===Number(Q.vk_user_id),i=Number(e.author.id)===Number(Q.vk_user_id),s=e.author.is_moderator?e.author.avatar.url:e.author.photo_200,l=G(new Date(1e3*e.time).getHours())+":"+G(new Date(1e3*e.time).getMinutes()),c=isFinite(e.nickname)?"\u0410\u0433\u0435\u043d\u0442 \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438 #".concat(e.nickname):e.nickname?e.nickname:"\u0410\u0433\u0435\u043d\u0442 \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438 #".concat(e.author.id);return Number(a.state.tiket_info.author.id)===Number(Q.vk_user_id)?o.a.createElement(J,{title:526444378===e.author.id?"\u0412\u0438\u0442\u0451\u043a":e.author.is_moderator?c:e.author.first_name+" "+e.author.last_name,title_icon:void 0!==e.moderator_comment&&o.a.createElement(R.a,{width:10,height:10,style:{display:"inline-block"}}),is_mine:i===r,avatar:s,onClick:function(){return a.Admin(e.id,e.author.first_name?-e.author.id:e.author.id,e.text,void 0!==e.moderator_comment?e.moderator_comment.text:null,s,e.mark)},key:n,is_special:a.props.account.special,is_mark:e.mark,time:l,sendRayt_false:function(){return a.sendRayt(!1,e.id)},sendRayt_true:function(){return a.sendRayt(!0,e.id)},approved:!!e.approved,CanselApp:function(){return t.this.showAlert("\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f","\u042d\u0442\u043e\u0442 \u043e\u0442\u0432\u0435\u0442 \u043e\u0446\u0435\u043d\u0435\u043d \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u043e")},DoneApp:function(){return t.this.showAlert("\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f","\u042d\u0442\u043e\u0442 \u043e\u0442\u0432\u0435\u0442 \u043e\u0446\u0435\u043d\u0435\u043d \u043f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e")}},e.text):o.a.createElement(J,{title:526444378===e.author.id?"\u0412\u0438\u0442\u0451\u043a":e.author.is_moderator?c:e.author.first_name+" "+e.author.last_name,title_icon:void 0!==e.moderator_comment&&o.a.createElement(R.a,{width:10,height:10,style:{display:"inline-block"}}),is_mine:e.author.is_moderator,avatar:526444378===e.author.id?K.a:s,key:n,time:l,onClick:function(){return a.Admin(e.id,e.author.first_name?-e.author.id:e.author.id,e.text,void 0!==e.moderator_comment?e.moderator_comment.text:null,s,e.mark)},is_special:a.props.account.special,is_mark:e.mark,sendRayt_false:function(){return a.sendRayt(!1,e.id)},sendRayt_true:function(){return a.sendRayt(!0,e.id)},approved:!!e.approved,CanselApp:function(){return t.this.showAlert("\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f","\u042d\u0442\u043e\u0442 \u043e\u0442\u0432\u0435\u0442 \u043e\u0446\u0435\u043d\u0435\u043d \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u043e")},DoneApp:function(){return t.this.showAlert("\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f","\u042d\u0442\u043e\u0442 \u043e\u0442\u0432\u0435\u0442 \u043e\u0446\u0435\u043d\u0435\u043d \u043f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e")}},e.text)})):null,0===this.state.tiket_info.status||!0===this.state.redaction||!0===this.state.add_comment?o.a.createElement(E.k,{className:"message_sending"},o.a.createElement(E.R,{maxLength:"2020",value:this.state.tiket_send_message,name:"tiket_send_message",onChange:function(t){return e.onChange(t)},placeholder:this.state.add_comment?"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439... (\u041d\u0435 \u043c\u0435\u043d\u0435\u0435 6 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432)":"\u041e\u0442\u0432\u0435\u0442... (\u041d\u0435 \u043c\u0435\u043d\u0435\u0435 6 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432)",style:{width:W?"82%":"85%"}}),o.a.createElement("div",{className:"send_text",onClick:function(){e.state.tiket_send_message.length>5?!0!==e.state.redaction&&!0!==e.state.add_comment?e.sendNewMessage():e.state.redaction?e.sendNewMessageRedact():e.sendNewMessageComment():e.nofinc()},style:{background:this.state.tiket_send_message.length>5?"var(--button_send)":"#98A0AD"}},o.a.createElement(D.a,{width:30,height:30}))):null,1===this.state.tiket_info.status&&Number(this.state.tiket_info.author.id)===Number(Q.vk_user_id)?o.a.createElement("div",null,o.a.createElement(E.m,{vertical:"bottom"},o.a.createElement(E.k,{style:{display:"flex"}},o.a.createElement(E.f,{size:"l",style:{marginRight:"5%"},stretched:!0,onClick:function(){return e.deleteTicket()}},"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0440\u0435\u0448\u0435\u043d\u0430"),o.a.createElement(E.f,{size:"l",stretched:!0,mode:"secondary",onClick:function(){return e.openTicket()}},"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u043d\u0435 \u0440\u0435\u0448\u0435\u043d\u0430")))):null,o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null))}}]),a}(o.a.Component),X=a(146),Z=a.n(X),$=a(148),ee=a.n($),te=a(147),ae=a.n(te),ne=a(70),oe=a.n(ne),re=a(69),ie=a.n(re),se=a(50),le=a.n(se);function ce(e){return e<10?"0"+e:e}var ue=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?",other_profile:null};var o=n.props.this;return n.setPopout=o.setPopout,n.showErrorAlert=o.showErrorAlert,n.setActiveModal=o.setActiveModal,n}return Object(m.a)(a,[{key:"PrepareProfile",value:function(){var e=this;fetch(this.state.api_url+"method=user.getById&id="+this.props.agent_id+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?(e.setState({other_profile:t.response}),e.setPopout(null)):e.showErrorAlert(t.error.message)})).catch((function(t){e.showErrorAlert(t)}))}},{key:"Prom",value:function(e){var t=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setState({popout:o.a.createElement(E.H,null)}),fetch(this.state.api_url+"method=account.Flash&agent_id="+e+"&give="+Number(a)+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){if(e.result){var n=t.state.other_profile;n.flash=!!a,t.setState({other_profile:n})}else t.showErrorAlert(e.error.message)})).catch((function(e){t.showErrorAlert(e)}))}},{key:"copy",value:function(e,t){var a=this;this.setPopout(o.a.createElement(E.a,{onClose:function(){return a.setPopout(null)}},this.props.account.special?o.a.createElement(E.b,{autoclose:!0,onClick:t?function(){return a.Prom(e,!1)}:function(){return a.Prom(e)}},t?"\u0417\u0430\u0431\u0440\u0430\u0442\u044c \u043f\u0440\u043e\u043c\u0435\u0442\u0435\u0439":"\u0412\u044b\u0434\u0430\u0442\u044c \u043f\u0440\u043e\u043c\u0435\u0442\u0435\u0439"):null,this.props.account.special?o.a.createElement(E.b,{autoclose:!0,onClick:function(){a.props.this.setState({other_profile:a.state.other_profile}),a.setActiveModal("ban_user")}},"\u0417\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c"):null,o.a.createElement(E.b,{autoclose:!0,onClick:function(){l.a.send("VKWebAppCopyText",{text:"https://vk.com/app7409818#agent_id="+e})}},"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443"),o.a.createElement(E.b,{autoclose:!0,theme:"cancel"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c")))}},{key:"please_Month",value:function(e){var t="\u044f\u043d\u0432\u0430\u0440\u044f";switch(e){case 0:t="\u044f\u043d\u0432\u0430\u0440\u044f";break;case 1:t="\u0444\u0435\u0432\u0440\u0430\u043b\u044f";break;case 2:t="\u043c\u0430\u0440\u0442\u0430";break;case 3:t="\u0430\u043f\u0440\u0435\u043b\u044f";break;case 4:t="\u043c\u0430\u044f";break;case 5:t="\u0438\u044e\u043d\u044f";break;case 6:t="\u0438\u044e\u043b\u044f";break;case 7:t="\u0430\u0432\u0433\u0443\u0441\u0442\u0430";break;case 8:t="\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f";break;case 9:t="\u043e\u043a\u0442\u044f\u0431\u0440\u044f";break;case 10:t="\u043d\u043e\u044f\u0431\u0440\u044f";break;case 11:t="\u0434\u0435\u043a\u0430\u0431\u0440\u044f";break;default:t="\u044f\u043d\u0432\u0430\u0440\u044f"}return t}},{key:"componentDidMount",value:function(){this.setPopout(o.a.createElement(E.H,null)),this.PrepareProfile()}},{key:"render",value:function(){var e=this,t=this.props.this;return o.a.createElement(E.z,{id:this.props.id},o.a.createElement(E.A,{left:o.a.createElement(E.C,{onClick:function(){return e.props.this.goBack()}},o.a.createElement(b.a,null))},o.a.createElement("span",{onClick:function(){return e.copy(e.state.other_profile.id,e.state.other_profile.flash)}},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c")),this.state.other_profile?o.a.createElement(o.a.Fragment,null,o.a.createElement(E.g,{description:o.a.createElement("div",{className:"description_other_profile"},!0===this.state.other_profile.online.is_online?"online":new Date(1e3*this.state.other_profile.online.last_seen).getDate()+" "+this.please_Month(new Date(1e3*this.state.other_profile.registered).getMonth()+1)+" "+new Date(1e3*this.state.other_profile.online.last_seen).getFullYear()+" \u0432 "+ce(new Date(1e3*this.state.other_profile.online.last_seen).getHours())+":"+ce(new Date(1e3*this.state.other_profile.online.last_seen).getMinutes())),size:"l",before:o.a.createElement(E.d,{src:this.state.other_profile.avatar.url,size:70})},o.a.createElement("div",{className:"title_profile"},isFinite(this.state.other_profile.nickname)?"\u0410\u0433\u0435\u043d\u0442 \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438 #".concat(this.state.other_profile.nickname):this.state.other_profile.nickname?this.state.other_profile.nickname:"\u0410\u0433\u0435\u043d\u0442 \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438 #".concat(this.state.other_profile.id),!0===this.state.other_profile.flash?o.a.createElement("div",{className:"profile_moderator_name_icon"},o.a.createElement(ie.a,{width:12,height:12,style:{color:"var(--prom_icon)"},onClick:function(){return t.setActiveModal("prom")}})):null,!0===this.state.other_profile.verified?o.a.createElement("div",{className:"profile_moderator_name_icon"},o.a.createElement(le.a,{width:12,height:12,style:{color:"var(--dynamic_blue)"}})):null)),o.a.createElement(E.J,null),"\u0421\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 \u0410\u0433\u0435\u043d\u0442"===this.state.other_profile.nickname||this.state.other_profile.banned?o.a.createElement("div",{style:{marginTop:"20px"},className:"help_title_profile"},this.state.other_profile.banned?"\u042d\u0442\u043e\u0442 \u043f\u0440\u043e\u0444\u0438\u043b\u044c \u0437\u0430\u0431\u0430\u043d\u0435\u043d":"\u0412\u044b \u043d\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c \u044d\u0442\u043e\u0442 \u043f\u0440\u043e\u0444\u0438\u043b\u044c"):o.a.createElement(E.q,null,o.a.createElement(E.K,{disabled:!0,before:o.a.createElement(Z.a,null),indicator:new Date(1e3*this.state.other_profile.registered).getDate()+" "+this.please_Month(new Date(1e3*this.state.other_profile.registered).getMonth()+1)+" "+new Date(1e3*this.state.other_profile.registered).getFullYear()},"\u0414\u0430\u0442\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"),o.a.createElement(E.K,{disabled:!0,before:o.a.createElement(oe.a,null),indicator:o.a.createElement(E.j,{mode:"primary"},this.state.other_profile.total_answers)},"\u0412\u0441\u0435\u0433\u043e \u043e\u0442\u0432\u0435\u0442\u043e\u0432"),o.a.createElement(E.K,{disabled:!0,before:o.a.createElement(ae.a,null),indicator:o.a.createElement(E.j,{mode:"primary"},this.state.other_profile.good_answers)},"\u041f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043e\u0442\u0432\u0435\u0442\u044b"),o.a.createElement(E.K,{disabled:!0,before:o.a.createElement(ee.a,{width:28,height:28}),indicator:o.a.createElement(E.j,{mode:"primary"},this.state.other_profile.bad_answers)},"\u041e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043e\u0442\u0432\u0435\u0442\u043e\u0432")),o.a.createElement(E.J,null),o.a.createElement("div",{style:{marginTop:"20px"},className:"help_title_profile"},"\u0412 \u043d\u0435\u0434\u0430\u043b\u0435\u043a\u043e\u043c \u0431\u0443\u0434\u0443\u0449\u0435\u043c \u0437\u0434\u0435\u0441\u044c \u0447\u0442\u043e-\u0442\u043e \u0431\u0443\u0434\u0435\u0442."),o.a.createElement("div",{className:"help_title_profile"},"\u0416\u0434\u0435\u043c \u0432\u043c\u0435\u0441\u0442\u0435 \u0441 \u0432\u0430\u043c\u0438!")):null)}}]),a}(o.a.Component),he=a(34),pe=a.n(he),me=a(72),de=a.n(me),fe=a(40),ge=a.n(fe),_e=a(71),Ee=a.n(_e),ve=a(149),ke=a.n(ve),be=a(150),we=a.n(be),ye=a(123).parse(window.location.hash),Ae=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?",activePanel:"questions",activeModal:null,modalHistory:[],popout:n.props.popout,ticket_id:null,history:["questions"],active_other_profile:0,other_profile:null,ban_reason:"",comment:"",transfer:{avatar:"",comment:""},AgeUser:0},n.changeData=n.props.this.changeData,n.playAudio=n.props.this.playAudio,n.ReloadProfile=n.props.reloadProfile,n.setPopout=function(e){n.setState({popout:e})},n.goTiket=function(e){n.setPopout(o.a.createElement(E.H,null)),n.setState({ticket_id:e}),n.goPanel("ticket"),n.setPopout(null)},n.onChange=function(e){var t=e.currentTarget.name,a=e.currentTarget.value;n.setState(Object(h.a)({},t,a))},n.goOtherProfile=function(e){n.setState({active_other_profile:e}),n.goPanel("other_profile")},n.modalBack=function(){n.setActiveModal(n.state.modalHistory[n.state.modalHistory.length-2])},n.goBack=function(){var e=n.state.history;1===e.length?l.a.send("VKWebAppClose",{status:"success"}):e.length>1&&(e.pop(),n.setState({activePanel:e[e.length-1]}),"ticket"===e[e.length-1]?n.changeData("need_epic",!1):n.changeData("need_epic",!0))},n.goPanel=function(e){n.setState({history:[].concat(Object(v.a)(n.state.history),[e]),activePanel:e}),"ticket"===e?n.changeData("need_epic",!1):n.changeData("need_epic",!0)},n.setActiveModal=function(e){e=e||null;var t=n.state.modalHistory?Object(v.a)(n.state.modalHistory):[];null===e?t=[]:-1!==t.indexOf(e)?t=t.splice(0,t.indexOf(e)+1):t.push(e),n.setState({activeModal:e,modalHistory:t})},n.showAlert=function(e,t){n.setState({popout:o.a.createElement(E.c,{actions:[{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",autoclose:!0,mode:"cancel"}],onClose:function(){return n.setPopout(null)}},o.a.createElement("h2",null,e),o.a.createElement("p",null,t))})},n.showErrorAlert=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n.setPopout(o.a.createElement(E.c,{actions:[{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,mode:"cancel"}],onClose:function(){return n.setPopout(null)}},o.a.createElement("h2",null,"\u041e\u0448\u0438\u0431\u043a\u0430"),e?o.a.createElement("p",null,e):o.a.createElement("p",null,"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430!")))},n}return Object(m.a)(a,[{key:"ChangeAge",value:function(e){var t=this;this.setState({popout:o.a.createElement(E.H,null)}),fetch(this.state.api_url+"method=account.setAge&age="+e+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result&&t.setState({popout:null})})).catch((function(e){t.showErrorAlert()}))}},{key:"userBan",value:function(e,t){var a=this;this.setPopout(o.a.createElement(E.H,null)),fetch(this.state.api_url+"method=account.ban&agent_id="+e+"&banned=true&reason="+t+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result?(a.setActiveModal(null),a.showAlert("\u0423\u0441\u043f\u0435\u0445","\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0437\u0430\u0431\u0430\u043d\u0435\u043d"),a.setPopout(null)):a.showErrorAlert(e.error.message)})).catch((function(e){a.showErrorAlert(e)}))}},{key:"getRandomTiket",value:function(){var e=this;fetch(this.state.api_url+"method=ticket.getRandom&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?e.goTiket(t.response.id):e.showErrorAlert(t.error.message)})).catch((function(t){e.showErrorAlert(t)}))}},{key:"componentDidMount",value:function(){void 0!==ye.ticket_id&&(this.goTiket(ye.ticket_id),l.a.send("VKWebAppSetLocation",{location:""})),void 0!==ye.agent_id&&(this.goOtherProfile(ye.agent_id),l.a.send("VKWebAppSetLocation",{location:""}))}},{key:"render",value:function(){var e=this,t=o.a.createElement(E.y,{activeModal:this.state.activeModal},o.a.createElement(E.w,{id:"start",onClose:this.modalBack,dynamicContentHeight:!0,header:o.a.createElement(E.x,null,"\u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u0432 \u0438\u0433\u0440\u0443")},o.a.createElement(E.k,{style:{marginTop:0}},o.a.createElement("img",{className:"AvaModalPage",src:void 0!==this.props.account.id?this.props.account.avatar.url:null,size:70,alt:"\u0442\u0432\u043e\u044f \u0430\u0432\u0430"}),o.a.createElement(E.r,{subtitle:"\u041f\u043e\u043c\u043d\u0438\u0442\u0435, \u043e\u0442\u0432\u0435\u0447\u0430\u0442\u044c \u043d\u0443\u0436\u043d\u043e \u0432\u0434\u0443\u043c\u0447\u0438\u0432\u043e."},"\u0412\u0430\u043c \u043f\u0440\u0438\u0441\u0432\u043e\u0435\u043d \u043d\u043e\u043c\u0435\u0440 #",void 0!==this.props.account.id?this.props.account.id:"undefined"),o.a.createElement(E.J,null),o.a.createElement(E.o,null,o.a.createElement(E.p,{header:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u0412\u0430\u0436\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f",mode:"error"},"\u0421\u0435\u0440\u0432\u0438\u0441 \u043d\u0435 \u0438\u043c\u0435\u0435\u0442 \u043e\u0442\u043d\u043e\u0448\u0435\u043d\u0438\u044f \u043a \u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u0412\u043a\u043e\u043d\u0442\u0430\u043a\u0442\u0435, \u0430 \u0442\u0430\u043a \u0436\u0435 \u0438\u0445 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0430\u043c."),o.a.createElement(E.L,{min:10,max:100,step:1,value:this.state.AgeUser,onChange:function(t){e.setState({AgeUser:t})},top:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u0432\u043e\u0439 \u0432\u043e\u0437\u0440\u0430\u0441\u0442: ".concat(this.state.AgeUser)})),o.a.createElement(E.q,null,o.a.createElement(E.K,{disabled:!0,multiline:!0,before:o.a.createElement(Ee.a,null)},"\u0417\u0430\u0440\u0430\u0431\u0430\u0442\u044b\u0432\u0430\u0439 \u043c\u043e\u043d\u0435\u0442\u044b"),o.a.createElement(E.K,{disabled:!0,multiline:!0,before:o.a.createElement(ke.a,null)},"\u041e\u0442\u0432\u0435\u0447\u0430\u0439 \u043d\u0430 \u0432\u043e\u043f\u0440\u043e\u0441\u044b"),o.a.createElement(E.K,{disabled:!0,multiline:!0,before:o.a.createElement(de.a,null)},"\u0423\u0447\u0430\u0441\u0442\u0432\u0443\u0439 \u0432 \u0440\u0435\u0439\u0442\u0438\u043d\u0433\u0435"),o.a.createElement(E.K,{disabled:!0,multiline:!0,before:o.a.createElement(we.a,null)},"\u041f\u043e\u043b\u0443\u0447\u0430\u0439 \u043e\u0442\u043c\u0435\u0442\u043a\u0443 \u043e\u0433\u043d\u044f")),o.a.createElement(E.k,null,o.a.createElement(E.f,{mode:"secondary",size:"xl",stretched:!0,onClick:function(){e.ChangeAge(e.state.AgeUser),e.setActiveModal(null),setTimeout((function(){e.ReloadProfile()}),2e3)}},"\u0412\u043f\u0435\u0440\u0451\u0434!")))),o.a.createElement(E.v,{id:"prom",onClose:function(){return e.setActiveModal(null)},icon:o.a.createElement(ge.a,{style:{color:"var(--dynamic_red)"},width:72,height:72}),caption:"\u041f\u0440\u043e\u043c\u0435\u0442\u0435\u0439 \u2014 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u044b\u0439 \u0437\u043d\u0430\u0447\u043e\u043a, \u0432\u044b\u0434\u0430\u0432\u0430\u0435\u043c\u044b\u0439 \u0430\u0433\u0435\u043d\u0442\u0430\u043c \u0437\u0430 \u0445\u043e\u0440\u043e\u0448\u0435\u0435 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u043e \u043e\u0442\u0432\u0435\u0442\u043e\u0432.",actions:[{title:"\u041a\u043b\u0430\u0441\u0441!",mode:"secondary",action:function(){e.setActiveModal(null)}}]}),o.a.createElement(E.v,{id:"ban_user",onClose:function(){return e.setActiveModal(null)},icon:o.a.createElement(E.d,{src:this.state.other_profile?this.state.other_profile.avatar.url:null,size:72}),header:"\u0417\u0430\u0431\u0430\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",actions:[{title:"\u0417\u0430\u0431\u0430\u043d\u0438\u0442\u044c! \ud83e\udd2c",mode:"secondary",action:function(){e.userBan(e.state.other_profile?e.state.other_profile.id:0,e.state.ban_reason),console.log(e.state.other_profile.id)}}]},o.a.createElement(E.t,{disabled:!0,value:this.state.other_profile?this.state.other_profile.id<0?-this.state.other_profile.id:this.state.other_profile.id:null}),o.a.createElement("br",null),o.a.createElement(E.t,{maxLength:"100",name:"ban_reason",onChange:function(t){return e.onChange(t)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0440\u0438\u0447\u0438\u043d\u0443 \u0431\u0430\u043d\u0430",value:this.state.ban_reason})),o.a.createElement(E.v,{id:"transfer",onClose:function(){return e.setActiveModal(null)},icon:o.a.createElement(E.d,{src:this.state.transfer.avatar,size:72}),header:"\u041f\u0435\u0440\u0435\u0432\u043e\u0434 \u043c\u043e\u043d\u0435\u0442\u043e\u043a",caption:this.state.transfer.comment,actions:[{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",mode:"secondary",action:function(){e.setActiveModal(null)}}]}),o.a.createElement(E.w,{id:"comment",onClose:this.modalBack,header:o.a.createElement(E.x,{right:o.a.createElement(E.r,{onClick:this.modalBack},o.a.createElement(pe.a,null))},"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439")},o.a.createElement(E.k,null,o.a.createElement("div",{style:{whiteSpace:"pre-wrap"}},this.state.comment))));return o.a.createElement(E.S,{id:this.props.id,activePanel:this.state.activePanel,modal:t,popout:this.state.popout,onSwipeBack:this.goBack},o.a.createElement(N,{id:"questions",this:this,account:this.props.account}),o.a.createElement(w,{id:"new_ticket",this:this,account:this.props.account}),o.a.createElement(Y,{id:"ticket",this:this,ticket_id:this.state.ticket_id,account:this.props.account}),o.a.createElement(ue,{id:"other_profile",this:this,agent_id:this.state.active_other_profile,account:this.props.account}))}}]),a}(o.a.Component),Ce=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?",fetching:!1,top_agents:null};var o=n.props.this;return n.setPopout=o.setPopout,n.showErrorAlert=o.showErrorAlert,n.setActiveModal=o.setActiveModal,n}return Object(m.a)(a,[{key:"getTopUsers",value:function(){var e=this;fetch(this.state.api_url+"method=users.getTop&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result&&(e.setState({top_agents:t.response}),setTimeout((function(){e.setState({fetching:!1})}),500))})).catch((function(t){e.showErrorAlert(t)}))}},{key:"componentDidMount",value:function(){this.getTopUsers()}},{key:"render",value:function(){var e=this,t=this.props.this;return o.a.createElement(E.z,{id:this.props.id},o.a.createElement(E.A,null,"\u0422\u043e\u043f"),o.a.createElement(o.a.Fragment,null,o.a.createElement(E.F,{onRefresh:function(){e.setState({fetching:!0}),e.getTopUsers()},isFetching:this.state.fetching},this.state.top_agents?this.state.top_agents.map((function(a,n){return a.banned?null:o.a.createElement(o.a.Fragment,{key:a.id},o.a.createElement(E.K,{onClick:function(){return t.goOtherProfile(a.id,!0)},description:o.a.createElement("div",{className:"top_moderator_desc"},a.good_answers+" \u0445\u043e\u0440\u043e\u0448\u0438\u0445 \u043e\u0442\u0432\u0435\u0442\u043e\u0432, "+a.bad_answers+" \u043f\u043b\u043e\u0445\u0438\u0445 \u043e\u0442\u0432\u0435\u0442\u043e\u0432"),size:"l",before:o.a.createElement(E.d,{src:a.avatar.url})},o.a.createElement("div",{className:"top_moderator_name"},isFinite(a.nickname)?"\u0410\u0433\u0435\u043d\u0442 \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438 #".concat(a.nickname):a.nickname?a.nickname:"\u0410\u0433\u0435\u043d\u0442 \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438 #".concat(a.id),o.a.createElement("div",{className:"top_moderator_name_icon"},!0===a.flash?o.a.createElement(ie.a,{width:12,height:12,onClick:function(){return e.setActiveModal("prom")},className:"top_moderator_name_icon"}):null),o.a.createElement("div",{className:"top_moderator_name_icon_ver"},!0===a.verified?o.a.createElement(le.a,{className:"top_moderator_name_icon_ver"}):null))),o.a.createElement(E.J,null))})):null)))}}]),a}(o.a.Component),Pe=a(73),Se=a.n(Pe),Me=a(74),je=a.n(Me),xe=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?",activePanel:"top",activeModal:null,modalHistory:[],popout:n.props.popout,ticket_id:null,history:["top"],active_other_profile:0,other_profile:null,ban_reason:"",comment:"",transfer:{avatar:"",comment:""},AgeUser:0},n.changeData=n.props.this.changeData,n.playAudio=n.props.this.playAudio,n.setPopout=function(e){n.setState({popout:e})},n.goTiket=function(e){n.setPopout(o.a.createElement(E.H,null)),n.setState({ticket_id:e}),n.goPanel("ticket"),n.setPopout(null)},n.onChange=function(e){var t=e.currentTarget.name,a=e.currentTarget.value;n.setState(Object(h.a)({},t,a))},n.goOtherProfile=function(e){n.setState({active_other_profile:e}),n.goPanel("other_profile")},n.modalBack=function(){n.setActiveModal(n.state.modalHistory[n.state.modalHistory.length-2])},n.goBack=function(){var e=n.state.history;1===e.length?l.a.send("VKWebAppClose",{status:"success"}):e.length>1&&(e.pop(),n.setState({activePanel:e[e.length-1]}),"ticket"===e[e.length-1]?n.changeData("need_epic",!1):n.changeData("need_epic",!0))},n.goPanel=function(e){n.setState({history:[].concat(Object(v.a)(n.state.history),[e]),activePanel:e}),"ticket"===e?n.changeData("need_epic",!1):n.changeData("need_epic",!0)},n.setActiveModal=function(e){e=e||null;var t=n.state.modalHistory?Object(v.a)(n.state.modalHistory):[];null===e?t=[]:-1!==t.indexOf(e)?t=t.splice(0,t.indexOf(e)+1):t.push(e),n.setState({activeModal:e,modalHistory:t})},n.showAlert=function(e,t){n.setState({popout:o.a.createElement(E.c,{actions:[{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",autoclose:!0,mode:"cancel"}],onClose:function(){return n.setPopout(null)}},o.a.createElement("h2",null,e),o.a.createElement("p",null,t))})},n.showErrorAlert=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n.setPopout(o.a.createElement(E.c,{actions:[{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,mode:"cancel"}],onClose:function(){return n.closePopout}},o.a.createElement("h2",null,"\u041e\u0448\u0438\u0431\u043a\u0430"),e?o.a.createElement("p",null,e):o.a.createElement("p",null,"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430!")))},n}return Object(m.a)(a,[{key:"ChangeAge",value:function(e){var t=this;this.setState({popout:o.a.createElement(E.H,null)}),fetch(this.state.api_url+"method=account.setAge&age="+e+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result&&t.setState({popout:null})})).catch((function(e){t.showErrorAlert()}))}},{key:"userBan",value:function(e,t){var a=this;this.setPopout(o.a.createElement(E.H,null)),fetch(this.state.api_url+"method=account.ban&agent_id="+e+"&banned=true&reason="+t+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result?(a.setActiveModal(null),a.showAlert("\u0423\u0441\u043f\u0435\u0445","\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0437\u0430\u0431\u0430\u043d\u0435\u043d"),a.setPopout(null)):a.showErrorAlert(e.error.message)})).catch((function(e){a.showErrorAlert(e)}))}},{key:"getRandomTiket",value:function(){var e=this;fetch(this.state.api_url+"method=ticket.getRandom&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?e.goTiket(t.response.id):e.showErrorAlert(t.error.message)})).catch((function(t){e.showErrorAlert(t)}))}},{key:"render",value:function(){var e=this,t=o.a.createElement(E.y,{activeModal:this.state.activeModal},o.a.createElement(E.w,{id:"settings",onClose:this.modalBack,header:o.a.createElement(E.x,{right:o.a.createElement(E.r,{onClick:this.modalBack},o.a.createElement(pe.a,{style:{color:"var(--placeholder_icon_foreground_primary)"}}))},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438")},o.a.createElement(E.k,{style:{display:"flex"}},o.a.createElement(E.f,{onClick:function(){e.setActiveModal(null),e.getRandomTiket()},stretched:!0,size:"l",before:o.a.createElement(Se.a,null)},"\u0421\u043b\u0443\u0447\u0430\u0439\u043d\u044b\u0439 \u0442\u0438\u043a\u0435\u0442"),o.a.createElement(E.f,{onClick:function(){e.setActiveModal(null),e.props.this.changeData("scheme","bright_light"===e.props.this.state.scheme?"space_gray":"bright_light")},stretched:!0,size:"l",style:{marginLeft:"5%"},before:o.a.createElement(je.a,null)},"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0442\u0435\u043c\u0443"))),o.a.createElement(E.v,{id:"prom",onClose:function(){return e.setActiveModal(null)},icon:o.a.createElement(ge.a,{style:{color:"var(--prom_icon)"},width:72,height:72}),caption:"\u041f\u0440\u043e\u043c\u0435\u0442\u0435\u0439 \u2014 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u044b\u0439 \u0437\u043d\u0430\u0447\u043e\u043a, \u0432\u044b\u0434\u0430\u0432\u0430\u0435\u043c\u044b\u0439 \u0430\u0433\u0435\u043d\u0442\u0430\u043c \u0437\u0430 \u0445\u043e\u0440\u043e\u0448\u0435\u0435 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u043e \u043e\u0442\u0432\u0435\u0442\u043e\u0432.",actions:[{title:"\u041a\u043b\u0430\u0441\u0441!",mode:"secondary",action:function(){e.setActiveModal(null)}}]}),o.a.createElement(E.v,{id:"ban_user",onClose:function(){return e.setActiveModal(null)},icon:o.a.createElement(E.d,{src:this.state.other_profile?this.state.other_profile.avatar.url:null,size:72}),header:"\u0417\u0430\u0431\u0430\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",actions:[{title:"\u0417\u0430\u0431\u0430\u043d\u0438\u0442\u044c! \ud83e\udd2c",mode:"secondary",action:function(){e.userBan(e.state.other_profile?e.state.other_profile.id:0,e.state.ban_reason),console.log(e.state.other_profile.id)}}]},o.a.createElement(E.t,{disabled:!0,value:this.state.other_profile?this.state.other_profile.id<0?-this.state.other_profile.id:this.state.other_profile.id:null}),o.a.createElement("br",null),o.a.createElement(E.t,{maxLength:"100",name:"ban_reason",onChange:function(t){return e.onChange(t)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0440\u0438\u0447\u0438\u043d\u0443 \u0431\u0430\u043d\u0430",value:this.state.ban_reason})),o.a.createElement(E.v,{id:"transfer",onClose:function(){return e.setActiveModal(null)},icon:o.a.createElement(E.d,{src:this.state.transfer.avatar,size:72}),header:"\u041f\u0435\u0440\u0435\u0432\u043e\u0434 \u043c\u043e\u043d\u0435\u0442\u043e\u043a",caption:this.state.transfer.comment,actions:[{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",mode:"secondary",action:function(){e.setActiveModal(null)}}]}));return o.a.createElement(E.S,{id:this.props.id,activePanel:this.state.activePanel,modal:t,popout:this.state.popout,onSwipeBack:this.goBack},o.a.createElement(Ce,{id:"top",this:this,account:this.props.account}),o.a.createElement(ue,{id:"other_profile",this:this,agent_id:this.state.active_other_profile,account:this.props.account}))}}]),a}(o.a.Component),Oe=a(151),Te=a.n(Oe);function Ne(e){return e<10?"0"+e:e}var Be=["\u044f\u043d\u0432\u0430\u0440\u044f","\u0444\u0435\u0432\u0440\u0430\u043b\u044f","\u043c\u0430\u0440\u0442\u0430","\u0430\u043f\u0440\u0435\u043b\u044f","\u043c\u0430\u044f","\u0438\u044e\u043d\u044f","\u0438\u044e\u043b\u044f","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u043e\u043a\u0442\u044f\u0431\u0440\u044f","\u043d\u043e\u044f\u0431\u0440\u044f","\u0434\u0435\u043a\u0430\u0431\u0440\u044f"],De=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={notification:null,fetching:!1},n.getNotif=function(){fetch(n.props.this.state.api_url+"method=notifications.get&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result?(n.setState({notification:e.response}),setTimeout((function(){n.setState({fetching:!1})}),500)):n.props.this.showErrorAlert(e.error.message)})).catch((function(e){n.props.this.showErrorAlert()}))},n.markView=function(){fetch(n.props.this.state.api_url+"method=notifications.markAsViewed&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result?setTimeout((function(){n.props.this.ReloadProfile()}),4e3):n.props.this.showErrorAlert(e.error.message)})).catch((function(e){n.props.this.showErrorAlert()}))},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getNotif(),this.markView()}},{key:"render",value:function(){var e=this,t=this.props.this;return o.a.createElement(E.z,{id:this.props.id},o.a.createElement(E.A,null,"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f"),o.a.createElement(o.a.Fragment,null,o.a.createElement(E.F,{onRefresh:function(){e.setState({fetching:!0}),e.getNotif()},isFetching:this.state.fetching},this.state.notification?this.state.notification.length>0?this.state.notification.map((function(e,a){return o.a.createElement(o.a.Fragment,{key:a},o.a.createElement(E.K,{onClick:"0"!==e.object.object?function(){return t.goTiket(e.object.object)}:function(){return t.openMoneyTransfer(e.image,e.text,e.comment)},description:new Date(1e3*e.time).getDate()+" "+Be[new Date(1e3*e.time).getMonth()]+" "+new Date(1e3*e.time).getFullYear()+" \u0432 "+Ne(new Date(1e3*e.time).getHours())+":"+Ne(new Date(1e3*e.time).getMinutes()),size:"l",before:o.a.createElement(E.d,{src:e.image}),multiline:"boolean"},o.a.createElement("div",{style:{lineHeight:"17px",marginTop:"3px"}},e.text),o.a.createElement("div",{style:{marginTop:"4px"}})),o.a.createElement(E.J,{className:{width:"100%"}}))})):o.a.createElement(E.E,{stretched:!0,icon:o.a.createElement(Te.a,null)},"\u0423 \u0412\u0430\u0441 \u043d\u0435\u0442 \u043d\u043e\u0432\u044b\u0445 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0439"):o.a.createElement(E.D,null))))}}]),a}(o.a.Component),He=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?",activePanel:"notif",activeModal:null,modalHistory:[],popout:n.props.popout,ticket_id:null,history:["notif"],active_other_profile:0,other_profile:null,ban_reason:"",comment:"",transfer:{avatar:"",comment:""}},n.changeData=n.props.this.changeData,n.ReloadProfile=n.props.reloadProfile,n.setPopout=function(e){n.setState({popout:e})},n.goTiket=function(e){n.setPopout(o.a.createElement(E.H,null)),n.setState({ticket_id:e}),n.goPanel("ticket"),n.setPopout(null)},n.onChange=function(e){var t=e.currentTarget.name,a=e.currentTarget.value;n.setState(Object(h.a)({},t,a))},n.goOtherProfile=function(e){n.setState({active_other_profile:e}),n.goPanel("other_profile")},n.openMoneyTransfer=function(e,t,a){n.setState({transfer:{avatar:e,text:t,comment:a||"\u0410\u0433\u0435\u043d\u0442 \u043d\u0435 \u043e\u0441\u0442\u0430\u0432\u0438\u043b \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f \ud83d\ude22"}}),n.setActiveModal("transfer")},n.modalBack=function(){n.setActiveModal(n.state.modalHistory[n.state.modalHistory.length-2])},n.goBack=function(){var e=n.state.history;1===e.length?l.a.send("VKWebAppClose",{status:"success"}):e.length>1&&(e.pop(),n.setState({activePanel:e[e.length-1]}),"ticket"===e[e.length-1]?n.changeData("need_epic",!1):n.changeData("need_epic",!0))},n.goPanel=function(e){n.setState({history:[].concat(Object(v.a)(n.state.history),[e]),activePanel:e}),"ticket"===e?n.changeData("need_epic",!1):n.changeData("need_epic",!0)},n.setActiveModal=function(e){e=e||null;var t=n.state.modalHistory?Object(v.a)(n.state.modalHistory):[];null===e?t=[]:-1!==t.indexOf(e)?t=t.splice(0,t.indexOf(e)+1):t.push(e),n.setState({activeModal:e,modalHistory:t})},n.showAlert=function(e,t){n.setState({popout:o.a.createElement(E.c,{actions:[{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",autoclose:!0,mode:"cancel"}],onClose:function(){return n.setPopout(null)}},o.a.createElement("h2",null,e),o.a.createElement("p",null,t))})},n.showErrorAlert=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n.setPopout(o.a.createElement(E.c,{actions:[{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,mode:"cancel"}],onClose:function(){return n.setPopout(null)}},o.a.createElement("h2",null,"\u041e\u0448\u0438\u0431\u043a\u0430"),e?o.a.createElement("p",null,e):o.a.createElement("p",null,"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430!")))},n}return Object(m.a)(a,[{key:"userBan",value:function(e,t){var a=this;this.setPopout(o.a.createElement(E.H,null)),fetch(this.state.api_url+"method=account.ban&agent_id="+e+"&banned=true&reason="+t+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result&&(a.setActiveModal(null),a.showAlert("\u0423\u0441\u043f\u0435\u0445","\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0437\u0430\u0431\u0430\u043d\u0435\u043d"),a.setPopout(null))})).catch((function(e){a.showErrorAlert()}))}},{key:"render",value:function(){var e=this,t=o.a.createElement(E.y,{activeModal:this.state.activeModal},o.a.createElement(E.v,{id:"prom",onClose:function(){return e.setActiveModal(null)},icon:o.a.createElement(ge.a,{style:{color:"var(--dynamic_red)"},width:72,height:72}),caption:"\u041f\u0440\u043e\u043c\u0435\u0442\u0435\u0439 \u2014 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u044b\u0439 \u0437\u043d\u0430\u0447\u043e\u043a, \u0432\u044b\u0434\u0430\u0432\u0430\u0435\u043c\u044b\u0439 \u0430\u0433\u0435\u043d\u0442\u0430\u043c \u0437\u0430 \u0445\u043e\u0440\u043e\u0448\u0435\u0435 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u043e \u043e\u0442\u0432\u0435\u0442\u043e\u0432.",actions:[{title:"\u041a\u043b\u0430\u0441\u0441!",mode:"secondary",action:function(){e.setActiveModal(null)}}]}),o.a.createElement(E.v,{id:"ban_user",onClose:function(){return e.setActiveModal(null)},icon:o.a.createElement(E.d,{src:this.state.other_profile?this.state.other_profile.avatar.url:null,size:72}),header:"\u0417\u0430\u0431\u0430\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",actions:[{title:"\u0417\u0430\u0431\u0430\u043d\u0438\u0442\u044c! \ud83e\udd2c",mode:"secondary",action:function(){e.userBan(e.state.other_profile?e.state.other_profile.id:0,e.state.ban_reason),console.log(e.state.other_profile.id)}}]},o.a.createElement(E.t,{disabled:!0,value:this.state.other_profile?this.state.other_profile.id<0?-this.state.other_profile.id:this.state.other_profile.id:null}),o.a.createElement("br",null),o.a.createElement(E.t,{maxLength:"100",name:"ban_reason",onChange:function(t){return e.onChange(t)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0440\u0438\u0447\u0438\u043d\u0443 \u0431\u0430\u043d\u0430",value:this.state.ban_reason})),o.a.createElement(E.v,{id:"transfer",onClose:function(){return e.setActiveModal(null)},icon:o.a.createElement(E.d,{src:this.state.transfer.avatar,size:72}),header:"\u041f\u0435\u0440\u0435\u0432\u043e\u0434 \u043c\u043e\u043d\u0435\u0442\u043e\u043a",caption:this.state.transfer.comment,actions:[{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",mode:"secondary",action:function(){e.setActiveModal(null)}}]}));return o.a.createElement(E.S,{id:this.props.id,activePanel:this.state.activePanel,modal:t,popout:this.state.popout},o.a.createElement(De,{id:"notif",this:this}),o.a.createElement(Y,{id:"ticket",this:this,ticket_id:this.state.ticket_id,account:this.props.account}),o.a.createElement(ue,{id:"other_profile",this:this,agent_id:this.state.active_other_profile,account:this.props.account}))}}]),a}(o.a.Component),Re=a(152),ze=a.n(Re),Ke=a(155),qe=a.n(Ke),Fe=a(156),Le=a.n(Fe),Ie=a(157),Ve=a.n(Ie),Je=a(158),We=a.n(Je),Qe=a(75),Ue=a.n(Qe),Ge=a(154),Ye=a.n(Ge),Xe=a(153),Ze=a.n(Xe),$e=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?"};var o=n.props.this;return n.setPopout=o.setPopout,n.showErrorAlert=o.showErrorAlert,n.setActiveModal=o.setActiveModal,n}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props.this;return o.a.createElement(E.z,{id:this.props.id},o.a.createElement(E.A,{left:o.a.createElement(o.a.Fragment,null,o.a.createElement(E.C,{onClick:function(){e.setActiveModal("share")}},o.a.createElement(Ze.a,null)),o.a.createElement(E.C,{label:this.props.account.notif_count?o.a.createElement(E.j,{size:"s",mode:"prominent"},this.props.account.notif_count):null,onClick:function(){e.props.this.changeData("activeStory","notif")}},o.a.createElement(Ye.a,null)))},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"),o.a.createElement(E.K,{disabled:!0,before:o.a.createElement(E.d,{src:this.props.account.avatar.url,size:72}),size:"l",description:isFinite(this.props.account.nickname)?"#".concat(this.props.account.nickname):this.props.account.nickname?"":"#".concat(this.props.account.id)},o.a.createElement("div",{style:{display:"flex"}},o.a.createElement("p",{style:{margin:0}},isFinite(this.props.account.nickname)?"\u0410\u0433\u0435\u043d\u0442 \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438":this.props.account.nickname?this.props.account.nickname:"\u0410\u0433\u0435\u043d\u0442 \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438"),!0===this.props.account.flash?o.a.createElement("div",{className:"profile_icon"},o.a.createElement(qe.a,{width:12,height:12,onClick:function(){return t.setActiveModal("prom")}})):null,!0===this.props.account.verified?o.a.createElement("div",{className:"profile_icon_ver"},o.a.createElement(le.a,null)):null)),o.a.createElement(E.J,null),o.a.createElement(E.k,null,o.a.createElement(E.f,{stretched:!0,size:"l",mode:"secondary",onClick:function(){return e.props.this.goPanel("settings")}},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438")),o.a.createElement(E.J,null),o.a.createElement(E.q,null,o.a.createElement(E.K,{expandable:!0,href:"https://vk.me/join/AJQ1dxm7YRd7rN/MQHaAtZx7",target:"_blank",rel:"noopener noreferrer",before:o.a.createElement(Le.a,null)},"\u0424\u0430\u043d\u0442\u043e\u043c-\u0447\u0430\u0442")),o.a.createElement(E.q,null,o.a.createElement(E.K,{expandable:!0,onClick:function(){e.props.this.goPanel("qu")},before:o.a.createElement(Ve.a,null)},"\u041c\u043e\u0438 \u043e\u0442\u0432\u0435\u0442\u044b"),o.a.createElement(E.K,{expandable:!0,onClick:function(){e.props.this.goPanel("market")},before:o.a.createElement(We.a,null)},"\u041c\u0430\u0433\u0430\u0437\u0438\u043d"),o.a.createElement(E.K,{expandable:!0,onClick:function(){e.props.this.goPanel("achievements")},before:o.a.createElement(Ue.a,null)},"\u0414\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u044f")),this.props.this.state.snackbar)}}]),a}(o.a.Component),et=a(160),tt=a.n(et),at=a(159),nt=a.n(at),ot=a(161),rt=a.n(ot),it=a(59),st=a.n(it),lt=a(60),ct=a.n(lt),ut=["1.png","2.png","3.png","4.png","5.png","6.png","7.png","8.png","9.png","10.png","11.png","12.png","13.png","14.png","15.png","16.png","17.png","18.png","19.png","20.png","21.png","22.png","23.png","24.png"],ht={backgroundColor:"var(--accent)"},pt=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e)).state={changed_id:"",api_url:"https://xelene.ru/road/php/index.php?",last_selected:null};var o=n.props.this;return n.setPopout=o.setPopout,n.showErrorAlert=o.showErrorAlert,n.showAlert=o.showAlert,n.setActiveModal=o.setActiveModal,n.onChange=function(e){var t=e.currentTarget.name,a=e.currentTarget.value;n.setState(Object(h.a)({},t,a))},n}return Object(m.a)(a,[{key:"images",value:function(){for(var e=this,t=Object.keys(ut).length,a=[],n=0;n<t;n++)a.push(o.a.createElement("img",{id:n,onClick:function(t){return e.selectImage(t)},style:0===n?{marginLeft:"20px"}:null,className:"changes_avatars",key:n,src:"https://xelene.ru/road/php/images/avatars/"+ut[n],alt:"ava"}));return a}},{key:"selectImage",value:function(e){var t=e.currentTarget.id;null!==this.state.last_selected&&(document.getElementById(this.state.last_selected).className="changes_avatars");document.getElementById(t).className="changes_avatars select_avatar",this.setState({last_selected:Number(t)})}},{key:"changeAvatar",value:function(e){var t=this;fetch(this.state.api_url+"method=shop.changeAvatar&avatar_id="+e+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result?(t.props.this.setSnack(o.a.createElement(E.M,{layout:"vertical",onClose:function(){return t.props.this.setSnack(null)},before:o.a.createElement(E.d,{size:24,style:ht},o.a.createElement(st.a,{fill:"#fff",width:14,height:14}))},"\u0410\u0432\u0430\u0442\u0430\u0440 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043c\u0435\u043d\u0435\u043d")),setTimeout((function(){t.props.this.ReloadProfile()}),4e3)):t.setState({snackbar:o.a.createElement(E.M,{layout:"vertical",onClose:function(){return t.props.this.setSnack(null)},before:o.a.createElement(ct.a,{width:24,height:24})},e.error.message)})})).catch((function(e){t.showErrorAlert(e)}))}},{key:"ChangeId",value:function(){var e=this;this.state.changed_id?(this.setPopout(o.a.createElement(E.H,null)),fetch(this.state.api_url+"method=shop.changeId&change_id="+this.state.changed_id+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?(e.props.this.setSnack(o.a.createElement(E.M,{layout:"vertical",onClose:function(){return e.props.this.setSnack(null)},before:o.a.createElement(E.d,{size:24,style:ht},o.a.createElement(st.a,{fill:"#fff",width:14,height:14}))},"id \u0410\u0433\u0435\u043d\u0442\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043c\u0435\u043d\u0435\u043d")),e.setPopout(null),setTimeout((function(){e.props.this.ReloadProfile()}),4e3)):e.showErrorAlert(t.error.message)})).catch((function(t){e.showErrorAlert(t)}))):this.props.this.setSnack(o.a.createElement(E.M,{layout:"vertical",onClose:function(){return e.props.this.setSnack(null)},before:o.a.createElement(ct.a,{width:24,height:24})},"\u0412\u044b \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043b\u0438 \u0436\u0435\u043b\u0430\u0435\u043c\u044b\u0439 id"))}},{key:"render",value:function(){var e=this;return o.a.createElement(E.z,{id:this.props.id},o.a.createElement(E.A,{left:o.a.createElement(E.B,{onClick:function(){return e.props.this.goBack()}})},"\u041c\u0430\u0433\u0430\u0437\u0438\u043d"),o.a.createElement(E.q,{separator:"hide",header:o.a.createElement(E.r,null,"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440")},o.a.createElement("div",{className:"scrollImages"},this.images()),o.a.createElement(E.k,null,o.a.createElement(E.f,{onClick:function(){e.changeAvatar(Number(e.state.last_selected)+1),e.setState({last_selected:null}),e.props.this.goBack()},before:o.a.createElement(nt.a,{style:{marginRight:"5px"}}),size:"xl",mode:"secondary",disabled:null===this.state.last_selected},"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0437\u0430 300 \u043c\u043e\u043d\u0435\u0442\u043e\u043a"))),o.a.createElement(E.q,{separator:"hide",header:o.a.createElement(E.r,null,"\u0421\u043c\u0435\u043d\u0438\u0442\u044c id \u0430\u0433\u0435\u043d\u0442\u0430")},o.a.createElement(E.k,null,o.a.createElement(E.t,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0436\u0435\u043b\u0430\u0435\u043c\u044b\u0439 \u043d\u0438\u043a (\u043c\u0430\u043a\u0441. 10 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432)",onChange:function(t){return e.onChange(t)},value:this.state.changed_id,maxLength:"10",name:"changed_id"}),o.a.createElement("br",null),o.a.createElement(E.f,{onClick:function(){e.ChangeId(e.state.changed_id),e.props.this.goBack()},before:o.a.createElement(tt.a,{width:28,height:28,style:{marginRight:"5px"}}),size:"xl",mode:"secondary",disabled:this.state.changed_id<=0},"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0437\u0430 500 \u043c\u043e\u043d\u0435\u0442\u043e\u043a"))),o.a.createElement(E.q,{separator:"hide",header:o.a.createElement(E.r,null,"\u041e\u043f\u0446\u0438\u0438")},o.a.createElement(E.k,null,o.a.createElement(E.f,{onClick:function(){return e.setActiveModal("send")},before:o.a.createElement(rt.a,{style:{marginRight:"5px"}}),size:"xl",mode:"secondary"},"\u041f\u0435\u0440\u0435\u0432\u0435\u0441\u0442\u0438"))),this.props.this.state.snackbar)}}]),a}(o.a.Component),mt=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e)).state={changed_id:0};var o=n.props.this;return n.setPopout=o.setPopout,n.showErrorAlert=o.showErrorAlert,n.setActiveModal=o.setActiveModal,n}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement(E.z,{id:this.props.id},o.a.createElement(E.A,{left:o.a.createElement(E.B,{onClick:function(){return e.props.this.goBack()}})}),o.a.createElement("div",{className:"Achives_Block"},o.a.createElement("img",{src:"https://vk.com/images/blog/about/img_about_2_2x.png",alt:"\u0414\u0440\u0430\u043a\u043e\u043d"})),o.a.createElement("div",{style:{marginTop:"20px"},className:"help_title_profile"},"\u0412 \u043d\u0435\u0434\u0430\u043b\u0435\u043a\u043e\u043c \u0431\u0443\u0434\u0443\u0449\u0435\u043c \u0437\u0434\u0435\u0441\u044c \u0447\u0442\u043e-\u0442\u043e \u0431\u0443\u0434\u0435\u0442"),o.a.createElement("div",{className:"help_title_profile"},"\u0416\u0434\u0435\u043c \u0432\u043c\u0435\u0441\u0442\u0435 \u0441 \u0432\u0430\u043c\u0438!"))}}]),a}(o.a.Component),dt=a(162),ft=a.n(dt);function gt(e){return e<10?"0"+e:e}var _t=["\u044f\u043d\u0432","\u0444\u0435\u0432","\u043c\u0430\u0440","\u0430\u043f\u0440","\u043c\u0430\u044f","\u0438\u044e\u043d","\u0438\u044e\u043b","\u0430\u0432\u0433","\u0441\u0435\u043d","\u043e\u043a\u0442","\u043d\u043e\u044f","\u0434\u0435\u043a"],Et=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?",myQuestions:[],fetching:!1,activeTab:"positive",search:"",limiter:20},n.myQuestions=function(){fetch(n.state.api_url+"method=tickets.getByModeratorAnswers&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result&&(n.setState({myQuestions:e.response}),setTimeout((function(){n.setState({fetching:!1})}),500))})).catch((function(e){n.props.this.showErrorAlert()}))},n}return Object(m.a)(a,[{key:"getFiltresQuestions",value:function(e){return"positive"===this.state.activeTab?e.filter((function(e){return 1===e.mark})):e.filter((function(e){return 0===e.mark}))}},{key:"getFilterSearch",value:function(e){var t=this.state.search.toLowerCase();return e.filter((function(e){return e.text.toLowerCase().indexOf(t)>-1}))}},{key:"limiter",value:function(e){return e.slice(0,this.state.limiter)}},{key:"componentDidMount",value:function(){this.myQuestions()}},{key:"render",value:function(){var e=this,t=this.props.this,a=this.getFiltresQuestions(this.state.myQuestions),n=this.getFilterSearch(a),r=this.limiter(n);return o.a.createElement(E.z,{id:this.props.id},o.a.createElement(E.A,{separator:!1,left:o.a.createElement(E.B,{onClick:function(){return e.props.this.goBack()}})},"\u041c\u043e\u0438 \u043e\u0442\u0432\u0435\u0442\u044b"),o.a.createElement(E.I,{value:this.state.search,onChange:function(t){e.setState({search:t.target.value})}}),o.a.createElement(E.P,null,o.a.createElement(E.Q,{onClick:function(){return e.setState({activeTab:"positive"})},selected:"positive"===this.state.activeTab},"\u041f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435"),o.a.createElement(E.Q,{onClick:function(){return e.setState({activeTab:"negative"})},selected:"negative"===this.state.activeTab},"\u041e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435")),o.a.createElement(E.F,{onRefresh:function(){e.setState({fetching:!0}),e.myQuestions()},isFetching:this.state.fetching},a.length>0?n.length>0?o.a.createElement(o.a.Fragment,null,r.map((function(e,a){return o.a.createElement(o.a.Fragment,{key:e.id},o.a.createElement(E.g,{key:a,onClick:function(){return t.goTiket(e.ticket_id)},description:new Date(1e3*e.time).getDate()+" "+_t[new Date(1e3*e.time).getMonth()]+" "+new Date(1e3*e.time).getFullYear()+" \u0432 "+gt(new Date(1e3*e.time).getHours())+":"+gt(new Date(1e3*e.time).getMinutes()),size:"l"},e.text),o.a.createElement(E.J,{style:{width:"90%"}}))})),r<n?o.a.createElement(E.k,null,o.a.createElement(E.f,{mode:"secondary",size:"xl",stretched:!0,onClick:function(){return e.setState({limiter:e.state.limiter+10})}},"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0451 10 \u043e\u0442\u0432\u0435\u0442\u043e\u0432")):null):o.a.createElement(E.E,{icon:o.a.createElement(ft.a,{width:56,height:56})},"\u041f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e."):o.a.createElement(E.E,{icon:o.a.createElement(C.a,null)},"\u0423\u043f\u0441, \u043a\u0430\u0436\u0435\u0442\u0441\u044f \u0437\u0434\u0435\u0441\u044c \u043d\u0435\u0442 \u0432\u0430\u0448\u0438\u0445 \u043e\u0442\u0432\u0435\u0442\u043e\u0432.")))}}]),a}(o.a.Component),vt=a(164),kt=a.n(vt),bt=a(165),wt=a.n(bt),yt=a(163),At=a.n(yt),Ct=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?"};var o=n.props.this;return n.setPopout=o.setPopout,n.showErrorAlert=o.showErrorAlert,n.showAlert=o.showAlert,n.setActiveModal=o.setActiveModal,n.onChange=function(e){var t=e.currentTarget.name,a=e.currentTarget.value;n.setState(Object(h.a)({},t,a))},n}return Object(m.a)(a,[{key:"deleteAccount",value:function(){var e=this;fetch(this.state.api_url+"method=account.delete&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?l.a.send("VKWebAppClose",{status:"success"}):e.showErrorAlert(t.error.message)})).catch((function(t){e.showErrorAlert(t)}))}},{key:"render",value:function(){var e=this,t=this.props.this;return o.a.createElement(E.z,{id:this.props.id},o.a.createElement(E.A,{left:o.a.createElement(E.B,{onClick:function(){return e.props.this.goBack()}})},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),o.a.createElement(E.q,null,o.a.createElement(E.K,{disabled:!0,indicator:this.props.account.age,before:o.a.createElement(At.a,null)},"\u0412\u0430\u0448 \u0432\u043e\u0437\u0440\u0430\u0441\u0442")),o.a.createElement(E.q,null,o.a.createElement(E.K,{before:o.a.createElement(Ue.a,null),expandable:!0,onClick:function(){return t.goPanel("schemechange")}},"\u0421\u043c\u0435\u043d\u0430 \u0442\u0435\u043c\u044b"),o.a.createElement(E.K,{onClick:function(){return e.props.this.setSnack(o.a.createElement(E.M,{layout:"vertical",onClose:function(){return e.props.this.setSnack(null)},before:o.a.createElement(ct.a,{width:24,height:24})},"\u0414\u0430\u043d\u043d\u044b\u0439 \u0440\u0430\u0437\u0434\u0435\u043b \u0435\u0449\u0451 \u043d\u0435 \u0433\u043e\u0442\u043e\u0432 \u0434\u043b\u044f \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430. \u041e\u043d \u0441\u0442\u0435\u0441\u043d\u044f\u0435\u0442\u0441\u044f :)"))},before:o.a.createElement(kt.a,null)},"\u0412\u0435\u0440\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f")),o.a.createElement(E.q,null,o.a.createElement(E.K,{disabled:!0,indicator:o.a.createElement(E.j,null,this.props.account.balance),before:o.a.createElement(Ee.a,null)},"\u0411\u0430\u043b\u0430\u043d\u0441"),o.a.createElement(E.K,{expandable:!0,onClick:function(){e.props.this.goPanel("info")},before:o.a.createElement(oe.a,null)},"\u041e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438")),o.a.createElement(E.q,null,o.a.createElement(E.h,{mode:"danger",onClick:function(){return e.setPopout(o.a.createElement(E.c,{actionsLayout:"vertical",actions:[{title:"\u041d\u0435\u0442, \u044f \u043d\u0430\u0436\u0430\u043b \u0441\u044e\u0434\u0430 \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u043e",autoclose:!0,style:"cancel"},{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442",autoclose:!0,mode:"destructive",action:function(){return e.deleteAccount()}}],onClose:function(){return e.setPopout(null)}},o.a.createElement("h2",null,"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435, \u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c"),o.a.createElement("p",null,"\u0414\u0430\u043d\u043d\u043e\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u0432\u0435\u0434\u0451\u0442 \u043a \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044e \u0432\u0430\u0448\u0435\u0433\u043e \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430: \u0432\u0441\u0435\u0445 \u043e\u0442\u0432\u0435\u0442\u043e\u0432, \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u0439 \u0438 \u0434\u0440\u0443\u0433\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430 \u043d\u0430 \u0432\u0430\u0448\u0435\u043c \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0435. \u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0435\u0433\u043e \u0443\u0434\u0430\u043b\u0438\u0442\u044c?")))},before:o.a.createElement(wt.a,null)},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442")),this.props.this.state.snackbar)}}]),a}(o.a.Component),Pt=a(166),St=a.n(Pt),Mt=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?"};var r=n.props.this;return n.setPopout=r.setPopout,n.showErrorAlert=r.showErrorAlert,n.showAlert=r.showAlert,n.setActiveModal=r.setActiveModal,n.onChange=function(e){var t=e.currentTarget.name,a=e.currentTarget.value;n.setState(Object(h.a)({},t,a))},n.ChangeScheme=function(e){n.setPopout(o.a.createElement(E.H,null));var t=e.currentTarget.value;fetch(n.state.api_url+"method=account.changeScheme&scheme="+t+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result?setTimeout((function(){n.props.this.ReloadProfile(),n.setPopout(null)}),3e3):n.showErrorAlert(e.error.message)})).catch((function(e){n.showErrorAlert(e)}))},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement(E.z,{id:this.props.id},o.a.createElement(E.A,{left:o.a.createElement(E.B,{onClick:function(){return e.props.this.goBack()}})},"\u0421\u043c\u0435\u043d\u0430 \u0442\u0435\u043c\u044b"),o.a.createElement(E.r,{mode:"secondary"},"\u041f\u0440\u0435\u0434\u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"),o.a.createElement(E.J,null),o.a.createElement(J,{title:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",is_mine:!1,avatar:St.a},"\u041e \u0442\u0443\u0442 \u043c\u043e\u0436\u043d\u043e \u043c\u0435\u043d\u044f\u0442\u044c \u0442\u0435\u043c\u0443"),o.a.createElement(J,{title:"\u0410\u0433\u0435\u043d\u0442 \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438",is_mine:!0,avatar:"https://xelene.ru/road/php/images/avatars/10004.png"},"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e"),o.a.createElement(E.J,{style:{marginTop:10}}),o.a.createElement(E.o,null,o.a.createElement("div",null,o.a.createElement(E.G,{name:"radio",onChange:this.ChangeScheme,value:"1",defaultChecked:1===this.props.account.scheme},"\u0421\u0432\u0435\u0442\u043b\u0430\u044f \u0442\u0435\u043c\u0430"),o.a.createElement(E.G,{name:"radio",onChange:this.ChangeScheme,value:"2",defaultChecked:2===this.props.account.scheme},"\u0422\u0451\u043c\u043d\u0430\u044f \u0442\u0435\u043c\u0430"),o.a.createElement(E.G,{name:"radio",onChange:this.ChangeScheme,value:"0",description:"\u0421\u0435\u0440\u0432\u0438\u0441 \u0431\u0443\u0434\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u0435\u043c\u0443, \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u0443\u044e \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445 \u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435",defaultChecked:0===this.props.account.scheme},"\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438"))))}}]),a}(o.a.Component),jt=a(167),xt=a.n(jt),Ot=a(169),Tt=a.n(Ot),Nt=a(168),Bt=a.n(Nt),Dt=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement(E.z,{id:this.props.id},o.a.createElement(E.A,{left:o.a.createElement(E.B,{onClick:function(){return e.props.this.goBack()}})},"\u041e \u0441\u0435\u0440\u0432\u0438\u0441\u0435"),o.a.createElement(E.E,{icon:o.a.createElement("img",{src:xt.a,alt:"jedi"})},"\u0412\u0435\u0440\u0441\u0438\u044f 2.0"),o.a.createElement(E.J,null),o.a.createElement(E.q,null,o.a.createElement(E.K,{before:o.a.createElement(Bt.a,null),href:"https://vk.com/jedi_road",target:"_blank",rel:"noopener noreferrer"},"\u041e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u043e"),o.a.createElement(E.K,{before:o.a.createElement(Tt.a,null),href:"https://vk.me/jedi_road",target:"_blank",rel:"noopener noreferrer"},"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u043d\u0430\u043c")),o.a.createElement(E.J,null),o.a.createElement(E.n,null,"\u0412\u0441\u0435\u0433\u0434\u0430 \u0432\u0430\u0448\u0430",o.a.createElement("br",null),"\u041a\u043e\u043c\u0430\u043d\u0434\u0430 Jedi"))}}]),a}(o.a.Component),Ht=a(171),Rt=a.n(Ht),zt=a(172),Kt=a.n(zt),qt=a(173),Ft=a.n(qt),Lt=a(170),It=a.n(Lt);function Vt(e,t){var a="foregroundColor";return"bright_light"===t&&(a="#000"),"space_gray"===t&&(a="#fff"),ze.a.createQR("https://vk.com/app7409818#agent_id="+e,{qrSize:120,isShowLogo:!0,foregroundColor:a})}var Jt=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?",activePanel:"profile",activeModal:null,modalHistory:[],popout:n.props.popout,ticket_id:null,history:["profile"],active_other_profile:0,other_profile:null,ban_reason:"",comment:"",transfer:{avatar:"",comment:""},moneys:null,money_transfer_send:null,money_transfer_count:null,AgeUser:0,snackbar:null},n.changeData=n.props.this.changeData,n.playAudio=n.props.this.playAudio,n.ReloadProfile=n.props.reloadProfile,n.ChangeData=n.props.this.changeData,n.setPopout=function(e){n.setState({popout:e})},n.setSnack=function(e){n.setState({snackbar:e})},n.goTiket=function(e){n.setPopout(o.a.createElement(E.H,null)),n.setState({ticket_id:e}),n.goPanel("ticket"),n.setPopout(null)},n.onChange=function(e){var t=e.currentTarget.name,a=e.currentTarget.value;n.setState(Object(h.a)({},t,a))},n.goOtherProfile=function(e){n.setState({active_other_profile:e}),n.goPanel("other_profile")},n.modalBack=function(){n.setActiveModal(n.state.modalHistory[n.state.modalHistory.length-2])},n.goBack=function(){var e=n.state.history;1===e.length?l.a.send("VKWebAppClose",{status:"success"}):e.length>1&&(e.pop(),n.setState({activePanel:e[e.length-1]}),"ticket"===e[e.length-1]?n.changeData("need_epic",!1):n.changeData("need_epic",!0))},n.goPanel=function(e){n.setState({history:[].concat(Object(v.a)(n.state.history),[e]),activePanel:e}),"ticket"===e?n.changeData("need_epic",!1):n.changeData("need_epic",!0)},n.setActiveModal=function(e){e=e||null;var t=n.state.modalHistory?Object(v.a)(n.state.modalHistory):[];null===e?t=[]:-1!==t.indexOf(e)?t=t.splice(0,t.indexOf(e)+1):t.push(e),n.setState({activeModal:e,modalHistory:t})},n.showAlert=function(e,t){n.setState({popout:o.a.createElement(E.c,{actions:[{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",autoclose:!0,mode:"cancel"}],onClose:function(){return n.setPopout(null)}},o.a.createElement("h2",null,e),o.a.createElement("p",null,t))})},n.showErrorAlert=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n.setPopout(o.a.createElement(E.c,{actions:[{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,mode:"cancel"}],onClose:function(){return n.setPopout(null)}},o.a.createElement("h2",null,"\u041e\u0448\u0438\u0431\u043a\u0430"),e?o.a.createElement("p",null,e):o.a.createElement("p",null,"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430!")))},n}return Object(m.a)(a,[{key:"ChangeAge",value:function(e){var t=this;this.setState({popout:o.a.createElement(E.H,null)}),fetch(this.state.api_url+"method=account.setAge&age="+e+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result&&t.setState({popout:null})})).catch((function(e){t.showErrorAlert(e)}))}},{key:"userBan",value:function(e,t){var a=this;this.setPopout(o.a.createElement(E.H,null)),fetch(this.state.api_url+"method=account.ban&agent_id="+e+"&banned=true&reason="+t+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result?(a.setActiveModal(null),a.showAlert("\u0423\u0441\u043f\u0435\u0445","\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0437\u0430\u0431\u0430\u043d\u0435\u043d"),a.setPopout(null)):a.showErrorAlert(e.error.message)})).catch((function(e){a.showErrorAlert(e)}))}},{key:"sendMoney",value:function(){var e=this;fetch(this.state.api_url+"method=transfers.send&summa="+this.state.money_transfer_count+"&send_to="+this.state.money_transfer_send+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?(e.setState({moneys:t.response}),e.setActiveModal("moneys")):e.showErrorAlert(t.error.message)}))}},{key:"render",value:function(){var e=this,t=o.a.createElement(E.y,{activeModal:this.state.activeModal},o.a.createElement(E.w,{id:"settings",onClose:this.modalBack,header:o.a.createElement(E.x,{right:o.a.createElement(E.r,{onClick:this.modalBack},o.a.createElement(pe.a,{style:{color:"var(--placeholder_icon_foreground_primary)"}}))},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438")},o.a.createElement(E.k,{style:{display:"flex"}},o.a.createElement(E.f,{onClick:function(){e.setActiveModal(null),e.getRandomTiket()},stretched:!0,size:"l",before:o.a.createElement(Se.a,null)},"\u0421\u043b\u0443\u0447\u0430\u0439\u043d\u044b\u0439 \u0442\u0438\u043a\u0435\u0442"),o.a.createElement(E.f,{onClick:function(){e.setActiveModal(null),e.props.this.changeData("scheme","bright_light"===e.props.this.state.scheme?"space_gray":"bright_light")},stretched:!0,size:"l",style:{marginLeft:"5%"},before:o.a.createElement(je.a,null)},"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0442\u0435\u043c\u0443"))),o.a.createElement(E.v,{id:"prom",onClose:function(){return e.setActiveModal(null)},icon:o.a.createElement(ge.a,{style:{color:"var(--prom_icon)"},width:72,height:72}),caption:"\u041f\u0440\u043e\u043c\u0435\u0442\u0435\u0439 \u2014 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u044b\u0439 \u0437\u043d\u0430\u0447\u043e\u043a, \u0432\u044b\u0434\u0430\u0432\u0430\u0435\u043c\u044b\u0439 \u0430\u0433\u0435\u043d\u0442\u0430\u043c \u0437\u0430 \u0445\u043e\u0440\u043e\u0448\u0435\u0435 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u043e \u043e\u0442\u0432\u0435\u0442\u043e\u0432.",actions:[{title:"\u041a\u043b\u0430\u0441\u0441!",mode:"secondary",action:function(){e.setActiveModal(null)}}]}),o.a.createElement(E.v,{id:"ban_user",onClose:function(){return e.setActiveModal(null)},icon:o.a.createElement(E.d,{src:this.state.other_profile?this.state.other_profile.avatar.url:null,size:72}),header:"\u0417\u0430\u0431\u0430\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",actions:[{title:"\u0417\u0430\u0431\u0430\u043d\u0438\u0442\u044c! \ud83e\udd2c",mode:"secondary",action:function(){e.userBan(e.state.other_profile?e.state.other_profile.id:0,e.state.ban_reason)}}]},o.a.createElement(E.t,{disabled:!0,value:this.state.other_profile?this.state.other_profile.id<0?-this.state.other_profile.id:this.state.other_profile.id:null}),o.a.createElement("br",null),o.a.createElement(E.t,{maxLength:"100",name:"ban_reason",onChange:function(t){return e.onChange(t)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0440\u0438\u0447\u0438\u043d\u0443 \u0431\u0430\u043d\u0430",value:this.state.ban_reason})),o.a.createElement(E.v,{id:"send",onClose:function(){return e.setActiveModal(null)},icon:o.a.createElement(It.a,null),header:"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0439\u0442\u0435 \u043c\u043e\u043d\u0435\u0442\u043a\u0438 \u0434\u0440\u0443\u0437\u044c\u044f\u043c",actions:[{title:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c",mode:"secondary",disabled:!0,action:function(){e.sendMoney()}}]},o.a.createElement(E.t,{maxLength:"5",onChange:function(t){return e.onChange(t)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 id \u0430\u0433\u0435\u043d\u0442\u0430",name:"money_transfer_send",value:this.state.money_transfer_send}),o.a.createElement("br",null),o.a.createElement(E.t,{maxLength:"5",name:"money_transfer_count",onChange:function(t){return e.onChange(t)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043b-\u0432\u043e \u043c\u043e\u043d\u0435\u0442\u043e\u043a",value:this.state.money_transfer_count})),o.a.createElement(E.v,{id:"moneys",onClose:function(){return e.setActiveModal(null)},icon:o.a.createElement(E.d,{src:this.state.moneys?this.state.moneys.avatar:null,size:72}),header:this.state.moneys?"\u0412\u0430\u0448 \u0431\u0430\u043b\u0430\u043d\u0441: "+this.state.moneys.money:null,caption:this.state.moneys?this.state.moneys.text:null,actions:[{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",mode:"secondary",action:function(){e.setActiveModal(null),e.setState({moneys:null,money_transfer_count:null,money_transfer_send:null})}}]}),o.a.createElement(E.v,{id:"transfer",onClose:function(){return e.setActiveModal(null)},icon:o.a.createElement(E.d,{src:this.state.transfer.avatar,size:72}),header:"\u041f\u0435\u0440\u0435\u0432\u043e\u0434 \u043c\u043e\u043d\u0435\u0442\u043e\u043a",caption:this.state.transfer.comment,actions:[{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",mode:"secondary",action:function(){e.setActiveModal(null)}}]}),o.a.createElement(E.w,{id:"share",onClose:this.modalBack,header:o.a.createElement(E.x,{right:o.a.createElement(E.r,{onClick:this.modalBack},o.a.createElement(pe.a,null))},"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f")},o.a.createElement(E.u,null,o.a.createElement(E.g,{onClick:function(){return e.setActiveModal("qr")},before:o.a.createElement(Rt.a,{width:28,height:28})},"QR-code"),o.a.createElement(E.g,{onClick:function(){l.a.send("VKWebAppShare",{link:"https://vk.com/app7409818#agent_id="+e.props.account.id}),e.setActiveModal(null)},before:o.a.createElement(Kt.a,{width:28,height:28})},"\u0412 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"),o.a.createElement(E.g,{onClick:function(){l.a.send("VKWebAppCopyText",{text:"https://vk.com/app7409818#agent_id="+e.props.account.id}),e.setActiveModal(null)},before:o.a.createElement(Ft.a,{width:28,height:28})},"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443"))),o.a.createElement(E.w,{id:"qr",onClose:this.modalBack,header:o.a.createElement(E.x,{right:o.a.createElement(E.r,{onClick:this.modalBack},o.a.createElement(pe.a,{style:{color:"var(--placeholder_icon_foreground_primary)"}}))},"QR")},o.a.createElement("div",{className:"qr",dangerouslySetInnerHTML:{__html:Vt(this.props.account.id,this.props.this.state.scheme)}}),o.a.createElement("br",null),o.a.createElement("div",{className:"qr"},"\u041e\u0442\u0441\u043a\u0430\u043d\u0438\u0440\u0443\u0439\u0442\u0435 \u043a\u0430\u043c\u0435\u0440\u043e\u0439 \u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435!"),o.a.createElement("br",null)));return o.a.createElement(E.S,{id:this.props.id,activePanel:this.state.activePanel,modal:t,popout:this.state.popout,onSwipeBack:this.goBack},o.a.createElement($e,{id:"profile",this:this,account:this.props.account}),o.a.createElement(Et,{id:"qu",this:this,account:this.props.account}),o.a.createElement(pt,{id:"market",this:this,account:this.props.account}),o.a.createElement(mt,{id:"achievements",this:this,account:this.props.account}),o.a.createElement(Ct,{id:"settings",this:this,account:this.props.account}),o.a.createElement(Mt,{id:"schemechange",this:this,account:this.props.account}),o.a.createElement(Dt,{id:"info",this:this}),o.a.createElement(Y,{id:"ticket",this:this,ticket_id:this.state.ticket_id,account:this.props.account}),o.a.createElement(ue,{id:"other_profile",this:this,agent_id:this.state.active_other_profile,account:this.props.account}))}}]),a}(o.a.Component),Wt=a(175),Qt=a.n(Wt),Ut=a(174),Gt=a.n(Ut),Yt=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),Xt={backgroundColor:"var(--accent)"},Zt=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={account:[],activeStory:"questions",scheme:"bright_light",api_url:"https://xelene.ru/road/php/index.php?",popout:o.a.createElement(E.H,null),snackbar:null,switchKeys:!1,need_epic:!0},n.changeData=function(e,t){n.setState(Object(h.a)({},e,t))},n.LoadProfile=function(){fetch(n.state.api_url+"method=account.get&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){if(e.result&&(n.setState({account:e.response,popout:null,switchKeys:e.response.noti}),0!==Number(n.state.account.scheme))){var t=1===Number(n.state.account.scheme)?"bright_light":"space_gray";n.setState({scheme:t})}})).catch((function(e){n.showErrorAlert(e)}))},n.setPopout=function(e){n.setState({popout:e})},n.playAudio=function(){if(n.audio.paused){n.audio.volume=.1,n.audio.currentTime=0;var e=n.audio.play();void 0!==e&&e.then((function(e){})).catch((function(e){console.info(e)}))}else n.audio.pause();n.setState({paused:n.audio.paused})},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.audio=new Audio(_.a),this.audio.load(),this.audio.loop=!0,l.a.subscribe((function(t){var a=t.detail,n=a.type,o=a.data;"VKWebAppAllowMessagesFromGroupResult"===n&&fetch(e.state.api_url_second+"method=notifications.swift&swift=on&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t&&e.setState({switchKeys:!0})})).catch((function(t){e.showErrorAlert()})),"VKWebAppAllowMessagesFromGroupFailed"===n&&fetch(e.state.api_url_second+"method=notifications.swift&swift=off&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t&&e.setState({switchKeys:!1})})).catch((function(t){e.showErrorAlert()})),"VKWebAppViewHide"===n&&console.log("closing..."),"VKWebAppUpdateConfig"===n&&e.setState({scheme:o.scheme})})),window.addEventListener("popstate",(function(t){return t.preventDefault()&e.goBack(t)})),fetch(this.state.api_url+"method=account.get&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){if(t.result){if(e.setState({account:t.response,popout:null,switchKeys:t.response.noti}),0!==Number(e.state.account.scheme)){var a=1===Number(e.state.account.scheme)?"bright_light":"space_gray";e.setState({scheme:a})}}else e.setState({popout:o.a.createElement(E.c,{actions:[{title:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c",autoclose:!0,action:function(){return e.componentDidMount()}}],onClose:function(){e.closePopout(),e.componentDidMount()}},o.a.createElement("h2",null,"\u041e\u0448\u0438\u0431\u043a\u0430"),o.a.createElement("p",null,t.error.message))})})).catch((function(t){e.showErrorAlert(t)}))}},{key:"showAlert",value:function(e,t){this.setState({popout:o.a.createElement(E.c,{actions:[{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",autoclose:!0,style:"cancel"}],onClose:this.setPopout(null)},o.a.createElement("h2",null,e),o.a.createElement("p",null,t))})}},{key:"deleteStats",value:function(){var e=this;this.setState({popout:o.a.createElement(E.H,null)}),fetch(this.state.api_url+"method=delete.stats&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.response?(e.setState({snackbar:o.a.createElement(E.M,{layout:"vertical",onClose:function(){return e.setState({snackbar:null})},before:o.a.createElement(E.d,{size:24,style:Xt},o.a.createElement(st.a,{fill:"#fff",width:14,height:14}))},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u0440\u043e\u0444\u0438\u043b\u044f \u0441\u0431\u0440\u043e\u0448\u0435\u043d\u0430"),popout:null}),e.LoadProfile(),window.history.back()):e.showAlert("\u041e\u0448\u0438\u0431\u043a\u0430",t.error_text)})).catch((function(t){e.showErrorAlert()}))}},{key:"showErrorAlert",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.setPopout(o.a.createElement(E.c,{actions:[{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,mode:"cancel"}],onClose:function(){return e.setPopout(null)}},o.a.createElement("h2",null,"\u041e\u0448\u0438\u0431\u043a\u0430"),t?o.a.createElement("p",null,t):o.a.createElement("p",null,"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430!")))}},{key:"render",value:function(){var e=this;return o.a.createElement(E.i,{isWebView:Yt,scheme:this.state.scheme},o.a.createElement(E.l,{activeStory:this.state.activeStory,tabbar:this.state.need_epic&&o.a.createElement(E.N,null,o.a.createElement(E.O,{onClick:function(t){e.setState({activeStory:t.currentTarget.dataset.story})},selected:"questions"===this.state.activeStory,"data-story":"questions",text:"\u0412\u043e\u043f\u0440\u043e\u0441\u044b"},o.a.createElement(Gt.a,null)),o.a.createElement(E.O,{onClick:function(t){e.setState({activeStory:t.currentTarget.dataset.story})},selected:"top"===this.state.activeStory,"data-story":"top",text:"\u0422\u043e\u043f"},o.a.createElement(de.a,null)),o.a.createElement(E.O,{onClick:function(t){e.setState({activeStory:t.currentTarget.dataset.story})},selected:"profile"===this.state.activeStory,"data-story":"profile",text:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"},o.a.createElement(Qt.a,null)))},o.a.createElement(Ae,{id:"questions",this:this,reloadProfile:this.LoadProfile,account:this.state.account,popout:this.state.popout}),o.a.createElement(xe,{id:"top",this:this,account:this.state.account,popout:this.state.popout}),o.a.createElement(He,{id:"notif",this:this,reloadProfile:this.LoadProfile,account:this.state.account,popout:this.state.popout}),o.a.createElement(Jt,{id:"profile",this:this,reloadProfile:this.LoadProfile,account:this.state.account,popout:this.state.popout})))}}]),a}(o.a.Component),$t=a(176),ea=a.n($t);c.a({dsn:"https://0045161b140249dcbc378fe70d966605@o461731.ingest.sentry.io/5465956",integrations:[new u.a.BrowserTracing],tracesSampleRate:1}),l.a.send("VKWebAppInit",{});var ta=document.getElementById("root");Object(E.T)()===E.s&&ea()(ta),i.a.render(o.a.createElement(Zt,null),ta)},56:function(e,t,a){}},[[212,1,2]]]);
//# sourceMappingURL=main.6864b3bc.chunk.js.map