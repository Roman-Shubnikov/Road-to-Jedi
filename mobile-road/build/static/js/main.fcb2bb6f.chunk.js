(this["webpackJsonpmobile-road"]=this["webpackJsonpmobile-road"]||[]).push([[0],{123:function(e,t,a){e.exports=a.p+"static/media/Soloriver.57a77e9b.mp3"},138:function(e,t,a){e.exports=a.p+"static/media/question_banner_pc.b2b8189b.jpg"},139:function(e,t,a){e.exports=a.p+"static/media/question_banner_mobile.14c5ae38.png"},141:function(e,t,a){e.exports=a.p+"static/media/Ninja.0c4d240d.webp"},168:function(e,t,a){e.exports=a.p+"static/media/user.cfc7e0b1.jpg"},169:function(e,t,a){e.exports=a.p+"static/media/schemeagent.e2c15877.jpg"},170:function(e,t,a){e.exports=a.p+"static/media/jedi.7c18eb66.svg"},173:function(e,t,a){e.exports=a.p+"static/media/verfload.76160308.svg"},177:function(e,t,a){e.exports=a.p+"static/media/start_slide_1.6a49b893.svg"},178:function(e,t,a){e.exports=a.p+"static/media/start_slide_2.fb768ec2.svg"},213:function(e,t,a){e.exports=a(272)},272:function(e,t,a){"use strict";a.r(t);a(214),a(242),a(244),a(245),a(247);var n=a(0),o=a.n(n),r=a(122),s=a.n(r),i=a(16),l=a.n(i),c=a(276),u=a(184),h=a(27),p=a(12),m=a(13),d=a(15),f=a(14),g=a(123),_=a.n(g),E=a(1),v=(a(48),a(49),a(39)),k=a(137),w=a.n(k),b=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?",title_new_tiket:"",text_new_tiket:""},n.onChange=function(e){var t=e.currentTarget.name,a=e.currentTarget.value;n.setState(Object(h.a)({},t,a))},n}return Object(m.a)(a,[{key:"sendNewTiket",value:function(){var e=this;this.setState({popout:o.a.createElement(E.L,null)});var t=this;if(this.state.text_new_tiket.length>5||this.state.title_new_tiket.length>5){var a=this.state.api_url+"method=ticket.add&"+window.location.search.replace("?",""),n=new XMLHttpRequest;n.open("POST",a,!0),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.onreadystatechange=function(){var e=this;if(n.readyState===XMLHttpRequest.DONE&&200===n.status&&n.responseText){var a=JSON.parse(n.responseText);t.props.this.goTiket(a.response.ticket_id),fetch(t.state.api_url+"method=tickets.get&unanswered=1&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(a){a.result?t.setState({tiket_all:a.response,popout:null,title_new_tiket:"",text_new_tiket:""}):e.showErrorAlert(a.error.message)})).catch((function(t){e.showErrorAlert()}))}},n.send("title="+this.state.title_new_tiket+"&text="+this.state.text_new_tiket),n.onerror=function(t){e.showErrorAlert(),console.error(t)}}else this.setState({popout:o.a.createElement(E.d,{actions:[{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,style:"cancel"}],onClose:this.closePopout},o.a.createElement("h2",null,"\u041e\u0448\u0438\u0431\u043a\u0430"),o.a.createElement("p",null,"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u0438\u043b\u0438 \u0442\u0435\u043a\u0441\u0442 \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u0431\u043e\u043b\u044c\u0448\u0435 5 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432."))})}},{key:"render",value:function(){var e=this;return o.a.createElement(E.D,{id:this.props.id},o.a.createElement(E.E,{left:o.a.createElement(E.G,{onClick:function(){return window.history.back()}},o.a.createElement(w.a,null))},"\u041d\u043e\u0432\u044b\u0439 \u0432\u043e\u043f\u0440\u043e\u0441"),o.a.createElement(E.q,null,o.a.createElement(E.w,{top:null===this.state.title_new_tiket?"\u0421\u0443\u0442\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b (0/30). \u041d\u0435 \u043c\u0435\u043d\u0435\u0435 5 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432":"\u0421\u0443\u0442\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b ("+this.state.title_new_tiket.length+"/80). \u041d\u0435 \u043c\u0435\u043d\u0435\u0435 5 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432",maxLength:"80",type:"text",name:"title_new_tiket",value:this.state.title_new_tiket,onChange:function(t){return e.onChange(t)}}),o.a.createElement(E.W,{maxLength:"2020",name:"text_new_tiket",top:null===this.state.text_new_tiket?"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u043e \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0435 (0/2020). \u041d\u0435 \u043c\u0435\u043d\u0435\u0435 5 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432":"\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435 \u043e \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u0435 ("+this.state.text_new_tiket.length+"/2020). \u041d\u0435 \u043c\u0435\u043d\u0435\u0435 5 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432",onChange:function(t){return e.onChange(t)},value:this.state.text_new_tiket}),o.a.createElement(E.g,{size:"xl",level:"secondary",stretched:!0,disabled:!Boolean(this.state.text_new_tiket.length>5)||!Boolean(this.state.title_new_tiket.length>5),onClick:function(){e.sendNewTiket()}},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")))}}]),a}(o.a.Component),y=a(51),A=a(69),C=a.n(A),P=a(140),S=a.n(P),j=a(67),O=a.n(j),M=a(138),x=a.n(M),F=a(139),N=a.n(F),T=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),D=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?",fething:!1,offset:0,ShowBanner:!0};var o=n.props.this;return n.setPopout=o.setPopout,n.showErrorAlert=o.showErrorAlert,n.setActiveModal=o.setActiveModal,n.Prepare_questions=n.Prepare_questions.bind(Object(y.a)(n)),n}return Object(m.a)(a,[{key:"Prepare_questions",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a&&this.setPopout(o.a.createElement(E.L,null)),this.props.this.getQuestions(t),setTimeout((function(){e.setState({fetching:!1}),a&&e.setPopout(null)}),500)}},{key:"componentDidMount",value:function(){this.setPopout(null)}},{key:"render",value:function(){var e=this,t=this.props.this;return o.a.createElement(E.D,{id:this.props.id},o.a.createElement(E.E,{left:o.a.createElement(o.a.Fragment,null,o.a.createElement(E.G,{onClick:function(){return e.props.this.getRandomTiket()}},o.a.createElement(S.a,null)))},"\u0412\u043e\u043f\u0440\u043e\u0441\u044b"),this.state.ShowBanner&&this.props.first_start?o.a.createElement(o.a.Fragment,null,o.a.createElement(E.f,{mode:"image",size:"m",onDismiss:function(){e.setState({ShowBanner:!1})},header:"\u0421 \u0447\u0435\u0433\u043e \u043d\u0430\u0447\u0430\u0442\u044c?",subheader:"\u0421 \u043f\u0440\u043e\u0447\u0442\u0435\u043d\u0438\u044f \u0441\u0442\u0430\u0442\u044c\u0438",background:o.a.createElement("div",{style:{backgroundColor:"#5b9be6",backgroundImage:T?"url("+N.a+")":"url("+x.a+")",backgroundPosition:"right bottom",backgroundSize:"100%",backgroundRepeat:"no-repeat"}}),asideMode:"dismiss",actions:o.a.createElement(E.g,{mode:"overlay_primary",href:"https://vk.com/@jedi_road-checking-responses",target:"_blank",rel:"noopener noreferrer",size:"l"},"\u0427\u0438\u0442\u0430\u0442\u044c")}),o.a.createElement(E.N,null)):null,this.props.account.special?o.a.createElement(E.m,null,o.a.createElement(E.g,{onClick:function(){return t.goPanel("new_ticket")},size:"xl",mode:"outline",stretched:!0},"\u041d\u043e\u0432\u044b\u0439 \u0432\u043e\u043f\u0440\u043e\u0441")):null,o.a.createElement(E.J,{onRefresh:function(){e.setState({fetching:!0}),e.Prepare_questions()},isFetching:this.state.fetching},this.props.tiket_all?this.props.tiket_all.length>0?this.props.tiket_all.map((function(a,n){return o.a.createElement(o.a.Fragment,{key:n},o.a.createElement(E.h,{className:"pointer",onClick:function(){e.setState({tiket_all:null}),t.goTiket(a.id)},description:0===a.status?"\u041d\u0430 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u0438\u0438":1===a.status?"\u0415\u0441\u0442\u044c \u043e\u0442\u0432\u0435\u0442":"\u0417\u0430\u043a\u0440\u044b\u0442",asideContent:o.a.createElement(E.e,{src:526444378===a.author.id?"https://cdn3.iconfinder.com/data/icons/avatars-15/64/_Ninja-2-512.png":a.author.photo_200,size:56})},a.title),o.a.createElement(E.N,{style:{width:"90%"}}))})):o.a.createElement(E.I,{icon:o.a.createElement(C.a,null)},"\u0423\u043f\u0441, \u043a\u0430\u0436\u0435\u0442\u0441\u044f \u0432\u043e\u043f\u0440\u043e\u0441\u044b \u0437\u0430\u043a\u043e\u043d\u0447\u0438\u043b\u0438\u0441\u044c"):o.a.createElement(E.H,null),this.props.tiket_all_helper?20===this.props.tiket_all_helper.length?o.a.createElement(E.m,null,o.a.createElement(E.g,{size:"xl",level:"secondary",before:this.state.fetching?o.a.createElement(O.a,{width:28,height:28,className:"Spinner__self"}):null,onClick:function(){e.setState({fetching:!0}),e.Prepare_questions(!0)}},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0435\u0449\u0451")):this.props.tiket_all?0===this.props.tiket_all.length?null:o.a.createElement(E.p,null,this.props.tiket_all.length," \u0432\u043e\u043f\u0440\u043e\u0441(\u0430) \u0432\u0441\u0435\u0433\u043e"):null:null))}}]),a}(o.a.Component),L=a(143),B=a.n(L),R=a(93),z=a.n(R),V=a(141),H=a.n(V),q=a(60),I=a(44),W=a.n(I),K=a(142),Q=a.n(K),U=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),G=function(e){return!0===e.is_mine?o.a.createElement("div",{className:"mine_message"},o.a.createElement("div",{className:"message_report_moderator",style:{marginBottom:e.approved?"20px":null,right:U?"-12%":"-22%"}},o.a.createElement("div",{className:e.clickable?"pointer animation":"",onClick:function(){return e.onClick()}},o.a.createElement("p",{className:"moderator_name_message"},e.title),o.a.createElement("p",{className:"text_message"},o.a.createElement(q.a,{target:"_blank",rel:"noreferrer noopener"},e.children))),1===e.is_mark?o.a.createElement("div",{className:"approved animation pointer",onClick:function(){return e.DoneApp()}},o.a.createElement(W.a,{className:"approved_icon green",height:15,width:15,style:{display:"inline-block"}})):0===e.is_mark?o.a.createElement("div",{className:"approved animation pointer",onClick:function(){return e.CanselApp()}},o.a.createElement(Q.a,{className:"approved_icon",height:15,width:15,style:{display:"inline-block"}})):null,o.a.createElement("img",{className:"avatar_message_moderator",src:e.avatar,alt:"\u0430va",style:{marginLeft:"99%"}}),o.a.createElement("p",{className:"time_message"},e.time))):o.a.createElement("div",{className:"all_message",style:!1===e.is_mark?{marginBottom:"-3px"}:null},o.a.createElement("img",{className:"avatar_message",src:e.avatar,alt:"\u0430"}),o.a.createElement("div",{className:e.clickable?"pointer message_report animation":"message_report",onClick:function(){return e.onClick()}},o.a.createElement("p",{className:"moderator_name_message"},e.title),o.a.createElement("p",null,o.a.createElement(q.a,{target:"_blank",rel:"noreferrer noopener"},e.children)),o.a.createElement("p",{className:"time_message"},e.time)))},J=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),X=a(121).parse(window.location.search.replace("?","")),Y=["\u044f\u043d\u0432\u0430\u0440\u044f","\u0444\u0435\u0432\u0440\u0430\u043b\u044f","\u043c\u0430\u0440\u0442\u0430","\u0430\u043f\u0440\u0435\u043b\u044f","\u043c\u0430\u044f","\u0438\u044e\u043d\u044f","\u0438\u044e\u043b\u044f","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u043d\u043e\u044f\u0431\u0440\u044f","\u0434\u0435\u043a\u0430\u0431\u0440\u044f"];function Z(e){return e<10?"0"+e:e}var $=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?",tiket_info:null,tiket_message:[],tiket_send_message:"",add_comment:!1,redaction:!1};var o=n.props.this;return n.setPopout=o.setPopout,n.showErrorAlert=o.showErrorAlert,n.setActiveModal=o.setActiveModal,n.goOtherProfile=o.goOtherProfile,n.sendRayt=n.sendRayt.bind(Object(y.a)(n)),n.onChange=function(e){var t=e.currentTarget.name,a=e.currentTarget.value;n.setState(Object(h.a)({},t,a))},n.setSnack=function(e){n.setState({snackbar:e})},n}return Object(m.a)(a,[{key:"Prepare_ticket",value:function(){var e=this;fetch(this.state.api_url+"method=ticket.getById&ticket_id="+this.props.ticket_id+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?(e.setState({tiket_info:t.response.info,tiket_message:t.response.messages}),e.setPopout(null)):e.showErrorAlert(t.error.message,(function(){return window.history.back()}))})).catch((function(t){e.showErrorAlert(t,(function(){return window.history.back()}))}))}},{key:"sendRayt",value:function(e,t){var a=this,n=1;(n=!0===e?1:0)<2&&fetch(this.state.api_url+"method=ticket.markMessage&message_id="+t+"&mark="+n+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result?fetch(a.state.api_url+"method=ticket.getMessages&ticket_id="+a.state.tiket_info.id+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result?(a.setState({tiket_message:e.response}),a.setActiveModal(null),a.setPopout(null)):a.showErrorAlert(e.error.message)})).catch((function(e){a.showErrorAlert(e)})):a.showErrorAlert(e.error.message)})).catch((function(e){a.showErrorAlert(e)}))}},{key:"sendClear",value:function(e){var t=this;this.setPopout(o.a.createElement(E.L,null)),fetch(this.state.api_url+"method=ticket.approveReply&message_id="+e+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result?(t.setPopout(null),fetch(t.state.api_url+"method=ticket.getMessages&ticket_id="+t.state.tiket_info.id+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result?(t.setState({tiket_message:e.response,tiket_send_message:"",add_comment:!1,redaction:!1}),t.setPopout(null)):t.showErrorAlert(e.error.message)})).catch((function(e){t.showErrorAlert(e)}))):t.showErrorAlert(e.error.message)})).catch((function(e){t.showErrorAlert(e)}))}},{key:"Admin",value:function(e,t,a,n,r){var s=this,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:-1;a>0?this.props.this.setPopout(o.a.createElement(E.b,{onClose:function(){return s.setPopout(null)}},a>0?o.a.createElement(E.c,{autoclose:!0,onClick:function(){s.setState({tiket_message:[]}),s.goOtherProfile(a)}},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"):null,this.props.account.special&&0!==l&&1!==l&&a>0?o.a.createElement(E.c,{autoclose:!0,onClick:function(){return s.sendRayt(!0,t)}},"\u041e\u0446\u0435\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e"):null,this.props.account.special&&0!==l&&1!==l&&a>0?o.a.createElement(E.c,{autoclose:!0,onClick:function(){return s.sendRayt(!1,t)}},"\u041e\u0446\u0435\u043d\u0438\u0442\u044c \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u043e"):null,!0===this.props.account.special&&a>0&&!e?o.a.createElement(E.c,{autoclose:!0,onClick:function(){return s.sendClear(t)}},"\u041e\u0434\u043e\u0431\u0440\u0438\u0442\u044c"):null,!0!==this.props.account.special||null!==r&&void 0!==r?null:o.a.createElement(E.c,{autoclose:!0,onClick:function(){return s.setState({add_comment:!0,message_id_add:t})}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"),Number(a===this.props.account.id)?o.a.createElement(E.c,{autoclose:!0,onClick:function(){return s.setState({redaction:!0,message_id_redac:t,tiket_send_message:n})}},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"):null,null===r||void 0===r?null:o.a.createElement(E.c,{autoclose:!0,onClick:function(){s.props.this.setState({comment:r}),s.setActiveModal("comment")}},"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"),Number(a)===Number(this.props.account.id)||!0===this.props.account.special?o.a.createElement(E.c,{autoclose:!0,onClick:function(){return s.deleteMessage(t)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"):null,o.a.createElement(E.c,{autoclose:!0,mode:"cancel"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"))):this.props.account.special?this.props.this.setPopout(o.a.createElement(E.b,{onClose:function(){return s.setPopout(null)}},this.props.account.special?o.a.createElement(E.c,{autoclose:!0,onClick:function(){s.props.this.setState({other_profile:{id:a,avatar:{url:i}}}),s.setActiveModal("ban_user")}},"\u0417\u0430\u0431\u0430\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"):null,Number(a===this.props.account.id)?o.a.createElement(E.c,{autoclose:!0,onClick:function(){return s.setState({redaction:!0,message_id_redac:t,tiket_send_message:n})}},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"):null,o.a.createElement(E.c,{autoclose:!0,mode:"cancel"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"))):Number(a===this.props.account.id)&&this.props.this.setPopout(o.a.createElement(E.b,{onClose:function(){return s.setPopout(null)}},Number(a===this.props.account.id)?o.a.createElement(E.c,{autoclose:!0,onClick:function(){return s.setState({redaction:!0,message_id_redac:t,tiket_send_message:n})}},"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c"):null,o.a.createElement(E.c,{autoclose:!0,mode:"cancel"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c")))}},{key:"copy",value:function(e){var t=this;this.props.this.setPopout(o.a.createElement(E.b,{onClose:function(){return t.setPopout(null)}},Number(this.state.tiket_info.author.id)===Number(X.vk_user_id)||!0===this.props.account.special?0===this.state.tiket_info.status||1===this.state.tiket_info.status?o.a.createElement(E.c,{autoclose:!0,onClick:function(){return t.deleteTicket()}},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u0442\u0438\u043a\u0435\u0442"):o.a.createElement(E.c,{autoclose:!0,onClick:function(){return t.openTicket()}},"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u0442\u0438\u043a\u0435\u0442"):null,o.a.createElement(E.c,{autoclose:!0,onClick:function(){return l.a.send("VKWebAppCopyText",{text:"https://vk.com/app7409818#ticket_id="+e})}},"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443"),o.a.createElement(E.c,{autoclose:!0,mode:"cancel"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c")))}},{key:"clickable_user_message",value:function(e){console.log(e);var t=!0;return e<0&&(this.props.account.special||Boolean(Number(e===this.props.account.id))||(t=!1)),t}},{key:"sendNewMessage",value:function(){var e=this;if(this.state.tiket_send_message.length>=5){this.setPopout(o.a.createElement(E.L,null));var t=this.state.api_url+"method=ticket.sendMessage&"+window.location.search.replace("?",""),a=new XMLHttpRequest;a.open("POST",t,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.onreadystatechange=function(){4!==a.status&&200===a.status&&setTimeout((function(){fetch(e.state.api_url+"method=ticket.getMessages&ticket_id="+e.state.tiket_info.id+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?(e.setState({tiket_message:t.response,tiket_send_message:"",add_comment:!1,redaction:!1}),e.setPopout(null),setTimeout((function(){e.setState({tiket_send_message:"."})}),1e3),setTimeout((function(){e.setState({tiket_send_message:""})}),1e3)):e.showErrorAlert(t.error.message)})).catch((function(t){e.showErrorAlert(t)}))}),500)},a.send("ticket_id="+this.state.tiket_info.id+"&text="+encodeURIComponent(this.state.tiket_send_message.trim())),a.onerror=function(t){e.showErrorAlert(t)}}}},{key:"deleteMessage",value:function(e){var t=this;this.setPopout(o.a.createElement(E.L,null)),fetch(this.state.api_url+"method=ticket.deleteMessage&message_id="+e+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result?fetch(t.state.api_url+"method=ticket.getMessages&ticket_id="+t.state.tiket_info.id+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result?(t.setState({tiket_message:e.response}),t.setPopout(null)):t.showErrorAlert(e.error.message)})).catch((function(e){t.showErrorAlert(e)})):t.showErrorAlert(e.error.message)})).catch((function(e){t.showErrorAlert(e)}))}},{key:"deleteTicket",value:function(){var e=this;this.setPopout(o.a.createElement(E.L,null)),fetch(this.state.api_url+"method=ticket.close&ticket_id="+this.state.tiket_info.id+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?fetch(e.state.api_url+"method=ticket.getById&ticket_id="+e.state.tiket_info.id+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?(e.setState({tiket_info:t.response.info}),e.setPopout(null)):e.showErrorAlert(t.error.message)})).catch((function(t){e.showErrorAlert(t)})):e.showErrorAlert(t.error.message)})).catch((function(t){e.showErrorAlert(t)}))}},{key:"openTicket",value:function(){var e=this;this.setPopout(o.a.createElement(E.L,null)),fetch(this.state.api_url+"method=ticket.open&ticket_id="+this.state.tiket_info.id+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?fetch(e.state.api_url+"method=ticket.getById&ticket_id="+e.state.tiket_info.id+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?(e.setState({tiket_info:t.response.info}),e.setPopout(null)):e.showErrorAlert(t.error.message)})).catch((function(t){e.showErrorAlert(t)})):e.showErrorAlert(t.error.message)})).catch((function(t){e.showErrorAlert(t)}))}},{key:"sendNewMessageRedact",value:function(){var e=this;if(this.setPopout(o.a.createElement(E.L,null)),this.state.tiket_send_message.length>=5){var t=this.state.api_url+"method=ticket.editMessage&"+window.location.search.replace("?",""),a=new XMLHttpRequest;a.open("POST",t,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.onreadystatechange=function(){4!==a.status&&200===a.status&&fetch(e.state.api_url+"method=ticket.getMessages&ticket_id="+e.state.tiket_info.id+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?(e.setState({tiket_message:t.response,tiket_send_message:" ",add_comment:!1,redaction:!1}),e.setPopout(null),e.setState({tiket_send_message:""})):e.showErrorAlert(t.error.message)})).catch((function(e){console.log(e)}))},a.send("message_id="+this.state.message_id_redac+"&text="+encodeURIComponent(this.state.tiket_send_message.trim())),a.onerror=function(t){e.showErrorAlert(t)}}else this.showErrorAlert("\u0422\u0435\u043a\u0441\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u0438\u0437 5 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432.")}},{key:"sendNewMessageComment",value:function(){var e=this;if(this.setPopout(o.a.createElement(E.L,null)),this.state.tiket_send_message.length>=5){var t=this.state.api_url+"method=ticket.commentMessage&"+window.location.search.replace("?",""),a=new XMLHttpRequest;a.open("POST",t,!0),a.setRequestHeader("Content-type","application/x-www-form-urlencoded"),a.onreadystatechange=function(){4!==a.status&&200===a.status&&fetch(e.state.api_url+"method=ticket.getMessages&ticket_id="+e.state.tiket_info.id+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?(e.setState({tiket_message:t.response,tiket_send_message:" ",add_comment:!1,redaction:!1}),e.setPopout(null),e.setState({tiket_send_message:""})):e.showErrorAlert(t.error.message)})).catch((function(t){e.showErrorAlert(t)}))},a.send("message_id="+this.state.message_id_add+"&text="+encodeURIComponent(this.state.tiket_send_message.trim())),a.onerror=function(t){e.showErrorAlert(t)}}else this.showErrorAlert("\u0422\u0435\u043a\u0441\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043c\u0438\u043d\u0438\u043c\u0443\u043c \u0438\u0437 5 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432.")}},{key:"componentDidMount",value:function(){this.setPopout(o.a.createElement(E.L,null)),this.Prepare_ticket()}},{key:"nofinc",value:function(){return 1}},{key:"render",value:function(){var e=this,t=this.props,a=this;return o.a.createElement(E.D,{id:this.props.id},o.a.createElement(E.E,{left:o.a.createElement(E.F,{onClick:function(){return window.history.back()}})},this.state.tiket_info?o.a.createElement("span",{id:"animation",className:"pointer",onClick:function(){return e.copy(e.state.tiket_info.id)}},"\u0412\u043e\u043f\u0440\u043e\u0441 #",this.state.tiket_info.id):null),this.state.tiket_info?o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"title_tiket"},new Date(1e3*this.state.tiket_info.time).getDate()," ",function(e){var t=new Date(1e3*e).getMonth();return Y[t-1]}(this.state.tiket_info.time)),o.a.createElement("div",{className:"title_tiket",style:{marginTop:"10px",width:"95%",marginLeft:"10px"}},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043e\u0431\u0440\u0430\u0442\u0438\u043b\u0441\u044f \u0441 \u0432\u043e\u043f\u0440\u043e\u0441\u043e\u043c  \xab",this.state.tiket_info.title,"\xbb"),o.a.createElement(o.a.Fragment,null,this.state.tiket_message?this.state.tiket_message.map((function(e,n){var r=Number(a.state.tiket_info.author.id)===Number(X.vk_user_id),s=Number(e.author.id)===Number(X.vk_user_id),i=e.author.is_moderator?e.author.avatar.url:e.author.photo_200,l=Z(new Date(1e3*e.time).getHours())+":"+Z(new Date(1e3*e.time).getMinutes()),c=isFinite(e.nickname)?"\u0410\u0433\u0435\u043d\u0442 \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438 #".concat(e.nickname):e.nickname?e.nickname:"\u0410\u0433\u0435\u043d\u0442 \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438 #".concat(e.author.id);return Number(a.state.tiket_info.author.id)===Number(X.vk_user_id)?o.a.createElement(G,{clickable:!0,title:526444378===e.author.id?"\u0412\u0438\u0442\u0451\u043a":e.author.is_moderator?c:e.author.first_name+" "+e.author.last_name,title_icon:void 0!==e.moderator_comment&&o.a.createElement(z.a,{width:10,height:10,style:{display:"inline-block"}}),is_mine:s===r,avatar:i,onClick:function(){return a.Admin(e.approved,e.id,e.author.first_name?-e.author.id:e.author.id,e.text,void 0!==e.moderator_comment?e.moderator_comment.text:null,i,e.mark)},key:n,is_special:a.props.account.special,is_mark:e.mark,time:l,sendRayt_false:function(){return a.sendRayt(!1,e.id)},sendRayt_true:function(){return a.sendRayt(!0,e.id)},approved:!!e.approved,CanselApp:function(){return t.this.showAlert("\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f","\u042d\u0442\u043e\u0442 \u043e\u0442\u0432\u0435\u0442 \u043e\u0446\u0435\u043d\u0435\u043d \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u043e")},DoneApp:function(){return t.this.showAlert("\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f","\u042d\u0442\u043e\u0442 \u043e\u0442\u0432\u0435\u0442 \u043e\u0446\u0435\u043d\u0435\u043d \u043f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e")}},e.text):o.a.createElement(G,{clickable:!!a.props.account.special,title:526444378===e.author.id?"\u0412\u0438\u0442\u0451\u043a":e.author.is_moderator?c:e.author.first_name+" "+e.author.last_name,title_icon:void 0!==e.moderator_comment&&o.a.createElement(z.a,{width:10,height:10,style:{display:"inline-block"}}),is_mine:e.author.is_moderator,avatar:526444378===e.author.id?H.a:i,key:n,time:l,onClick:function(){return a.Admin(e.approved,e.id,e.author.first_name?-e.author.id:e.author.id,e.text,void 0!==e.moderator_comment?e.moderator_comment.text:null,i,e.mark)},is_special:a.props.account.special,is_mark:e.mark,sendRayt_false:function(){return a.sendRayt(!1,e.id)},sendRayt_true:function(){return a.sendRayt(!0,e.id)},approved:!!e.approved,CanselApp:function(){return t.this.showAlert("\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f","\u042d\u0442\u043e\u0442 \u043e\u0442\u0432\u0435\u0442 \u043e\u0446\u0435\u043d\u0435\u043d \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u043e")},DoneApp:function(){return t.this.showAlert("\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f","\u042d\u0442\u043e\u0442 \u043e\u0442\u0432\u0435\u0442 \u043e\u0446\u0435\u043d\u0435\u043d \u043f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e")}},e.text)})):null,1!==this.state.tiket_info.status&&2!==this.state.tiket_info.status?o.a.createElement("div",{style:{marginBottom:"20vh"}}):o.a.createElement("div",{style:{marginBottom:"5vh"}})),0===this.state.tiket_info.status||!0===this.state.redaction||!0===this.state.add_comment?o.a.createElement(E.o,{vertical:"bottom"},o.a.createElement(E.m,{className:"message_sending"},o.a.createElement(E.W,{maxLength:"2020",value:this.state.tiket_send_message,grow:!1,name:"tiket_send_message",onChange:function(t){return e.onChange(t)},placeholder:this.state.add_comment?"\u0412\u0430\u0448 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439...":"\u0412\u0430\u0448\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435...",style:{width:J?"82%":"85%"}}),o.a.createElement("div",{className:this.state.tiket_send_message.trim().length>5?"send_text pointer animation":"send_text",onClick:function(){e.state.tiket_send_message.trim().length>5?!0!==e.state.redaction&&!0!==e.state.add_comment?e.sendNewMessage():e.state.redaction?e.sendNewMessageRedact():e.sendNewMessageComment():e.nofinc()},style:{background:this.state.tiket_send_message.trim().length>5?"var(--button_send)":"#98A0AD"}},o.a.createElement(B.a,{width:30,height:30})))):null,1===this.state.tiket_info.status&&Number(this.state.tiket_info.author.id)===Number(X.vk_user_id)?o.a.createElement("div",null,o.a.createElement(E.o,{vertical:"bottom"},o.a.createElement(E.m,{style:{display:"flex"}},o.a.createElement(E.g,{size:"l",style:{marginRight:"5%"},stretched:!0,onClick:function(){return e.deleteTicket()}},"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u0440\u0435\u0448\u0435\u043d\u0430"),o.a.createElement(E.g,{size:"l",stretched:!0,mode:"secondary",onClick:function(){return e.openTicket()}},"\u041f\u0440\u043e\u0431\u043b\u0435\u043c\u0430 \u043d\u0435 \u0440\u0435\u0448\u0435\u043d\u0430")))):null):null)}}]),a}(o.a.Component),ee=a(144),te=a.n(ee),ae=a(146),ne=a.n(ae),oe=a(145),re=a.n(oe),se=a(70),ie=a.n(se),le=a(54),ce=a.n(le),ue=a(53),he=a.n(ue);function pe(e){return e<10?"0"+e:e}var me=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?",other_profile:null};var o=n.props.this;return n.setPopout=o.setPopout,n.showErrorAlert=o.showErrorAlert,n.setActiveModal=o.setActiveModal,n}return Object(m.a)(a,[{key:"PrepareProfile",value:function(){var e=this;fetch(this.state.api_url+"method=user.getById&id="+this.props.agent_id+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?(e.setState({other_profile:t.response}),e.setPopout(null)):e.showErrorAlert(t.error.message,(function(){window.history.back(),e.props.this.setPopout(null)}))})).catch((function(t){e.showErrorAlert(t,(function(){return window.history.back()}))}))}},{key:"Prom",value:function(e){var t=this,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setState({popout:o.a.createElement(E.L,null)}),fetch(this.state.api_url+"method=account.Flash&agent_id="+e+"&give="+Number(a)+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){if(e.result){var n=t.state.other_profile;n.flash=!!a,t.setState({other_profile:n})}else t.showErrorAlert(e.error.message)})).catch((function(e){t.showErrorAlert(e)}))}},{key:"copy",value:function(e,t){var a=this;this.setPopout(o.a.createElement(E.b,{onClose:function(){return a.setPopout(null)}},this.props.account.special?o.a.createElement(E.c,{autoclose:!0,onClick:t?function(){return a.Prom(e,!1)}:function(){return a.Prom(e)}},t?"\u0417\u0430\u0431\u0440\u0430\u0442\u044c \u043f\u0440\u043e\u043c\u0435\u0442\u0435\u0439":"\u0412\u044b\u0434\u0430\u0442\u044c \u043f\u0440\u043e\u043c\u0435\u0442\u0435\u0439"):null,this.props.account.special?o.a.createElement(E.c,{autoclose:!0,onClick:function(){a.props.this.setState({other_profile:a.state.other_profile}),a.setActiveModal("ban_user")}},"\u0417\u0430\u0431\u043b\u043e\u043a\u0438\u0440\u043e\u0432\u0430\u0442\u044c"):null,o.a.createElement(E.c,{autoclose:!0,onClick:function(){l.a.send("VKWebAppCopyText",{text:"https://vk.com/app7409818#agent_id="+e})}},"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443"),o.a.createElement(E.c,{autoclose:!0,theme:"cancel"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c")))}},{key:"please_Month",value:function(e){var t="\u044f\u043d\u0432\u0430\u0440\u044f";switch(e){case 0:t="\u044f\u043d\u0432\u0430\u0440\u044f";break;case 1:t="\u0444\u0435\u0432\u0440\u0430\u043b\u044f";break;case 2:t="\u043c\u0430\u0440\u0442\u0430";break;case 3:t="\u0430\u043f\u0440\u0435\u043b\u044f";break;case 4:t="\u043c\u0430\u044f";break;case 5:t="\u0438\u044e\u043d\u044f";break;case 6:t="\u0438\u044e\u043b\u044f";break;case 7:t="\u0430\u0432\u0433\u0443\u0441\u0442\u0430";break;case 8:t="\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f";break;case 9:t="\u043e\u043a\u0442\u044f\u0431\u0440\u044f";break;case 10:t="\u043d\u043e\u044f\u0431\u0440\u044f";break;case 11:t="\u0434\u0435\u043a\u0430\u0431\u0440\u044f";break;default:t="\u044f\u043d\u0432\u0430\u0440\u044f"}return t}},{key:"componentDidMount",value:function(){this.setPopout(o.a.createElement(E.L,null)),this.PrepareProfile()}},{key:"render",value:function(){var e=this,t=this.props.this;return o.a.createElement(E.D,{id:this.props.id},o.a.createElement(E.E,{left:o.a.createElement(E.F,{onClick:function(){return window.history.back()}})},o.a.createElement("span",{className:"pointer",onClick:function(){return e.copy(e.state.other_profile.id,e.state.other_profile.flash)}},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c")),this.state.other_profile?o.a.createElement(o.a.Fragment,null,o.a.createElement(E.h,{description:o.a.createElement("div",{className:"description_other_profile"},!0===this.state.other_profile.online.is_online?"online":new Date(1e3*this.state.other_profile.online.last_seen).getDate()+" "+this.please_Month(new Date(1e3*this.state.other_profile.online.last_seen).getMonth())+" "+new Date(1e3*this.state.other_profile.online.last_seen).getFullYear()+" \u0432 "+pe(new Date(1e3*this.state.other_profile.online.last_seen).getHours())+":"+pe(new Date(1e3*this.state.other_profile.online.last_seen).getMinutes())),size:"l",before:o.a.createElement(E.e,{src:this.state.other_profile.avatar.url,size:70})},o.a.createElement("div",{className:"title_profile"},isFinite(this.state.other_profile.nickname)?"\u0410\u0433\u0435\u043d\u0442 \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438 #".concat(this.state.other_profile.nickname):this.state.other_profile.nickname?this.state.other_profile.nickname:"\u0410\u0433\u0435\u043d\u0442 \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438 #".concat(this.state.other_profile.id),!0===this.state.other_profile.flash?o.a.createElement("div",{className:"profile_moderator_name_icon"},o.a.createElement(ie.a,{width:12,height:12,style:{color:"var(--prom_icon)"},onClick:function(){return t.setActiveModal("prom")}})):null,!0===this.state.other_profile.donut?o.a.createElement("div",{className:"profile_moderator_name_icon"},o.a.createElement(he.a,{width:12,height:12,onClick:function(){return t.setActiveModal("donut")}})):null,!0===this.state.other_profile.verified?o.a.createElement("div",{className:"profile_moderator_name_icon"},o.a.createElement(ce.a,{width:12,height:12,style:{color:"var(--dynamic_blue)"}})):null)),o.a.createElement(E.N,null),"\u0421\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0439 \u0410\u0433\u0435\u043d\u0442"===this.state.other_profile.nickname||this.state.other_profile.banned?o.a.createElement("div",{style:{marginTop:"20px"},className:"help_title_profile"},this.state.other_profile.banned?"\u042d\u0442\u043e\u0442 \u043f\u0440\u043e\u0444\u0438\u043b\u044c \u0437\u0430\u0431\u0430\u043d\u0435\u043d":"\u0412\u044b \u043d\u0435 \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c \u044d\u0442\u043e\u0442 \u043f\u0440\u043e\u0444\u0438\u043b\u044c"):o.a.createElement(E.t,null,o.a.createElement(E.O,{disabled:!0,before:o.a.createElement(te.a,null),indicator:new Date(1e3*this.state.other_profile.registered).getDate()+" "+this.please_Month(new Date(1e3*this.state.other_profile.registered).getMonth())+" "+new Date(1e3*this.state.other_profile.registered).getFullYear()},"\u0414\u0430\u0442\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438"),o.a.createElement(E.O,{disabled:!0,before:o.a.createElement(re.a,null),indicator:o.a.createElement(E.l,{mode:"primary"},this.state.other_profile.good_answers)},"\u041f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u043e\u0442\u0432\u0435\u0442\u044b"),o.a.createElement(E.O,{disabled:!0,before:o.a.createElement(ne.a,{width:28,height:28}),indicator:o.a.createElement(E.l,{mode:"primary"},this.state.other_profile.bad_answers)},"\u041e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0445 \u043e\u0442\u0432\u0435\u0442\u043e\u0432")),o.a.createElement(E.N,null),o.a.createElement(E.m,null,o.a.createElement(E.s,{header:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u0412\u0430\u0436\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f",mode:"default"},"\u0421\u0435\u0440\u0432\u0438\u0441 \u043d\u0435 \u0438\u043c\u0435\u0435\u0442 \u043e\u0442\u043d\u043e\u0448\u0435\u043d\u0438\u044f \u043a \u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435, \u0430 \u0442\u0430\u043a\u0436\u0435 \u0438\u0445 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0430\u043c."))):null)}}]),a}(o.a.Component),de=a(147),fe=a.n(de),ge=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return o.a.createElement(E.z,{id:this.props.id,onClose:this.props.onClose,icon:o.a.createElement(fe.a,{style:{color:"var(--prom_icon)"},width:72,height:72}),caption:"\u041f\u0440\u043e\u043c\u0435\u0442\u0435\u0439 \u2014 \u043e\u0441\u043e\u0431\u0435\u043d\u043d\u044b\u0439 \u0437\u043d\u0430\u0447\u043e\u043a, \u0432\u044b\u0434\u0430\u0432\u0430\u0435\u043c\u044b\u0439 \u0430\u0433\u0435\u043d\u0442\u0430\u043c \u0437\u0430 \u0445\u043e\u0440\u043e\u0448\u0435\u0435 \u043a\u0430\u0447\u0435\u0441\u0442\u0432\u043e \u043e\u0442\u0432\u0435\u0442\u043e\u0432.",actions:[{title:"\u041f\u043e\u043d\u044f\u0442\u043d\u043e",mode:"secondary",action:this.props.action}]})}}]),a}(o.a.Component),_e=a(148),Ee=a.n(_e),ve=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){return o.a.createElement(E.z,{id:this.props.id,onClose:this.props.onClose,icon:o.a.createElement(Ee.a,{width:72,height:72}),caption:o.a.createElement("span",null,"Donut \u2014 \u043e\u0442\u043c\u0435\u0442\u043a\u0430 \u0432\u044b\u0434\u0430\u0432\u0430\u0435\u043c\u0430\u044f \u0410\u0433\u0435\u043d\u0442\u0430\u043c \u0437\u0430 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0443 \u043f\u0440\u043e\u0435\u043a\u0442\u0430.",o.a.createElement("br",null),o.a.createElement("br",null),"\u0410\u0433\u0435\u043d\u0442\u044b \u043a\u043e\u0442\u043e\u0440\u044b\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0430\u043b\u0438 \u043f\u0440\u043e\u0435\u043a\u0442, \u043f\u043e\u043b\u0443\u0447\u0430\u044e\u0442 \u043e\u0442\u043c\u0435\u0442\u043a\u0443, \u043d\u0430 \u0432\u0435\u0441\u044c \u043f\u0435\u0440\u0435\u043e\u0434 \u043f\u043e\u0434\u043f\u0438\u0441\u043a\u0438. \u041f\u043e \u0438\u0441\u0442\u0435\u0447\u0435\u043d\u0438\u0438 \u0434\u0430\u043d\u043d\u043e\u0433\u043e \u043f\u0435\u0440\u0438\u043e\u0434\u0430, \u043e\u0442\u043c\u0435\u0442\u043a\u0430 \u043f\u0440\u043e\u043f\u0430\u0434\u0430\u0435\u0442"),actions:[{title:"\u041f\u043e\u043d\u044f\u0442\u043d\u043e",mode:"secondary",action:this.props.action}]})}}]),a}(o.a.Component),ke=a(33),we=a.n(ke),be=Object(E.Z)(function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){return Object(p.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props.platform;return o.a.createElement(E.A,{id:this.props.id,onClose:this.props.onClose,header:o.a.createElement(E.B,{right:e===E.a&&o.a.createElement(E.u,{onClick:this.props.onClose},o.a.createElement(we.a,null)),left:e===E.v&&o.a.createElement(E.G,{onClick:this.props.onClose},o.a.createElement(we.a,null))},"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439")},o.a.createElement(E.m,null,o.a.createElement("div",{style:{whiteSpace:"pre-wrap"}},o.a.createElement(q.a,{target:"_blank",rel:"noreferrer noopener"},this.props.comment))))}}]),a}(o.a.Component)),ye=a(121).parse(window.location.hash),Ae=!1,Ce=!1,Pe=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?",activePanel:"questions",activeModal:null,modalHistory:[],popout:n.props.popout,ticket_id:null,history:["questions"],active_other_profile:0,other_profile:null,ban_reason:"",comment:"",transfer:{avatar:"",comment:""},AgeUser:0,offset:0,tiket_all:null,tiket_all_helper:null},n.changeData=n.props.this.changeData,n.playAudio=n.props.this.playAudio,n.ReloadProfile=n.props.reloadProfile,n.getQuestions=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=e?"method=tickets.get&count=20&unanswered=1&offset="+n.state.offset:"method=tickets.get&count=20&unanswered=1";e||n.setState({offset:20}),fetch(n.state.api_url+t+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){if(t.result){var a=[];if(null!==n.state.tiket_all){var o=n.state.tiket_all.slice();a=e?t.response?o.concat(t.response):n.state.tiket_all:t.response}else a=t.response;n.setState({tiket_all:a,tiket_all_helper:t.response}),e&&n.setState({offset:n.state.offset+20})}else n.showErrorAlert(t.error.message)})).catch((function(e){n.showErrorAlert(e)}))},n.setPopout=function(e){n.setState({popout:e})},n.handlePopstate=function(e){e.preventDefault(),n.goBack()},n.goTiket=function(e){n.setPopout(o.a.createElement(E.L,null)),n.setState({ticket_id:e}),n.goPanel("ticket"),n.setPopout(null)},n.onChange=function(e){var t=e.currentTarget.name,a=e.currentTarget.value;n.setState(Object(h.a)({},t,a))},n.goOtherProfile=function(e){n.setState({active_other_profile:e}),n.goPanel("other_profile")},n.modalBack=function(){n.setActiveModal(n.state.modalHistory[n.state.modalHistory.length-2])},n.goBack=function(){if(Ce){var e=n.state.history;window.history.pushState({panel:e[e.length-1]},e[e.length-1])}else{Ce=!0;var t=n.state.history;n.setActiveModal(null),1===t.length?l.a.send("VKWebAppClose",{status:"success"}):t.length>1&&(t.pop(),n.setState({activePanel:t[t.length-1]}),n.setPopout(o.a.createElement(E.L,null)),setTimeout((function(){n.setPopout(null)}),500)),setTimeout((function(){Ce=!1}),500)}},n.goPanel=function(e){var t=n.state.history.slice();t.push(e),window.history.pushState({panel:e},e),n.setState({history:t,activePanel:e})},n.setActiveModal=function(e){e=e||null;var t=n.state.modalHistory?Object(v.a)(n.state.modalHistory):[];null===e?t=[]:-1!==t.indexOf(e)?t=t.splice(0,t.indexOf(e)+1):t.push(e),n.setState({activeModal:e,modalHistory:t})},n.showAlert=function(e,t){n.setState({popout:o.a.createElement(E.d,{actions:[{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",autoclose:!0,mode:"cancel"}],onClose:function(){return n.setPopout(null)}},o.a.createElement("h2",null,e),o.a.createElement("p",null,t))})},n.showErrorAlert=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;n.setPopout(o.a.createElement(E.d,{actions:[{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,mode:"cancel",action:t}],onClose:function(){return n.setPopout(null)}},o.a.createElement("h2",null,"\u041e\u0448\u0438\u0431\u043a\u0430"),e?o.a.createElement("p",null,e):o.a.createElement("p",null,"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430!")))},n}return Object(m.a)(a,[{key:"userBan",value:function(e,t){var a=this;this.setPopout(o.a.createElement(E.L,null)),fetch(this.state.api_url+"method=account.ban&agent_id="+e+"&banned=true&reason="+t+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result?(a.setActiveModal(null),a.showAlert("\u0423\u0441\u043f\u0435\u0445","\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0437\u0430\u0431\u0430\u043d\u0435\u043d"),a.setPopout(null)):a.showErrorAlert(e.error.message)})).catch((function(e){a.showErrorAlert(e)}))}},{key:"getRandomTiket",value:function(){var e=this;fetch(this.state.api_url+"method=ticket.getRandom&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?e.goTiket(t.response.id):e.showErrorAlert(t.error.message)})).catch((function(t){e.showErrorAlert(t)}))}},{key:"componentDidMount",value:function(){window.addEventListener("popstate",this.handlePopstate),this.changeData("need_epic",!0),Ae||(void 0!==ye.ticket_id&&this.goTiket(ye.ticket_id),void 0!==ye.agent_id&&this.goOtherProfile(ye.agent_id),Ae=!0),this.getQuestions()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("popstate",this.handlePopstate)}},{key:"render",value:function(){var e=this,t=o.a.createElement(E.C,{activeModal:this.state.activeModal},o.a.createElement(ge,{id:"prom",onClose:function(){return e.setActiveModal(null)},action:function(){return e.setActiveModal(null)}}),o.a.createElement(ve,{id:"donut",onClose:function(){return e.setActiveModal(null)},action:function(){return e.setActiveModal(null)}}),o.a.createElement(E.z,{id:"ban_user",onClose:function(){return e.setActiveModal(null)},icon:o.a.createElement(E.e,{src:this.state.other_profile?this.state.other_profile.avatar.url:null,size:72}),header:"\u0417\u0430\u0431\u0430\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",actions:[{title:"\u0417\u0430\u0431\u0430\u043d\u0438\u0442\u044c! \ud83e\udd2c",mode:"secondary",action:function(){e.userBan(e.state.other_profile?e.state.other_profile.id:0,e.state.ban_reason),console.log(e.state.other_profile.id)}}]},o.a.createElement(E.w,{disabled:!0,value:this.state.other_profile?this.state.other_profile.id<0?-this.state.other_profile.id:this.state.other_profile.id:null}),o.a.createElement("br",null),o.a.createElement(E.w,{maxLength:"100",name:"ban_reason",onChange:function(t){return e.onChange(t)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0440\u0438\u0447\u0438\u043d\u0443 \u0431\u0430\u043d\u0430",value:this.state.ban_reason})),o.a.createElement(E.z,{id:"transfer",onClose:function(){return e.setActiveModal(null)},icon:o.a.createElement(E.e,{src:this.state.transfer.avatar,size:72}),header:"\u041f\u0435\u0440\u0435\u0432\u043e\u0434 \u043c\u043e\u043d\u0435\u0442\u043e\u043a",caption:this.state.transfer.comment,actions:[{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",mode:"secondary",action:function(){e.setActiveModal(null)}}]}),o.a.createElement(be,{id:"comment",onClose:this.modalBack,comment:this.state.comment}));return o.a.createElement(E.X,{id:this.props.id,activePanel:this.state.activePanel,modal:t,popout:this.state.popout,onSwipeBack:this.goBack},o.a.createElement(D,{id:"questions",this:this,account:this.props.account,tiket_all:this.state.tiket_all,first_start:this.props.first_start,tiket_all_helper:this.state.tiket_all_helper}),o.a.createElement(b,{id:"new_ticket",this:this,account:this.props.account}),o.a.createElement($,{id:"ticket",this:this,ticket_id:this.state.ticket_id,account:this.props.account}),o.a.createElement(me,{id:"other_profile",this:this,agent_id:this.state.active_other_profile,account:this.props.account}))}}]),a}(o.a.Component),Se=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?",fetching:!1};var o=n.props.this;return n.setPopout=o.setPopout,n.showErrorAlert=o.showErrorAlert,n.setActiveModal=o.setActiveModal,n}return Object(m.a)(a,[{key:"Prepare_top",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t&&this.setPopout(o.a.createElement(E.L,null)),this.props.this.getTopUsers(),setTimeout((function(){e.setState({fetching:!1}),t&&e.setPopout(null)}),500)}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.this;return o.a.createElement(E.D,{id:this.props.id},o.a.createElement(E.E,null,"\u0422\u043e\u043f"),o.a.createElement(E.m,null,o.a.createElement(E.s,{header:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u0412\u0430\u0436\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f",mode:"default"},"\u0421\u0435\u0440\u0432\u0438\u0441 \u043d\u0435 \u0438\u043c\u0435\u0435\u0442 \u043e\u0442\u043d\u043e\u0448\u0435\u043d\u0438\u044f \u043a \u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435, \u0430 \u0442\u0430\u043a\u0436\u0435 \u0438\u0445 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0430\u043c.")),o.a.createElement(o.a.Fragment,null,o.a.createElement(E.J,{onRefresh:function(){e.setState({fetching:!0}),e.Prepare_top()},isFetching:this.state.fetching},this.props.top_agents?this.props.top_agents.map((function(a,n){return a.banned?null:o.a.createElement(o.a.Fragment,{key:a.id},o.a.createElement(E.N,null),o.a.createElement(E.O,{className:"pointer",onClick:function(){t.goOtherProfile(a.id,!0),e.setState({top_agents:null})},description:o.a.createElement("div",{className:"top_moderator_desc"},a.good_answers+" \u0445\u043e\u0440\u043e\u0448\u0438\u0445 \u043e\u0442\u0432\u0435\u0442\u043e\u0432, "+a.bad_answers+" \u043f\u043b\u043e\u0445\u0438\u0445 \u043e\u0442\u0432\u0435\u0442\u043e\u0432"),size:"l",before:o.a.createElement(E.e,{src:a.avatar.url})},o.a.createElement("div",{className:"top_moderator_name"},isFinite(a.nickname)?"\u0410\u0433\u0435\u043d\u0442 \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438 #".concat(a.nickname):a.nickname?a.nickname:"\u0410\u0433\u0435\u043d\u0442 \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438 #".concat(a.id),o.a.createElement("div",{className:"top_moderator_name_icon"},!0===a.flash?o.a.createElement(ie.a,{width:12,height:12,onClick:function(){return e.setActiveModal("prom")},className:"top_moderator_name_icon"}):null),o.a.createElement("div",{className:"top_moderator_name_icon"},!0===a.donut?o.a.createElement(he.a,{width:12,height:12,className:"top_moderator_name_icon",onClick:function(){return e.setActiveModal("donut")}}):null),o.a.createElement("div",{className:"top_moderator_name_icon_ver"},!0===a.verified?o.a.createElement(ce.a,{className:"top_moderator_name_icon_ver"}):null))))})):o.a.createElement(E.H,null))))}}]),a}(o.a.Component),je=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?",activePanel:"top",activeModal:null,modalHistory:[],popout:n.props.popout,ticket_id:null,history:["top"],active_other_profile:0,other_profile:null,ban_reason:"",comment:"",transfer:{avatar:"",comment:""},AgeUser:0,top_agents:null},n.changeData=n.props.this.changeData,n.playAudio=n.props.this.playAudio,n.getTopUsers=function(){fetch(n.state.api_url+"method=users.getTop&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result&&(n.setState({top_agents:e.response}),n.setPopout(null))})).catch((function(e){n.showErrorAlert(e)}))},n.setPopout=function(e){n.setState({popout:e})},n.handlePopstate=function(e){e.preventDefault(),n.goBack()},n.goTiket=function(e){n.setPopout(o.a.createElement(E.L,null)),n.setState({ticket_id:e}),n.goPanel("ticket"),n.setPopout(null)},n.onChange=function(e){var t=e.currentTarget.name,a=e.currentTarget.value;n.setState(Object(h.a)({},t,a))},n.goOtherProfile=function(e){n.setState({active_other_profile:e}),n.goPanel("other_profile")},n.modalBack=function(){n.setActiveModal(n.state.modalHistory[n.state.modalHistory.length-2])},n.goBack=function(){var e=n.state.history;n.setActiveModal(null),1===e.length?l.a.send("VKWebAppClose",{status:"success"}):e.length>1&&(e.pop(),n.setState({activePanel:e[e.length-1]}))},n.goPanel=function(e){var t=n.state.history.slice();t.push(e),window.history.pushState({panel:e},e),n.setState({history:t,activePanel:e})},n.setActiveModal=function(e){e=e||null;var t=n.state.modalHistory?Object(v.a)(n.state.modalHistory):[];null===e?t=[]:-1!==t.indexOf(e)?t=t.splice(0,t.indexOf(e)+1):t.push(e),n.setState({activeModal:e,modalHistory:t})},n.showAlert=function(e,t){n.setState({popout:o.a.createElement(E.d,{actions:[{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",autoclose:!0,mode:"cancel"}],onClose:function(){return n.setPopout(null)}},o.a.createElement("h2",null,e),o.a.createElement("p",null,t))})},n.showErrorAlert=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n.setPopout(o.a.createElement(E.d,{actions:[{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,mode:"cancel"}],onClose:function(){return n.setPopout(null)}},o.a.createElement("h2",null,"\u041e\u0448\u0438\u0431\u043a\u0430"),e?o.a.createElement("p",null,e):o.a.createElement("p",null,"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430!")))},n}return Object(m.a)(a,[{key:"ChangeAge",value:function(e){var t=this;this.setState({popout:o.a.createElement(E.L,null)}),fetch(this.state.api_url+"method=account.setAge&age="+e+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result&&t.setState({popout:null})})).catch((function(e){t.showErrorAlert()}))}},{key:"userBan",value:function(e,t){var a=this;this.setPopout(o.a.createElement(E.L,null)),fetch(this.state.api_url+"method=account.ban&agent_id="+e+"&banned=true&reason="+t+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result?(a.setActiveModal(null),a.showAlert("\u0423\u0441\u043f\u0435\u0445","\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0437\u0430\u0431\u0430\u043d\u0435\u043d"),a.setPopout(null)):a.showErrorAlert(e.error.message)})).catch((function(e){a.showErrorAlert(e)}))}},{key:"getRandomTiket",value:function(){var e=this;fetch(this.state.api_url+"method=ticket.getRandom&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?e.goTiket(t.response.id):e.showErrorAlert(t.error.message)})).catch((function(t){e.showErrorAlert(t)}))}},{key:"componentDidMount",value:function(){window.addEventListener("popstate",this.handlePopstate),this.getTopUsers()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("popstate",this.handlePopstate)}},{key:"render",value:function(){var e=this,t=o.a.createElement(E.C,{activeModal:this.state.activeModal},o.a.createElement(ge,{id:"prom",onClose:function(){return e.setActiveModal(null)},action:function(){return e.setActiveModal(null)}}),o.a.createElement(ve,{id:"donut",onClose:function(){return e.setActiveModal(null)},action:function(){return e.setActiveModal(null)}}),o.a.createElement(E.z,{id:"ban_user",onClose:function(){return e.setActiveModal(null)},icon:o.a.createElement(E.e,{src:this.state.other_profile?this.state.other_profile.avatar.url:null,size:72}),header:"\u0417\u0430\u0431\u0430\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",actions:[{title:"\u0417\u0430\u0431\u0430\u043d\u0438\u0442\u044c! \ud83e\udd2c",mode:"secondary",action:function(){e.userBan(e.state.other_profile?e.state.other_profile.id:0,e.state.ban_reason),console.log(e.state.other_profile.id)}}]},o.a.createElement(E.w,{disabled:!0,value:this.state.other_profile?this.state.other_profile.id<0?-this.state.other_profile.id:this.state.other_profile.id:null}),o.a.createElement("br",null),o.a.createElement(E.w,{maxLength:"100",name:"ban_reason",onChange:function(t){return e.onChange(t)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0440\u0438\u0447\u0438\u043d\u0443 \u0431\u0430\u043d\u0430",value:this.state.ban_reason})),o.a.createElement(E.z,{id:"transfer",onClose:function(){return e.setActiveModal(null)},icon:o.a.createElement(E.e,{src:this.state.transfer.avatar,size:72}),header:"\u041f\u0435\u0440\u0435\u0432\u043e\u0434 \u043c\u043e\u043d\u0435\u0442\u043e\u043a",caption:this.state.transfer.comment,actions:[{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",mode:"secondary",action:function(){e.setActiveModal(null)}}]}));return o.a.createElement(E.X,{id:this.props.id,activePanel:this.state.activePanel,modal:t,popout:this.state.popout,onSwipeBack:this.goBack},o.a.createElement(Se,{id:"top",this:this,account:this.props.account,top_agents:this.state.top_agents}),o.a.createElement(me,{id:"other_profile",this:this,agent_id:this.state.active_other_profile,account:this.props.account}))}}]),a}(o.a.Component),Oe=a(149),Me=a.n(Oe);function xe(e){return e<10?"0"+e:e}var Fe=["\u044f\u043d\u0432\u0430\u0440\u044f","\u0444\u0435\u0432\u0440\u0430\u043b\u044f","\u043c\u0430\u0440\u0442\u0430","\u0430\u043f\u0440\u0435\u043b\u044f","\u043c\u0430\u044f","\u0438\u044e\u043d\u044f","\u0438\u044e\u043b\u044f","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u043e\u043a\u0442\u044f\u0431\u0440\u044f","\u043d\u043e\u044f\u0431\u0440\u044f","\u0434\u0435\u043a\u0430\u0431\u0440\u044f"],Ne=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={notification:null,fetching:!1},n.getNotif=function(){fetch(n.props.this.state.api_url+"method=notifications.get&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result?(n.setState({notification:e.response}),setTimeout((function(){n.setState({fetching:!1})}),500)):n.props.this.showErrorAlert(e.error.message)})).catch((function(e){n.props.this.showErrorAlert()}))},n.markView=function(){fetch(n.props.this.state.api_url+"method=notifications.markAsViewed&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result?setTimeout((function(){n.props.this.ReloadProfile()}),4e3):n.props.this.showErrorAlert(e.error.message)})).catch((function(e){n.props.this.showErrorAlert()}))},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.getNotif(),this.markView()}},{key:"render",value:function(){var e=this,t=this.props.this;return o.a.createElement(E.D,{id:this.props.id},o.a.createElement(E.E,{left:o.a.createElement(E.F,{onClick:function(){e.props.this.changeData("activeStory","profile")}})},"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f"),o.a.createElement(o.a.Fragment,null,o.a.createElement(E.J,{onRefresh:function(){e.setState({fetching:!0}),e.getNotif()},isFetching:this.state.fetching},this.state.notification?this.state.notification.length>0?this.state.notification.map((function(e,a){return o.a.createElement(o.a.Fragment,{key:a},o.a.createElement(E.O,{onClick:"0"!==e.object.object?function(){return t.goTiket(e.object.object)}:function(){return t.openMoneyTransfer(e.image,e.text,e.comment)},description:new Date(1e3*e.time).getDate()+" "+Fe[new Date(1e3*e.time).getMonth()]+" "+new Date(1e3*e.time).getFullYear()+" \u0432 "+xe(new Date(1e3*e.time).getHours())+":"+xe(new Date(1e3*e.time).getMinutes()),size:"l",before:o.a.createElement(E.e,{src:e.image}),multiline:"boolean"},o.a.createElement("div",{style:{lineHeight:"17px",marginTop:"3px"}},e.text),o.a.createElement("div",{style:{marginTop:"4px"}})),o.a.createElement(E.N,{className:{width:"100%"}}))})):o.a.createElement(E.I,{icon:o.a.createElement(Me.a,null)},"\u0423 \u0412\u0430\u0441 \u043d\u0435\u0442 \u043d\u043e\u0432\u044b\u0445 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0439"):o.a.createElement(E.H,null))))}}]),a}(o.a.Component),Te=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?",activePanel:"notif",activeModal:null,modalHistory:[],popout:n.props.popout,ticket_id:null,history:["notif"],active_other_profile:0,other_profile:null,ban_reason:"",comment:"",transfer:{avatar:"",comment:""}},n.changeData=n.props.this.changeData,n.ReloadProfile=n.props.reloadProfile,n.setPopout=function(e){n.setState({popout:e})},n.handlePopstate=function(e){e.preventDefault(),n.goBack()},n.goTiket=function(e){n.setPopout(o.a.createElement(E.L,null)),n.setState({ticket_id:e}),n.goPanel("ticket"),n.setPopout(null)},n.onChange=function(e){var t=e.currentTarget.name,a=e.currentTarget.value;n.setState(Object(h.a)({},t,a))},n.goOtherProfile=function(e){n.setState({active_other_profile:e}),n.goPanel("other_profile")},n.openMoneyTransfer=function(e,t,a){n.setState({transfer:{avatar:e,text:t,comment:a||"\u0410\u0433\u0435\u043d\u0442 \u043d\u0435 \u043e\u0441\u0442\u0430\u0432\u0438\u043b \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f \ud83d\ude22"}}),n.setActiveModal("transfer")},n.modalBack=function(){n.setActiveModal(n.state.modalHistory[n.state.modalHistory.length-2])},n.goBack=function(){var e=n.state.history;n.setActiveModal(null),1===e.length?n.props.this.changeData("activeStory","profile"):e.length>1&&(e.pop(),n.setState({activePanel:e[e.length-1]}))},n.goPanel=function(e){var t=n.state.history.slice();t.push(e),window.history.pushState({panel:e},e),n.setState({history:t,activePanel:e})},n.setActiveModal=function(e){e=e||null;var t=n.state.modalHistory?Object(v.a)(n.state.modalHistory):[];null===e?t=[]:-1!==t.indexOf(e)?t=t.splice(0,t.indexOf(e)+1):t.push(e),n.setState({activeModal:e,modalHistory:t})},n.showAlert=function(e,t){n.setState({popout:o.a.createElement(E.d,{actions:[{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",autoclose:!0,mode:"cancel"}],onClose:function(){return n.setPopout(null)}},o.a.createElement("h2",null,e),o.a.createElement("p",null,t))})},n.showErrorAlert=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n.setPopout(o.a.createElement(E.d,{actions:[{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,mode:"cancel"}],onClose:function(){return n.setPopout(null)}},o.a.createElement("h2",null,"\u041e\u0448\u0438\u0431\u043a\u0430"),e?o.a.createElement("p",null,e):o.a.createElement("p",null,"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430!")))},n}return Object(m.a)(a,[{key:"userBan",value:function(e,t){var a=this;this.setPopout(o.a.createElement(E.L,null)),fetch(this.state.api_url+"method=account.ban&agent_id="+e+"&banned=true&reason="+t+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result&&(a.setActiveModal(null),a.showAlert("\u0423\u0441\u043f\u0435\u0445","\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0437\u0430\u0431\u0430\u043d\u0435\u043d"),a.setPopout(null))})).catch((function(e){a.showErrorAlert()}))}},{key:"componentDidMount",value:function(){window.addEventListener("popstate",this.handlePopstate)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("popstate",this.handlePopstate)}},{key:"render",value:function(){var e=this,t=o.a.createElement(E.C,{activeModal:this.state.activeModal},o.a.createElement(ge,{id:"prom",onClose:function(){return e.setActiveModal(null)},action:function(){return e.setActiveModal(null)}}),o.a.createElement(ve,{id:"donut",onClose:function(){return e.setActiveModal(null)},action:function(){return e.setActiveModal(null)}}),o.a.createElement(E.z,{id:"ban_user",onClose:function(){return e.setActiveModal(null)},icon:o.a.createElement(E.e,{src:this.state.other_profile?this.state.other_profile.avatar.url:null,size:72}),header:"\u0417\u0430\u0431\u0430\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",actions:[{title:"\u0417\u0430\u0431\u0430\u043d\u0438\u0442\u044c! \ud83e\udd2c",mode:"secondary",action:function(){e.userBan(e.state.other_profile?e.state.other_profile.id:0,e.state.ban_reason),console.log(e.state.other_profile.id)}}]},o.a.createElement(E.w,{disabled:!0,value:this.state.other_profile?this.state.other_profile.id<0?-this.state.other_profile.id:this.state.other_profile.id:null}),o.a.createElement("br",null),o.a.createElement(E.w,{maxLength:"100",name:"ban_reason",onChange:function(t){return e.onChange(t)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0440\u0438\u0447\u0438\u043d\u0443 \u0431\u0430\u043d\u0430",value:this.state.ban_reason})),o.a.createElement(E.z,{id:"transfer",onClose:function(){return e.setActiveModal(null)},icon:o.a.createElement(E.e,{src:this.state.transfer.avatar,size:72}),header:"\u041f\u0435\u0440\u0435\u0432\u043e\u0434 \u043c\u043e\u043d\u0435\u0442\u043e\u043a",caption:this.state.transfer.comment,actions:[{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",mode:"secondary",action:function(){e.setActiveModal(null)}}]}),o.a.createElement(be,{id:"comment",onClose:this.modalBack,comment:this.state.comment}));return o.a.createElement(E.X,{id:this.props.id,activePanel:this.state.activePanel,modal:t,popout:this.state.popout},o.a.createElement(Ne,{id:"notif",this:this}),o.a.createElement($,{id:"ticket",this:this,ticket_id:this.state.ticket_id,account:this.props.account}),o.a.createElement(me,{id:"other_profile",this:this,agent_id:this.state.active_other_profile,account:this.props.account}))}}]),a}(o.a.Component),De=a(150),Le=a.n(De),Be=a(153),Re=a.n(Be),ze=a(155),Ve=a.n(ze),He=a(156),qe=a.n(He),Ie=a(152),We=a.n(Ie),Ke=a(151),Qe=a.n(Ke),Ue=a(154),Ge=a.n(Ue);var Je=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?",fetching:!1};var o=n.props.this;return n.setPopout=o.setPopout,n.showErrorAlert=o.showErrorAlert,n.setActiveModal=o.setActiveModal,n}return Object(m.a)(a,[{key:"render",value:function(){var e=this,t=this.props.this;return o.a.createElement(E.D,{id:this.props.id},function(e){for(var t in e)return!1;return!0}(this.props.account)?null:o.a.createElement(o.a.Fragment,null,o.a.createElement(E.E,{left:o.a.createElement(o.a.Fragment,null,o.a.createElement(E.G,{onClick:function(){e.setActiveModal("share")}},o.a.createElement(Qe.a,null)),o.a.createElement(E.G,{label:this.props.account.notif_count?o.a.createElement(E.l,{size:"s",mode:"prominent"},this.props.account.notif_count):null,onClick:function(){e.props.this.changeData("activeStory","notif"),window.history.pushState({panel:"notif"},"notif")}},o.a.createElement(We.a,null)))},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"),o.a.createElement(E.J,{onRefresh:function(){e.setState({fetching:!0}),e.props.this.ReloadProfile(),setTimeout((function(){e.setState({fetching:!1})}),1e3)},isFetching:this.state.fetching},o.a.createElement(E.O,{disabled:!0,before:o.a.createElement(E.e,{src:this.props.account?this.props.account.avatar.url:null,size:72}),size:"l",description:isFinite(this.props.account.nickname)?"#".concat(this.props.account.nickname):this.props.account.nickname?"":"#".concat(this.props.account.id)},o.a.createElement("div",{style:{display:"flex"}},o.a.createElement("p",{style:{margin:0}},isFinite(this.props.account.nickname)?"\u0410\u0433\u0435\u043d\u0442 \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438":this.props.account.nickname?this.props.account.nickname:"\u0410\u0433\u0435\u043d\u0442 \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438"),!0===this.props.account.flash?o.a.createElement("div",{className:"profile_icon"},o.a.createElement(Re.a,{width:12,height:12,onClick:function(){return t.setActiveModal("prom")}})):null,!0===this.props.account.donut?o.a.createElement("div",{className:"profile_icon"},o.a.createElement(he.a,{width:12,height:12,onClick:function(){return t.setActiveModal("donut")}})):null,!0===this.props.account.verified?o.a.createElement("div",{className:"profile_icon_ver"},o.a.createElement(ce.a,null)):null)),o.a.createElement(E.N,null),o.a.createElement(E.m,null,o.a.createElement(E.g,{stretched:!0,size:"l",mode:"secondary",onClick:function(){return e.props.this.goPanel("settings")}},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438")),o.a.createElement(E.N,null),o.a.createElement(E.t,null,o.a.createElement(E.O,{expandable:!0,className:"pointer",href:"https://vk.me/join/zyWQzsgQ9iw6V2YAfbwiGtuO883rnYhXwAY=",target:"_blank",rel:"noopener noreferrer",before:o.a.createElement(Ge.a,null)},"\u0427\u0430\u0442")),o.a.createElement(E.t,null,o.a.createElement(E.O,{expandable:!0,className:"pointer",onClick:function(){e.props.this.goPanel("qu")},before:o.a.createElement(Ve.a,null)},"\u041c\u043e\u0438 \u043e\u0442\u0432\u0435\u0442\u044b"),o.a.createElement(E.O,{expandable:!0,className:"pointer",onClick:function(){e.props.this.goPanel("market")},before:o.a.createElement(qe.a,null)},"\u041c\u0430\u0433\u0430\u0437\u0438\u043d")),o.a.createElement(E.m,null,o.a.createElement(E.s,{header:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u0412\u0430\u0436\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f",mode:"default"},"\u0421\u0435\u0440\u0432\u0438\u0441 \u043d\u0435 \u0438\u043c\u0435\u0435\u0442 \u043e\u0442\u043d\u043e\u0448\u0435\u043d\u0438\u044f \u043a \u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435, \u0430 \u0442\u0430\u043a\u0436\u0435 \u0438\u0445 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0430\u043c."))),this.props.this.state.snackbar))}}]),a}(o.a.Component),Xe=a(159),Ye=a.n(Xe),Ze=a(158),$e=a.n(Ze),et=a(160),tt=a.n(et),at=a(45),nt=a.n(at),ot=a(61),rt=a.n(ot),st=a(157),it=a.n(st),lt=["1.png","2.png","3.png","4.png","5.png","6.png","7.png","8.png","9.png","10.png","11.png","12.png","13.png","14.png","15.png","16.png","17.png","18.png","19.png","20.png","21.png","22.png","23.png","24.png","25.png","26.png","27.png","28.png"],ct={backgroundColor:"var(--accent)"},ut=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e)).state={changed_id:"",api_url:"https://xelene.ru/road/php/index.php?",last_selected:null};var o=n.props.this;return n.setPopout=o.setPopout,n.showErrorAlert=o.showErrorAlert,n.showAlert=o.showAlert,n.setActiveModal=o.setActiveModal,n.onChange=function(e){var t=e.currentTarget.name,a=e.currentTarget.value;n.setState(Object(h.a)({},t,a))},n}return Object(m.a)(a,[{key:"images",value:function(){for(var e=this,t=Object.keys(lt).length,a=[],n=function(t){a.push(o.a.createElement("img",{id:t,onClick:function(a){return e.props.account.avatar.id===t+1?e.props.this.setSnack(o.a.createElement(E.Q,{layout:"vertical",onClose:function(){return e.props.this.setSnack(null)},before:o.a.createElement(rt.a,{width:24,height:24})},"\u0412\u044b \u0443\u0436\u0435 \u0438\u043c\u0435\u0435\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0439 \u0430\u0432\u0430\u0442\u0430\u0440")):e.selectImage(a)},style:0===t?{marginLeft:"20px"}:null,className:"changes_avatars pointer",key:t,src:"https://xelene.ru/road/php/images/avatars/"+lt[t],alt:"ava"}))},r=0;r<t;r++)n(r);return a}},{key:"selectImage",value:function(e){var t=e.currentTarget.id;null!==this.state.last_selected&&(document.getElementById(this.state.last_selected).className="changes_avatars pointer");document.getElementById(t).className="changes_avatars select_avatar",this.setState({last_selected:Number(t)})}},{key:"changeAvatar",value:function(e){var t=this;fetch(this.state.api_url+"method=shop.changeAvatar&avatar_id="+e+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(a){e&&(document.getElementById(t.state.last_selected).className="changes_avatars",t.setState({last_selected:null}));a.result?(t.props.this.setSnack(o.a.createElement(E.Q,{layout:"vertical",onClose:function(){return t.props.this.setSnack(null)},before:o.a.createElement(E.e,{size:24,style:ct},o.a.createElement(nt.a,{fill:"#fff",width:14,height:14}))},"\u0410\u0432\u0430\u0442\u0430\u0440 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043c\u0435\u043d\u0435\u043d")),setTimeout((function(){t.props.this.ReloadProfile()}),4e3)):t.props.this.setSnack(o.a.createElement(E.Q,{layout:"vertical",onClose:function(){return t.props.this.setSnack(null)},before:o.a.createElement(rt.a,{width:24,height:24})},a.error.message))})).catch((function(e){t.showErrorAlert(e)}))}},{key:"ChangeId",value:function(){var e=this;this.state.changed_id?fetch(this.state.api_url+"method=shop.changeId&change_id="+this.state.changed_id+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?(e.props.this.setSnack(o.a.createElement(E.Q,{layout:"vertical",onClose:function(){return e.props.this.setSnack(null)},before:o.a.createElement(E.e,{size:24,style:ct},o.a.createElement(nt.a,{fill:"#fff",width:14,height:14}))},"id \u0410\u0433\u0435\u043d\u0442\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043c\u0435\u043d\u0435\u043d")),setTimeout((function(){e.props.this.ReloadProfile()}),4e3)):e.props.this.setSnack(o.a.createElement(E.Q,{layout:"vertical",onClose:function(){return e.props.this.setSnack(null)},before:o.a.createElement(rt.a,{width:24,height:24})},t.error.message))})).catch((function(t){e.showErrorAlert(t)})):this.props.this.setSnack(o.a.createElement(E.Q,{layout:"vertical",onClose:function(){return e.props.this.setSnack(null)},before:o.a.createElement(rt.a,{width:24,height:24})},"\u0412\u044b \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043b\u0438 \u0436\u0435\u043b\u0430\u0435\u043c\u044b\u0439 id"))}},{key:"render",value:function(){var e=this;return o.a.createElement(E.D,{id:this.props.id},o.a.createElement(E.E,{left:o.a.createElement(o.a.Fragment,null,o.a.createElement(E.F,{onClick:function(){return window.history.back()}}),o.a.createElement(E.G,{href:"https://vk.com/@jedi_road-sistema-nachisleniya-ballov-i-shop",target:"_blank",rel:"noopener noreferrer"},o.a.createElement(it.a,null))," ")},"\u041c\u0430\u0433\u0430\u0437\u0438\u043d"),o.a.createElement(E.m,null,o.a.createElement(E.V,{weight:"medium"},"\u041c\u043e\u043d\u0435\u0442\u043a\u0438 \u2014 \u044d\u0442\u043e \u0443\u043d\u0438\u0432\u0435\u0440\u0441\u0430\u043b\u044c\u043d\u0430\u044f \u0443\u0441\u043b\u043e\u0432\u043d\u0430\u044f \u0435\u0434\u0438\u043d\u0438\u0446\u0430 \u0434\u043b\u044f \u043f\u0440\u0438\u043e\u0431\u0440\u0435\u0442\u0435\u043d\u0438\u044f \u0440\u0430\u0437\u043b\u0438\u0447\u043d\u044b\u0445 \u0442\u043e\u0432\u0430\u0440\u043e\u0432 \u0432 \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0435")),o.a.createElement(E.O,{disabled:!0,indicator:this.props.account.balance},"\u0412\u0430\u0448 \u0431\u0430\u043b\u0430\u043d\u0441"),o.a.createElement(E.N,null),o.a.createElement(E.u,null,"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440"),o.a.createElement("div",{className:"scrollImages"},this.images()),o.a.createElement(E.m,null,o.a.createElement(E.g,{onClick:function(){e.changeAvatar(Number(e.state.last_selected)+1)},before:o.a.createElement($e.a,{style:{marginRight:"5px"}}),size:"xl",mode:"secondary",disabled:null===this.state.last_selected},"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0437\u0430 1 \u043c\u043e\u043d\u0435\u0442\u043a\u0443")),o.a.createElement(E.N,null),o.a.createElement(E.u,null,"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0439 \u043d\u0438\u043a"),o.a.createElement(E.m,null,o.a.createElement(E.w,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0436\u0435\u043b\u0430\u0435\u043c\u044b\u0439 \u043d\u0438\u043a (\u043c\u0430\u043a\u0441. 10 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432)",onChange:function(t){return e.onChange(t)},value:this.state.changed_id,maxLength:"10",name:"changed_id"}),o.a.createElement("br",null),o.a.createElement(E.g,{onClick:function(){e.ChangeId(e.state.changed_id)},before:o.a.createElement(Ye.a,{width:28,height:28,style:{marginRight:"5px"}}),size:"xl",mode:"secondary",disabled:this.state.changed_id<=0},"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0437\u0430 2 \u043c\u043e\u043d\u0435\u0442\u043a\u0438")),o.a.createElement(E.N,null),o.a.createElement(E.u,null,"\u041e\u043f\u0446\u0438\u0438"),o.a.createElement(E.m,null,o.a.createElement(E.g,{onClick:function(){return e.setActiveModal("send")},before:o.a.createElement(tt.a,{style:{marginRight:"5px"}}),size:"xl",mode:"secondary"},"\u041f\u0435\u0440\u0435\u0432\u0435\u0441\u0442\u0438")),this.props.this.state.snackbar)}}]),a}(o.a.Component),ht=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e)).state={changed_id:0};var o=n.props.this;return n.setPopout=o.setPopout,n.showErrorAlert=o.showErrorAlert,n.setActiveModal=o.setActiveModal,n}return Object(m.a)(a,[{key:"render",value:function(){return o.a.createElement(E.D,{id:this.props.id},o.a.createElement(E.E,{left:o.a.createElement(E.F,{onClick:function(){return window.history.back()}})}),o.a.createElement("div",{className:"Achives_Block"},o.a.createElement("img",{src:"https://vk.com/images/blog/about/img_about_2_2x.png",alt:"\u0414\u0440\u0430\u043a\u043e\u043d"})),o.a.createElement("div",{style:{marginTop:"20px"},className:"help_title_profile"},"\u0412 \u043d\u0435\u0434\u0430\u043b\u0435\u043a\u043e\u043c \u0431\u0443\u0434\u0443\u0449\u0435\u043c \u0437\u0434\u0435\u0441\u044c \u0447\u0442\u043e-\u0442\u043e \u0431\u0443\u0434\u0435\u0442"),o.a.createElement("div",{className:"help_title_profile"},"\u0416\u0434\u0435\u043c \u0432\u043c\u0435\u0441\u0442\u0435 \u0441 \u0432\u0430\u043c\u0438!"))}}]),a}(o.a.Component),pt=a(161),mt=a.n(pt);function dt(e){return e<10?"0"+e:e}var ft=["\u044f\u043d\u0432","\u0444\u0435\u0432","\u043c\u0430\u0440","\u0430\u043f\u0440","\u043c\u0430\u044f","\u0438\u044e\u043d","\u0438\u044e\u043b","\u0430\u0432\u0433","\u0441\u0435\u043d","\u043e\u043a\u0442","\u043d\u043e\u044f","\u0434\u0435\u043a"],gt=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?",myQuestions:[],fetching:!1,activeTab:"positive",search:"",limiter:20},n}return Object(m.a)(a,[{key:"getFiltresQuestions",value:function(e){return"positive"===this.state.activeTab?e.filter((function(e){return 1===e.mark})):e.filter((function(e){return 0===e.mark}))}},{key:"getFilterSearch",value:function(e){var t=this.state.search.toLowerCase();return e.filter((function(e){return e.text.toLowerCase().indexOf(t)>-1}))}},{key:"limiter",value:function(e){return e.slice(0,this.state.limiter)}},{key:"prepare_questions",value:function(){var e=this;this.props.this.myQuestions(),setTimeout((function(){e.setState({fetching:!1})}),500)}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.this,a=this.getFiltresQuestions(this.props.myQuestions),n=this.getFilterSearch(a),r=this.limiter(n);return o.a.createElement(E.D,{id:this.props.id},o.a.createElement(E.E,{separator:!1,left:o.a.createElement(E.F,{onClick:function(){return window.history.back()}})},"\u041c\u043e\u0438 \u043e\u0442\u0432\u0435\u0442\u044b"),o.a.createElement(E.M,{value:this.state.search,onChange:function(t){e.setState({search:t.target.value})}}),o.a.createElement(E.T,null,o.a.createElement(E.U,{onClick:function(){return e.setState({activeTab:"positive"})},selected:"positive"===this.state.activeTab},"\u041f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435"),o.a.createElement(E.U,{onClick:function(){return e.setState({activeTab:"negative"})},selected:"negative"===this.state.activeTab},"\u041e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u044b\u0435")),o.a.createElement(E.J,{onRefresh:function(){e.setState({fetching:!0}),e.prepare_questions()},isFetching:this.state.fetching},a.length>0?n.length>0?o.a.createElement(o.a.Fragment,null,r.map((function(e,a){return o.a.createElement(o.a.Fragment,{key:e.id},o.a.createElement(E.h,{key:a,className:"pointer",onClick:function(){return t.goTiket(e.ticket_id)},description:new Date(1e3*e.time).getDate()+" "+ft[new Date(1e3*e.time).getMonth()]+" "+new Date(1e3*e.time).getFullYear()+" \u0432 "+dt(new Date(1e3*e.time).getHours())+":"+dt(new Date(1e3*e.time).getMinutes()),size:"l"},e.text),o.a.createElement(E.N,{style:{width:"90%"}}))})),r<n?o.a.createElement(E.m,null,o.a.createElement(E.g,{mode:"secondary",size:"xl",stretched:!0,onClick:function(){return e.setState({limiter:e.state.limiter+10})}},"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0435\u0449\u0451 10 \u043e\u0442\u0432\u0435\u0442\u043e\u0432")):null):o.a.createElement(E.I,{icon:o.a.createElement(mt.a,{width:56,height:56})},"\u041f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e."):o.a.createElement(E.I,{icon:o.a.createElement(C.a,null)},"\u0423\u043f\u0441, \u043a\u0430\u0436\u0435\u0442\u0441\u044f, \u0437\u0434\u0435\u0441\u044c \u043d\u0435\u0442 \u0432\u0430\u0448\u0438\u0445 \u043e\u0442\u0432\u0435\u0442\u043e\u0432.")))}}]),a}(o.a.Component),_t=a(164),Et=a.n(_t),vt=a(165),kt=a.n(vt),wt=a(167),bt=a.n(wt),yt=a(163),At=a.n(yt),Ct=a(162),Pt=a.n(Ct),St=a(166),jt=a.n(St),Ot=a(71),Mt=a.n(Ot),xt=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?"};var o=n.props.this;return n.setPopout=o.setPopout,n.showErrorAlert=o.showErrorAlert,n.showAlert=o.showAlert,n.setActiveModal=o.setActiveModal,n.onChange=function(e){var t=e.currentTarget.name,a=e.currentTarget.value;n.setState(Object(h.a)({},t,a))},n}return Object(m.a)(a,[{key:"deleteAccount",value:function(){var e=this;fetch(this.state.api_url+"method=account.delete&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?l.a.send("VKWebAppClose",{status:"success"}):e.showErrorAlert(t.error.message)})).catch((function(t){e.showErrorAlert(t)}))}},{key:"nofinc",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.this;return o.a.createElement(E.D,{id:this.props.id},o.a.createElement(E.E,{left:o.a.createElement(E.F,{onClick:function(){return window.history.back()}})},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),o.a.createElement(E.t,null,o.a.createElement(E.O,{disabled:!0,indicator:this.props.account.age,before:o.a.createElement(Pt.a,null)},"\u0412\u0430\u0448 \u0432\u043e\u0437\u0440\u0430\u0441\u0442")),o.a.createElement(E.t,null,o.a.createElement(E.O,{before:o.a.createElement(At.a,null),className:"pointer",expandable:!0,onClick:function(){return t.goPanel("schemechange")}},"\u0421\u043c\u0435\u043d\u0430 \u0442\u0435\u043c\u044b"),o.a.createElement(E.O,{className:"pointer",indicator:this.props.account.verified?"\u041f\u0440\u0438\u0441\u0432\u043e\u0435\u043d":null,disabled:this.props.account.verified,expandable:!this.props.account.verified,onClick:this.props.account.verified?function(){return e.nofinc()}:function(){return t.goPanel("verf")},before:o.a.createElement(Et.a,null)},"\u0412\u0435\u0440\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f")),o.a.createElement(E.t,null,o.a.createElement(E.O,{className:"pointer",disabled:!0,indicator:o.a.createElement(E.l,null,this.props.account.balance),before:o.a.createElement(kt.a,null)},"\u0411\u0430\u043b\u0430\u043d\u0441"),Object(E.Y)()!==E.v?o.a.createElement(E.O,{className:"pointer",expandable:!0,href:"https://vk.com/jedi_road?source=description&w=donut_payment-188280516",target:"_blank",rel:"noopener noreferrer",before:o.a.createElement(Mt.a,null)},"VK Donut"):null),o.a.createElement(E.t,null,o.a.createElement(E.O,{className:"pointer",expandable:!0,onClick:function(){e.props.this.goPanel("info")},before:o.a.createElement(jt.a,null)},"\u041e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438")),o.a.createElement(E.t,null,o.a.createElement(E.i,{mode:"danger",onClick:function(){return e.setPopout(o.a.createElement(E.d,{actionsLayout:"vertical",actions:[{title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442",autoclose:!0,mode:"destructive",action:function(){return e.deleteAccount()}},{title:"\u041d\u0435\u0442, \u044f \u043d\u0430\u0436\u0430\u043b \u0441\u044e\u0434\u0430 \u0441\u043b\u0443\u0447\u0430\u0439\u043d\u043e",autoclose:!0,style:"cancel"}],onClose:function(){return e.setPopout(null)}},o.a.createElement("h2",null,"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435, \u043e\u043f\u0430\u0441\u043d\u043e\u0441\u0442\u044c"),o.a.createElement("p",null,"\u0414\u0430\u043d\u043d\u043e\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 \u0432\u0435\u0434\u0451\u0442 \u043a \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u044e \u0432\u0430\u0448\u0435\u0433\u043e \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430: \u0432\u0441\u0435\u0445 \u043e\u0442\u0432\u0435\u0442\u043e\u0432, \u0434\u043e\u0441\u0442\u0438\u0436\u0435\u043d\u0438\u0439 \u0438 \u0434\u0440\u0443\u0433\u043e\u0439 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430 \u043d\u0430 \u0432\u0430\u0448\u0435\u043c \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0435. \u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0435\u0433\u043e \u0443\u0434\u0430\u043b\u0438\u0442\u044c?")))},before:o.a.createElement(bt.a,null)},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442")),this.props.this.state.snackbar)}}]),a}(o.a.Component),Ft=a(168),Nt=a.n(Ft),Tt=a(169),Dt=a.n(Tt),Lt=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?"};var r=n.props.this;return n.setPopout=r.setPopout,n.showErrorAlert=r.showErrorAlert,n.showAlert=r.showAlert,n.setActiveModal=r.setActiveModal,n.onChange=function(e){var t=e.currentTarget.name,a=e.currentTarget.value;n.setState(Object(h.a)({},t,a))},n.ChangeScheme=function(e){n.setPopout(o.a.createElement(E.L,null));var t=e.currentTarget.value;0===t&&n.props.this.ChangeData("scheme",n.props.default_scheme),fetch(n.state.api_url+"method=account.changeScheme&scheme="+t+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result?setTimeout((function(){n.props.this.ReloadProfile(),n.setPopout(null)}),3e3):n.showErrorAlert(e.error.message)})).catch((function(e){n.showErrorAlert(e)}))},n}return Object(m.a)(a,[{key:"render",value:function(){return o.a.createElement(E.D,{id:this.props.id},o.a.createElement(E.E,{left:o.a.createElement(E.F,{onClick:function(){return window.history.back()}})},"\u0421\u043c\u0435\u043d\u0430 \u0442\u0435\u043c\u044b"),o.a.createElement(E.u,{mode:"secondary"},"\u041f\u0440\u0435\u0434\u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440"),o.a.createElement(E.N,null),o.a.createElement(G,{title:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c",is_mine:!1,avatar:Nt.a,onClick:function(){},clickable:!1},"\u041e, \u0442\u0443\u0442 \u043c\u043e\u0436\u043d\u043e \u043c\u0435\u043d\u044f\u0442\u044c \u0442\u0435\u043c\u0443"),o.a.createElement(G,{title:"\u0410\u0433\u0435\u043d\u0442 \u041f\u043e\u0434\u0434\u0435\u0440\u0436\u043a\u0438",is_mine:!0,avatar:Dt.a,onClick:function(){},clickable:!1},"\u0414\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e"),o.a.createElement(E.N,{style:{marginTop:10}}),o.a.createElement(E.q,null,o.a.createElement("div",null,o.a.createElement(E.K,{name:"radio",className:"pointer",onChange:this.ChangeScheme,value:"1",defaultChecked:1===this.props.account.scheme},"\u0421\u0432\u0435\u0442\u043b\u0430\u044f \u0442\u0435\u043c\u0430"),o.a.createElement(E.K,{name:"radio",className:"pointer",onChange:this.ChangeScheme,value:"2",defaultChecked:2===this.props.account.scheme},"\u0422\u0451\u043c\u043d\u0430\u044f \u0442\u0435\u043c\u0430"),o.a.createElement(E.K,{name:"radio",className:"pointer",onChange:this.ChangeScheme,value:"0",description:"\u0421\u0435\u0440\u0432\u0438\u0441 \u0431\u0443\u0434\u0435\u0442 \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c \u0442\u0435\u043c\u0443, \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u0443\u044e \u0432 \u043d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0430\u0445 \u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435",defaultChecked:0===this.props.account.scheme},"\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438"))))}}]),a}(o.a.Component),Bt=a(170),Rt=a.n(Bt),zt=a(172),Vt=a.n(zt),Ht=a(171),qt=a.n(Ht),It=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={},n}return Object(m.a)(a,[{key:"render",value:function(){return o.a.createElement(E.D,{id:this.props.id},o.a.createElement(E.E,{left:o.a.createElement(E.F,{onClick:function(){return window.history.back()}})},"\u041e \u0441\u0435\u0440\u0432\u0438\u0441\u0435"),o.a.createElement(E.I,{icon:o.a.createElement("img",{src:Rt.a,alt:"jedi"})},"\u0412\u0435\u0440\u0441\u0438\u044f 2.0"),o.a.createElement(E.N,null),o.a.createElement(E.t,null,o.a.createElement(E.O,{className:"pointer",before:o.a.createElement(qt.a,null),href:"https://vk.com/jedi_road",target:"_blank",rel:"noopener noreferrer"},"\u041e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u043e"),o.a.createElement(E.O,{className:"pointer",before:o.a.createElement(Vt.a,null),href:"https://vk.me/jedi_road",target:"_blank",rel:"noopener noreferrer"},"\u041d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u043d\u0430\u043c")),o.a.createElement(E.N,null),o.a.createElement(E.p,null,"\u0412\u0441\u0435\u0433\u0434\u0430 \u0432\u0430\u0448\u0430,",o.a.createElement("br",null),"\u041a\u043e\u043c\u0430\u043d\u0434\u0430 Jedi"))}}]),a}(o.a.Component),Wt=a(173),Kt=a.n(Wt),Qt=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?",check1:!1,title:"",description:"",verfstatus:-1};var o=n.props.this;return n.setPopout=o.setPopout,n.showErrorAlert=o.showErrorAlert,n.showAlert=o.showAlert,n.setActiveModal=o.setActiveModal,n.onChange=function(e){var t=e.currentTarget.name,a=e.currentTarget.value;n.setState(Object(h.a)({},t,a))},n}return Object(m.a)(a,[{key:"handleForm",value:function(){var e=this;this.setPopout(o.a.createElement(E.L,null)),fetch(this.state.api_url+"method=account.sendRequestVerf&title="+encodeURIComponent(this.state.title)+"&description="+encodeURIComponent(this.state.description)+"&cond1=1&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?e.checkVerfStatus():e.showErrorAlert(t.error.message)})).catch((function(t){e.showErrorAlert(t)}))}},{key:"checkVerfStatus",value:function(){var e=this;fetch(this.state.api_url+"method=account.getVerfStatus&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?(e.setState({verfstatus:t.response}),e.setPopout(null)):e.showErrorAlert(t.error.message)})).catch((function(t){e.showErrorAlert(t)}))}},{key:"validateTitle",value:function(e){if(e.length>0){var t=["error","\u0422\u0435\u043a\u0441\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 2000 \u0438 \u043d\u0435 \u043c\u0435\u043d\u044c\u0448\u0435 6 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"];return e.length<=2e3&&e.length>5&&(t=["valid",""]),t}return["default",""]}},{key:"validateDesc",value:function(e){if(e.length>0){var t=["error","\u0422\u0435\u043a\u0441\u0442 \u0434\u043e\u043b\u0436\u0435\u043d \u0431\u044b\u0442\u044c \u043d\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 2000 \u0438 \u043d\u0435 \u043c\u0435\u043d\u044c\u0448\u0435 11 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"];return e.length<=2e3&&e.length>10&&(t=["valid",""]),t}return["default",""]}},{key:"componentDidMount",value:function(){this.setPopout(o.a.createElement(E.L,null)),this.checkVerfStatus()}},{key:"render",value:function(){var e=this;return o.a.createElement(E.D,{id:this.props.id},o.a.createElement(E.E,{left:o.a.createElement(o.a.Fragment,null,o.a.createElement(E.F,{onClick:function(){return window.history.back()}}))},"\u0412\u0435\u0440\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044f"),-1!==this.state.verfstatus?2===this.state.verfstatus?o.a.createElement(o.a.Fragment,null,o.a.createElement(E.I,{icon:o.a.createElement("img",{src:Kt.a,alt:"\u041e\u0436\u0438\u0434\u0430\u0439\u0442\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u0438\u044f",style:{width:250,height:200}}),header:"\u0412\u044b \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u043b\u0438 \u0437\u0430\u044f\u0432\u043a\u0443 \u043d\u0430 \u0432\u0435\u0440\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044e"},"\u0412\u044b \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u043b\u0438 \u0437\u0430\u044f\u0432\u043a\u0443 \u043d\u0430 \u0432\u0435\u0440\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u044e, \u043f\u043e \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u0438 \u043f\u0440\u043e\u0432\u0435\u0440\u043a\u0438 \u2014 \u043c\u044b \u0441\u043e\u043e\u0431\u0449\u0438\u043c \u0412\u0430\u043c \u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430\u0445 \u043e\u0444\u0438\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u0441\u0442\u0430\u0442\u0443\u0441\u0430.",o.a.createElement("br",null),o.a.createElement("br",null),"\u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0435\u043a\u0442\u0430 \u043d\u0435 \u0441\u043e\u043e\u0431\u0449\u0430\u0435\u0442 \u043e \u043f\u0440\u043e\u0446\u0435\u0441\u0441\u0435 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u0438\u044f \u0432\u0435\u0440\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438.")):o.a.createElement(o.a.Fragment,null,o.a.createElement(E.q,null,o.a.createElement(E.r,{top:"\u041e\u0431\u0449\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f",bottom:this.validateTitle(this.state.title)[1]},o.a.createElement(E.w,{maxLength:"2000",onChange:this.onChange,name:"title",status:this.validateTitle(this.state.title)[0],placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0432\u043e\u0439 \u0442\u0435\u043a\u0441\u0442..."})),o.a.createElement(E.r,{top:"\u041f\u043e\u0447\u0435\u043c\u0443 \u0432\u044b \u0440\u0435\u0448\u0438\u043b\u0438 \u0432\u0435\u0440\u0438\u0444\u0438\u0446\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",bottom:this.validateDesc(this.state.description)[1]},o.a.createElement(E.W,{maxLength:"2000",status:this.validateDesc(this.state.description)[0],name:"description",onChange:this.onChange,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0432\u043e\u0439 \u0442\u0435\u043a\u0441\u0442..."})),o.a.createElement(E.j,{checked:this.state.check1,onChange:function(){return e.state.check1?e.setState({check1:!1}):e.setState({check1:!0})}},"\u0421\u043e\u0433\u043b\u0430\u0441\u0435\u043d \u0441 ",o.a.createElement(E.x,{href:"https://vk.com/@jedi_road-chto-takoe-verifikaciya-i-kak-ee-poluchit-galochku",target:"_blank",rel:"noopener noreferrer"},"\u043f\u0440\u0430\u0432\u0438\u043b\u0430\u043c\u0438")," \u0432\u0435\u0440\u0438\u0444\u0438\u043a\u0430\u0446\u0438\u0438")),o.a.createElement(E.m,null,o.a.createElement(E.g,{size:"xl",stretched:!0,disabled:!this.state.check1||!("valid"===this.validateTitle(this.state.title)[0])||!("valid"===this.validateDesc(this.state.description)[0]),onClick:function(){return e.handleForm()}},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u043d\u0430 \u0440\u0430\u0441\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u0438\u0435"))):null,this.props.this.state.snackbar)}}]),a}(o.a.Component),Ut=a(175),Gt=a.n(Ut),Jt=a(176),Xt=a.n(Jt),Yt=a(174),Zt=a.n(Yt);function $t(e,t){var a="foregroundColor";return"bright_light"===t&&(a="#000"),"space_gray"===t&&(a="#fff"),Le.a.createQR("https://vk.com/app7409818#agent_id="+e,{qrSize:120,isShowLogo:!0,foregroundColor:a})}var ea={backgroundColor:"var(--accent)"},ta=Object(E.Z)(function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?",activePanel:"profile",activeModal:null,modalHistory:[],popout:n.props.popout,ticket_id:null,history:["profile"],active_other_profile:0,other_profile:null,ban_reason:"",comment:"",transfer:{avatar:"",comment:""},moneys:null,money_transfer_send:"",money_transfer_count:"",AgeUser:0,snackbar:null,myQuestions:[]},n.changeData=n.props.this.changeData,n.playAudio=n.props.this.playAudio,n.ReloadProfile=n.props.reloadProfile,n.ChangeData=n.props.this.changeData,n.setPopout=function(e){n.setState({popout:e})},n.myQuestions=function(){fetch(n.state.api_url+"method=tickets.getByModeratorAnswers&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result&&(n.setState({myQuestions:e.response}),setTimeout((function(){n.setState({fetching:!1}),n.setPopout(null)}),500))})).catch((function(e){n.props.this.showErrorAlert(e)}))},n.handlePopstate=function(e){e.preventDefault(),n.goBack()},n.setSnack=function(e){n.setState({snackbar:e})},n.goTiket=function(e){n.setPopout(o.a.createElement(E.L,null)),n.setState({ticket_id:e}),n.goPanel("ticket"),n.setPopout(null)},n.onChange=function(e){var t=e.currentTarget.name,a=e.currentTarget.value;n.setState(Object(h.a)({},t,a))},n.goOtherProfile=function(e){n.setState({active_other_profile:e}),n.goPanel("other_profile")},n.modalBack=function(){n.setActiveModal(n.state.modalHistory[n.state.modalHistory.length-2])},n.goBack=function(){var e=n.state.history;n.setActiveModal(null),1===e.length?l.a.send("VKWebAppClose",{status:"success"}):e.length>1&&(e.pop(),n.setState({activePanel:e[e.length-1],snackbar:null}))},n.goPanel=function(e){var t=n.state.history.slice();t.push(e),window.history.pushState({panel:e},e),n.setState({history:t,activePanel:e,snackbar:null})},n.setActiveModal=function(e){e=e||null;var t=n.state.modalHistory?Object(v.a)(n.state.modalHistory):[];null===e?t=[]:-1!==t.indexOf(e)?t=t.splice(0,t.indexOf(e)+1):t.push(e),n.setState({activeModal:e,modalHistory:t})},n.showAlert=function(e,t){n.setState({popout:o.a.createElement(E.d,{actions:[{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",autoclose:!0,mode:"cancel"}],onClose:function(){return n.setPopout(null)}},o.a.createElement("h2",null,e),o.a.createElement("p",null,t))})},n.showErrorAlert=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n.setPopout(o.a.createElement(E.d,{actions:[{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,mode:"cancel"}],onClose:function(){return n.setPopout(null)}},o.a.createElement("h2",null,"\u041e\u0448\u0438\u0431\u043a\u0430"),e?o.a.createElement("p",null,e):o.a.createElement("p",null,"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430!")))},n}return Object(m.a)(a,[{key:"ChangeAge",value:function(e){var t=this;this.setState({popout:o.a.createElement(E.L,null)}),fetch(this.state.api_url+"method=account.setAge&age="+e+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result&&t.setState({popout:null})})).catch((function(e){t.showErrorAlert(e)}))}},{key:"userBan",value:function(e,t){var a=this;this.setPopout(o.a.createElement(E.L,null)),fetch(this.state.api_url+"method=account.ban&agent_id="+e+"&banned=true&reason="+t+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result?(a.setActiveModal(null),a.showAlert("\u0423\u0441\u043f\u0435\u0445","\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0437\u0430\u0431\u0430\u043d\u0435\u043d"),a.setPopout(null)):a.showErrorAlert(e.error.message)})).catch((function(e){a.showErrorAlert(e)}))}},{key:"sendMoney",value:function(){var e=this;this.setPopout(o.a.createElement(E.L,null)),fetch(this.state.api_url+"method=transfers.send&summa="+this.state.money_transfer_count+"&send_to="+this.state.money_transfer_send+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?setTimeout((function(){e.ReloadProfile(),e.setPopout(null),e.setState({moneys:t.response}),e.setActiveModal("moneys")}),4e3):e.showErrorAlert(t.error.message)}))}},{key:"componentDidMount",value:function(){window.addEventListener("popstate",this.handlePopstate),this.myQuestions()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("popstate",this.handlePopstate)}},{key:"render",value:function(){var e=this,t=this.props.platform,a=o.a.createElement(E.C,{activeModal:this.state.activeModal},o.a.createElement(ge,{id:"prom",onClose:function(){return e.setActiveModal(null)},action:function(){return e.setActiveModal(null)}}),o.a.createElement(ve,{id:"donut",onClose:function(){return e.setActiveModal(null)},action:function(){return e.setActiveModal(null)}}),o.a.createElement(E.z,{id:"ban_user",onClose:function(){return e.setActiveModal(null)},icon:o.a.createElement(E.e,{src:this.state.other_profile?this.state.other_profile.avatar.url:null,size:72}),header:"\u0417\u0430\u0431\u0430\u043d\u0438\u0442\u044c \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",actions:[{title:"\u0417\u0430\u0431\u0430\u043d\u0438\u0442\u044c! \ud83e\udd2c",mode:"secondary",action:function(){e.userBan(e.state.other_profile?e.state.other_profile.id:0,e.state.ban_reason)}}]},o.a.createElement(E.w,{disabled:!0,value:this.state.other_profile?this.state.other_profile.id<0?-this.state.other_profile.id:this.state.other_profile.id:null}),o.a.createElement("br",null),o.a.createElement(E.w,{maxLength:"100",name:"ban_reason",onChange:function(t){return e.onChange(t)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0440\u0438\u0447\u0438\u043d\u0443 \u0431\u0430\u043d\u0430",value:this.state.ban_reason})),o.a.createElement(E.z,{id:"send",onClose:function(){return e.setActiveModal(null)},icon:o.a.createElement(Zt.a,null),header:"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0439\u0442\u0435 \u043c\u043e\u043d\u0435\u0442\u043a\u0438 \u0434\u0440\u0443\u0437\u044c\u044f\u043c",actions:[{title:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c",mode:"secondary",disabled:!0,action:function(){e.sendMoney()}}]},o.a.createElement(E.w,{maxLength:"5",onChange:function(t){return e.onChange(t)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 id \u0430\u0433\u0435\u043d\u0442\u0430",name:"money_transfer_send",value:this.state.money_transfer_send}),o.a.createElement("br",null),o.a.createElement(E.w,{maxLength:"5",name:"money_transfer_count",onChange:function(t){return e.onChange(t)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043b-\u0432\u043e \u043c\u043e\u043d\u0435\u0442\u043e\u043a",value:this.state.money_transfer_count})),o.a.createElement(E.z,{id:"moneys",onClose:function(){return e.setActiveModal(null)},icon:o.a.createElement(E.e,{src:this.state.moneys?this.state.moneys.avatar:null,size:72}),header:this.state.moneys?"\u0412\u0430\u0448 \u0431\u0430\u043b\u0430\u043d\u0441: "+this.state.moneys.money:null,caption:this.state.moneys?this.state.moneys.text:null,actions:[{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",mode:"secondary",action:function(){e.setActiveModal(null),e.setState({moneys:null,money_transfer_count:"",money_transfer_send:""})}}]}),o.a.createElement(E.z,{id:"transfer",onClose:function(){return e.setActiveModal(null)},icon:o.a.createElement(E.e,{src:this.state.transfer.avatar,size:72}),header:"\u041f\u0435\u0440\u0435\u0432\u043e\u0434 \u043c\u043e\u043d\u0435\u0442\u043e\u043a",caption:this.state.transfer.comment,actions:[{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",mode:"secondary",action:function(){e.setActiveModal(null)}}]}),o.a.createElement(E.A,{id:"share",onClose:this.modalBack,header:o.a.createElement(E.B,{right:t===E.a&&o.a.createElement(E.u,{onClick:this.modalBack},o.a.createElement(we.a,null)),left:t===E.v&&o.a.createElement(E.G,{onClick:this.modalBack},o.a.createElement(we.a,null))},"\u041f\u043e\u0434\u0435\u043b\u0438\u0442\u044c\u0441\u044f")},o.a.createElement(E.y,null,o.a.createElement(E.h,{onClick:function(){return e.setActiveModal("qr")},before:o.a.createElement(Gt.a,{width:28,height:28})},"QR-code"),o.a.createElement(E.h,{onClick:function(){l.a.send("VKWebAppCopyText",{text:"https://vk.com/app7409818#agent_id="+e.props.account.id}),e.setActiveModal(null),e.setSnack(o.a.createElement(E.Q,{layout:"vertical",onClose:function(){return e.setSnack(null)},before:o.a.createElement(E.e,{size:24,style:ea},o.a.createElement(nt.a,{fill:"#fff",width:14,height:14}))},"\u0421\u0441\u044b\u043b\u043a\u0430 \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0430"))},before:o.a.createElement(Xt.a,{width:28,height:28})},"\u0421\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443"))),o.a.createElement(E.A,{id:"qr",onClose:this.modalBack,header:o.a.createElement(E.B,{right:t===E.a&&o.a.createElement(E.u,{onClick:this.modalBack},o.a.createElement(we.a,null)),left:t===E.v&&o.a.createElement(E.G,{onClick:this.modalBack},o.a.createElement(we.a,null))},"QR")},o.a.createElement("div",{className:"qr",dangerouslySetInnerHTML:{__html:$t(this.props.account.id,this.props.this.state.scheme)}}),o.a.createElement("br",null),o.a.createElement("div",{className:"qr"},"\u041e\u0442\u0441\u043a\u0430\u043d\u0438\u0440\u0443\u0439\u0442\u0435 \u043a\u0430\u043c\u0435\u0440\u043e\u0439 \u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435!"),o.a.createElement("br",null)),o.a.createElement(be,{id:"comment",onClose:this.modalBack,comment:this.state.comment}));return o.a.createElement(E.X,{id:this.props.id,activePanel:this.state.activePanel,modal:a,popout:this.state.popout,onSwipeBack:this.goBack},o.a.createElement(Je,{id:"profile",this:this,account:this.props.account}),o.a.createElement(gt,{id:"qu",this:this,account:this.props.account,myQuestions:this.state.myQuestions}),o.a.createElement(ut,{id:"market",this:this,account:this.props.account}),o.a.createElement(ht,{id:"achievements",this:this,account:this.props.account}),o.a.createElement(xt,{id:"settings",this:this,account:this.props.account}),o.a.createElement(Lt,{id:"schemechange",this:this,default_scheme:this.props.default_scheme,account:this.props.account}),o.a.createElement(It,{id:"info",this:this}),o.a.createElement(Qt,{id:"verf",this:this,account:this.props.account}),o.a.createElement($,{id:"ticket",this:this,ticket_id:this.state.ticket_id,account:this.props.account}),o.a.createElement(me,{id:"other_profile",this:this,agent_id:this.state.active_other_profile,account:this.props.account}))}}]),a}(o.a.Component)),aa=a(177),na=a.n(aa),oa=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e)).state={};var o=n.props.this;return n.setPopout=o.setPopout,n.showErrorAlert=o.showErrorAlert,n}return Object(m.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement(E.D,{id:this.props.id},o.a.createElement(E.E,null,"Road to Jedi"),o.a.createElement(E.I,{icon:o.a.createElement("img",{style:{width:250,height:130},src:na.a,alt:"\u0422\u0443\u0442 \u0431\u044b\u043b\u0430 \u0438\u043a\u043e\u043d\u043a\u0430... Press F to pay respect..."}),header:"\u041e\u0442\u0432\u0435\u0447\u0430\u0439\u0442\u0435 \u043d\u0430 \u0440\u0430\u0437\u043d\u044b\u0435 \u0432\u043e\u043f\u0440\u043e\u0441\u044b \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435"},"\u0412\u0430\u043c \u043f\u0440\u0438\u0441\u0432\u043e\u0435\u043d \u043d\u043e\u043c\u0435\u0440 #",void 0!==this.props.account.id?this.props.account.id:"undefined",o.a.createElement("br",null),o.a.createElement("br",null),"\u041f\u043e\u043c\u043d\u0438\u0442\u0435, \u043e\u0442\u0432\u0435\u0447\u0430\u0442\u044c \u043d\u0443\u0436\u043d\u043e \u0432\u0434\u0443\u043c\u0447\u0438\u0432\u043e. \u041f\u043e\u0441\u043b\u0435 \u043e\u0442\u0432\u0435\u0442\u0430 \u041a\u043e\u043c\u0430\u043d\u0434\u0430 \u043d\u0430\u0448\u0438\u0445 \u0441\u043f\u0435\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0445 \u0430\u0433\u0435\u043d\u0442\u043e\u0432 \u043f\u0440\u043e\u0432\u0435\u0440\u0438\u0442 \u0435\u0433\u043e \u0438 \u0432 \u0441\u043b\u0443\u0447\u0430\u0435 \u043e\u0442\u0440\u0438\u0446\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0439 \u043e\u0446\u0435\u043d\u043a\u0438 \u2014 \u043e\u0441\u0442\u0430\u0432\u0438\u0442 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439, \u0435\u0441\u043b\u0438 \u0432\u0441\u0435 \u0445\u043e\u0440\u043e\u0448\u043e, \u0412\u044b \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435.",o.a.createElement("br",null),o.a.createElement("br",null),"\u0421\u0435\u0440\u0432\u0438\u0441 \u043d\u0435 \u0438\u043c\u0435\u0435\u0442 \u043e\u0442\u043d\u043e\u0448\u0435\u043d\u0438\u044f \u043a \u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435"),o.a.createElement(E.m,null,o.a.createElement(E.g,{size:"xl",stretched:!0,onClick:function(){e.props.this.goPanel("start2")},mode:"secondary"},"\u0414\u0430\u043b\u0435\u0435")))}}]),a}(o.a.Component),ra=a(178),sa=a.n(ra),ia=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?",AgeUser:0};var o=n.props.this;return n.setPopout=o.setPopout,n.showErrorAlert=o.showErrorAlert,n}return Object(m.a)(a,[{key:"ChangeAge",value:function(e){var t=this;this.setPopout(o.a.createElement(E.L,null)),fetch(this.state.api_url+"method=account.setAge&age="+e+"&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result&&console.log("registred")})).catch((function(e){t.showErrorAlert(e)}))}},{key:"render",value:function(){var e=this;return o.a.createElement(E.D,{id:this.props.id},o.a.createElement(E.E,{left:o.a.createElement(E.F,{onClick:function(){return window.history.back()}})},"Road to Jedi"),o.a.createElement(E.I,{icon:o.a.createElement("img",{style:{width:200,height:180},src:sa.a,alt:"\u0422\u0443\u0442 \u0431\u044b\u043b\u0430 \u0438\u043a\u043e\u043d\u043a\u0430... Press F to pay respect..."}),header:"\u041f\u0440\u0435\u0436\u0434\u0435 \u0447\u0435\u043c \u043d\u0430\u0447\u0430\u0442\u044c. \u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435, \u043e\u043d\u0438 \u043f\u043e\u043c\u043e\u0433\u0443\u0442 \u043d\u0430\u043c \u043e\u0446\u0435\u043d\u0438\u0432\u0430\u0442\u044c \u0412\u0430\u0448\u0438 \u043e\u0442\u0432\u0435\u0442\u044b."}),o.a.createElement(E.q,null,o.a.createElement(E.s,{header:"\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u0412\u0430\u0436\u043d\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f",mode:"error"},"\u0421\u0435\u0440\u0432\u0438\u0441 \u043d\u0435 \u0438\u043c\u0435\u0435\u0442 \u043e\u0442\u043d\u043e\u0448\u0435\u043d\u0438\u044f \u043a \u0410\u0434\u043c\u0438\u043d\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438 \u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435, \u0430 \u0442\u0430\u043a\u0436\u0435 \u0438\u0445 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u043a\u0430\u043c."),o.a.createElement(E.P,{min:10,max:80,step:1,value:this.state.AgeUser,onChange:function(t){e.setState({AgeUser:t})},top:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u0432\u043e\u0439 \u0432\u043e\u0437\u0440\u0430\u0441\u0442: ".concat(this.state.AgeUser)})),o.a.createElement(E.I,null,"\u0423\u0431\u0435\u0434\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u043f\u0440\u043e\u0441\u0438\u043c, \u0443\u043a\u0430\u0437\u044b\u0432\u0430\u0442\u044c \u0442\u043e\u043b\u044c\u043a\u043e \u043d\u0430\u0441\u0442\u043e\u044f\u0449\u0438\u0435 \u0434\u0430\u043d\u043d\u044b\u0435, \u0434\u043b\u044f \u0438\u0437\u0431\u0435\u0436\u0430\u043d\u0438\u044f \u0431\u043e\u043b\u044c\u0448\u043e\u0433\u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u043d\u0435\u0432\u0435\u0440\u043d\u044b\u0445 \u043e\u0446\u0435\u043d\u043e\u043a \u043e\u0442 \u043b\u0438\u0446\u0430 \u043c\u043e\u0434\u0435\u0440\u0430\u0446\u0438\u0438."),o.a.createElement(E.m,null,o.a.createElement(E.g,{size:"xl",stretched:!0,mode:"secondary",disabled:!this.state.AgeUser,onClick:function(){e.ChangeAge(e.state.AgeUser),setTimeout((function(){e.props.this.ReloadProfile(),e.props.this.changeData("activeStory","questions")}),2e3)}},"\u041f\u0440\u0438\u0441\u0442\u0443\u043f\u0438\u0442\u044c!")))}}]),a}(o.a.Component),la=!1,ca=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={api_url:"https://xelene.ru/road/php/index.php?",activePanel:"start",popout:n.props.popout,history:["start"]},n.changeData=n.props.this.changeData,n.ReloadProfile=n.props.reloadProfile,n.setPopout=function(e){n.setState({popout:e})},n.handlePopstate=function(e){e.preventDefault(),n.goBack()},n.onChange=function(e){var t=e.currentTarget.name,a=e.currentTarget.value;n.setState(Object(h.a)({},t,a))},n.modalBack=function(){n.setActiveModal(n.state.modalHistory[n.state.modalHistory.length-2])},n.goBack=function(){if(la){var e=n.state.history;window.history.pushState({panel:e[e.length-1]},e[e.length-1])}else{la=!0;var t=n.state.history;1===t.length?l.a.send("VKWebAppClose",{status:"success"}):t.length>1&&(t.pop(),n.setState({activePanel:t[t.length-1]}),n.setPopout(o.a.createElement(E.L,null)),setTimeout((function(){n.setPopout(null)}),500)),setTimeout((function(){la=!1}),500)}},n.goPanel=function(e){var t=n.state.history.slice();t.push(e),window.history.pushState({panel:e},e),n.setState({history:t,activePanel:e})},n.showAlert=function(e,t){n.setState({popout:o.a.createElement(E.d,{actions:[{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",autoclose:!0,mode:"cancel"}],onClose:function(){return n.setPopout(null)}},o.a.createElement("h2",null,e),o.a.createElement("p",null,t))})},n.showErrorAlert=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n.setPopout(o.a.createElement(E.d,{actions:[{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,mode:"cancel"}],onClose:function(){return n.setPopout(null)}},o.a.createElement("h2",null,"\u041e\u0448\u0438\u0431\u043a\u0430"),e?o.a.createElement("p",null,e):o.a.createElement("p",null,"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430!")))},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("popstate",this.handlePopstate),this.changeData("need_epic",!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("popstate",this.handlePopstate)}},{key:"render",value:function(){return o.a.createElement(E.X,{id:this.props.id,activePanel:this.state.activePanel,popout:this.state.popout,onSwipeBack:this.goBack},o.a.createElement(oa,{id:"start",account:this.props.account,this:this}),o.a.createElement(ia,{id:"start2",account:this.props.account,this:this}))}}]),a}(o.a.Component),ua=a(180),ha=a.n(ua),pa=a(179),ma=a.n(pa),da=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),fa={backgroundColor:"var(--accent)"};function ga(e){for(var t in e)return!1;return!0}var _a=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(p.a)(this,a),(n=t.call(this,e)).state={account:[],activeStory:"questions",scheme:"bright_light",default_scheme:"bright_light",api_url:"https://xelene.ru/road/php/index.php?",popout:o.a.createElement(E.L,null),snackbar:null,switchKeys:!1,need_epic:!0,first_start:!1},n.changeData=function(e,t){n.setState(Object(h.a)({},e,t))},n.LoadProfile=function(){fetch(n.state.api_url+"method=account.get&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(e){e.result&&(n.setState({account:e.response,popout:null,switchKeys:e.response.noti}),ga(n.state.account)?(n.setState({scheme:e.scheme}),"space_gray"===e.scheme?da&&l.a.send("VKWebAppSetViewSettings",{status_bar_style:"light",action_bar_color:"#19191A",navigation_bar_color:"#19191A"}):da&&l.a.send("VKWebAppSetViewSettings",{status_bar_style:"dark",action_bar_color:"#FFFFFF",navigation_bar_color:"#FFFFFF"})):(0===Number(n.state.account.scheme)&&(n.setState({scheme:n.state.default_scheme}),"bright_light"===n.state.default_scheme&&da&&l.a.send("VKWebAppSetViewSettings",{status_bar_style:"dark",action_bar_color:"#FFFFFF",navigation_bar_color:"#FFFFFF"}),"space_gray"===n.state.default_scheme&&da&&l.a.send("VKWebAppSetViewSettings",{status_bar_style:"light",action_bar_color:"#19191A",navigation_bar_color:"#19191A"})),1===Number(n.state.account.scheme)&&(n.setState({scheme:"bright_light"}),da&&l.a.send("VKWebAppSetViewSettings",{status_bar_style:"dark",action_bar_color:"#FFFFFF",navigation_bar_color:"#FFFFFF"})),2===Number(n.state.account.scheme)&&(n.setState({scheme:"space_gray"}),da&&l.a.send("VKWebAppSetViewSettings",{status_bar_style:"light",action_bar_color:"#19191A",navigation_bar_color:"#19191A"}))))})).catch((function(e){n.showErrorAlert(e)}))},n.setPopout=function(e){n.setState({popout:e})},n.playAudio=function(){if(n.audio.paused){n.audio.volume=.1,n.audio.currentTime=0;var e=n.audio.play();void 0!==e&&e.then((function(e){})).catch((function(e){console.info(e)}))}else n.audio.pause();n.setState({paused:n.audio.paused})},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.audio=new Audio(_.a),this.audio.load(),this.audio.loop=!0,l.a.subscribe((function(t){var a=t.detail,n=a.type,o=a.data;"VKWebAppAllowMessagesFromGroupResult"===n&&fetch(e.state.api_url+"method=notifications.swift&swift=on&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t&&e.setState({switchKeys:!0})})).catch((function(t){e.showErrorAlert()})),"VKWebAppAllowMessagesFromGroupFailed"===n&&fetch(e.state.api_url+"method=notifications.swift&swift=off&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t&&e.setState({switchKeys:!1})})).catch((function(t){e.showErrorAlert()})),"VKWebAppViewHide"===n&&console.log("closing..."),"VKWebAppUpdateConfig"===n&&(e.setState({default_scheme:o.scheme}),ga(e.state.account)?(e.setState({scheme:o.scheme}),"space_gray"===o.scheme?da&&l.a.send("VKWebAppSetViewSettings",{status_bar_style:"light",action_bar_color:"#19191A",navigation_bar_color:"#19191A"}):da&&l.a.send("VKWebAppSetViewSettings",{status_bar_style:"dark",action_bar_color:"#FFFFFF",navigation_bar_color:"#FFFFFF"})):(0===Number(e.state.account.scheme)&&e.setState({scheme:o.scheme}),1===Number(e.state.account.scheme)&&(e.setState({scheme:"bright_light"}),da&&l.a.send("VKWebAppSetViewSettings",{status_bar_style:"dark",action_bar_color:"#FFFFFF",navigation_bar_color:"#FFFFFF"})),2===Number(e.state.account.scheme)&&(e.setState({scheme:"space_gray"}),da&&l.a.send("VKWebAppSetViewSettings",{status_bar_style:"light",action_bar_color:"#19191A",navigation_bar_color:"#19191A"}))))})),fetch(this.state.api_url+"method=account.get&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.result?(e.setState({account:t.response,popout:null,switchKeys:t.response.noti,first_start:t.response.is_first_start}),1===Number(e.state.account.scheme)&&(e.setState({scheme:"bright_light"}),da&&l.a.send("VKWebAppSetViewSettings",{status_bar_style:"dark",action_bar_color:"#FFFFFF",navigation_bar_color:"#FFFFFF"})),2===Number(e.state.account.scheme)&&(e.setState({scheme:"space_gray"}),da&&l.a.send("VKWebAppSetViewSettings",{status_bar_style:"light",action_bar_color:"#19191A",navigation_bar_color:"#19191A"})),e.state.account.is_first_start&&e.setState({activeStory:"start"})):e.setPopout(o.a.createElement(E.d,{actions:[{title:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c",autoclose:!0,action:function(){return e.componentDidMount()}}],onClose:function(){e.setPopout(null),e.componentDidMount()}},o.a.createElement("h2",null,"\u041e\u0448\u0438\u0431\u043a\u0430"),o.a.createElement("p",null,t.error.message)))})).catch((function(t){e.showErrorAlert(t)}))}},{key:"showAlert",value:function(e,t){this.setState({popout:o.a.createElement(E.d,{actions:[{title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",autoclose:!0,style:"cancel"}],onClose:this.setPopout(null)},o.a.createElement("h2",null,e),o.a.createElement("p",null,t))})}},{key:"deleteStats",value:function(){var e=this;this.setState({popout:o.a.createElement(E.L,null)}),fetch(this.state.api_url+"method=delete.stats&"+window.location.search.replace("?","")).then((function(e){return e.json()})).then((function(t){t.response?(e.setState({snackbar:o.a.createElement(E.Q,{layout:"vertical",onClose:function(){return e.setState({snackbar:null})},before:o.a.createElement(E.e,{size:24,style:fa},o.a.createElement(nt.a,{fill:"#fff",width:14,height:14}))},"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0430 \u043f\u0440\u043e\u0444\u0438\u043b\u044f \u0441\u0431\u0440\u043e\u0448\u0435\u043d\u0430"),popout:null}),e.LoadProfile(),window.history.back()):e.showAlert("\u041e\u0448\u0438\u0431\u043a\u0430",t.error_text)})).catch((function(t){e.showErrorAlert()}))}},{key:"showErrorAlert",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.setPopout(o.a.createElement(E.d,{actions:[{title:"\u041e\u0442\u043c\u0435\u043d\u0430",autoclose:!0,mode:"cancel"}],onClose:function(){return e.setPopout(null)}},o.a.createElement("h2",null,"\u041e\u0448\u0438\u0431\u043a\u0430"),t?o.a.createElement("p",null,t):o.a.createElement("p",null,"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430!")))}},{key:"render",value:function(){var e=this;return o.a.createElement(E.k,{isWebView:da,scheme:this.state.scheme},o.a.createElement(E.n,{activeStory:this.state.activeStory,tabbar:this.state.need_epic&&o.a.createElement(E.R,null,o.a.createElement(E.S,{onClick:function(t){e.setState({activeStory:t.currentTarget.dataset.story})},selected:"questions"===this.state.activeStory,"data-story":"questions",text:"\u0412\u043e\u043f\u0440\u043e\u0441\u044b"},o.a.createElement(ma.a,null)),o.a.createElement(E.S,{onClick:function(t){e.setState({activeStory:t.currentTarget.dataset.story})},selected:"top"===this.state.activeStory,"data-story":"top",text:"\u0422\u043e\u043f"},o.a.createElement(Mt.a,null)),o.a.createElement(E.S,{onClick:function(t){e.setState({activeStory:t.currentTarget.dataset.story})},selected:"profile"===this.state.activeStory,"data-story":"profile",text:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"},o.a.createElement(ha.a,null)))},o.a.createElement(Pe,{id:"questions",this:this,scheme:this.state.scheme,reloadProfile:this.LoadProfile,account:this.state.account,first_start:this.state.first_start,popout:this.state.popout}),o.a.createElement(je,{id:"top",this:this,scheme:this.state.scheme,account:this.state.account,popout:this.state.popout}),o.a.createElement(Te,{id:"notif",this:this,scheme:this.state.scheme,reloadProfile:this.LoadProfile,account:this.state.account,popout:this.state.popout}),o.a.createElement(ta,{id:"profile",this:this,reloadProfile:this.LoadProfile,scheme:this.state.scheme,default_scheme:this.state.default_scheme,account:this.state.account,popout:this.state.popout}),o.a.createElement(ca,{id:"start",this:this,reloadProfile:this.LoadProfile,scheme:this.state.scheme,account:this.state.account,popout:this.state.popout})))}}]),a}(o.a.Component),Ea=a(181),va=a.n(Ea);c.a({dsn:"https://0045161b140249dcbc378fe70d966605@o461731.ingest.sentry.io/5465956",integrations:[new u.a.BrowserTracing],tracesSampleRate:1}),l.a.send("VKWebAppInit",{});var ka=document.getElementById("root");Object(E.Y)()===E.v&&va()(ka),s.a.render(o.a.createElement(_a,null),ka)},49:function(e,t,a){}},[[213,1,2]]]);
//# sourceMappingURL=main.fcb2bb6f.chunk.js.map